var Ov=Object.defineProperty;var Nv=(e,t,n)=>t in e?Ov(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vr=(e,t,n)=>(Nv(e,typeof t!="symbol"?t+"":t,n),n),md=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var ue=(e,t,n)=>(md(e,t,"read from private field"),n?n.call(e):t.get(e)),qe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},vt=(e,t,n,r)=>(md(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var Rs=(e,t,n)=>(md(e,t,"access private method"),n);import{e as Ht,O as Vc,j as An,P as Zh,Q as Lv,R as $v,r as Vt,S as Iv,U as Gw,V as ef,W as Rv,k as Kw,X as Bv,Y as Pv,Z as jv,u as oe,a0 as Jw,h as ot,o as pe,a as Oe,b as kt,D as zv,$ as le,a1 as _a,a2 as Yw,a3 as Vv,a4 as tf,s as $e,B as Hi,i as nf,t as ur,x as Zt,F as Uo,p as Da,y as rf,c as Or,w as Uv,v as vg,a5 as qv,a6 as Wv,l as gd}from"./entry.1438ab79.js";import{u as Sg}from"./ColorModeToggle.38f37480.js";import{m as Ll}from"./get.3f53b2a0.js";import{_ as Hv}from"./_plugin-vue_export-helper.a1a6add7.js";var Gv=Object.defineProperty,Kv=(e,t,n)=>t in e?Gv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jv=(e,t,n)=>(Kv(e,typeof t!="symbol"?t+"":t,n),n),dt=(e=>(e.docTypeError="docTypeError",e.contextNotFound="contextNotFound",e.timerNotFound="timerNotFound",e.ctxCallOutOfScope="ctxCallOutOfScope",e.createNodeInParserFail="createNodeInParserFail",e.stackOverFlow="stackOverFlow",e.parserMatchError="parserMatchError",e.serializerMatchError="serializerMatchError",e.getAtomFromSchemaFail="getAtomFromSchemaFail",e.expectDomTypeError="expectDomTypeError",e.callCommandBeforeEditorView="callCommandBeforeEditorView",e.themeMustInstalled="themeMustInstalled",e.missingRootElement="missingRootElement",e.missingNodeInSchema="missingNodeInSchema",e.missingMarkInSchema="missingMarkInSchema",e.missingIcon="missingIcon",e.vueRendererCallOutOfScope="vueRendererCallOutOfScope",e.ctxNotBind="ctxNotBind",e.missingYjsDoc="missingYjsDoc",e.repeatCallsToMenuWrapperInit="repeatCallsToMenuWrapperInit",e.missingMenuWrapper="missingMenuWrapper",e))(dt||{});class Ct extends Error{constructor(t,n){super(n),Jv(this,"code"),this.name="MilkdownError",this.code=t}}const Yv=(e,t)=>typeof t=="function"?"[Function]":t,cs=e=>JSON.stringify(e,Yv),Xv=e=>new Ct(dt.docTypeError,`Doc type error, unsupported type: ${cs(e)}`),Qv=e=>new Ct(dt.contextNotFound,`Context "${e}" not found, do you forget to inject it?`),Zv=e=>new Ct(dt.timerNotFound,`Timer "${e}" not found, do you forget to record it?`),eS=()=>new Ct(dt.ctxCallOutOfScope,"Should not call a context out of the plugin."),tS=(...e)=>{const t=e.reduce((n,r)=>{if(!r)return n;const i=o=>Array.isArray(o)?o.map(s=>i(s)).join(", "):o.toJSON?cs(o.toJSON()):o.spec?cs(o.spec):o.toString();return`${n}, ${i(r)}`},"Create prosemirror node from remark failed in parser");return new Ct(dt.createNodeInParserFail,t)},Xw=()=>new Ct(dt.stackOverFlow,"Stack over flow, cannot pop on an empty stack."),nS=e=>new Ct(dt.parserMatchError,`Cannot match target parser for node: ${cs(e)}.`),rS=e=>new Ct(dt.serializerMatchError,`Cannot match target serializer for node: ${cs(e)}.`),iS=(e,t)=>new Ct(dt.getAtomFromSchemaFail,`Cannot get ${e}: ${t} from schema.`),Lt=e=>new Ct(dt.expectDomTypeError,`Expect to be a dom, but get: ${cs(e)}.`),oS=()=>new Ct(dt.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized"),Eg=()=>new Ct(dt.themeMustInstalled,"It seems that no theme found in editor, please make sure you have use theme in front of all plugins.\nIf you prefer to use an empty theme, you can use `themeFactory({})`."),yn=()=>new Ct(dt.missingRootElement,"Missing root element, milkdown cannot find root element of the editor."),sS=e=>new Ct(dt.missingIcon,`Missing icon in theme, milkdown cannot find icon "${e}" in theme.`),ia=()=>new Ct(dt.ctxNotBind,"Context not bind, please make sure the plugin has been initialized."),Qw=()=>new Ct(dt.missingYjsDoc,"Missing yjs doc, please make sure you have bind one."),aS=()=>new Ct(dt.vueRendererCallOutOfScope,"Should not call vue renderer before it has been created.");function gt(e){this.content=e}gt.prototype={constructor:gt,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return i==-1?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new gt(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new gt(n)},addToStart:function(e,t){return new gt([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new gt(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(o==-1?i.length:o,0,t,n),new gt(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=gt.from(e),e.size?new gt(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=gt.from(e),e.size?new gt(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=gt.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};gt.from=function(e){if(e instanceof gt)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new gt(t)};function Zw(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),o=t.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=Zw(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function e1(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=e.child(--i),a=t.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=e1(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class B{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>t&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let o="",s=!0;return this.nodesBetween(t,n,(a,l)=>{a.isText?(o+=a.text.slice(Math.max(t,l)-l,n-l),s=!r):a.isLeaf?(i?o+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(o+=a.type.spec.leafText(a)),s=!r):!s&&a.isBlock&&(o+=r,s=!0)},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new B(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>t&&((s<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,t-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new B(r,i)}cutByIndex(t,n){return t==n?B.empty:t==0&&n==this.content.length?this:new B(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new B(i,o)}addToStart(t){return new B([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new B(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return Zw(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return e1(this,t,n,r)}findIndex(t,n=-1){if(t==0)return $l(0,t);if(t==this.size)return $l(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=t)return s==t||n>0?$l(r+1,s):$l(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return B.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new B(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return B.empty;let n,r=0;for(let i=0;i<t.length;i++){let o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(n||(n=t.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new B(n||t,r)}static from(t){if(!t)return B.empty;if(t instanceof B)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new B([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}B.empty=new B([],0);const bd={index:0,offset:0};function $l(e,t){return bd.index=e,bd.offset=t,bd}function Uc(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Uc(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Uc(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}class xe{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))n||(n=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Uc(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return xe.none;if(t instanceof xe)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}xe.none=[];class qc extends Error{}class V{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=n1(this.content,t+this.openStart,n);return r&&new V(r,this.openStart,this.openEnd)}removeBetween(t,n){return new V(t1(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return V.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new V(B.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new V(t,r,i)}}V.empty=new V(B.empty,0,0);function t1(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(i==t||o.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(t1(o.content,t-i-1,n-i-1)))}function n1(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i);if(o==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=n1(s.content,t-o-1,n);return a&&e.replaceChild(i,s.copy(a))}function lS(e,t,n){if(n.openStart>e.depth)throw new qc("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new qc("Inconsistent open depths");return r1(e,t,n,0)}function r1(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let s=r1(e,t,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let s=e.parent,a=s.content;return Ki(s,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:s,end:a}=cS(n,e);return Ki(o,o1(e,s,a,t,r))}else return Ki(o,Wc(e,t,r))}function i1(e,t){if(!t.type.compatibleContent(e.type))throw new qc("Cannot join "+t.type.name+" onto "+e.type.name)}function of(e,t,n){let r=e.node(n);return i1(r,t.node(n)),r}function Gi(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function oa(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(Gi(e.nodeAfter,r),o++));for(let a=o;a<s;a++)Gi(i.child(a),r);t&&t.depth==n&&t.textOffset&&Gi(t.nodeBefore,r)}function Ki(e,t){return e.type.checkContent(t),e.copy(t)}function o1(e,t,n,r,i){let o=e.depth>i&&of(e,t,i+1),s=r.depth>i&&of(n,r,i+1),a=[];return oa(null,e,i,a),o&&s&&t.index(i)==n.index(i)?(i1(o,s),Gi(Ki(o,o1(e,t,n,r,i+1)),a)):(o&&Gi(Ki(o,Wc(e,t,i+1)),a),oa(t,n,i,a),s&&Gi(Ki(s,Wc(n,r,i+1)),a)),oa(r,null,i,a),new B(a)}function Wc(e,t,n){let r=[];if(oa(null,e,n,r),e.depth>n){let i=of(e,t,n+1);Gi(Ki(i,Wc(e,t,n+1)),r)}return oa(t,null,n,r),new B(r)}function cS(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)i=t.node(o).copy(B.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class xa{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<t;o++)i+=r.child(o).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return xe.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new s1(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=t;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new xa(n,r,o)}static resolveCached(t,n){for(let i=0;i<yd.length;i++){let o=yd[i];if(o.pos==n&&o.doc==t)return o}let r=yd[wd]=xa.resolve(t,n);return wd=(wd+1)%uS,r}}let yd=[],wd=0,uS=12;class s1{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const dS=Object.create(null);class on{constructor(t,n,r,i=xe.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||B.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Uc(this.attrs,n||t.defaultAttrs||dS)&&xe.sameSet(this.marks,r||xe.none)}copy(t=null){return t==this.content?this:new on(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new on(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return V.empty;let i=this.resolve(t),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new V(c,i.depth-s,o.depth-s)}replace(t,n,r){return lS(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return xa.resolveCached(this,t)}resolveNoCache(t){return xa.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),a1(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=B.empty,i=0,o=r.childCount){let s=this.contentMatchAt(t).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(t).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=xe.none;for(let n=0;n<this.marks.length;n++)t=this.marks[n].addToSet(t);if(!xe.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=B.fromJSON(t,n.content);return t.nodeType(n.type).create(n.attrs,i,r)}}on.prototype.text=void 0;class Hc extends on{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):a1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Hc(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Hc(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function a1(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class ro{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new hS(t,n);if(r.next==null)return ro.empty;let i=l1(r);r.next&&r.err("Unexpected trailing text");let o=wS(yS(i));return kS(o,r),o}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(t.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(t,r);if(l&&(!n||l.validEnd))return B.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=o(d,a.concat(u));if(h)return h}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(t)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+t.indexOf(r.next[s].next);return o}).join(`
`)}}ro.empty=new ro(!0);class hS{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function l1(e){let t=[];do t.push(fS(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function fS(e){let t=[];do t.push(pS(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function pS(e){let t=bS(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=mS(e,t);else break;return t}function Ag(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function mS(e,t){let n=Ag(e),r=n;return e.eat(",")&&(e.next!="}"?r=Ag(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function gS(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(t)>-1&&i.push(s)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function bS(e){if(e.eat("(")){let t=l1(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=gS(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function yS(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(s,a,l){let c={term:l,to:a};return t[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function c1(e,t){return t-e}function Fg(e,t){let n=[];return r(t),n.sort(c1);function r(i){let o=e[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function wS(e){let t=Object.create(null);return n(Fg(e,0));function n(r){let i=[];r.forEach(s=>{e[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);Fg(e,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=t[r.join(",")]=new ro(r.indexOf(e.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(c1);o.next.push({type:i[s][0],next:t[a.join(",")]||n(a)})}return o}}function kS(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function u1(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function d1(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let o=e[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function h1(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new _S(e[n]);return t}class Gc{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=h1(r.attrs),this.defaultAttrs=u1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ro.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:d1(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new on(this,this.computeAttrs(t),B.from(n),xe.setFrom(r))}createChecked(t=null,n,r){return n=B.from(n),this.checkContent(n),new on(this,this.computeAttrs(t),n,xe.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=B.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(B.empty,!0);return o?new on(this,t,n.append(o),xe.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:xe.none:t}static compile(t,n){let r=Object.create(null);t.forEach((o,s)=>r[o]=new Gc(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class _S{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class Nu{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=h1(i.attrs),this.excluded=null;let o=u1(this.attrs);this.instance=o?new xe(this,o):null}create(t=null){return!t&&this.instance?this.instance:new xe(this,d1(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((o,s)=>r[o]=new Nu(o,i++,n,s)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}excludes(t){return this.excluded.indexOf(t)>-1}}class DS{constructor(t){this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=gt.from(t.nodes),n.marks=gt.from(t.marks||{}),this.nodes=Gc.compile(this.spec.nodes,this),this.marks=Nu.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=r[s]||(r[s]=ro.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet=a=="_"?null:a?Tg(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Tg(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Gc){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Hc(r,r.defaultAttrs,t,xe.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeFromJSON(t){return on.fromJSON(this,t)}markFromJSON(t){return xe.fromJSON(this,t)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function Tg(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let a in e.marks){let l=e.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class us{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=t.nodes[r.node];return i.contentMatch.matchType(i)})}parse(t,n={}){let r=new Og(this,n,!1);return r.addAll(t,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new Og(this,n,!0);return r.addAll(t,n.from,n.to),V.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(vS(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(t);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(t,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(t)!=0||s.context&&!r.matchesContext(s.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in t.marks){let o=t.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Ng(s)),s.mark=i})}for(let i in t.nodes){let o=t.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Ng(s)),s.node=i})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new us(t,us.schemaRules(t)))}}const f1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},xS={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},p1={ol:!0,ul:!0},Kc=1,Jc=2,sa=4;function Mg(e,t,n){return t!=null?(t?Kc:0)|(t==="full"?Jc:0):e&&e.whitespace=="pre"?Kc|Jc:n&~sa}class Il{constructor(t,n,r,i,o,s,a){this.type=t,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=xe.none,this.stashMarks=[],this.match=s||(a&sa?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(B.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Kc)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=B.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(B.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(t){for(let n=this.stashMarks.length-1;n>=0;n--)if(t.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(t){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):ES(i.type,t))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!f1.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Og{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=Mg(null,n.preserveWhitespace,0)|(r?sa:0);i?o=new Il(i.type,i.attrs,xe.none,xe.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Il(null,null,xe.none,xe.none,!0,null,s):o=new Il(t.schema.topNodeType,null,xe.none,xe.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(t.nodeType==3)this.addTextNode(t);else if(t.nodeType==1){let n=t.getAttribute("style"),r=n?this.readStyles(SS(n)):null,i=this.top;if(r!=null)for(let o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(t),r!=null)for(let o=0;o<r.length;o++)this.removePendingMark(r[o],i)}}addTextNode(t){let n=t.nodeValue,r=this.top;if(r.options&Jc||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Kc)r.options&Jc?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=t.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(t)}else this.findInside(t)}addElement(t,n){let r=t.nodeName.toLowerCase(),i;p1.hasOwnProperty(r)&&this.parser.normalizeLists&&CS(t);let o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,n));if(o?o.ignore:xS.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);let s,a=this.top,l=this.needsBlock;if(f1.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}this.addAll(t),s&&this.sync(a),this.needsBlock=l}else this.addElementByRule(t,o,o.consuming===!1?i:void 0)}leafFallback(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))}ignoreFallback(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(t){let n=xe.none;e:for(let r=0;r<t.length;r+=2)for(let i=void 0;;){let o=this.parser.matchStyle(t[r],t[r+1],this,i);if(!o)continue e;if(o.ignore)return null;if(n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)i=o;else break}return n}addElementByRule(t,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(t):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(t,n,r){let i=n||0;for(let o=n?t.childNodes[n]:t.firstChild,s=r==null?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o);this.findAtPoint(t,i)}findPlace(t){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(t);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(t)){this.closeExtra();let n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));let r=n.activeMarks;for(let i=0;i<t.marks.length;i++)(!n.type||n.type.allowsMarkType(t.marks[i].type))&&(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}enter(t,n,r){let i=this.findPlace(t.create(n));return i&&this.enterInner(t,n,!0,r),i}enterInner(t,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t);let s=Mg(t,i,o.options);o.options&sa&&o.content.length==0&&(s|=sa),this.nodes.push(new Il(t,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let n=this.open;n>=0;n--)if(this.nodes[n]==t)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(t){let n=AS(t,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(t)>-1)i.pendingMarks=t.removeFromSet(i.pendingMarks);else{i.activeMarks=t.removeFromSet(i.activeMarks);let s=i.popFromStashMark(t);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}}function CS(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&p1.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function vS(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function SS(e){let t=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=t.exec(e);)r.push(n[1],n[2].trim());return r}function Ng(e){let t={};for(let n in e)t[n]=e[n];return t}function ES(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}function AS(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}class dr{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=kd(n).createDocumentFragment());let i=r,o=[];return t.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=dr.renderSpec(kd(n),this.nodes[t.type.name](t));if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let o=this.serializeMark(t.marks[i],t.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&dr.renderSpec(kd(r),i(t,n))}static renderSpec(t,n,r=null){if(typeof n=="string")return{dom:t.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,a=r?t.createElementNS(r,i):t.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:f}=dr.renderSpec(t,d,r);if(a.appendChild(h),f){if(s)throw new RangeError("Multiple content holes");s=f}}}return{dom:a,contentDOM:s}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new dr(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=Lg(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return Lg(t.marks)}}function Lg(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function kd(e){return e.document||window.document}let FS=e=>crypto.getRandomValues(new Uint8Array(e)),TS=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return(o=t)=>{let s="";for(;;){let a=n(i),l=i;for(;l--;)if(s+=e[a[l]&r]||"",s.length===o)return s}}},m1=(e,t=21)=>TS(e,t,FS);var MS=Object.defineProperty,OS=(e,t,n)=>t in e?MS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_d=(e,t,n)=>(OS(e,typeof t!="symbol"?t+"":t,n),n);const g1=Symbol("rendererKey"),NS=e=>{const t=Vc(g1,()=>{throw aS()}),{dom:n,loading:r,editor:i}=Vc(Lp,{}),o=Vt(!1);Kw(()=>{if(!n.value)return;const s=e(n.value,t);!s||o.value||(r.value=!0,o.value=!0,s.create().then(a=>{i.value=a}).finally(()=>{r.value=!1,o.value=!1}).catch(a=>console.error(a)))}),Gw(()=>{var s;(s=i.value)==null||s.destroy()})},b1=Ht({name:"MilkdownDomRoot",setup:(e,{slots:t})=>{NS(e.editor);const n=Vc(Lp,{});return e.editorRef&&(e.editorRef.get=()=>n.editor.value,e.editorRef.dom=()=>n.dom.value),()=>{var r;return An("div",{ref:n.dom},[(r=t.default)==null?void 0:r.call(t)])}}});b1.props=["editor","editorRef"];const y1=Symbol("nodeMetadata"),LS=()=>Vc(y1),w1=Ht({name:"MilkdownNodeContainer",setup:({node:e,view:t,getPos:n,decorations:r,ctx:i,as:o},s)=>(Zh(y1,{ctx:i,node:e,view:t,getPos:n,decorations:r}),()=>{var a,l;return Lv(o,{"data-view-container":!0},(l=(a=s.slots).default)==null?void 0:l.call(a))})});w1.props=["ctx","editor","node","view","getPos","decorations","as"];const k1=Ht({name:"MilkdownContent",setup:({isInline:e})=>()=>e?An("span",{"data-view-content":!0},null):An("div",{"data-view-content":!0},null)});k1.props=["isInline"];const $S=m1("abcedfghicklmn",10),IS=(e,t,n)=>(r,i={})=>o=>(s,a,l,c)=>new RS(o,r,e,t,n,i,s,a,l,c);var $g,Ig;class RS{constructor(t,n,r,i,o,s,a,l,c,u){_d(this,"getPortal",()=>{const h=this.component,f=this.options.as?this.options.as:this.isInlineOrMark?"span":"div";return ef(Ht({name:"MilkdownPortal",setup:()=>()=>An(jv,{key:this.key,to:this.teleportDOM},{default:()=>[An(w1,{as:f,ctx:this.ctx,node:this.node,view:this.view,getPos:this.getPos,decorations:this.decorations},{default:()=>[An(h,null,{default:()=>[An(k1,{isInline:this.isInlineOrMark},null)]})]})]})}))}),_d(this,"selectNode",($g=this.options)==null?void 0:$g.selectNode),_d(this,"deselectNode",(Ig=this.options)==null?void 0:Ig.deselectNode),this.ctx=t,this.component=n,this.rootInstance=r,this.addPortal=i,this.removePortalByKey=o,this.options=s,this.view=l,this.getPos=c,this.key=$S(),this.node=Vt(a),this.decorations=Vt(u);const d=s.as?s.as:this.isInlineOrMark?"span":"div";this.teleportDOM=document.createElement(d),this.renderPortal()}get isInlineOrMark(){return this.node.value instanceof xe||this.node.value.isInline}get dom(){return this.teleportDOM.firstElementChild||this.teleportDOM}get contentDOM(){if(!(this.node instanceof on&&this.node.isLeaf))return this.teleportDOM.querySelector("[data-view-content]")||this.dom}renderPortal(){if(!this.teleportDOM)return;const t=this.getPortal();this.addPortal(t,this.key);const n=this.rootInstance.value;n&&n.update()}destroy(){var t,n;(n=(t=this.options).destroy)==null||n.call(t),this.teleportDOM.remove(),this.removePortalByKey(this.key)}ignoreMutation(t){return this.options.ignoreMutation?this.options.ignoreMutation(t):!this.dom||!this.contentDOM||this.node instanceof on&&(this.node.isLeaf||this.node.isAtom)?!0:!(t.type==="selection"||this.contentDOM===this.dom||this.contentDOM.contains(t.target))}update(t,n,r){return(()=>{var i,o;if(this.options.update){const s=(o=(i=this.options).update)==null?void 0:o.call(i,t,n,r);if(s!=null)return s}return this.node.value.type!==t.type?!1:(t===this.node.value&&this.decorations.value===n||(this.node.value=t,this.decorations.value=n),!0)})()}}function BS(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Bv(e)}const Lp=Symbol("editorInfoCtxKey"),PS=`
@milkdown/vue:
Passing ref to VueEditor will soon be deprecated, please use:

const { editor, getInstance, getDom, loading } = useEditor(/* creator */);

effect(() => {
    if (!loading) {
        const editor = getInstance();
        const rootDOM = getDom();
    }
})

<VueEditor editor={editor} />
`,jS=`
@milkdown/vue:
Passing editor directly to VueEditor will soon be deprecated, please use:

const { editor } = useEditor(/* creator */);

<VueEditor editor={editor} />
`,_1=Ht({name:"MilkdownVueRoot",setup:e=>{const t=$v([]),n=Pv(),r=Vt(null);Iv(()=>{r.value=n.ctx._}),Gw(()=>{r.value=null});const i=ef((h,f)=>{t.push([f,h])}),o=ef(h=>{const f=t.findIndex(p=>p[0]===h);t.splice(f,1)}),s=IS(r,i,o);Zh(g1,s);const a=Object.hasOwnProperty.call(e.editor,"getInstance"),{getEditorCallback:l,dom:c,editor:u,loading:d}=a?e.editor.editor:e.editor;return Rv(()=>{a&&console.warn(jS),e.editorRef&&console.warn(PS)}),Zh(Lp,{dom:c,editor:u,loading:d}),()=>{const h=t.map(([f,p])=>An(p,{key:f},null));return An(b1,{editorRef:e.editorRef,editor:l.value},BS(h)?h:{default:()=>[h]})}}});_1.props=["editor","editorRef"];const zS=e=>{const t=Vt(null),n=Vt(),r=Vt(!0),i=Vt((...o)=>e(...o));return{loading:r,getInstance:()=>n.value,getDom:()=>t.value,editor:{getEditorCallback:i,dom:t,editor:n,loading:r}}};var VS=Object.defineProperty,US=(e,t,n)=>t in e?VS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ue=(e,t,n)=>(US(e,typeof t!="symbol"?t+"":t,n),n),D1=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xn=(e,t,n)=>(D1(e,t,"read from private field"),n?n.call(e):t.get(e)),ki=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_i=(e,t,n,r)=>(D1(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const Lu=()=>{const e=new Map;return{sliceMap:e,getSlice:t=>{const n=typeof t=="string"?[...e.values()].find(r=>r.name===t):e.get(t.id);if(!n){const r=typeof t=="string"?t:t.sliceName;throw Qv(r)}return n},removeSlice:t=>{const n=typeof t=="string"?[...e.values()].find(r=>r.name===t):e.get(t.id);!n||e.delete(n.id)}}},qS=e=>Array.isArray(e)?[...e]:typeof e=="object"?{...e}:e,Q=(e,t)=>{const n=Symbol(`Context-${t}`),r=(i,o=qS(e))=>{let s=o;const a={name:t,id:n,set:l=>{s=l},get:()=>s,update:l=>{s=l(s)}};return i.set(n,a),a};return r.sliceName=t,r.id=n,r._typeInfo=()=>{throw eS()},r};var tc,nc;class WS{constructor(t,n){ki(this,tc,void 0),ki(this,nc,void 0),Ue(this,"use",r=>xn(this,tc).getSlice(r)),Ue(this,"get",r=>this.use(r).get()),Ue(this,"set",(r,i)=>this.use(r).set(i)),Ue(this,"update",(r,i)=>this.use(r).update(i)),Ue(this,"timing",r=>xn(this,nc).get(r)),Ue(this,"done",r=>this.timing(r).done()),Ue(this,"wait",r=>this.timing(r)()),Ue(this,"waitTimers",async r=>{await Promise.all(this.get(r).map(i=>this.wait(i)))}),_i(this,tc,t),_i(this,nc,n)}}tc=new WeakMap,nc=new WeakMap;var Co,vo;class HS{constructor(t,n){ki(this,Co,void 0),ki(this,vo,void 0),Ue(this,"inject",(r,i)=>(r(xn(this,Co).sliceMap,i),this)),Ue(this,"remove",r=>(xn(this,Co).removeSlice(r),this)),Ue(this,"record",r=>(r(xn(this,vo).store),this)),Ue(this,"clearTimer",r=>(xn(this,vo).remove(r),this)),Ue(this,"use",r=>xn(this,Co).getSlice(r)),Ue(this,"get",r=>this.use(r).get()),Ue(this,"set",(r,i)=>this.use(r).set(i)),Ue(this,"update",(r,i)=>this.use(r).update(i)),Ue(this,"timing",r=>xn(this,vo).get(r)),Ue(this,"wait",r=>this.timing(r)()),Ue(this,"done",r=>this.timing(r).done()),Ue(this,"waitTimers",async r=>{await Promise.all(this.get(r).map(i=>this.wait(i)))}),_i(this,Co,t),_i(this,vo,n)}}Co=new WeakMap,vo=new WeakMap;var rc,ic;class GS{constructor(t,n){ki(this,rc,void 0),ki(this,ic,void 0),Ue(this,"clearTimer",r=>(xn(this,ic).remove(r),this)),Ue(this,"remove",r=>(xn(this,rc).removeSlice(r),this)),_i(this,rc,t),_i(this,ic,n)}}rc=new WeakMap,ic=new WeakMap;var oc,sc;class KS{constructor(t,n){ki(this,oc,void 0),ki(this,sc,void 0),Ue(this,"inject",(r,i)=>(r(xn(this,oc).sliceMap,i),this)),Ue(this,"record",r=>(r(xn(this,sc).store),this)),_i(this,oc,t),_i(this,sc,n)}}oc=new WeakMap,sc=new WeakMap;const x1=()=>{const e=new Map;return{store:e,get:t=>{const n=e.get(t.id);if(!n)throw Zv(t.timerName);return n},remove:t=>{e.delete(t.id)}}},On=(e,t=3e3)=>{const n=Symbol("Timer"),r=i=>{let o=null,s;const a=Symbol(e),l=()=>o!=null?o:o=new Promise((c,u)=>{s=d=>{d instanceof CustomEvent&&d.detail.id===a&&(removeEventListener(e,s),d.stopImmediatePropagation(),c())},setTimeout(()=>{u(new Error(`Timing ${e} timeout.`)),removeEventListener(e,s)},t),addEventListener(e,s)});return l.done=()=>{const c=new CustomEvent(e,{detail:{id:a}});dispatchEvent(c)},i.set(n,l),l};return r.id=n,r.timerName=e,r};function JS(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function YS(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var XS=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(YS(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=JS(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),St="-ms-",Yc="-moz-",Se="-webkit-",C1="comm",$p="rule",Ip="decl",QS="@import",v1="@keyframes",ZS=Math.abs,$u=String.fromCharCode,e2=Object.assign;function t2(e,t){return yt(e,0)^45?(((t<<2^yt(e,0))<<2^yt(e,1))<<2^yt(e,2))<<2^yt(e,3):0}function S1(e){return e.trim()}function n2(e,t){return(e=t.exec(e))?e[0]:e}function Ee(e,t,n){return e.replace(t,n)}function sf(e,t){return e.indexOf(t)}function yt(e,t){return e.charCodeAt(t)|0}function Ca(e,t,n){return e.slice(t,n)}function or(e){return e.length}function Rp(e){return e.length}function Rl(e,t){return t.push(e),e}function r2(e,t){return e.map(t).join("")}var Iu=1,ds=1,E1=0,an=0,Ze=0,Ss="";function Ru(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Iu,column:ds,length:s,return:""}}function Bs(e,t){return e2(Ru("",null,null,"",null,null,0),e,{length:-e.length},t)}function i2(){return Ze}function o2(){return Ze=an>0?yt(Ss,--an):0,ds--,Ze===10&&(ds=1,Iu--),Ze}function fn(){return Ze=an<E1?yt(Ss,an++):0,ds++,Ze===10&&(ds=1,Iu++),Ze}function pr(){return yt(Ss,an)}function ac(){return an}function sl(e,t){return Ca(Ss,e,t)}function va(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A1(e){return Iu=ds=1,E1=or(Ss=e),an=0,[]}function F1(e){return Ss="",e}function lc(e){return S1(sl(an-1,af(e===91?e+2:e===40?e+1:e)))}function s2(e){for(;(Ze=pr())&&Ze<33;)fn();return va(e)>2||va(Ze)>3?"":" "}function a2(e,t){for(;--t&&fn()&&!(Ze<48||Ze>102||Ze>57&&Ze<65||Ze>70&&Ze<97););return sl(e,ac()+(t<6&&pr()==32&&fn()==32))}function af(e){for(;fn();)switch(Ze){case e:return an;case 34:case 39:e!==34&&e!==39&&af(Ze);break;case 40:e===41&&af(e);break;case 92:fn();break}return an}function l2(e,t){for(;fn()&&e+Ze!==47+10;)if(e+Ze===42+42&&pr()===47)break;return"/*"+sl(t,an-1)+"*"+$u(e===47?e:fn())}function c2(e){for(;!va(pr());)fn();return sl(e,an)}function u2(e){return F1(cc("",null,null,null,[""],e=A1(e),0,[0],e))}function cc(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,h=0,f=0,p=0,m=1,b=1,y=1,k=0,_="",S=i,v=o,g=r,w=_;b;)switch(p=k,k=fn()){case 40:if(p!=108&&yt(w,d-1)==58){sf(w+=Ee(lc(k),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:w+=lc(k);break;case 9:case 10:case 13:case 32:w+=s2(p);break;case 92:w+=a2(ac()-1,7);continue;case 47:switch(pr()){case 42:case 47:Rl(d2(l2(fn(),ac()),t,n),l);break;default:w+="/"}break;case 123*m:a[c++]=or(w)*y;case 125*m:case 59:case 0:switch(k){case 0:case 125:b=0;case 59+u:f>0&&or(w)-d&&Rl(f>32?Bg(w+";",r,n,d-1):Bg(Ee(w," ","")+";",r,n,d-2),l);break;case 59:w+=";";default:if(Rl(g=Rg(w,t,n,c,u,i,a,_,S=[],v=[],d),o),k===123)if(u===0)cc(w,t,g,g,S,o,d,a,v);else switch(h===99&&yt(w,3)===110?100:h){case 100:case 109:case 115:cc(e,g,g,r&&Rl(Rg(e,g,g,0,0,i,a,_,i,S=[],d),v),i,v,d,a,r?S:v);break;default:cc(w,g,g,g,[""],v,0,a,v)}}c=u=f=0,m=y=1,_=w="",d=s;break;case 58:d=1+or(w),f=p;default:if(m<1){if(k==123)--m;else if(k==125&&m++==0&&o2()==125)continue}switch(w+=$u(k),k*m){case 38:y=u>0?1:(w+="\f",-1);break;case 44:a[c++]=(or(w)-1)*y,y=1;break;case 64:pr()===45&&(w+=lc(fn())),h=pr(),u=d=or(_=w+=c2(ac())),k++;break;case 45:p===45&&or(w)==2&&(m=0)}}return o}function Rg(e,t,n,r,i,o,s,a,l,c,u){for(var d=i-1,h=i===0?o:[""],f=Rp(h),p=0,m=0,b=0;p<r;++p)for(var y=0,k=Ca(e,d+1,d=ZS(m=s[p])),_=e;y<f;++y)(_=S1(m>0?h[y]+" "+k:Ee(k,/&\f/g,h[y])))&&(l[b++]=_);return Ru(e,t,n,i===0?$p:a,l,c,u)}function d2(e,t,n){return Ru(e,t,n,C1,$u(i2()),Ca(e,2,-2),0)}function Bg(e,t,n,r){return Ru(e,t,n,Ip,Ca(e,0,r),Ca(e,r+1,-1),r)}function qo(e,t){for(var n="",r=Rp(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function h2(e,t,n,r){switch(e.type){case QS:case Ip:return e.return=e.return||e.value;case C1:return"";case v1:return e.return=e.value+"{"+qo(e.children,r)+"}";case $p:e.value=e.props.join(",")}return or(n=qo(e.children,r))?e.return=e.value+"{"+n+"}":""}function f2(e){var t=Rp(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}function p2(e){return function(t){t.root||(t=t.return)&&e(t)}}var m2=function(t,n,r){for(var i=0,o=0;i=o,o=pr(),i===38&&o===12&&(n[r]=1),!va(o);)fn();return sl(t,an)},g2=function(t,n){var r=-1,i=44;do switch(va(i)){case 0:i===38&&pr()===12&&(n[r]=1),t[r]+=m2(an-1,n,r);break;case 2:t[r]+=lc(i);break;case 4:if(i===44){t[++r]=pr()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=$u(i)}while(i=fn());return t},b2=function(t,n){return F1(g2(A1(t),n))},Pg=new WeakMap,y2=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Pg.get(r))&&!i){Pg.set(t,!0);for(var o=[],s=b2(n,o),a=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<a.length;u++,c++)t.props[c]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},w2=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function T1(e,t){switch(t2(e,t)){case 5103:return Se+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Se+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Se+e+Yc+e+St+e+e;case 6828:case 4268:return Se+e+St+e+e;case 6165:return Se+e+St+"flex-"+e+e;case 5187:return Se+e+Ee(e,/(\w+).+(:[^]+)/,Se+"box-$1$2"+St+"flex-$1$2")+e;case 5443:return Se+e+St+"flex-item-"+Ee(e,/flex-|-self/,"")+e;case 4675:return Se+e+St+"flex-line-pack"+Ee(e,/align-content|flex-|-self/,"")+e;case 5548:return Se+e+St+Ee(e,"shrink","negative")+e;case 5292:return Se+e+St+Ee(e,"basis","preferred-size")+e;case 6060:return Se+"box-"+Ee(e,"-grow","")+Se+e+St+Ee(e,"grow","positive")+e;case 4554:return Se+Ee(e,/([^-])(transform)/g,"$1"+Se+"$2")+e;case 6187:return Ee(Ee(Ee(e,/(zoom-|grab)/,Se+"$1"),/(image-set)/,Se+"$1"),e,"")+e;case 5495:case 3959:return Ee(e,/(image-set\([^]*)/,Se+"$1$`$1");case 4968:return Ee(Ee(e,/(.+:)(flex-)?(.*)/,Se+"box-pack:$3"+St+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Se+e+e;case 4095:case 3583:case 4068:case 2532:return Ee(e,/(.+)-inline(.+)/,Se+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(or(e)-1-t>6)switch(yt(e,t+1)){case 109:if(yt(e,t+4)!==45)break;case 102:return Ee(e,/(.+:)(.+)-([^]+)/,"$1"+Se+"$2-$3$1"+Yc+(yt(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~sf(e,"stretch")?T1(Ee(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(yt(e,t+1)!==115)break;case 6444:switch(yt(e,or(e)-3-(~sf(e,"!important")&&10))){case 107:return Ee(e,":",":"+Se)+e;case 101:return Ee(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Se+(yt(e,14)===45?"inline-":"")+"box$3$1"+Se+"$2$3$1"+St+"$2box$3")+e}break;case 5936:switch(yt(e,t+11)){case 114:return Se+e+St+Ee(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Se+e+St+Ee(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Se+e+St+Ee(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Se+e+St+e+e}return e}var k2=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case Ip:t.return=T1(t.value,t.length);break;case v1:return qo([Bs(t,{value:Ee(t.value,"@","@"+Se)})],i);case $p:if(t.length)return r2(t.props,function(o){switch(n2(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return qo([Bs(t,{props:[Ee(o,/:(read-\w+)/,":"+Yc+"$1")]})],i);case"::placeholder":return qo([Bs(t,{props:[Ee(o,/:(plac\w+)/,":"+Se+"input-$1")]}),Bs(t,{props:[Ee(o,/:(plac\w+)/,":"+Yc+"$1")]}),Bs(t,{props:[Ee(o,/:(plac\w+)/,St+"input-$1")]})],i)}return""})}},_2=[k2],D2=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var b=m.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||_2,o={},s,a=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var b=m.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)o[b[y]]=!0;a.push(m)});var l,c=[y2,w2];{var u,d=[h2,p2(function(m){u.insert(m)})],h=f2(c.concat(i,d)),f=function(b){return qo(u2(b),h)};l=function(b,y,k,_){u=k,f(b?b+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new XS({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return p.sheet.hydrate(a),p},M1=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},mt=(e,t,n)=>(M1(e,t,"read from private field"),n?n.call(e):t.get(e)),Bl=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},x2=(e,t,n,r)=>(M1(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function C2(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var v2={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function S2(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var E2=/[A-Z]|^ms/g,A2=/_EMO_([^_]+?)_([^]*?)_EMO_/g,O1=function(e){return e.charCodeAt(1)===45},jg=function(e){return e!=null&&typeof e!="boolean"},Dd=S2(function(e){return O1(e)?e:e.replace(E2,"-$&").toLowerCase()}),zg=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(A2,function(n,r,i){return sr={name:r,styles:i,next:sr},r})}return v2[e]!==1&&!O1(e)&&typeof t=="number"&&t!==0?t+"px":t};function Sa(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return sr={name:n.name,styles:n.styles,next:sr},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)sr={name:r.name,styles:r.styles,next:sr},r=r.next;var i=n.styles+";";return i}return F2(e,t,n)}case"function":{if(e!==void 0){var o=sr,s=n(e);return sr=o,Sa(e,t,s)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function F2(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Sa(e,t,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object")t!=null&&t[s]!==void 0?r+=o+"{"+t[s]+"}":jg(s)&&(r+=Dd(o)+":"+zg(o,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var a=0;a<s.length;a++)jg(s[a])&&(r+=Dd(o)+":"+zg(o,s[a])+";");else{var l=Sa(e,t,s);switch(o){case"animation":case"animationName":{r+=Dd(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}return r}var Vg=/label:\s*([^\s;\n{]+)\s*(;|$)/g,sr,xd=function(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";sr=void 0;var o=e[0];o==null||o.raw===void 0?(r=!1,i+=Sa(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=Sa(n,t,e[s]),r&&(i+=o[s]);Vg.lastIndex=0;for(var a="",l;(l=Vg.exec(i))!==null;)a+="-"+l[1];var c=C2(i)+a;return{name:c,styles:i,next:sr}},T2=!0;function N1(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var M2=function(e,t,n){var r=e.key+"-"+t.name;(n===!1||T2===!1)&&e.registered[r]===void 0&&(e.registered[r]=t.styles)},O2=function(e,t,n){M2(e,t,n);var r=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var i=t;do e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function Ug(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function qg(e,t,n){var r=[],i=N1(e,r,n);return r.length<2?n:i+t(r)}var N2=function(e){var t=D2(e);t.sheet.speedy=function(s){this.isSpeedy=s},t.compat=!0;var n=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];var c=xd(a,t.registered,void 0);return O2(t,c,!1),t.key+"-"+c.name},r=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];var c=xd(a,t.registered),u="animation-"+c.name;return Ug(t,{name:c.name,styles:"@keyframes "+u+"{"+c.styles+"}"}),u},i=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];var c=xd(a,t.registered);Ug(t,c)},o=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return qg(t.registered,n,L2(a))};return{css:n,cx:o,injectGlobal:i,keyframes:r,hydrate:function(s){s.forEach(function(a){t.inserted[a]=!0})},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:N1.bind(null,t.registered),merge:qg.bind(null,t.registered,n)}},L2=function e(t){for(var n="",r=0;r<t.length;r++){var i=t[r];if(i!=null){var o=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))o=e(i);else{o="";for(var s in i)i[s]&&s&&(o&&(o+=" "),o+=s)}break}default:o=i}o&&(n&&(n+=" "),n+=o)}}return n};const $2=N2,I2=e=>$2(e),Cd=Q({key:"milkdown"},"EmotionConfig"),ui=Q({},"Emotion"),kn=e=>Q(()=>null,e);var Yr,Xr,So,uc;class L1{constructor(){Bl(this,Yr,Lu()),Bl(this,Xr,new Map),Bl(this,So,new Set),Bl(this,uc,()=>{})}inject(t){t(mt(this,Yr).sliceMap)}has(t){const n=typeof t=="string"?t:t.sliceName;return mt(this,Xr).has(n)?!0:mt(this,Yr).getSlice(t).get()(null)!=null}set(t,n){const r=typeof t=="string"?t:t.sliceName;mt(this,Xr).set(r,n)}get(t,n){const r=typeof t=="string"?t:t.sliceName,i=mt(this,Xr).get(r);return i&&(mt(this,Yr).getSlice(t).set(i),mt(this,Xr).delete(t)),mt(this,Yr).getSlice(t).get()(n)}getSlice(t){const n=typeof t=="string"?t:t.sliceName,r=mt(this,Xr).get(n);return r&&(mt(this,Yr).getSlice(t).set(r),mt(this,Xr).delete(t)),mt(this,Yr).getSlice(t).get()}onFlush(t,n=!0){mt(this,So).has(t)||mt(this,So).add(t),n&&t()}async switch(t,n){t.get(ui).flush(),await n(t)(t),this.runExecutor(),mt(this,So).forEach(r=>r())}flush(t){t.get(ui).flush(),this.runExecutor(),mt(this,So).forEach(n=>n())}setExecutor(t){t(),x2(this,uc,t)}runExecutor(){mt(this,uc).call(this)}}Yr=new WeakMap,Xr=new WeakMap,So=new WeakMap,uc=new WeakMap;const Ce=Q(new L1,"themeManager"),R2=()=>new L1,ct=kn("border"),Mt=kn("color"),Bn=kn("font"),Bp=kn("global"),it=kn("icon"),B2=kn("code-fence"),P2=kn("image"),j2=kn("inner-editor"),z2=kn("input-chip"),V2=kn("task-list-item"),Lr=kn("scrollbar"),Un=kn("shadow"),Be=kn("size"),$1=[Mt,Be,Bn,Lr,Un,ct,it,Bp,B2,P2,j2,V2,z2],U2=e=>{const t=/^([a-f\d])([a-f\d])([a-f\d])$/i,n=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,r=c=>parseInt(c,16),i=e.slice(1).replace(t,(c,u,d,h)=>u+u+d+d+h+h),[o,s="0",a="0",l="0"]=i.match(n)||[];return o?[s,a,l].map(r):null},Hn=e=>(t,n=1)=>e.get(Mt,[t,n]);var q2=Object.defineProperty,W2=(e,t,n)=>t in e?q2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Et=(e,t,n)=>(W2(e,typeof t!="symbol"?t+"":t,n),n),H2=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Io=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},oi=(e,t,n)=>(H2(e,t,"access private method"),n);const I1=()=>{const e=n=>n.elements.length,t=n=>n.elements[e(n)-1];return{size:e,top:t,push:n=>r=>{var i;(i=t(n))==null||i.push(r)},open:n=>r=>{n.elements.push(r)},close:n=>{const r=n.elements.pop();if(!r)throw Xw();return r}}},G2=(e,t,...n)=>{e.content.push(t,...n)},K2=e=>e.content.pop(),J2=(e,t,n)=>{const r={type:e,content:t,attrs:n,push:(...i)=>G2(r,...i),pop:()=>K2(r)};return r},{size:Y2,push:X2,top:Q2,open:Z2,close:eE}=I1(),Wg=e=>e.isText,tE=(e,t,n)=>{if(Wg(t)&&Wg(n)&&xe.sameSet(t.marks,n.marks))return e.text(t.text+n.text,t.marks)},nE=e=>(t,n)=>Z2(e)(J2(t,[],n)),R1=e=>(t,n,r)=>{const i=t.createAndFill(n,r,e.marks);if(!i)throw tS(t,n,r);return X2(e)(i),i},B1=e=>()=>{e.marks=xe.none;const t=eE(e);return R1(e)(t.type,t.attrs,t.content)},rE=e=>(t,n)=>{const r=t.create(n);e.marks=r.addToSet(e.marks)},iE=e=>t=>{e.marks=t.removeFromSet(e.marks)},oE=e=>t=>{const n=Q2(e);if(!n)throw Xw();const r=n.pop(),i=e.schema.text(t,e.marks);if(!r){n.push(i);return}const o=tE(e.schema,r,i);if(o){n.push(o);return}n.push(r,i)},sE=e=>()=>{let t;do t=B1(e)();while(Y2(e));return t},aE=e=>{const t={marks:[],elements:[],schema:e};return{build:sE(t),openMark:rE(t),closeMark:iE(t),addText:oE(t),openNode:nE(t),addNode:R1(t),closeNode:B1(t)}};var lf,Hg,cf,P1;class lE{constructor(t,n,r){Io(this,lf),Io(this,cf),Et(this,"run",(i,o)=>{const s=i.runSync(i.parse(o),o);return this.next(s),this}),Et(this,"next",(i=[])=>([i].flat().forEach(o=>oi(this,cf,P1).call(this,o)),this)),Et(this,"toDoc",()=>this.stack.build()),Et(this,"injectRoot",(i,o,s)=>(this.stack.openNode(o,s),this.next(i.children),this)),Et(this,"addText",(i="")=>(this.stack.addText(i),this)),Et(this,"addNode",(...i)=>(this.stack.addNode(...i),this)),Et(this,"openNode",(...i)=>(this.stack.openNode(...i),this)),Et(this,"closeNode",(...i)=>(this.stack.closeNode(...i),this)),Et(this,"openMark",(...i)=>(this.stack.openMark(...i),this)),Et(this,"closeMark",(...i)=>(this.stack.closeMark(...i),this)),this.stack=t,this.schema=n,this.specMap=r}}lf=new WeakSet,Hg=function(e){const t=Object.values(this.specMap).find(n=>n.match(e));if(!t)throw nS(e);return t},cf=new WeakSet,P1=function(e){const{key:t,runner:n,is:r}=oi(this,lf,Hg).call(this,e),i=this.schema[r==="node"?"nodes":"marks"][t];n(this,e,i)};const cE=(e,t,n)=>{const r=new lE(aE(e),e,t);return i=>(r.run(n,i),r.toDoc())},uE=(e,t,...n)=>{e.children||(e.children=[]),e.children.push(t,...n)},dE=e=>{var t;return(t=e.children)==null?void 0:t.pop()},j1=(e,t,n,r={})=>{const i={type:e,children:t,props:r,value:n,push:(...o)=>uE(i,...o),pop:()=>dE(i)};return i},{size:hE,push:fE,open:pE,close:mE}=I1(),gE=(e,t)=>{var n;if(e.type===t||((n=e.children)==null?void 0:n.length)!==1)return e;const r=a=>{var l;if(a.type===t)return a;if(((l=a.children)==null?void 0:l.length)!==1)return null;const[c]=a.children;return c?r(c):null},i=r(e);if(!i)return e;const o=i.children?[...i.children]:void 0,s={...e,children:o};return s.children=o,i.children=[s],i},z1=e=>{const{children:t}=e;return t&&(e.children=t.reduce((n,r,i)=>{if(i===0)return[r];const o=n[n.length-1];if(o&&o.isMark&&r.isMark){r=gE(r,o.type);const{children:s,...a}=r,{children:l,...c}=o;if(r.type===o.type&&s&&l&&JSON.stringify(a)===JSON.stringify(c)){const u={...c,children:[...l,...s]};return n.slice(0,-1).concat(z1(u))}}return n.concat(r)},[])),e},bE=e=>{const t={...e.props,type:e.type};return e.children&&(t.children=e.children),e.value&&(t.value=e.value),t},V1=e=>(t,n,r)=>pE(e)(j1(t,[],n,r)),U1=e=>(t,n,r,i)=>{const o=j1(t,n,r,i),s=z1(bE(o));return fE(e)(s),s},Pp=e=>()=>{const t=mE(e);return U1(e)(t.type,t.children,t.value,t.props)},yE=e=>(t,n,r,i)=>{t.isInSet(e.marks)||(e.marks=t.addToSet(e.marks),V1(e)(n,r,{...i,isMark:!0}))},wE=e=>t=>t.isInSet(e.marks)?(e.marks=t.type.removeFromSet(e.marks),Pp(e)()):null,kE=e=>()=>{let t=null;do t=Pp(e)();while(hE(e));return t},_E=()=>{const e={marks:[],elements:[]};return{build:kE(e),openMark:yE(e),closeMark:wE(e),openNode:V1(e),addNode:U1(e),closeNode:Pp(e)}},DE=e=>Object.prototype.hasOwnProperty.call(e,"size");var dc,vd,uf,Gg,df,Kg,hc,hf;class xE{constructor(t,n,r){Io(this,dc),Io(this,uf),Io(this,df),Io(this,hc),Et(this,"toString",i=>i.stringify(this.stack.build())),Et(this,"next",i=>DE(i)?(i.forEach(o=>{oi(this,hc,hf).call(this,o)}),this):(oi(this,hc,hf).call(this,i),this)),Et(this,"addNode",(...i)=>(this.stack.addNode(...i),this)),Et(this,"openNode",(...i)=>(this.stack.openNode(...i),this)),Et(this,"closeNode",(...i)=>(this.stack.closeNode(...i),this)),Et(this,"withMark",(...i)=>(this.stack.openMark(...i),this)),this.stack=t,this.schema=n,this.specMap=r}run(t){return this.next(t),this}}dc=new WeakSet,vd=function(e){const t=Object.entries(this.specMap).map(([n,r])=>({key:n,...r})).find(n=>n.match(e));if(!t)throw rS(e.type);return t},uf=new WeakSet,Gg=function(e){const{runner:t}=oi(this,dc,vd).call(this,e);t(this,e)},df=new WeakSet,Kg=function(e,t){const{runner:n}=oi(this,dc,vd).call(this,e);return n(this,e,t)},hc=new WeakSet,hf=function(e){const{marks:t}=e,n=r=>{var i;return(i=r.type.spec.priority)!=null?i:50};[...t].sort((r,i)=>n(r)-n(i)).every(r=>!oi(this,df,Kg).call(this,r,e))&&oi(this,uf,Gg).call(this,e),t.forEach(r=>this.stack.closeMark(r))};const CE=(e,t,n)=>r=>{const i=new xE(_E(),e,t);return i.run(r),i.toString(n)},q1=65535,W1=Math.pow(2,16);function vE(e,t){return e+t*W1}function Jg(e){return e&q1}function SE(e){return(e-(e&q1))/W1}const H1=1,G1=2,fc=4,K1=8;class ff{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&K1)>0}get deletedBefore(){return(this.delInfo&(H1|fc))>0}get deletedAfter(){return(this.delInfo&(G1|fc))>0}get deletedAcross(){return(this.delInfo&fc)>0}}class hn{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&hn.empty)return hn.empty}recover(t){let n=0,r=Jg(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+SE(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(t<=d){let h=c?t==l?-1:t==d?1:n:n,f=l+i+(h<0?0:u);if(r)return f;let p=t==(n<0?l:d)?null:vE(a/3,t-l),m=t==l?G1:t==d?H1:fc;return(n<0?t!=l:t!=d)&&(m|=K1),new ff(f,m,p)}i+=u-c}return r?t+i:new ff(t+i,0,null)}touches(t,n){let r=0,i=Jg(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+o],u=l+c;if(t<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];t(a,a+c,l,l+u),o+=u-c}}invert(){return new hn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?hn.empty:new hn(t<0?[0,-t,0]:[0,0,t])}}hn.empty=new hn([]);class Wo{constructor(t=[],n,r=0,i=t.length){this.maps=t,this.mirror=n,this.from=r,this.to=i}slice(t=0,n=this.maps.length){return new Wo(this.maps,this.mirror,t,n)}copy(){return new Wo(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(t){for(let n=0,r=this.maps.length;n<t.maps.length;n++){let i=t.getMirror(n);this.appendMap(t.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Wo;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,t=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return r?t:new ff(t,i,null)}}const Sd=Object.create(null);class cn{getMap(){return hn.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Sd[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Sd)throw new RangeError("Duplicate use of step JSON ID "+t);return Sd[t]=n,n.prototype.jsonID=t,n}}class at{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new at(t,null)}static fail(t){return new at(null,t)}static fromReplace(t,n,r,i){try{return at.ok(t.replace(n,r,i))}catch(o){if(o instanceof qc)return at.fail(o.message);throw o}}}function jp(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(jp(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return B.fromArray(r)}class Nr extends cn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new V(jp(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return at.fromReplace(t,this.from,this.to,o)}invert(){return new hr(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Nr(n.pos,r.pos,this.mark)}merge(t){return t instanceof Nr&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Nr(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Nr(n.from,n.to,t.markFromJSON(n.mark))}}cn.jsonID("addMark",Nr);class hr extends cn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new V(jp(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return at.fromReplace(t,this.from,this.to,r)}invert(){return new Nr(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new hr(n.pos,r.pos,this.mark)}merge(t){return t instanceof hr&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new hr(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new hr(n.from,n.to,t.markFromJSON(n.mark))}}cn.jsonID("removeMark",hr);class si extends cn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return at.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return at.fromReplace(t,this.pos,this.pos+1,new V(B.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new si(this.pos,n.marks[i]);return new si(this.pos,this.mark)}}return new hs(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new si(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new si(n.pos,t.markFromJSON(n.mark))}}cn.jsonID("addNodeMark",si);class hs extends cn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return at.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return at.fromReplace(t,this.pos,this.pos+1,new V(B.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new si(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new hs(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new hs(n.pos,t.markFromJSON(n.mark))}}cn.jsonID("removeNodeMark",hs);class Ot extends cn{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&pf(t,this.from,this.to)?at.fail("Structure replace would overwrite content"):at.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new hn([this.from,this.to-this.from,this.slice.size])}invert(t){return new Ot(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ot(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof Ot)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?V.empty:new V(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Ot(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?V.empty:new V(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Ot(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ot(n.from,n.to,V.fromJSON(t,n.slice),!!n.structure)}}cn.jsonID("replace",Ot);class $t extends cn{constructor(t,n,r,i,o,s,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(t){if(this.structure&&(pf(t,this.from,this.gapFrom)||pf(t,this.gapTo,this.to)))return at.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return at.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?at.fromReplace(t,this.from,this.to,r):at.fail("Content does not fit in gap")}getMap(){return new hn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new $t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new $t(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new $t(n.from,n.to,n.gapFrom,n.gapTo,V.fromJSON(t,n.slice),n.insert,!!n.structure)}}cn.jsonID("replaceAround",$t);function pf(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function EE(e,t,n,r){let i=[],o=[],s,a;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,t),f=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(s&&s.to==h&&s.mark.eq(d[m])?s.to=f:i.push(s=new hr(h,f,d[m])));a&&a.to==h?a.to=f:o.push(a=new Nr(h,f,r))}}),i.forEach(l=>e.step(l)),o.forEach(l=>e.step(l))}function AE(e,t,n,r){let i=[],o=0;e.doc.nodesBetween(t,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof Nu){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<i.length;f++){let p=i[f];p.step==o-1&&d.eq(i[f].style)&&(h=p)}h?(h.to=c,h.step=o):i.push({style:d,from:Math.max(a,t),to:c,step:o})}}}),i.forEach(s=>e.step(new hr(s.from,s.to,s.style)))}function FE(e,t,n,r=n.contentMatch){let i=e.doc.nodeAt(t),o=[],s=t+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=s+l.nodeSize,u=r.matchType(l.type);if(!u)o.push(new Ot(s,c,V.empty));else{r=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||e.step(new hr(s,c,l.marks[d]))}s=c}if(!r.validEnd){let a=r.fillBefore(B.empty,!0);e.replace(s,s,new V(a,0,0))}for(let a=o.length-1;a>=0;a--)e.step(o[a])}function TE(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Bu(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),o=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!TE(i,o,s))break}return null}function ME(e,t,n){let{$from:r,$to:i,depth:o}=t,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=B.empty,d=0;for(let p=o,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=B.from(r.node(p).copy(u)),d++):l--;let h=B.empty,f=0;for(let p=o,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,h=B.from(i.node(p).copy(h)),f++):c++;e.step(new $t(l,c,s,a,new V(u.append(h),d,f),u.size-d,!0))}function J1(e,t,n=null,r=e){let i=OE(e,t),o=i&&NE(r,t);return o?i.map(Yg).concat({type:t,attrs:n}).concat(o.map(Yg)):null}function Yg(e){return{type:e,attrs:null}}function OE(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}function NE(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function LE(e,t,n){let r=B.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=B.from(n[s].type.create(n[s].attrs,r))}let i=t.start,o=t.end;e.step(new $t(i,o,i,o,new V(r,0,0),n.length,!0))}function $E(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&IE(e.doc,e.mapping.slice(o).map(a),r)){e.clearIncompatible(e.mapping.slice(o).map(a,1),r);let l=e.mapping.slice(o),c=l.map(a,1),u=l.map(a+s.nodeSize,1);return e.step(new $t(c,u,c+1,u-1,new V(B.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function IE(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function RE(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new $t(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new V(B.from(s),0,0),1,!0))}function aa(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),p=r&&r[u]||d;if(p!=d&&(f=f.replaceChild(0,p.type.create(p.attrs))),!d.canReplace(h+1,d.childCount)||!p.type.validContent(f))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function BE(e,t,n=1,r){let i=e.doc.resolve(t),o=B.empty,s=B.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){o=B.from(i.node(a).copy(o));let u=r&&r[c];s=B.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}e.step(new Ot(t,t,new V(o.append(s),n,n),!0))}function Pu(e,t){let n=e.resolve(t),r=n.index();return PE(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function PE(e,t){return!!(e&&t&&!e.isLeaf&&e.canAppend(t))}function jE(e,t,n){let r=new Ot(t-n,t+n,V.empty,!0);e.step(r)}function zE(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function zp(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function Vp(e,t,n=t,r=V.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return Y1(i,o,r)?new Ot(t,n,r):new VE(i,o,r).fit()}function Y1(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class VE{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=B.empty;for(let i=0;i<=t.depth;i++){let o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=B.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new V(o,s,a);return t>-1?new $t(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ot(r.pos,i.pos,l):null}findFittable(){for(let t=1;t<=2;t++)for(let n=this.unplaced.openStart;n>=0;n--){let r,i=null;n?(i=Ed(this.unplaced.content,n-1).firstChild,r=i.content):r=this.unplaced.content;let o=r.firstChild;for(let s=this.depth;s>=0;s--){let{type:a,match:l}=this.frontier[s],c,u=null;if(t==1&&(o?l.matchType(o.type)||(u=l.fillBefore(B.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:u};if(t==2&&o&&(c=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:c};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Ed(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new V(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Ed(t,n);if(i.childCount<=1&&n>0){let o=t.size-n<=n+i.size;this.unplaced=new V(qs(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new V(qs(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));d=d.matchFragment(i)}let f=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let m=a.child(c),b=d.matchType(m.type);if(!b)break;c++,(c>1||l==0||m.content.size)&&(d=b,u.push(X1(m.mark(h.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Ws(this.placed,n,B.from(u)),this.frontier[n].match=d,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,b=a;m<f;m++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=p?t==0?V.empty:new V(qs(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new V(qs(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Ad(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),s=Ad(t,n,i,r,o);if(!!s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Ad(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ws(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,o)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Ws(this.placed,this.depth,B.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(B.empty,!0);n.childCount&&(this.placed=Ws(this.placed,this.frontier.length,n))}}function qs(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(qs(e.firstChild.content,t-1,n)))}function Ws(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Ws(e.lastChild.content,t-1,n)))}function Ed(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function X1(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,X1(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(B.empty,!0)))),e.copy(r)}function Ad(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!UE(n,o.content,s)?a:null}function UE(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function qE(e){return e.spec.defining||e.spec.definingForContent}function WE(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(Y1(i,o,r))return e.step(new Ot(t,n,r));let s=Z1(i,e.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let p=i.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(h)>-1?a=h:i.before(h)==f&&s.splice(1,0,-h)}let l=s.indexOf(a),c=[],u=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=u-1;h>=0;h--){let f=c[h].type,p=qE(f);if(p&&i.node(l).type!=f)u=h;else if(p||!f.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+u+1)%(r.openStart+1),p=c[f];if(!!p)for(let m=0;m<s.length;m++){let b=s[(m+l)%s.length],y=!0;b<0&&(y=!1,b=-b);let k=i.node(b-1),_=i.index(b-1);if(k.canReplaceWith(_,_,p.type,p.marks))return e.replace(i.before(b),y?o.after(b):n,new V(Q1(r.content,0,r.openStart,f),f,r.openEnd))}}let d=e.steps.length;for(let h=s.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>d));h--){let f=s[h];f<0||(t=i.before(f),n=o.after(f))}}function Q1(e,t,n,r,i){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(Q1(o.content,t+1,n,r,o)))}if(t>r){let o=i.contentMatchAt(0),s=o.fillBefore(e).append(e);e=s.append(o.matchFragment(s).fillBefore(B.empty,!0))}return e}function HE(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=zE(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new V(B.from(r),0,0))}function GE(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=Z1(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return e.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}function Z1(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&n.push(i)}return n}class Ho extends cn{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return at.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return at.fromReplace(t,this.pos,this.pos+1,new V(B.from(i),0,n.isLeaf?0:1))}getMap(){return hn.empty}invert(t){return new Ho(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ho(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ho(n.pos,n.attr,n.value)}}cn.jsonID("attr",Ho);let fs=class extends Error{};fs=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};fs.prototype=Object.create(Error.prototype);fs.prototype.constructor=fs;fs.prototype.name="TransformError";class ek{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Wo}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new fs(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=V.empty){let i=Vp(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new V(B.from(r),0,0))}delete(t,n){return this.replace(t,n,V.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return WE(this,t,n,r),this}replaceRangeWith(t,n,r){return HE(this,t,n,r),this}deleteRange(t,n){return GE(this,t,n),this}lift(t,n){return ME(this,t,n),this}join(t,n=1){return jE(this,t,n),this}wrap(t,n){return LE(this,t,n),this}setBlockType(t,n=t,r,i=null){return $E(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i=[]){return RE(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Ho(t,n,r)),this}addNodeMark(t,n){return this.step(new si(t,n)),this}removeNodeMark(t,n){if(!(n instanceof xe)){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n=n.isInSet(r.marks),!n)return this}return this.step(new hs(t,n)),this}split(t,n=1,r){return BE(this,t,n,r),this}addMark(t,n,r){return EE(this,t,n,r),this}removeMark(t,n,r){return AE(this,t,n,r),this}clearIncompatible(t,n,r){return FE(this,t,n,r),this}}const Fd=Object.create(null);class te{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new tk(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=V.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),a?V.empty:n),a==0&&Zg(t,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=t.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),Zg(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new ne(t):Eo(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let o=t.depth-1;o>=0;o--){let s=n<0?Eo(t.node(0),t.node(o),t.before(o+1),t.index(o),n,r):Eo(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,n,r);if(s)return s}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new pn(t.node(0))}static atStart(t){return Eo(t,t,0,0,1)||new pn(t)}static atEnd(t){return Eo(t,t,t.content.size,t.childCount,-1)||new pn(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Fd[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Fd)throw new RangeError("Duplicate use of selection JSON ID "+t);return Fd[t]=n,n.prototype.jsonID=t,n}getBookmark(){return ne.between(this.$anchor,this.$head).getBookmark()}}te.prototype.visible=!0;class tk{constructor(t,n){this.$from=t,this.$to=n}}let Xg=!1;function Qg(e){!Xg&&!e.parent.inlineContent&&(Xg=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class ne extends te{constructor(t,n=t){Qg(t),Qg(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return te.near(r);let i=t.resolve(n.map(this.anchor));return new ne(i.parent.inlineContent?i:r,r)}replace(t,n=V.empty){if(super.replace(t,n),n==V.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof ne&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new ju(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ne(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=te.findFrom(n,r,!0)||te.findFrom(n,-r,!0);if(o)n=o.$head;else return te.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(te.findFrom(t,-r,!0)||te.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new ne(t,n)}}te.jsonID("text",ne);class ju{constructor(t,n){this.anchor=t,this.head=n}map(t){return new ju(t.map(this.anchor),t.map(this.head))}resolve(t){return ne.between(t.resolve(this.anchor),t.resolve(this.head))}}class Y extends te{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=t.resolve(i);return r?te.near(o):new Y(o)}content(){return new V(B.from(this.node),0,0)}eq(t){return t instanceof Y&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Up(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Y(t.resolve(n.anchor))}static create(t,n){return new Y(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Y.prototype.visible=!1;te.jsonID("node",Y);class Up{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new ju(r,r):new Up(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Y.isSelectable(r)?new Y(n):te.near(n)}}class pn extends te{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=V.empty){if(n==V.empty){t.delete(0,t.doc.content.size);let r=te.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new pn(t)}map(t){return new pn(t)}eq(t){return t instanceof pn}getBookmark(){return KE}}te.jsonID("all",pn);const KE={map(){return this},resolve(e){return new pn(e)}};function Eo(e,t,n,r,i,o=!1){if(t.inlineContent)return ne.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let a=t.child(s);if(a.isAtom){if(!o&&Y.isSelectable(a))return Y.create(e,n-(i<0?a.nodeSize:0))}else{let l=Eo(e,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function Zg(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof Ot||i instanceof $t))return;let o=e.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),e.setSelection(te.near(e.doc.resolve(s),n))}const e0=1,Pl=2,t0=4;class JE extends ek{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|e0)&~Pl,this.storedMarks=null,this}get selectionSet(){return(this.updated&e0)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Pl,this}ensureMarks(t){return xe.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Pl)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Pl,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||xe.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r==null?n:r,!t)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,o)),this.selection.empty||this.setSelection(te.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=t0,this}get scrolledIntoView(){return(this.updated&t0)>0}}function n0(e,t){return!t||!e?e:e.bind(t)}class Hs{constructor(t,n,r){this.name=t,this.init=n0(n.init,r),this.apply=n0(n.apply,r)}}const YE=[new Hs("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Hs("selection",{init(e,t){return e.selection||te.atStart(t.doc)},apply(e){return e.selection}}),new Hs("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Hs("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Td{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=YE.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Hs(r.key,r.spec.state,r))})}}class ai{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ai(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(t,this[o.name],this,n)}return n}get tr(){return new JE(this)}static create(t){let n=new Td(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new ai(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new Td(this.schema,t.plugins),r=n.fields,i=new ai(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Td(t.schema,t.plugins),o=new ai(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=on.fromJSON(t.schema,n.doc);else if(s.name=="selection")o.selection=te.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=c.fromJSON.call(l,t,n[a],o);return}}o[s.name]=s.init(t,o)}}),o}}function nk(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=nk(i,t,{})),n[r]=i}return n}class ye{constructor(t){this.spec=t,this.props={},t.props&&nk(t.props,this,this.props),this.key=t.key?t.key.key:rk("plugin")}getState(t){return t[this.key]}}const Md=Object.create(null);function rk(e){return e in Md?e+"$"+ ++Md[e]:(Md[e]=0,e+"$")}class _e{constructor(t="key"){this.key=rk(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}function qp(e,t){var{includeImageAlt:n=!0}=t||{};return ik(e,n)}function ik(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&r0(e.children,t)||Array.isArray(e)&&r0(e,t))||""}function r0(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=ik(e[r],t);return n.join("")}function mn(e,t,n,r){const i=e.length;let o=0,s;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),[].splice.apply(e,s);else for(n&&[].splice.apply(e,[t,n]);o<r.length;)s=r.slice(o,o+1e4),s.unshift(t,0),[].splice.apply(e,s),o+=1e4,t+=1e4}function Cn(e,t){return e.length>0?(mn(e,e.length,0,t),e):t}const i0={}.hasOwnProperty;function ok(e){const t={};let n=-1;for(;++n<e.length;)XE(t,e[n]);return t}function XE(e,t){let n;for(n in t){const i=(i0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;for(s in o){i0.call(i,s)||(i[s]=[]);const a=o[s];QE(i[s],Array.isArray(a)?a:a?[a]:[])}}}function QE(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);mn(e,0,0,r)}const ZE=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,jt=Ei(/[A-Za-z]/),Xc=Ei(/\d/),eA=Ei(/[\dA-Fa-f]/),Nt=Ei(/[\dA-Za-z]/),tA=Ei(/[!-/:-@[-`{-~]/),o0=Ei(/[#-'*+\--9=?A-Z^-~]/);function Ea(e){return e!==null&&(e<32||e===127)}function Ae(e){return e!==null&&(e<0||e===32)}function W(e){return e!==null&&e<-2}function me(e){return e===-2||e===-1||e===32}const zu=Ei(/\s/),Vu=Ei(ZE);function Ei(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Z(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(l){return me(l)?(e.enter(n),a(l)):t(l)}function a(l){return me(l)&&o++<i?(e.consume(l),a):(e.exit(n),t(l))}}const nA={tokenize:rA};function rA(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Z(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),o(a)}function o(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return W(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),s)}}const iA={tokenize:oA},s0={tokenize:sA};function oA(e){const t=this,n=[];let r=0,i,o,s;return a;function a(_){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,l,c)(_)}return c(_)}function l(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&k();const S=t.events.length;let v=S,g;for(;v--;)if(t.events[v][0]==="exit"&&t.events[v][1].type==="chunkFlow"){g=t.events[v][1].end;break}y(r);let w=S;for(;w<t.events.length;)t.events[w][1].end=Object.assign({},g),w++;return mn(t.events,v+1,0,t.events.slice(S)),t.events.length=w,c(_)}return a(_)}function c(_){if(r===n.length){if(!i)return h(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(s0,u,d)(_)}function u(_){return i&&k(),y(r),h(_)}function d(_){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,p(_)}function h(_){return t.containerState={},e.attempt(s0,f,p)(_)}function f(_){return r++,n.push([t.currentConstruct,t.containerState]),h(_)}function p(_){if(_===null){i&&k(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),m(_)}function m(_){if(_===null){b(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return W(_)?(e.consume(_),b(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function b(_,S){const v=t.sliceStream(_);if(S&&v.push(null),_.previous=o,o&&(o.next=_),o=_,i.defineSkip(_.start),i.write(v),t.parser.lazy[_.start.line]){let g=i.events.length;for(;g--;)if(i.events[g][1].start.offset<s&&(!i.events[g][1].end||i.events[g][1].end.offset>s))return;const w=t.events.length;let D=w,x,E;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){if(x){E=t.events[D][1].end;break}x=!0}for(y(r),g=w;g<t.events.length;)t.events[g][1].end=Object.assign({},E),g++;mn(t.events,D+1,0,t.events.slice(w)),t.events.length=g}}function y(_){let S=n.length;for(;S-- >_;){const v=n[S];t.containerState=v[1],v[0].exit.call(t,e)}n.length=_}function k(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function sA(e,t,n){return Z(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qc(e){if(e===null||Ae(e)||zu(e))return 1;if(Vu(e))return 2}function Uu(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const mf={name:"attention",tokenize:lA,resolveAll:aA};function aA(e,t){let n=-1,r,i,o,s,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=Object.assign({},e[r][1].end),h=Object.assign({},e[n][1].start);a0(d,-l),a0(h,l),s={type:l>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:h},o={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},s.start),e[n][1].start=Object.assign({},a.end),c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=Cn(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=Cn(c,[["enter",i,t],["enter",s,t],["exit",s,t],["enter",o,t]]),c=Cn(c,Uu(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=Cn(c,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=Cn(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,mn(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function lA(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Qc(r);let o;return s;function s(l){return e.enter("attentionSequence"),o=l,a(l)}function a(l){if(l===o)return e.consume(l),a;const c=e.exit("attentionSequence"),u=Qc(l),d=!u||u===2&&i||n.includes(l),h=!i||i===2&&u||n.includes(r);return c._open=Boolean(o===42?d:d&&(i||!h)),c._close=Boolean(o===42?h:h&&(u||!d)),t(l)}}function a0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const cA={name:"autolink",tokenize:uA};function uA(e,t,n){let r=1;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(p){return jt(p)?(e.consume(p),s):o0(p)?c(p):n(p)}function s(p){return p===43||p===45||p===46||Nt(p)?a(p):c(p)}function a(p){return p===58?(e.consume(p),l):(p===43||p===45||p===46||Nt(p))&&r++<32?(e.consume(p),a):c(p)}function l(p){return p===62?(e.exit("autolinkProtocol"),f(p)):p===null||p===32||p===60||Ea(p)?n(p):(e.consume(p),l)}function c(p){return p===64?(e.consume(p),r=0,u):o0(p)?(e.consume(p),c):n(p)}function u(p){return Nt(p)?d(p):n(p)}function d(p){return p===46?(e.consume(p),r=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",f(p)):h(p)}function h(p){return(p===45||Nt(p))&&r++<63?(e.consume(p),p===45?h:d):n(p)}function f(p){return e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t}}const al={tokenize:dA,partial:!0};function dA(e,t,n){return Z(e,r,"linePrefix");function r(i){return i===null||W(i)?t(i):n(i)}}const sk={name:"blockQuote",tokenize:hA,continuation:{tokenize:fA},exit:pA};function hA(e,t,n){const r=this;return i;function i(s){if(s===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),o}return n(s)}function o(s){return me(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function fA(e,t,n){return Z(e,e.attempt(sk,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function pA(e){e.exit("blockQuote")}const ak={name:"characterEscape",tokenize:mA};function mA(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return tA(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const l0=document.createElement("i");function Aa(e){const t="&"+e+";";l0.innerHTML=t;const n=l0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const lk={name:"characterReference",tokenize:gA};function gA(e,t,n){const r=this;let i=0,o,s;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),o=31,s=Nt,u(d))}function c(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=eA,u):(e.enter("characterReferenceValue"),o=7,s=Xc,u(d))}function u(d){let h;return d===59&&i?(h=e.exit("characterReferenceValue"),s===Nt&&!Aa(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):s(d)&&i++<o?(e.consume(d),u):n(d)}}const gf={name:"codeFenced",tokenize:bA,concrete:!0};function bA(e,t,n){const r=this,i={tokenize:v,partial:!0},o={tokenize:S,partial:!0},s=this.events[this.events.length-1],a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0;let l=0,c;return u;function u(g){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c=g,d(g)}function d(g){return g===c?(e.consume(g),l++,d):(e.exit("codeFencedFenceSequence"),l<3?n(g):Z(e,h,"whitespace")(g))}function h(g){return g===null||W(g)?b(g):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||Ae(g)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Z(e,p,"whitespace")(g)):g===96&&g===c?n(g):(e.consume(g),f)}function p(g){return g===null||W(g)?b(g):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===null||W(g)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),b(g)):g===96&&g===c?n(g):(e.consume(g),m)}function b(g){return e.exit("codeFencedFence"),r.interrupt?t(g):y(g)}function y(g){return g===null?_(g):W(g)?e.attempt(o,e.attempt(i,_,a?Z(e,y,"linePrefix",a+1):y),_)(g):(e.enter("codeFlowValue"),k(g))}function k(g){return g===null||W(g)?(e.exit("codeFlowValue"),y(g)):(e.consume(g),k)}function _(g){return e.exit("codeFenced"),t(g)}function S(g,w,D){const x=this;return E;function E(A){return g.enter("lineEnding"),g.consume(A),g.exit("lineEnding"),C}function C(A){return x.parser.lazy[x.now().line]?D(A):w(A)}}function v(g,w,D){let x=0;return Z(g,E,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function E(M){return g.enter("codeFencedFence"),g.enter("codeFencedFenceSequence"),C(M)}function C(M){return M===c?(g.consume(M),x++,C):x<l?D(M):(g.exit("codeFencedFenceSequence"),Z(g,A,"whitespace")(M))}function A(M){return M===null||W(M)?(g.exit("codeFencedFence"),w(M)):D(M)}}}const Od={name:"codeIndented",tokenize:wA},yA={tokenize:kA,partial:!0};function wA(e,t,n){const r=this;return i;function i(c){return e.enter("codeIndented"),Z(e,o,"linePrefix",4+1)(c)}function o(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(c):n(c)}function s(c){return c===null?l(c):W(c)?e.attempt(yA,s,l)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||W(c)?(e.exit("codeFlowValue"),s(c)):(e.consume(c),a)}function l(c){return e.exit("codeIndented"),t(c)}}function kA(e,t,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):W(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):Z(e,o,"linePrefix",4+1)(s)}function o(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):W(s)?i(s):n(s)}}const _A={name:"codeText",tokenize:CA,resolve:DA,previous:xA};function DA(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function xA(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function CA(e,t,n){let r=0,i,o;return s;function s(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===96?(o=e.enter("codeTextSequence"),i=0,u(d)):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):W(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||W(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),c)}function u(d){return d===96?(e.consume(d),i++,u):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(o.type="codeTextData",c(d))}}function ck(e){const t={};let n=-1,r,i,o,s,a,l,c;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,vA(e,n)),n=t[n],c=!0);else if(r[1]._container){for(o=n,i=void 0;o--&&(s=e[o],s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),mn(e,i,n-i+1,a))}}return!c}function vA(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const o=[],s=n._tokenizer||r.parser[n.contentType](n.start),a=s.events,l=[],c={};let u,d,h=-1,f=n,p=0,m=0;const b=[m];for(;f;){for(;e[++i][1]!==f;);o.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&s.defineSkip(f.start),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(m=h+1,b.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(s.events=[],f?(f._tokenizer=void 0,f.previous=void 0):b.pop(),h=b.length;h--;){const y=a.slice(b[h],b[h+1]),k=o.pop();l.unshift([k,k+y.length-1]),mn(e,k,2,y)}for(h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const SA={tokenize:FA,resolve:AA},EA={tokenize:TA,partial:!0};function AA(e){return ck(e),e}function FA(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?o(a):W(a)?e.check(EA,s,o)(a):(e.consume(a),i)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function TA(e,t,n){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Z(e,o,"linePrefix")}function o(s){if(s===null||W(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function uk(e,t,n,r,i,o,s,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(y){return y===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(y),e.exit(o),h):y===null||y===41||Ea(y)?n(y):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function h(y){return y===62?(e.enter(o),e.consume(y),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===62?(e.exit("chunkString"),e.exit(a),h(y)):y===null||y===60||W(y)?n(y):(e.consume(y),y===92?p:f)}function p(y){return y===60||y===62||y===92?(e.consume(y),f):f(y)}function m(y){return y===40?++u>c?n(y):(e.consume(y),m):y===41?u--?(e.consume(y),m):(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(y)):y===null||Ae(y)?u?n(y):(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(y)):Ea(y)?n(y):(e.consume(y),y===92?b:m)}function b(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function dk(e,t,n,r,i,o){const s=this;let a=0,l;return c;function c(f){return e.enter(r),e.enter(i),e.consume(f),e.exit(i),e.enter(o),u}function u(f){return f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs||a>999?n(f):f===93?(e.exit(o),e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):W(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||W(f)||a++>999?(e.exit("chunkString"),u(f)):(e.consume(f),l=l||!me(f),f===92?h:d)}function h(f){return f===91||f===92||f===93?(e.consume(f),a++,d):d(f)}}function hk(e,t,n,r,i,o){let s;return a;function a(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),s=h===40?41:h,l}function l(h){return h===s?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(o),c(h))}function c(h){return h===s?(e.exit(o),l(s)):h===null?n(h):W(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Z(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===s||h===null||W(h)?(e.exit("chunkString"),c(h)):(e.consume(h),h===92?d:u)}function d(h){return h===s||h===92?(e.consume(h),u):u(h)}}function ar(e,t){let n;return r;function r(i){return W(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):me(i)?Z(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function Pn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const MA={name:"definition",tokenize:NA},OA={tokenize:LA,partial:!0};function NA(e,t,n){const r=this;let i;return o;function o(l){return e.enter("definition"),dk.call(r,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(l)}function s(l){return i=Pn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),l===58?(e.enter("definitionMarker"),e.consume(l),e.exit("definitionMarker"),ar(e,uk(e,e.attempt(OA,Z(e,a,"whitespace"),Z(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(l)}function a(l){return l===null||W(l)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(l)):n(l)}}function LA(e,t,n){return r;function r(s){return Ae(s)?ar(e,i)(s):n(s)}function i(s){return s===34||s===39||s===40?hk(e,Z(e,o,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s):n(s)}function o(s){return s===null||W(s)?t(s):n(s)}}const $A={name:"hardBreakEscape",tokenize:IA};function IA(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(o),i}function i(o){return W(o)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(o)):n(o)}}const RA={name:"headingAtx",tokenize:PA,resolve:BA};function BA(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},mn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function PA(e,t,n){const r=this;let i=0;return o;function o(u){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&i++<6?(e.consume(u),s):u===null||Ae(u)?(e.exit("atxHeadingSequence"),r.interrupt?t(u):a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||W(u)?(e.exit("atxHeading"),t(u)):me(u)?Z(e,a,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Ae(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),c)}}const jA=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],c0=["pre","script","style","textarea"],zA={name:"htmlFlow",tokenize:qA,resolveTo:UA,concrete:!0},VA={tokenize:WA,partial:!0};function UA(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function qA(e,t,n){const r=this;let i,o,s,a,l;return c;function c(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),u}function u(F){return F===33?(e.consume(F),d):F===47?(e.consume(F),p):F===63?(e.consume(F),i=3,r.interrupt?t:q):jt(F)?(e.consume(F),s=String.fromCharCode(F),o=!0,m):n(F)}function d(F){return F===45?(e.consume(F),i=2,h):F===91?(e.consume(F),i=5,s="CDATA[",a=0,f):jt(F)?(e.consume(F),i=4,r.interrupt?t:q):n(F)}function h(F){return F===45?(e.consume(F),r.interrupt?t:q):n(F)}function f(F){return F===s.charCodeAt(a++)?(e.consume(F),a===s.length?r.interrupt?t:C:f):n(F)}function p(F){return jt(F)?(e.consume(F),s=String.fromCharCode(F),m):n(F)}function m(F){return F===null||F===47||F===62||Ae(F)?F!==47&&o&&c0.includes(s.toLowerCase())?(i=1,r.interrupt?t(F):C(F)):jA.includes(s.toLowerCase())?(i=6,F===47?(e.consume(F),b):r.interrupt?t(F):C(F)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):o?k(F):y(F)):F===45||Nt(F)?(e.consume(F),s+=String.fromCharCode(F),m):n(F)}function b(F){return F===62?(e.consume(F),r.interrupt?t:C):n(F)}function y(F){return me(F)?(e.consume(F),y):x(F)}function k(F){return F===47?(e.consume(F),x):F===58||F===95||jt(F)?(e.consume(F),_):me(F)?(e.consume(F),k):x(F)}function _(F){return F===45||F===46||F===58||F===95||Nt(F)?(e.consume(F),_):S(F)}function S(F){return F===61?(e.consume(F),v):me(F)?(e.consume(F),S):k(F)}function v(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),l=F,g):me(F)?(e.consume(F),v):(l=null,w(F))}function g(F){return F===null||W(F)?n(F):F===l?(e.consume(F),D):(e.consume(F),g)}function w(F){return F===null||F===34||F===39||F===60||F===61||F===62||F===96||Ae(F)?S(F):(e.consume(F),w)}function D(F){return F===47||F===62||me(F)?k(F):n(F)}function x(F){return F===62?(e.consume(F),E):n(F)}function E(F){return me(F)?(e.consume(F),E):F===null||W(F)?C(F):n(F)}function C(F){return F===45&&i===2?(e.consume(F),P):F===60&&i===1?(e.consume(F),O):F===62&&i===4?(e.consume(F),H):F===63&&i===3?(e.consume(F),q):F===93&&i===5?(e.consume(F),z):W(F)&&(i===6||i===7)?e.check(VA,H,A)(F):F===null||W(F)?A(F):(e.consume(F),C)}function A(F){return e.exit("htmlFlowData"),M(F)}function M(F){return F===null?T(F):W(F)?e.attempt({tokenize:$,partial:!0},M,T)(F):(e.enter("htmlFlowData"),C(F))}function $(F,ee,de){return ce;function ce(I){return F.enter("lineEnding"),F.consume(I),F.exit("lineEnding"),re}function re(I){return r.parser.lazy[r.now().line]?de(I):ee(I)}}function P(F){return F===45?(e.consume(F),q):C(F)}function O(F){return F===47?(e.consume(F),s="",N):C(F)}function N(F){return F===62&&c0.includes(s.toLowerCase())?(e.consume(F),H):jt(F)&&s.length<8?(e.consume(F),s+=String.fromCharCode(F),N):C(F)}function z(F){return F===93?(e.consume(F),q):C(F)}function q(F){return F===62?(e.consume(F),H):F===45&&i===2?(e.consume(F),q):C(F)}function H(F){return F===null||W(F)?(e.exit("htmlFlowData"),T(F)):(e.consume(F),H)}function T(F){return e.exit("htmlFlow"),t(F)}}function WA(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(al,t,n)}}const HA={name:"htmlText",tokenize:GA};function GA(e,t,n){const r=this;let i,o,s,a;return l;function l(T){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(T),c}function c(T){return T===33?(e.consume(T),u):T===47?(e.consume(T),w):T===63?(e.consume(T),v):jt(T)?(e.consume(T),E):n(T)}function u(T){return T===45?(e.consume(T),d):T===91?(e.consume(T),o="CDATA[",s=0,b):jt(T)?(e.consume(T),S):n(T)}function d(T){return T===45?(e.consume(T),h):n(T)}function h(T){return T===null||T===62?n(T):T===45?(e.consume(T),f):p(T)}function f(T){return T===null||T===62?n(T):p(T)}function p(T){return T===null?n(T):T===45?(e.consume(T),m):W(T)?(a=p,z(T)):(e.consume(T),p)}function m(T){return T===45?(e.consume(T),H):p(T)}function b(T){return T===o.charCodeAt(s++)?(e.consume(T),s===o.length?y:b):n(T)}function y(T){return T===null?n(T):T===93?(e.consume(T),k):W(T)?(a=y,z(T)):(e.consume(T),y)}function k(T){return T===93?(e.consume(T),_):y(T)}function _(T){return T===62?H(T):T===93?(e.consume(T),_):y(T)}function S(T){return T===null||T===62?H(T):W(T)?(a=S,z(T)):(e.consume(T),S)}function v(T){return T===null?n(T):T===63?(e.consume(T),g):W(T)?(a=v,z(T)):(e.consume(T),v)}function g(T){return T===62?H(T):v(T)}function w(T){return jt(T)?(e.consume(T),D):n(T)}function D(T){return T===45||Nt(T)?(e.consume(T),D):x(T)}function x(T){return W(T)?(a=x,z(T)):me(T)?(e.consume(T),x):H(T)}function E(T){return T===45||Nt(T)?(e.consume(T),E):T===47||T===62||Ae(T)?C(T):n(T)}function C(T){return T===47?(e.consume(T),H):T===58||T===95||jt(T)?(e.consume(T),A):W(T)?(a=C,z(T)):me(T)?(e.consume(T),C):H(T)}function A(T){return T===45||T===46||T===58||T===95||Nt(T)?(e.consume(T),A):M(T)}function M(T){return T===61?(e.consume(T),$):W(T)?(a=M,z(T)):me(T)?(e.consume(T),M):C(T)}function $(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),i=T,P):W(T)?(a=$,z(T)):me(T)?(e.consume(T),$):(e.consume(T),i=void 0,N)}function P(T){return T===i?(e.consume(T),O):T===null?n(T):W(T)?(a=P,z(T)):(e.consume(T),P)}function O(T){return T===62||T===47||Ae(T)?C(T):n(T)}function N(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===62||Ae(T)?C(T):(e.consume(T),N)}function z(T){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),Z(e,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function q(T){return e.enter("htmlTextData"),a(T)}function H(T){return T===62?(e.consume(T),e.exit("htmlTextData"),e.exit("htmlText"),t):n(T)}}const Wp={name:"labelEnd",tokenize:ZA,resolveTo:QA,resolveAll:XA},KA={tokenize:eF},JA={tokenize:tF},YA={tokenize:nF};function XA(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function QA(e,t){let n=e.length,r=0,i,o,s,a;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const l={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[s][1].end)},u={type:"labelText",start:Object.assign({},e[o+r+2][1].end),end:Object.assign({},e[s-2][1].start)};return a=[["enter",l,t],["enter",c,t]],a=Cn(a,e.slice(o+1,o+r+3)),a=Cn(a,[["enter",u,t]]),a=Cn(a,Uu(t.parser.constructs.insideSpan.null,e.slice(o+r+4,s-3),t)),a=Cn(a,[["exit",u,t],e[s-2],e[s-1],["exit",c,t]]),a=Cn(a,e.slice(s+1)),a=Cn(a,[["exit",l,t]]),mn(e,o,e.length,a),e}function ZA(e,t,n){const r=this;let i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return a;function a(u){return o?o._inactive?c(u):(s=r.parser.defined.includes(Pn(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelEnd"),l):n(u)}function l(u){return u===40?e.attempt(KA,t,s?t:c)(u):u===91?e.attempt(JA,t,s?e.attempt(YA,t,c):c)(u):s?t(u):c(u)}function c(u){return o._balanced=!0,n(u)}}function eF(e,t,n){return r;function r(l){return e.enter("resource"),e.enter("resourceMarker"),e.consume(l),e.exit("resourceMarker"),ar(e,i)}function i(l){return l===41?a(l):uk(e,o,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(l)}function o(l){return Ae(l)?ar(e,s)(l):a(l)}function s(l){return l===34||l===39||l===40?hk(e,ar(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(l):a(l)}function a(l){return l===41?(e.enter("resourceMarker"),e.consume(l),e.exit("resourceMarker"),e.exit("resource"),t):n(l)}}function tF(e,t,n){const r=this;return i;function i(s){return dk.call(r,e,o,n,"reference","referenceMarker","referenceString")(s)}function o(s){return r.parser.defined.includes(Pn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(s):n(s)}}function nF(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const rF={name:"labelStartImage",tokenize:iF,resolveAll:Wp.resolveAll};function iF(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const oF={name:"labelStartLink",tokenize:sF,resolveAll:Wp.resolveAll};function sF(e,t,n){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const Nd={name:"lineEnding",tokenize:aF};function aF(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Z(e,t,"linePrefix")}}const pc={name:"thematicBreak",tokenize:lF};function lF(e,t,n){let r=0,i;return o;function o(l){return e.enter("thematicBreak"),i=l,s(l)}function s(l){return l===i?(e.enter("thematicBreakSequence"),a(l)):me(l)?Z(e,s,"whitespace")(l):r<3||l!==null&&!W(l)?n(l):(e.exit("thematicBreak"),t(l))}function a(l){return l===i?(e.consume(l),r++,a):(e.exit("thematicBreakSequence"),s(l))}}const Yt={name:"list",tokenize:dF,continuation:{tokenize:hF},exit:pF},cF={tokenize:mF,partial:!0},uF={tokenize:fF,partial:!0};function dF(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return a;function a(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Xc(f)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(pc,n,c)(f):c(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(f)}return n(f)}function l(f){return Xc(f)&&++s<10?(e.consume(f),l):(!r.interrupt||s<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),c(f)):n(f)}function c(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(al,r.interrupt?n:u,e.attempt(cF,h,d))}function u(f){return r.containerState.initialBlankLine=!0,o++,h(f)}function d(f){return me(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function hF(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(al,i,o);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Z(e,t,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!me(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(uF,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Z(e,e.attempt(Yt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function fF(e,t,n){const r=this;return Z(e,i,"listItemIndent",r.containerState.size+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(o):n(o)}}function pF(e){e.exit(this.containerState.type)}function mF(e,t,n){const r=this;return Z(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(o){const s=r.events[r.events.length-1];return!me(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const u0={name:"setextUnderline",tokenize:bF,resolveTo:gF};function gF(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[o][1].end)):e[r][1]=s,e.push(["exit",s,t]),e}function bF(e,t,n){const r=this;let i=r.events.length,o,s;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){s=r.events[i][1].type==="paragraph";break}return a;function a(u){return!r.parser.lazy[r.now().line]&&(r.interrupt||s)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),o=u,l(u)):n(u)}function l(u){return u===o?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Z(e,c,"lineSuffix")(u))}function c(u){return u===null||W(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const yF={tokenize:wF};function wF(e){const t=this,n=e.attempt(al,r,e.attempt(this.parser.constructs.flowInitial,i,Z(e,e.attempt(this.parser.constructs.flow,i,e.attempt(SA,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const kF={resolveAll:pk()},_F=fk("string"),DF=fk("text");function fk(e){return{tokenize:t,resolveAll:pk(e==="text"?xF:void 0)};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,s,a);return s;function s(u){return c(u)?o(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),o(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const d=i[u];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function pk(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function xF(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,s=-1,a=0,l;for(;o--;){const c=i[o];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(c===-2)l=!0,a++;else if(c!==-1){o++;break}}if(a){const c={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+o,_bufferIndex:o?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},c.start),r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}function CF(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},o=[];let s=[],a=[];const l={consume:k,enter:_,exit:S,attempt:w(v),check:w(g),interrupt:w(g,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:f,sliceSerialize:h,now:p,defineSkip:m,write:d};let u=t.tokenize.call(c,l);return t.resolveAll&&o.push(t),c;function d(C){return s=Cn(s,C),b(),s[s.length-1]!==null?[]:(D(t,0),c.events=Uu(o,c.events,c),c.events)}function h(C,A){return SF(f(C),A)}function f(C){return vF(s,C)}function p(){return Object.assign({},r)}function m(C){i[C.line]=C.column,E()}function b(){let C;for(;r._index<s.length;){const A=s[r._index];if(typeof A=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<A.length;)y(A.charCodeAt(r._bufferIndex));else y(A)}}function y(C){u=u(C)}function k(C){W(C)?(r.line++,r.column=1,r.offset+=C===-3?2:1,E()):C!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=C}function _(C,A){const M=A||{};return M.type=C,M.start=p(),c.events.push(["enter",M,c]),a.push(M),M}function S(C){const A=a.pop();return A.end=p(),c.events.push(["exit",A,c]),A}function v(C,A){D(C,A.from)}function g(C,A){A.restore()}function w(C,A){return M;function M($,P,O){let N,z,q,H;return Array.isArray($)?F($):"tokenize"in $?F([$]):T($);function T(re){return I;function I(fe){const he=fe!==null&&re[fe],He=fe!==null&&re.null,Kt=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(He)?He:He?[He]:[]];return F(Kt)(fe)}}function F(re){return N=re,z=0,re.length===0?O:ee(re[z])}function ee(re){return I;function I(fe){return H=x(),q=re,re.partial||(c.currentConstruct=re),re.name&&c.parser.constructs.disable.null.includes(re.name)?ce():re.tokenize.call(A?Object.assign(Object.create(c),A):c,l,de,ce)(fe)}}function de(re){return C(q,H),P}function ce(re){return H.restore(),++z<N.length?ee(N[z]):O}}}function D(C,A){C.resolveAll&&!o.includes(C)&&o.push(C),C.resolve&&mn(c.events,A,c.events.length-A,C.resolve(c.events.slice(A),c)),C.resolveTo&&(c.events=C.resolveTo(c.events,c))}function x(){const C=p(),A=c.previous,M=c.currentConstruct,$=c.events.length,P=Array.from(a);return{restore:O,from:$};function O(){r=C,c.previous=A,c.currentConstruct=M,c.events.length=$,a=P,E()}}function E(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function vF(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;return n===i?s=[e[n].slice(r,o)]:(s=e.slice(n,i),r>-1&&(s[0]=s[0].slice(r)),o>0&&s.push(e[i].slice(0,o))),s}function SF(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}const EF={[42]:Yt,[43]:Yt,[45]:Yt,[48]:Yt,[49]:Yt,[50]:Yt,[51]:Yt,[52]:Yt,[53]:Yt,[54]:Yt,[55]:Yt,[56]:Yt,[57]:Yt,[62]:sk},AF={[91]:MA},FF={[-2]:Od,[-1]:Od,[32]:Od},TF={[35]:RA,[42]:pc,[45]:[u0,pc],[60]:zA,[61]:u0,[95]:pc,[96]:gf,[126]:gf},MF={[38]:lk,[92]:ak},OF={[-5]:Nd,[-4]:Nd,[-3]:Nd,[33]:rF,[38]:lk,[42]:mf,[60]:[cA,HA],[91]:oF,[92]:[$A,ak],[93]:Wp,[95]:mf,[96]:_A},NF={null:[mf,kF]},LF={null:[42,95]},$F={null:[]},IF=Object.freeze(Object.defineProperty({__proto__:null,document:EF,contentInitial:AF,flowInitial:FF,flow:TF,string:MF,text:OF,insideSpan:NF,attentionMarkers:LF,disable:$F},Symbol.toStringTag,{value:"Module"}));function RF(e={}){const t=ok([IF].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(nA),document:r(iA),flow:r(yF),string:r(_F),text:r(DF)};return n;function r(i){return o;function o(s){return CF(n,i,s)}}}const d0=/[\0\t\n\r]/g;function BF(){let e=1,t="",n=!0,r;return i;function i(o,s,a){const l=[];let c,u,d,h,f;for(o=t+o.toString(s),d=0,t="",n&&(o.charCodeAt(0)===65279&&d++,n=void 0);d<o.length;){if(d0.lastIndex=d,c=d0.exec(o),h=c&&c.index!==void 0?c.index:o.length,f=o.charCodeAt(h),!c){t=o.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(o.slice(d,h)),e+=h-d),f){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}function PF(e){for(;!ck(e););return e}function mk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCharCode(n)}const jF=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function gk(e){return e.replace(jF,zF)}function zF(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return mk(n.slice(o?2:1),o?16:10)}return Aa(n)||e}function la(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?h0(e.position):"start"in e||"end"in e?h0(e):"line"in e||"column"in e?bf(e):""}function bf(e){return f0(e&&e.line)+":"+f0(e&&e.column)}function h0(e){return bf(e&&e.start)+"-"+bf(e&&e.end)}function f0(e){return e&&typeof e=="number"?e:1}const yf={}.hasOwnProperty,VF=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),UF(n)(PF(RF(n).document().write(BF()(e,t,!0))))};function UF(e={}){const t=bk({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Xn),autolinkProtocol:A,autolinkEmail:A,atxHeading:l(Jn),blockQuote:l(Kn),characterEscape:A,characterReference:A,codeFenced:l(Rt),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(Rt,c),codeText:l(_n,c),codeTextData:A,data:A,codeFlowValue:A,definition:l(Gr),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(Dr),hardBreakEscape:l(Yn),hardBreakTrailing:l(Yn),htmlFlow:l(Ln,c),htmlFlowData:A,htmlText:l(Ln,c),htmlTextData:A,image:l(ft),label:c,link:l(Xn),listItem:l(U),listItemValue:m,listOrdered:l(xr,p),listUnordered:l(xr),paragraph:l(K),reference:re,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(Jn),strong:l(rt),thematicBreak:l(Me)},exit:{atxHeading:d(),atxHeadingSequence:D,autolink:d(),autolinkEmail:Kt,autolinkProtocol:He,blockQuote:d(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:he,codeFenced:d(_),codeFencedFence:k,codeFencedFenceInfo:b,codeFencedFenceMeta:y,codeFlowValue:M,codeIndented:d(S),codeText:d(z),codeTextData:M,data:M,definition:d(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:g,emphasis:d(),hardBreakEscape:d(P),hardBreakTrailing:d(P),htmlFlow:d(O),htmlFlowData:M,htmlText:d(N),htmlTextData:M,image:d(H),label:F,labelText:T,lineEnding:$,link:d(q),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:I,resourceDestinationString:ee,resourceTitleString:de,resource:ce,setextHeading:d(C),setextHeadingLineSequence:E,setextHeadingText:x,strong:d(),thematicBreak:d()}},e.mdastExtensions||[]),n={};return r;function r(L){let j={type:"root",children:[]};const X=[j],ge=[],Bt=[],$s={stack:X,tokenStack:ge,config:t,enter:u,exit:h,buffer:c,resume:f,setData:o,getData:s};let Pe=-1;for(;++Pe<L.length;)if(L[Pe][1].type==="listOrdered"||L[Pe][1].type==="listUnordered")if(L[Pe][0]==="enter")Bt.push(Pe);else{const pt=Bt.pop();Pe=i(L,pt,Pe)}for(Pe=-1;++Pe<L.length;){const pt=t[L[Pe][0]];yf.call(pt,L[Pe][1].type)&&pt[L[Pe][1].type].call(Object.assign({sliceSerialize:L[Pe][2].sliceSerialize},$s),L[Pe][1])}if(ge.length>0){const pt=ge[ge.length-1];(pt[1]||p0).call($s,void 0,pt[0])}for(j.position={start:a(L.length>0?L[0][1].start:{line:1,column:1,offset:0}),end:a(L.length>0?L[L.length-2][1].end:{line:1,column:1,offset:0})},Pe=-1;++Pe<t.transforms.length;)j=t.transforms[Pe](j)||j;return j}function i(L,j,X){let ge=j-1,Bt=-1,$s=!1,Pe,pt,bo,Is;for(;++ge<=X;){const Je=L[ge];if(Je[1].type==="listUnordered"||Je[1].type==="listOrdered"||Je[1].type==="blockQuote"?(Je[0]==="enter"?Bt++:Bt--,Is=void 0):Je[1].type==="lineEndingBlank"?Je[0]==="enter"&&(Pe&&!Is&&!Bt&&!bo&&(bo=ge),Is=void 0):Je[1].type==="linePrefix"||Je[1].type==="listItemValue"||Je[1].type==="listItemMarker"||Je[1].type==="listItemPrefix"||Je[1].type==="listItemPrefixWhitespace"||(Is=void 0),!Bt&&Je[0]==="enter"&&Je[1].type==="listItemPrefix"||Bt===-1&&Je[0]==="exit"&&(Je[1].type==="listUnordered"||Je[1].type==="listOrdered")){if(Pe){let pd=ge;for(pt=void 0;pd--;){const Cr=L[pd];if(Cr[1].type==="lineEnding"||Cr[1].type==="lineEndingBlank"){if(Cr[0]==="exit")continue;pt&&(L[pt][1].type="lineEndingBlank",$s=!0),Cr[1].type="lineEnding",pt=pd}else if(!(Cr[1].type==="linePrefix"||Cr[1].type==="blockQuotePrefix"||Cr[1].type==="blockQuotePrefixWhitespace"||Cr[1].type==="blockQuoteMarker"||Cr[1].type==="listItemIndent"))break}bo&&(!pt||bo<pt)&&(Pe._spread=!0),Pe.end=Object.assign({},pt?L[pt][1].start:Je[1].end),L.splice(pt||ge,0,["exit",Pe,Je[2]]),ge++,X++}Je[1].type==="listItemPrefix"&&(Pe={type:"listItem",_spread:!1,start:Object.assign({},Je[1].start)},L.splice(ge,0,["enter",Pe,Je[2]]),ge++,X++,bo=void 0,Is=!0)}}return L[j][1]._spread=$s,X}function o(L,j){n[L]=j}function s(L){return n[L]}function a(L){return{line:L.line,column:L.column,offset:L.offset}}function l(L,j){return X;function X(ge){u.call(this,L(ge),ge),j&&j.call(this,ge)}}function c(){this.stack.push({type:"fragment",children:[]})}function u(L,j,X){return this.stack[this.stack.length-1].children.push(L),this.stack.push(L),this.tokenStack.push([j,X]),L.position={start:a(j.start)},L}function d(L){return j;function j(X){L&&L.call(this,X),h.call(this,X)}}function h(L,j){const X=this.stack.pop(),ge=this.tokenStack.pop();if(ge)ge[0].type!==L.type&&(j?j.call(this,L,ge[0]):(ge[1]||p0).call(this,L,ge[0]));else throw new Error("Cannot close `"+L.type+"` ("+la({start:L.start,end:L.end})+"): it\u2019s not open");return X.position.end=a(L.end),X}function f(){return qp(this.stack.pop())}function p(){o("expectingFirstListItemValue",!0)}function m(L){if(s("expectingFirstListItemValue")){const j=this.stack[this.stack.length-2];j.start=Number.parseInt(this.sliceSerialize(L),10),o("expectingFirstListItemValue")}}function b(){const L=this.resume(),j=this.stack[this.stack.length-1];j.lang=L}function y(){const L=this.resume(),j=this.stack[this.stack.length-1];j.meta=L}function k(){s("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function _(){const L=this.resume(),j=this.stack[this.stack.length-1];j.value=L.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),o("flowCodeInside")}function S(){const L=this.resume(),j=this.stack[this.stack.length-1];j.value=L.replace(/(\r?\n|\r)$/g,"")}function v(L){const j=this.resume(),X=this.stack[this.stack.length-1];X.label=j,X.identifier=Pn(this.sliceSerialize(L)).toLowerCase()}function g(){const L=this.resume(),j=this.stack[this.stack.length-1];j.title=L}function w(){const L=this.resume(),j=this.stack[this.stack.length-1];j.url=L}function D(L){const j=this.stack[this.stack.length-1];if(!j.depth){const X=this.sliceSerialize(L).length;j.depth=X}}function x(){o("setextHeadingSlurpLineEnding",!0)}function E(L){const j=this.stack[this.stack.length-1];j.depth=this.sliceSerialize(L).charCodeAt(0)===61?1:2}function C(){o("setextHeadingSlurpLineEnding")}function A(L){const j=this.stack[this.stack.length-1];let X=j.children[j.children.length-1];(!X||X.type!=="text")&&(X=Jt(),X.position={start:a(L.start)},j.children.push(X)),this.stack.push(X)}function M(L){const j=this.stack.pop();j.value+=this.sliceSerialize(L),j.position.end=a(L.end)}function $(L){const j=this.stack[this.stack.length-1];if(s("atHardBreak")){const X=j.children[j.children.length-1];X.position.end=a(L.end),o("atHardBreak");return}!s("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(j.type)&&(A.call(this,L),M.call(this,L))}function P(){o("atHardBreak",!0)}function O(){const L=this.resume(),j=this.stack[this.stack.length-1];j.value=L}function N(){const L=this.resume(),j=this.stack[this.stack.length-1];j.value=L}function z(){const L=this.resume(),j=this.stack[this.stack.length-1];j.value=L}function q(){const L=this.stack[this.stack.length-1];s("inReference")?(L.type+="Reference",L.referenceType=s("referenceType")||"shortcut",delete L.url,delete L.title):(delete L.identifier,delete L.label),o("referenceType")}function H(){const L=this.stack[this.stack.length-1];s("inReference")?(L.type+="Reference",L.referenceType=s("referenceType")||"shortcut",delete L.url,delete L.title):(delete L.identifier,delete L.label),o("referenceType")}function T(L){const j=this.stack[this.stack.length-2],X=this.sliceSerialize(L);j.label=gk(X),j.identifier=Pn(X).toLowerCase()}function F(){const L=this.stack[this.stack.length-1],j=this.resume(),X=this.stack[this.stack.length-1];o("inReference",!0),X.type==="link"?X.children=L.children:X.alt=j}function ee(){const L=this.resume(),j=this.stack[this.stack.length-1];j.url=L}function de(){const L=this.resume(),j=this.stack[this.stack.length-1];j.title=L}function ce(){o("inReference")}function re(){o("referenceType","collapsed")}function I(L){const j=this.resume(),X=this.stack[this.stack.length-1];X.label=j,X.identifier=Pn(this.sliceSerialize(L)).toLowerCase(),o("referenceType","full")}function fe(L){o("characterReferenceType",L.type)}function he(L){const j=this.sliceSerialize(L),X=s("characterReferenceType");let ge;X?(ge=mk(j,X==="characterReferenceMarkerNumeric"?10:16),o("characterReferenceType")):ge=Aa(j);const Bt=this.stack.pop();Bt.value+=ge,Bt.position.end=a(L.end)}function He(L){M.call(this,L);const j=this.stack[this.stack.length-1];j.url=this.sliceSerialize(L)}function Kt(L){M.call(this,L);const j=this.stack[this.stack.length-1];j.url="mailto:"+this.sliceSerialize(L)}function Kn(){return{type:"blockquote",children:[]}}function Rt(){return{type:"code",lang:null,meta:null,value:""}}function _n(){return{type:"inlineCode",value:""}}function Gr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Dr(){return{type:"emphasis",children:[]}}function Jn(){return{type:"heading",depth:void 0,children:[]}}function Yn(){return{type:"break"}}function Ln(){return{type:"html",value:""}}function ft(){return{type:"image",title:null,url:"",alt:null}}function Xn(){return{type:"link",title:null,url:"",children:[]}}function xr(L){return{type:"list",ordered:L.type==="listOrdered",start:null,spread:L._spread,children:[]}}function U(L){return{type:"listItem",spread:L._spread,checked:null,children:[]}}function K(){return{type:"paragraph",children:[]}}function rt(){return{type:"strong",children:[]}}function Jt(){return{type:"text",value:""}}function Me(){return{type:"thematicBreak"}}}function bk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?bk(e,r):qF(e,r)}return e}function qF(e,t){let n;for(n in t)if(yf.call(t,n)){const r=n==="canContainEols"||n==="transforms",o=(yf.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),s=t[n];s&&(r?e[n]=[...o,...s]:Object.assign(o,s))}}function p0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+la({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+la({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+la({start:t.start,end:t.end})+") is still open")}function wf(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return VF(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}const m0={}.hasOwnProperty;function WF(e,t){const n=t||{};function r(i,...o){let s=r.invalid;const a=r.handlers;if(i&&m0.call(i,e)){const l=String(i[e]);s=m0.call(a,l)?a[l]:r.unknown}if(s)return s.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function mc(e,t){let n=-1,r;if(t.extensions)for(;++n<t.extensions.length;)mc(e,t.extensions[n]);for(r in t)r==="extensions"||(r==="unsafe"||r==="join"?e[r]=[...e[r]||[],...t[r]||[]]:r==="handlers"?e[r]=Object.assign(e[r],t[r]||{}):e.options[r]=t[r]);return e}function HF(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const s=n.indentLines(n.containerFlow(e,o.current()),GF);return i(),s}function GF(e,t,n){return">"+(n?"":" ")+e}function yk(e,t){return g0(e,t.inConstruct,!0)&&!g0(e,t.notInConstruct,!1)}function g0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function b0(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&yk(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function KF(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>s&&(s=o):o=1,i=r+t.length,r=n.indexOf(t,i);return s}function kf(e,t){return Boolean(!t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function JF(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function YF(e,t,n,r){const i=JF(n),o=e.value||"",s=i==="`"?"GraveAccent":"Tilde";if(kf(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(o,XF);return d(),h}const a=n.createTracker(r),l=i.repeat(Math.max(KF(o,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(e.lang){const d=n.enter(`codeFencedLang${s}`);u+=a.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${s}`);u+=a.move(" "),u+=a.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),o&&(u+=a.move(o+`
`)),u+=a.move(l),c(),u}function XF(e,t,n){return(n?"":"    ")+e}function Hp(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function QF(e,t,n,r){const i=Hp(n),o=i==='"'?"Quote":"Apostrophe",s=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=n.enter(`title${o}`),c+=l.move(" "+i),c+=l.move(n.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),s(),c}function ZF(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}wk.peek=eT;function wk(e,t,n,r){const i=ZF(n),o=n.enter("emphasis"),s=n.createTracker(r);let a=s.move(i);return a+=s.move(n.containerPhrasing(e,{before:a,after:i,...s.current()})),a+=s.move(i),o(),a}function eT(e,t,n){return n.options.emphasis||"*"}const qu=function(e){if(e==null)return iT;if(typeof e=="string")return rT(e);if(typeof e=="object")return Array.isArray(e)?tT(e):nT(e);if(typeof e=="function")return Wu(e);throw new Error("Expected function, string, or object as test")};function tT(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=qu(e[n]);return Wu(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].call(this,...i))return!0;return!1}}function nT(e){return Wu(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function rT(e){return Wu(t);function t(n){return n&&n.type===e}}function Wu(e){return t;function t(...n){return Boolean(e.call(this,...n))}}function iT(){return!0}const oT=!0,_f="skip",Df=!1,kk=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=qu(t),o=r?-1:1;s(e,null,[])();function s(a,l,c){const u=typeof a=="object"&&a!==null?a:{};let d;return typeof u.type=="string"&&(d=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0,Object.defineProperty(h,"name",{value:"node ("+(u.type+(d?"<"+d+">":""))+")"})),h;function h(){let f=[],p,m,b;if((!t||i(a,l,c[c.length-1]||null))&&(f=sT(n(a,c)),f[0]===Df))return f;if(a.children&&f[0]!==_f)for(m=(r?a.children.length:-1)+o,b=c.concat(a);m>-1&&m<a.children.length;){if(p=s(a.children[m],m,b)(),p[0]===Df)return p;m=typeof p[1]=="number"?p[1]:m+o}return f}}};function sT(e){return Array.isArray(e)?e:typeof e=="number"?[oT,e]:[e]}const io=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),kk(e,t,i,r);function i(o,s){const a=s[s.length-1];return n(o,a?a.children.indexOf(o):null,a)}};function _k(e,t){let n=!1;return io(e,r=>{if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Df}),Boolean((!e.depth||e.depth<3)&&qp(e)&&(t.options.setext||n))}function aT(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(_k(e,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const s="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");o.move(s+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(c)&&(c="&#x"+c.charCodeAt(0).toString(16).toUpperCase()+";"+c.slice(1)),c=c?s+" "+c:s,n.options.closeAtx&&(c+=" "+s),l(),a(),c}Dk.peek=lT;function Dk(e){return e.value||""}function lT(){return"<"}xk.peek=cT;function xk(e,t,n,r){const i=Hp(n),o=i==='"'?"Quote":"Apostrophe",s=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${o}`),c+=l.move(" "+i),c+=l.move(n.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),s(),c}function cT(){return"!"}Ck.peek=uT;function Ck(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let s=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return s(),n.stack=u,o(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function uT(){return"!"}function vk(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}Gp.peek=dT;function Gp(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const s=n.unsafe[o],a=vk(s);let l;if(!!s.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function dT(){return"`"}function Sk(e,t){const n=qp(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Ek.peek=hT;function Ek(e,t,n,r){const i=Hp(n),o=i==='"'?"Quote":"Apostrophe",s=n.createTracker(r);let a,l;if(Sk(e,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let d=s.move("<");return d+=s.move(n.containerPhrasing(e,{before:d,after:">",...s.current()})),d+=s.move(">"),a(),n.stack=u,d}a=n.enter("link"),l=n.enter("label");let c=s.move("[");return c+=s.move(n.containerPhrasing(e,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(e.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=n.enter("destinationRaw"),c+=s.move(n.safe(e.url,{before:c,after:e.title?" ":")",...s.current()}))),l(),e.title&&(l=n.enter(`title${o}`),c+=s.move(" "+i),c+=s.move(n.safe(e.title,{before:c,after:i,...s.current()})),c+=s.move(i),l()),c+=s.move(")"),a(),c}function hT(e,t,n){return Sk(e,n)?"<":"["}Ak.peek=fT;function Ak(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let s=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return s(),n.stack=u,o(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function fT(){return"["}function Kp(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function pT(e){const t=Kp(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Fk(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function mT(e){const t=Fk(e),n=e.options.bulletOrderedOther;if(!n)return t==="."?")":".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrderedOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bulletOrdered` (`"+t+"`) and `bulletOrderedOther` (`"+n+"`) to be different");return n}function Tk(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function gT(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let s=e.ordered?Fk(n):Kp(n);const a=e.ordered?mT(n):pT(n),l=n.bulletLastUsed;let c=!1;if(t&&(e.ordered?n.options.bulletOrderedOther:n.options.bulletOther)&&l&&s===l&&(c=!0),!e.ordered){const d=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Tk(n)===s&&d){let h=-1;for(;++h<e.children.length;){const f=e.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(s=a),n.bulletCurrent=s;const u=n.containerFlow(e,r);return n.bulletLastUsed=s,n.bulletCurrent=o,i(),u}function bT(e){const t=e.options.listItemIndent||"tab";if(t===1||t==="1")return"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Mk(e,t,n,r){const i=bT(n);let o=n.bulletCurrent||Kp(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let s=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const a=n.createTracker(r);a.move(o+" ".repeat(s-o.length)),a.shift(s);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),u);return l(),c;function u(d,h,f){return h?(f?"":" ".repeat(s))+d:(f?o:o+" ".repeat(s-o.length))+d}}function yT(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),s=n.containerPhrasing(e,r);return o(),i(),s}const wT=qu(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","link","linkReference","strong","text"]);function kT(e,t,n,r){return(e.children.some(s=>wT(s))?n.containerPhrasing:n.containerFlow).call(n,e,r)}function _T(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Ok.peek=DT;function Ok(e,t,n,r){const i=_T(n),o=n.enter("strong"),s=n.createTracker(r);let a=s.move(i+i);return a+=s.move(n.containerPhrasing(e,{before:a,after:i,...s.current()})),a+=s.move(i+i),o(),a}function DT(e,t,n){return n.options.strong||"*"}function xT(e,t,n,r){return n.safe(e.value,r)}function CT(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function vT(e,t,n){const r=(Tk(n)+(n.options.ruleSpaces?" ":"")).repeat(CT(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Ao={blockquote:HF,break:b0,code:YF,definition:QF,emphasis:wk,hardBreak:b0,heading:aT,html:Dk,image:xk,imageReference:Ck,inlineCode:Gp,link:Ek,linkReference:Ak,list:gT,listItem:Mk,paragraph:yT,root:kT,strong:Ok,text:xT,thematicBreak:vT},ST=[ET];function ET(e,t,n,r){if(t.type==="code"&&kf(t,r)&&(e.type==="list"||e.type===t.type&&kf(e,r))||e.type==="list"&&e.type===t.type&&Boolean(e.ordered)===Boolean(t.ordered)&&!(e.ordered?r.options.bulletOrderedOther:r.options.bulletOther))return!1;if("spread"in n&&typeof n.spread=="boolean")return e.type==="paragraph"&&(e.type===t.type||t.type==="definition"||t.type==="heading"&&_k(t,r))?void 0:n.spread?1:0}const Ni=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],AT=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Ni},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Ni},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Ni},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Ni},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Ni},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Ni},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Ni},{atBreak:!0,character:"~"}];function xf(e){return e.label||!e.identifier?e.label||"":gk(e.identifier)}function Jp(e,t,n){const r=t.indexStack,i=e.children||[],o=[];let s=-1,a=n.before;r.push(-1);let l=t.createTracker(n);for(;++s<i.length;){const c=i[s];let u;if(r[r.length-1]=s,s+1<i.length){let d=t.handle.handlers[i[s+1].type];d&&d.peek&&(d=d.peek),u=d?d(i[s+1],e,t,{before:"",after:"",...l.current()}).charAt(0):""}else u=n.after;o.length>0&&(a==="\r"||a===`
`)&&c.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),a=" ",l=t.createTracker(n),l.move(o.join(""))),o.push(l.move(t.handle(c,e,t,{...l.current(),before:a,after:u}))),a=o[o.length-1].slice(-1)}return r.pop(),o.join("")}function Nk(e,t,n){const r=t.indexStack,i=e.children||[],o=t.createTracker(n),s=[];let a=-1;for(r.push(-1);++a<i.length;){const l=i[a];r[r.length-1]=a,s.push(o.move(t.handle(l,e,t,{before:`
`,after:`
`,...o.current()}))),l.type!=="list"&&(t.bulletLastUsed=void 0),a<i.length-1&&s.push(o.move(FT(l,i[a+1],e,t)))}return r.pop(),s.join("")}function FT(e,t,n,r){let i=r.join.length;for(;i--;){const o=r.join[i](e,t,n,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const TT=/\r?\n|\r/g;function Lk(e,t){const n=[];let r=0,i=0,o;for(;o=TT.exec(e);)s(e.slice(r,o.index)),n.push(o[0]),r=o.index+o[0].length,i++;return s(e.slice(r)),n.join("");function s(a){n.push(t(a,i,!a))}}function Cf(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),i=[],o=[],s={};let a=-1;for(;++a<e.unsafe.length;){const u=e.unsafe[a];if(!yk(e.stack,u))continue;const d=vk(u);let h;for(;h=d.exec(r);){const f="before"in u||Boolean(u.atBreak),p="after"in u,m=h.index+(f?h[1].length:0);i.includes(m)?(s[m].before&&!f&&(s[m].before=!1),s[m].after&&!p&&(s[m].after=!1)):(i.push(m),s[m]={before:f,after:p})}}i.sort(MT);let l=n.before?n.before.length:0;const c=r.length-(n.after?n.after.length:0);for(a=-1;++a<i.length;){const u=i[a];u<l||u>=c||u+1<c&&i[a+1]===u+1&&s[u].after&&!s[u+1].before&&!s[u+1].after||i[a-1]===u-1&&s[u].before&&!s[u-1].before&&!s[u-1].after||(l!==u&&o.push(y0(r.slice(l,u),"\\")),l=u,/[!-/:-@[-`{-~]/.test(r.charAt(u))&&(!n.encode||!n.encode.includes(r.charAt(u)))?o.push("\\"):(o.push("&#x"+r.charCodeAt(u).toString(16).toUpperCase()+";"),l++))}return o.push(y0(r.slice(l,c),n.after)),o.join("")}function MT(e,t){return e-t}function y0(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=e+t;let s=-1,a=0,l;for(;l=n.exec(o);)r.push(l.index);for(;++s<r.length;)a!==r[s]&&i.push(e.slice(a,r[s])),i.push("\\"),a=r[s];return i.push(e.slice(a)),i.join("")}function Fa(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,i=n.line||1,o=n.column||1;return{move:l,current:s,shift:a};function s(){return{now:{line:i,column:o},lineShift:r}}function a(c){r+=c}function l(c){const u=c||"",d=u.split(/\r?\n|\r/g),h=d[d.length-1];return i+=d.length-1,o=d.length===1?o+h.length:1+h.length+r,u}}function OT(e,t={}){const n={enter:i,indentLines:Lk,associationId:xf,containerPhrasing:IT,containerFlow:RT,createTracker:Fa,safe:BT,stack:[],unsafe:[],join:[],handlers:{},options:{},indexStack:[],handle:void 0};mc(n,{unsafe:AT,join:ST,handlers:Ao}),mc(n,t),n.options.tightDefinitions&&mc(n,{join:[$T]}),n.handle=WF("type",{invalid:NT,unknown:LT,handlers:n.handlers});let r=n.handle(e,void 0,n,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return r&&r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r;function i(o){return n.stack.push(o),s;function s(){n.stack.pop()}}}function NT(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function LT(e){throw new Error("Cannot handle unknown node `"+e.type+"`")}function $T(e,t){if(e.type==="definition"&&e.type===t.type)return 0}function IT(e,t){return Jp(e,this,t)}function RT(e,t){return Nk(e,this,t)}function BT(e,t){return Cf(this,e,t)}function vf(e){Object.assign(this,{Compiler:n=>{const r=this.data("settings");return OT(n,Object.assign({},r,e,{extensions:this.data("toMarkdownExtensions")||[]}))}})}function w0(e){if(e)throw e}var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var $k=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},gc=Object.prototype.hasOwnProperty,Ik=Object.prototype.toString,k0=Object.defineProperty,_0=Object.getOwnPropertyDescriptor,D0=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Ik.call(t)==="[object Array]"},x0=function(t){if(!t||Ik.call(t)!=="[object Object]")return!1;var n=gc.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&gc.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||gc.call(t,i)},C0=function(t,n){k0&&n.name==="__proto__"?k0(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},v0=function(t,n){if(n==="__proto__")if(gc.call(t,n)){if(_0)return _0(t,n).value}else return;return t[n]},S0=function e(){var t,n,r,i,o,s,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(t=arguments[l],t!=null)for(n in t)r=v0(a,n),i=v0(t,n),a!==i&&(u&&i&&(x0(i)||(o=D0(i)))?(o?(o=!1,s=r&&D0(r)?r:[]):s=r&&x0(r)?r:{},C0(a,{name:n,newValue:e(u,s,i)})):typeof i<"u"&&C0(a,{name:n,newValue:i}));return a};function Sf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function jT(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...i);function a(l,...c){const u=e[++o];let d=-1;if(l){s(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?zT(u,a)(...c):s(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function zT(e,t){let n;return r;function r(...s){const a=e.length>s.length;let l;a&&s.push(i);try{l=e.apply(this,s)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l instanceof Promise?l.then(o,i):l instanceof Error?i(l):o(l))}function i(s,...a){n||(n=!0,t(s,...a))}function o(s){i(null,s)}}class Nn extends Error{constructor(t,n,r){const i=[null,null];let o={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const s=r.indexOf(":");s===-1?i[1]=r:(i[0]=r.slice(0,s),i[1]=r.slice(s+1))}n&&("type"in n||"position"in n?n.position&&(o=n.position):"start"in n||"end"in n?o=n:("line"in n||"column"in n)&&(o.start=n)),this.name=la(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=o.start.line,this.column=o.start.column,this.position=o,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Nn.prototype.file="";Nn.prototype.name="";Nn.prototype.reason="";Nn.prototype.message="";Nn.prototype.stack="";Nn.prototype.fatal=null;Nn.prototype.column=null;Nn.prototype.line=null;Nn.prototype.source=null;Nn.prototype.ruleId=null;Nn.prototype.position=null;const nr={basename:VT,dirname:UT,extname:qT,join:WT,sep:"/"};function VT(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ll(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function UT(e){if(ll(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function qT(e){ll(e);let t=e.length,n=-1,r=0,i=-1,o=0,s;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function WT(...e){let t=-1,n;for(;++t<e.length;)ll(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":HT(n)}function HT(e){ll(e);const t=e.charCodeAt(0)===47;let n=GT(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function GT(e,t){let n="",r=0,i=-1,o=0,s=-1,a,l;for(;++s<=e.length;){if(s<e.length)a=e.charCodeAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=s,o=0;continue}}else if(n.length>0){n="",r=0,i=s,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function ll(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const KT={cwd:JT};function JT(){return"/"}function Ef(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function YT(e){if(typeof e=="string")e=new URL(e);else if(!Ef(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return XT(e)}function XT(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Ld=["history","path","basename","stem","extname","dirname"];class QT{constructor(t){let n;t?typeof t=="string"||$k(t)?n={value:t}:Ef(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=KT.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<Ld.length;){const o=Ld[r];o in n&&n[o]!==void 0&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)Ld.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){Ef(t)&&(t=YT(t)),Id(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?nr.dirname(this.path):void 0}set dirname(t){E0(this.basename,"dirname"),this.path=nr.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?nr.basename(this.path):void 0}set basename(t){Id(t,"basename"),$d(t,"basename"),this.path=nr.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?nr.extname(this.path):void 0}set extname(t){if($d(t,"extname"),E0(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=nr.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?nr.basename(this.path,this.extname):void 0}set stem(t){Id(t,"stem"),$d(t,"stem"),this.path=nr.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new Nn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function $d(e,t){if(e&&e.includes(nr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+nr.sep+"`")}function Id(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function E0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Af=Bk().freeze(),Rk={}.hasOwnProperty;function Bk(){const e=jT(),t=[];let n={},r,i=-1;return o.data=s,o.Parser=void 0,o.Compiler=void 0,o.freeze=a,o.attachers=t,o.use=l,o.parse=c,o.stringify=u,o.run=d,o.runSync=h,o.process=f,o.processSync=p,o;function o(){const m=Bk();let b=-1;for(;++b<t.length;)m.use(...t[b]);return m.data(S0(!0,{},n)),m}function s(m,b){return typeof m=="string"?arguments.length===2?(Pd("data",r),n[m]=b,o):Rk.call(n,m)&&n[m]||null:m?(Pd("data",r),n=m,o):n}function a(){if(r)return o;for(;++i<t.length;){const[m,...b]=t[i];if(b[0]===!1)continue;b[0]===!0&&(b[0]=void 0);const y=m.call(o,...b);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,o}function l(m,...b){let y;if(Pd("use",r),m!=null)if(typeof m=="function")v(m,...b);else if(typeof m=="object")Array.isArray(m)?S(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),o;function k(g){if(typeof g=="function")v(g);else if(typeof g=="object")if(Array.isArray(g)){const[w,...D]=g;v(w,...D)}else _(g);else throw new TypeError("Expected usable value, not `"+g+"`")}function _(g){S(g.plugins),g.settings&&(y=Object.assign(y||{},g.settings))}function S(g){let w=-1;if(g!=null)if(Array.isArray(g))for(;++w<g.length;){const D=g[w];k(D)}else throw new TypeError("Expected a list of plugins, not `"+g+"`")}function v(g,w){let D=-1,x;for(;++D<t.length;)if(t[D][0]===g){x=t[D];break}x?(Sf(x[1])&&Sf(w)&&(w=S0(!0,x[1],w)),x[1]=w):t.push([...arguments])}}function c(m){o.freeze();const b=Ps(m),y=o.Parser;return Rd("parse",y),A0(y,"parse")?new y(String(b),b).parse():y(String(b),b)}function u(m,b){o.freeze();const y=Ps(b),k=o.Compiler;return Bd("stringify",k),F0(m),A0(k,"compile")?new k(m,y).compile():k(m,y)}function d(m,b,y){if(F0(m),o.freeze(),!y&&typeof b=="function"&&(y=b,b=void 0),!y)return new Promise(k);k(null,y);function k(_,S){e.run(m,Ps(b),v);function v(g,w,D){w=w||m,g?S(g):_?_(w):y(null,w,D)}}}function h(m,b){let y,k;return o.run(m,b,_),T0("runSync","run",k),y;function _(S,v){w0(S),y=v,k=!0}}function f(m,b){if(o.freeze(),Rd("process",o.Parser),Bd("process",o.Compiler),!b)return new Promise(y);y(null,b);function y(k,_){const S=Ps(m);o.run(o.parse(S),S,(g,w,D)=>{if(g||!w||!D)v(g);else{const x=o.stringify(w,D);x==null||(t3(x)?D.value=x:D.result=x),v(g,D)}});function v(g,w){g||!w?_(g):k?k(w):b(null,w)}}}function p(m){let b;o.freeze(),Rd("processSync",o.Parser),Bd("processSync",o.Compiler);const y=Ps(m);return o.process(y,k),T0("processSync","process",b),y;function k(_){b=!0,w0(_)}}}function A0(e,t){return typeof e=="function"&&e.prototype&&(ZT(e.prototype)||t in e.prototype)}function ZT(e){let t;for(t in e)if(Rk.call(e,t))return!0;return!1}function Rd(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function Bd(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Pd(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function F0(e){if(!Sf(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function T0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ps(e){return e3(e)?e:new QT(e)}function e3(e){return Boolean(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function t3(e){return typeof e=="string"||$k(e)}const dn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Ta=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let M0=null;const Ar=function(e,t,n){let r=M0||(M0=document.createRange());return r.setEnd(e,n==null?e.nodeValue.length:n),r.setStart(e,t||0),r},oo=function(e,t,n,r){return n&&(O0(e,t,n,r,-1)||O0(e,t,n,r,1))},n3=/^(img|br|input|textarea|hr)$/i;function O0(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:lr(e))){let o=e.parentNode;if(!o||o.nodeType!=1||i3(e)||n3.test(e.nodeName)||e.contentEditable=="false")return!1;t=dn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){if(e=e.childNodes[t+(i<0?-1:0)],e.contentEditable=="false")return!1;t=i<0?lr(e):0}else return!1}}function lr(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function r3(e,t,n){for(let r=t==0,i=t==lr(e);r||i;){if(e==n)return!0;let o=dn(e);if(e=e.parentNode,!e)return!1;r=r&&o==0,i=i&&o==lr(e)}}function i3(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Hu=function(e){return e.focusNode&&oo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Ro(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function o3(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}const Di=typeof navigator<"u"?navigator:null,N0=typeof document<"u"?document:null,Ai=Di&&Di.userAgent||"",Ff=/Edge\/(\d+)/.exec(Ai),Pk=/MSIE \d/.exec(Ai),Tf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ai),sn=!!(Pk||Tf||Ff),di=Pk?document.documentMode:Tf?+Tf[1]:Ff?+Ff[1]:0,qn=!sn&&/gecko\/(\d+)/i.test(Ai);qn&&+(/Firefox\/(\d+)/.exec(Ai)||[0,0])[1];const Mf=!sn&&/Chrome\/(\d+)/.exec(Ai),tn=!!Mf,s3=Mf?+Mf[1]:0,Ut=!sn&&!!Di&&/Apple Computer/.test(Di.vendor),ps=Ut&&(/Mobile\/\w+/.test(Ai)||!!Di&&Di.maxTouchPoints>2),Dn=ps||(Di?/Mac/.test(Di.platform):!1),cr=/Android \d/.test(Ai),Gu=!!N0&&"webkitFontSmoothing"in N0.documentElement.style,a3=Gu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function l3(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Kr(e,t){return typeof e=="number"?e:e[t]}function c3(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function L0(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;s=Ta(s)){if(s.nodeType!=1)continue;let a=s,l=a==o.body,c=l?l3(o):c3(a),u=0,d=0;if(t.top<c.top+Kr(r,"top")?d=-(c.top-t.top+Kr(i,"top")):t.bottom>c.bottom-Kr(r,"bottom")&&(d=t.bottom-c.bottom+Kr(i,"bottom")),t.left<c.left+Kr(r,"left")?u=-(c.left-t.left+Kr(i,"left")):t.right>c.right-Kr(r,"right")&&(u=t.right-c.right+Kr(i,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,f=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-h,m=a.scrollTop-f;t={left:t.left-p,top:t.top-m,right:t.right-p,bottom:t.bottom-m}}if(l)break}}function u3(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let o=(t.left+t.right)/2,s=n+1;s<Math.min(innerHeight,t.bottom);s+=5){let a=e.root.elementFromPoint(o,s);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:jk(e.dom)}}function jk(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Ta(r));return t}function d3({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;zk(n,r==0?0:r-t)}function zk(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let yo=null;function h3(e){if(e.setActive)return e.setActive();if(yo)return e.focus(yo);let t=jk(e);e.focus(yo==null?{get preventScroll(){return yo={preventScroll:!0},!0}}:void 0),yo||(yo=!1,zk(t,0))}function Vk(e,t){let n,r=2e8,i,o=0,s=t.top,a=t.top;for(let l=e.firstChild,c=0;l;l=l.nextSibling,c++){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=Ar(l).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);let f=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(f<r){n=l,r=f,i=f&&n.nodeType==3?{left:h.right<t.left?h.right:h.left,top:t.top}:t,l.nodeType==1&&f&&(o=c+(t.left>=(h.left+h.right)/2?1:0));continue}}!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(o=c+1)}}return n&&n.nodeType==3?f3(n,i):!n||r&&n.nodeType==1?{node:e,offset:o}:Vk(n,i)}function f3(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let o=Qr(r,1);if(o.top!=o.bottom&&Yp(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function Yp(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function p3(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function m3(e,t,n){let{node:r,offset:i}=Vk(t,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}function g3(e,t,n,r){let i=-1;for(let o=t;o!=e.dom;){let s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){let a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else if(a.right<r.left||a.bottom<r.top)i=s.posAfter;else break}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,1)}function Uk(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=e.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Yp(t,c))return Uk(s,t,c)}}if((o=(o+1)%r)==i)break}return e}function b3(e,t){let n=e.dom.ownerDocument,r,i=0;if(n.caretPositionFromPoint)try{let l=n.caretPositionFromPoint(t.left,t.top);l&&({offsetNode:r,offset:i}=l)}catch{}if(!r&&n.caretRangeFromPoint){let l=n.caretRangeFromPoint(t.left,t.top);l&&({startContainer:r,startOffset:i}=l)}let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),s;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let l=e.dom.getBoundingClientRect();if(!Yp(t,l)||(o=Uk(e.dom,t,l),!o))return null}if(Ut)for(let l=o;r&&l;l=Ta(l))l.draggable&&(r=void 0);if(o=p3(o,t),r){if(qn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let l=r.childNodes[i],c;l.nodeName=="IMG"&&(c=l.getBoundingClientRect()).right<=t.left&&c.bottom>t.top&&i++}r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(s=g3(e,r,i,t))}s==null&&(s=m3(e,o,t));let a=e.docView.nearestDesc(o,!0);return{pos:s,inside:a?a.posAtStart-a.border:-1}}function Qr(e,t){let n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}const y3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function qk(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),s=Gu||qn;if(r.nodeType==3)if(s&&(y3.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Qr(Ar(r,i,i),n);if(qn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Qr(Ar(r,i-1,i-1),-1);if(c.top==l.top){let u=Qr(Ar(r,i,i+1),-1);if(u.top!=l.top)return js(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,js(Qr(Ar(r,l,c),1),u<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==lr(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return jd(l.getBoundingClientRect(),!1)}if(o==null&&i<lr(r)){let l=r.childNodes[i];if(l.nodeType==1)return jd(l.getBoundingClientRect(),!0)}return jd(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==lr(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Ar(l,lr(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return js(Qr(c,1),!1)}if(o==null&&i<lr(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Ar(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return js(Qr(c,-1),!0)}return js(Qr(r.nodeType==3?Ar(r):r,-n),n>=0)}function js(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function jd(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Wk(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function w3(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return Wk(e,t,()=>{let{node:o}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.dom;break}o=a.dom.parentNode}let s=qk(e,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Ar(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const k3=/[\u0590-\u08ac]/;function _3(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=e.domSelection();return!k3.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:Wk(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=e.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:p,focusOffset:m}=e.domSelectionRange(),b=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),b})}let $0=null,I0=null,R0=!1;function D3(e,t,n){return $0==t&&I0==n?R0:($0=t,I0=n,R0=n=="up"||n=="down"?w3(e,t,n):_3(e,t,n))}const jn=0,B0=1,Bo=2,br=3;class cl{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=jn,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let o,s;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(t==this.contentDOM)o=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>dn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))r=!1;else return o}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==t&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<o)return i.descAt(t-r-i.border);r=o}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>t||s instanceof Gk){i=t-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Hk&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?dn(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?dn(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&t<=c){let u=s+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=s;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=dn(h.dom)+1;break}t-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=dn(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let o=Math.min(t,n),s=Math.max(t,n);for(let h=0,f=0;h<this.children.length;h++){let p=this.children[h],m=f+p.size;if(o>f&&s<m)return p.setSelection(t-f-p.border,n-f-p.border,r,i);f=m}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((qn||Ut)&&t==n){let{node:h,offset:f}=a;if(h.nodeType==3){if(u=!!(f&&h.nodeValue[f-1]==`
`),u&&f==h.nodeValue.length)for(let p=h,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:dn(m)+1});break}let b=p.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let p=h.childNodes[f-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(qn&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||u&&Ut)&&oo(a.node,a.offset,c.anchorNode,c.anchorOffset)&&oo(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||t==n)&&!u){c.collapse(a.node,a.offset);try{t!=n&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(t>n){let f=a;a=l,l=f}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?t<=s&&n>=r:t<s&&n>r){let a=r+o.border,l=s-o.border;if(t>=a&&n<=l){this.dirty=t==r||n==s?Bo:B0,t==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=br:o.markDirty(t-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Bo:br}r=s}this.dirty=Bo}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Bo:B0;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Hk extends cl{constructor(t,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(t){return this.dirty==jn&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class x3 extends cl{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class so extends cl{constructor(t,n,r,i){super(t,[],r,i),this.mark=n}static create(t,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=dr.renderSpec(document,n.type.spec.toDOM(n,r))),new so(t,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&br||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return this.dirty!=br&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=jn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=jn}}slice(t,n,r){let i=so.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Lf(o,n,s,r)),t>0&&(o=Lf(o,0,t,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}}class ao extends cl{constructor(t,n,r,i,o,s,a,l,c){super(t,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a,s&&this.updateChildren(l,c)}static create(t,n,r,i,o,s){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=dr.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=Yk(u,r,n),c?l=new C3(t,n,r,i,u,d||null,h,c,o,s+1):n.isText?new Ku(t,n,r,i,u,h,o):new ao(t,n,r,i,u,d||null,h,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>B.empty)}return t}matchesNode(t,n,r){return this.dirty==jn&&t.eq(this.node)&&Nf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,o=t.composing?this.localCompositionInfo(t,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new S3(this,s&&s.node,t);F3(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?xe.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,i)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,t);let f;l.findNodeMatch(c,u,d,h)||a&&t.state.selection.from>i&&t.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,f,t)||l.updateNextNode(c,u,d,t,h)||l.addNode(c,u,d,t,i),i+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Bo)&&(s&&this.protectLocalComposition(t,s),Kk(this.contentDOM,this.children,t),ps&&T3(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof ne)||r<n||i>n+this.node.content.size)return null;let o=t.domSelectionRange(),s=M3(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=O3(this.node.content,a,r-n,i-n);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new x3(this,o,n,i);t.input.compositionNodes.push(s),this.children=Lf(this.children,r,r+i.length,t,s)}update(t,n,r,i){return this.dirty==br||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=jn}updateOuterDeco(t){if(Nf(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Jk(this.dom,this.nodeDOM,Of(this.outerDeco,this.node,n),Of(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function P0(e,t,n,r,i){return Yk(r,t,e),new ao(void 0,e,t,n,r,r,r,i,0)}class Ku extends ao{constructor(t,n,r,i,o,s,a){super(t,n,r,i,o,null,s,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==br||this.dirty!=jn&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=jn||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=jn,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),o=document.createTextNode(i.text);return new Ku(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=br)}get domAtom(){return!1}}class Gk extends cl{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==jn&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class C3 extends ao{constructor(t,n,r,i,o,s,a,l,c,u){super(t,n,r,i,o,s,a,c,u),this.spec=l}update(t,n,r,i){if(this.dirty==br)return!1;if(this.spec.update){let o=this.spec.update(t,n,r);return o&&this.updateInner(t,n,r,i),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Kk(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=j0(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(s instanceof so){let l=r?r.previousSibling:e.lastChild;Kk(s.contentDOM,s.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=j0(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const ca=function(e){e&&(this.nodeName=e)};ca.prototype=Object.create(null);const ji=[new ca];function Of(e,t,n){if(e.length==0)return ji;let r=n?ji[0]:new ca,i=[r];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(!!s){s.nodeName&&i.push(r=new ca(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&i.length==1&&i.push(r=new ca(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function Jk(e,t,n,r){if(n==ji&&r==ji)return t;let i=t;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=ji[0]),i=l}v3(i,a||ji[0],s)}return i}function v3(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&e.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&e.classList.add(i[o]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function Yk(e,t,n){return Jk(e,e,ji,Of(t,n,e.nodeType!=1))}function Nf(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function j0(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class S3{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=E3(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,t.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=jn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(this.top.children[l].matchesMark(t[o])){a=l;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=so.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,n,r,i,o){let s=this.top.children[i];return s.dirty==br&&s.dom==s.contentDOM&&(s.dirty=Bo),s.update(t,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof ao){let l=this.preMatch.matched.get(a);if(l!=null&&l!=o)return!1;let c=a.dom;if(!(this.lock&&(c==this.lock||c.nodeType==1&&c.contains(this.lock.parentNode))&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=br&&Nf(n,a.outerDeco)))&&a.update(t,n,r,i))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(t,n,r,i,o){this.top.children.splice(this.index++,0,ao.create(this.top,t,n,r,i,o)),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Hk(this.top,t,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof so;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof Ku)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Ut||tn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Gk(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}}function E3(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof so)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(!!l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function A3(e,t){return e.type.side-t.type.side}function F3(e,t,n,r){let i=t.locals(e),o=0;if(i.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);r(u,i,t.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<i.length&&i[s].to==o){let p=i[s++],m;for(;s<i.length&&i[s].to==o;)(m||(m=[p])).push(i[s++]);if(m){m.sort(A3);for(let b=0;b<m.length;b++)n(m[b],c,!!l)}else n(p,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else if(c<e.childCount)d=c,u=e.child(c++);else break;for(let p=0;p<a.length;p++)a[p].to<=o&&a.splice(p--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let h=o+u.nodeSize;if(u.isText){let p=h;s<i.length&&i[s].from<p&&(p=i[s].from);for(let m=0;m<a.length;m++)a[m].to<p&&(p=a[m].to);p<h&&(l=u.cut(p-o),u=u.cut(0,p-o),h=p,d=-1)}let f=u.isInline&&!u.isLeaf?a.filter(p=>!p.inline):a.slice();r(u,f,t.forChild(o,u),d),o=h}}function T3(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function M3(e,t){for(;;){if(e.nodeType==3)return e;if(e.nodeType==1&&t>0){if(e.childNodes.length>t&&e.childNodes[t].nodeType==3)return e.childNodes[t];e=e.childNodes[t-1],t=lr(e)}else if(e.nodeType==1&&t<e.childNodes.length)e=e.childNodes[t],t=0;else return null}}function O3(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let c=e.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){let c=a<r?l.lastIndexOf(t,r-a-1):-1;if(c>=0&&c+t.length+a>=n)return a+c;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function Lf(e,t,n,r,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function Xp(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(Hu(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&Y.isSelectable(u)&&i.parent&&!(u.isInline&&r3(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new Y(s==d?a:r.resolve(d))}}else{let u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=t=="pointer"||e.state.selection.head<a.pos&&!o?1:-1;c=Qp(e,l,a,u)}return c}function Xk(e){return e.editable?e.hasFocus():Zk(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function $r(e,t=!1){let n=e.state.selection;if(Qk(e,n),!!Xk(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&tn){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&oo(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)L3(e);else{let{anchor:r,head:i}=n,o,s;z0&&!(n instanceof ne)&&(n.$from.parent.inlineContent||(o=V0(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=V0(e,n.to))),e.docView.setSelection(r,i,e.root,t),z0&&(o&&U0(o),s&&U0(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&N3(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const z0=Ut||tn&&s3<63;function V0(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Ut&&i&&i.contentEditable=="false")return zd(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return zd(i);if(o)return zd(o)}}function zd(e){return e.contentEditable="true",Ut&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function U0(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function N3(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!Xk(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function L3(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,dn(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&sn&&di<=11&&(r.disabled=!0,r.disabled=!1)}function Qk(e,t){if(t instanceof Y){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(q0(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else q0(e)}function q0(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Qp(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||ne.between(t,n,r)}function W0(e){return e.editable&&!e.hasFocus()?!1:Zk(e)}function Zk(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function $3(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return oo(t.node,t.offset,n.anchorNode,n.anchorOffset)}function $f(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&te.findFrom(o,t)}function Pi(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function H0(e,t,n){let r=e.state.selection;if(r instanceof ne){if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){let i=$f(e.state,t);return i&&i instanceof Y?Pi(e,i):!1}else if(!(Dn&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=t<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=e.docView.descAt(a))&&!s.contentDOM?Y.isSelectable(o)?Pi(e,new Y(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):Gu?Pi(e,new ne(e.state.doc.resolve(t<0?a:a+o.nodeSize))):!1:!1}}else{if(r instanceof Y&&r.node.isInline)return Pi(e,new ne(t>0?r.$to:r.$from));{let i=$f(e.state,t);return i?Pi(e,i):!1}}}function Zc(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function ua(e){let t=e.pmViewDesc;return t&&t.size==0&&(e.nextSibling||e.nodeName!="BR")}function Vd(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=!1;for(qn&&n.nodeType==1&&r<Zc(n)&&ua(n.childNodes[r])&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(ua(a))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(e_(n))break;{let a=n.previousSibling;for(;a&&ua(a);)i=n.parentNode,o=dn(a),a=a.previousSibling;if(a)n=a,r=Zc(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?If(e,n,r):i&&If(e,i,o)}function Ud(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Zc(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(ua(a))o=n,s=++r;else break}else{if(e_(n))break;{let a=n.nextSibling;for(;a&&ua(a);)o=a.parentNode,s=dn(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Zc(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}o&&If(e,o,s)}function e_(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function If(e,t,n){let r=e.domSelection();if(Hu(r)){let o=document.createRange();o.setEnd(t,n),o.setStart(t,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&$r(e)},50)}function G0(e,t,n){let r=e.state.selection;if(r instanceof ne&&!r.empty||n.indexOf("s")>-1||Dn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=$f(e.state,t);if(s&&s instanceof Y)return Pi(e,s)}if(!i.parent.inlineContent){let s=t<0?i:o,a=r instanceof pn?te.near(s,t):te.findFrom(s,t);return a?Pi(e,a):!1}return!1}function K0(e,t){if(!(e.state.selection instanceof ne))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=e.state.tr;return t<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),e.dispatch(s),!0}return!1}function J0(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function I3(e){if(!Ut||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;J0(e,r,"true"),setTimeout(()=>J0(e,r,"false"),20)}return!1}function R3(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function B3(e,t){let n=t.keyCode,r=R3(t);return n==8||Dn&&n==72&&r=="c"?K0(e,-1)||Vd(e):n==46||Dn&&n==68&&r=="c"?K0(e,1)||Ud(e):n==13||n==27?!0:n==37||Dn&&n==66&&r=="c"?H0(e,-1,r)||Vd(e):n==39||Dn&&n==70&&r=="c"?H0(e,1,r)||Ud(e):n==38||Dn&&n==80&&r=="c"?G0(e,-1,r)||Vd(e):n==40||Dn&&n==78&&r=="c"?I3(e)||G0(e,1,r)||Ud(e):r==(Dn?"m":"c")&&(n==66||n==73||n==89||n==90)}function t_(e,t){e.someProp("transformCopied",f=>{t=f(t,e)});let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let s=e.someProp("clipboardSerializer")||dr.fromSchema(e.state.schema),a=a_(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=s_[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",f=>f(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:h}}function n_(e,t,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!t)return null;let l=t&&(r||o||!n);if(l){if(e.someProp("transformPastedText",h=>{t=h(t,o||r,e)}),o)return t?new V(B.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):V.empty;let d=e.someProp("clipboardTextParser",h=>h(t,i,r,e));if(d)a=d;else{let h=i.marks(),{schema:f}=e.state,p=dr.fromSchema(f);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(m=>{let b=s.appendChild(document.createElement("p"));m&&b.appendChild(p.serializeNode(f.text(m,h)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),s=z3(n),Gu&&V3(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||us.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!P3.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=U3(Y0(a,+u[1],+u[2]),u[4]);else if(a=V.maxOpen(j3(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=Y0(a,d,h)}return e.someProp("transformPasted",d=>{a=d(a,e)}),a}const P3=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function j3(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),o,s=[];if(e.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&i_(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=o_(s[s.length-1],o.length));let u=r_(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return B.from(s)}return e}function r_(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,B.from(e));return e}function i_(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=i_(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(B.from(r_(n,e,i+1))))}}function o_(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,o_(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(B.empty,!0);return e.copy(n.append(r))}function Rf(e,t,n,r,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return i<r-1&&(a=Rf(a,t,n,r,i+1,o)),i>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(B.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function Y0(e,t,n){return t<e.openStart&&(e=new V(Rf(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new V(Rf(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const s_={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let X0=null;function a_(){return X0||(X0=document.implementation.createHTMLDocument("title"))}function z3(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=a_().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&s_[r[1].toLowerCase()])&&(e=i.map(o=>"<"+o+">").join("")+e+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=e,i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function V3(e){let t=e.querySelectorAll(tn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function U3(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:o,openEnd:s}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=B.from(l.create(r[a+1],i)),o++,s++}return new V(i,o,s)}const qt={},Wt={},q3={touchstart:!0,touchmove:!0};class W3{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function H3(e){for(let t in qt){let n=qt[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{K3(e,r)&&!Zp(e,r)&&(e.editable||!(r.type in Wt))&&n(e,r)},q3[t]?{passive:!0}:void 0)}Ut&&e.dom.addEventListener("input",()=>null),Bf(e)}function li(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function G3(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function Bf(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>Zp(e,r))})}function Zp(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function K3(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function J3(e,t){!Zp(e,t)&&qt[t.type]&&(e.editable||!(t.type in Wt))&&qt[t.type](e,t)}Wt.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!c_(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(cr&&tn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),ps&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,Ro(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||B3(e,n)?n.preventDefault():li(e,"key")};Wt.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Wt.keypress=(e,t)=>{let n=t;if(c_(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Dn&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof ne)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i))||e.dispatch(e.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Ju(e){return{left:e.clientX,top:e.clientY}}function Y3(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function em(e,t,n,r,i){if(r==-1)return!1;let o=e.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,a=>s>o.depth?a(e,n,o.nodeAfter,o.before(s),i,!0):a(e,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Go(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);n=="pointer"&&r.setMeta("pointer",!0),e.dispatch(r)}function X3(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Y.isSelectable(r)?(Go(e,new Y(n),"pointer"),!0):!1}function Q3(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Y&&(r=n.node);let o=e.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(Y.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Go(e,Y.create(e.state.doc,i),"pointer"),!0):!1}function Z3(e,t,n,r,i){return em(e,"handleClickOn",t,n,r)||e.someProp("handleClick",o=>o(e,t,r))||(i?Q3(e,n):X3(e,n))}function eM(e,t,n,r){return em(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function tM(e,t,n,r){return em(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||nM(e,n,r)}function nM(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Go(e,ne.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(t);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Go(e,ne.create(r,a+1,a+1+s.content.size),"pointer");else if(Y.isSelectable(s))Go(e,Y.create(r,a),"pointer");else continue;return!0}}function tm(e){return eu(e)}const l_=Dn?"metaKey":"ctrlKey";qt.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=tm(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&Y3(n,e.input.lastClick)&&!n[l_]&&(e.input.lastClick.type=="singleClick"?o="doubleClick":e.input.lastClick.type=="doubleClick"&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=e.posAtCoords(Ju(n));!s||(o=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new rM(e,s,n,!!r)):(o=="doubleClick"?eM:tM)(e,s.pos,s.inside,n)?n.preventDefault():li(e,"pointer"))};class rM{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[l_],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=t.state.doc.nodeAt(n.inside),s=n.inside;else{let u=t.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const a=i?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=t.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Y&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),li(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>$r(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ju(t))),this.updateAllowDefault(t),this.allowDefault||!n?li(this.view,"pointer"):Z3(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Ut&&this.mightDrag&&!this.mightDrag.node.isAtom||tn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Go(this.view,te.near(this.view.state.doc.resolve(n.pos)),"pointer"),t.preventDefault()):li(this.view,"pointer")}move(t){this.updateAllowDefault(t),li(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}qt.touchstart=e=>{e.input.lastTouch=Date.now(),tm(e),li(e,"pointer")};qt.touchmove=e=>{e.input.lastTouch=Date.now(),li(e,"pointer")};qt.contextmenu=e=>tm(e);function c_(e,t){return e.composing?!0:Ut&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const iM=cr?5e3:-1;Wt.compositionstart=Wt.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),eu(e,!0),e.markCursor=null;else if(eu(e),qn&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){e.domSelection().collapse(s,s.nodeValue.length);break}else i=s,o=-1}}e.input.composing=!0}u_(e,iM)};Wt.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,u_(e,20))};function u_(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>eu(e),t))}function d_(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=oM());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function oM(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function eu(e,t=!1){if(!(cr&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),d_(e),t||e.docView&&e.docView.dirty){let n=Xp(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}function sM(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const ms=sn&&di<15||ps&&a3<604;qt.copy=Wt.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let o=ms?null:n.clipboardData,s=r.content(),{dom:a,text:l}=t_(e,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):sM(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function aM(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function lM(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Pf(e,r.value,null,t):Pf(e,r.textContent,r.innerHTML,t)},50)}function Pf(e,t,n,r){let i=n_(e,t,n,e.input.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",a=>a(e,r,i||V.empty)))return!0;if(!i)return!1;let o=aM(i),s=o?e.state.tr.replaceSelectionWith(o,e.input.shiftKey):e.state.tr.replaceSelection(i);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Wt.paste=(e,t)=>{let n=t;if(e.composing&&!cr)return;let r=ms?null:n.clipboardData;r&&Pf(e,r.getData("text/plain"),r.getData("text/html"),n)?n.preventDefault():lM(e,n)};class cM{constructor(t,n){this.slice=t,this.move=n}}const h_=Dn?"altKey":"ctrlKey";qt.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,o=i.empty?null:e.posAtCoords(Ju(n));if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Y?i.to-1:i.to))){if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(Y.create(e.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let c=e.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=e.docView&&e.dispatch(e.state.tr.setSelection(Y.create(e.state.doc,c.posBefore)))}}let s=e.state.selection.content(),{dom:a,text:l}=t_(e,s);n.dataTransfer.clearData(),n.dataTransfer.setData(ms?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",ms||n.dataTransfer.setData("text/plain",l),e.dragging=new cM(s,!n[h_])};qt.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Wt.dragover=Wt.dragenter=(e,t)=>t.preventDefault();Wt.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Ju(n));if(!i)return;let o=e.state.doc.resolve(i.pos),s=r&&r.slice;s?e.someProp("transformPasted",p=>{s=p(s,e)}):s=n_(e,n.dataTransfer.getData(ms?"Text":"text/plain"),ms?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[h_]);if(e.someProp("handleDrop",p=>p(e,n,s||V.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?zp(e.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=e.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&Y.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Y(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,b,y,k)=>p=k),c.setSelection(Qp(e,f,c.doc.resolve(p)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))};qt.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&$r(e)},20))};qt.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};qt.beforeinput=(e,t)=>{if(tn&&cr&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",o=>o(e,Ro(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Wt)qt[e]=Wt[e];function Ma(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class nm{constructor(t,n){this.toDOM=t,this.spec=n||Ji,this.side=this.spec.side||0}map(t,n,r,i){let{pos:o,deleted:s}=t.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Ke(o-r,o-r,this)}valid(){return!0}eq(t){return this==t||t instanceof nm&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Ma(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class hi{constructor(t,n){this.attrs=t,this.spec=n||Ji}map(t,n,r,i){let o=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Ke(o,s,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof hi&&Ma(this.attrs,t.attrs)&&Ma(this.spec,t.spec)}static is(t){return t.type instanceof hi}destroy(){}}class rm{constructor(t,n){this.attrs=t,this.spec=n||Ji}map(t,n,r,i){let o=t.mapResult(n.from+i,1);if(o.deleted)return null;let s=t.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Ke(o.pos-r,s.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),o;return i==n.from&&!(o=t.child(r)).isText&&i+o.nodeSize==n.to}eq(t){return this==t||t instanceof rm&&Ma(this.attrs,t.attrs)&&Ma(this.spec,t.spec)}destroy(){}}class Ke{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Ke(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Ke(t,t,new nm(n,r))}static inline(t,n,r,i){return new Ke(t,n,new hi(r,i))}static node(t,n,r,i){return new Ke(t,n,new rm(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof hi}}const Fo=[],Ji={};class ve{constructor(t,n){this.local=t.length?t:Fo,this.children=n.length?n:Fo}static create(t,n){return n.length?tu(n,t,0,Ji):At}find(t,n,r){let i=[];return this.findInner(t==null?0:t,n==null?1e9:n,i,0,r),i}findInner(t,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=t&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>t){let a=this.children[s]+1;this.children[s+2].findInner(t-a,n-a,r,i+a,o)}}map(t,n,r){return this==At||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Ji)}mapInner(t,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?uM(this.children,s||[],t,n,r,i,o):s?new ve(s.sort(Yi),Fo):At}add(t,n){return n.length?this==At?ve.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,o=0;t.forEach((a,l)=>{let c=l+r,u;if(!!(u=p_(n,a,c))){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,tu(u,a,c+1,Ji)),o+=3}});let s=f_(o?m_(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new ve(s.length?this.local.concat(s).sort(Yi):this.local,i||this.children)}remove(t){return t.length==0||this==At?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<t.length;u++)(d=t[u])&&d.from>a&&d.to<l&&(t[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=At?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<t.length;o++)if(s=t[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ve(i,r):At}forChild(t,n){if(this==At)return this;if(n.isLeaf)return ve.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let o=t+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof hi){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new ve(i.sort(Yi),Fo);return r?new ti([a,r]):a}return r||At}eq(t){if(this==t)return!0;if(!(t instanceof ve)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return im(this.localsInner(t))}localsInner(t){if(this==At)return Fo;if(t.inlineContent||!this.local.some(hi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof hi||n.push(this.local[r]);return n}}ve.empty=new ve([],[]);ve.removeOverlap=im;const At=ve.empty;class ti{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Ji));return ti.from(r)}forChild(t,n){if(n.isLeaf)return ve.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(t,n);o!=At&&(o instanceof ti?r=r.concat(o.members):r.push(o))}return ti.from(r)}eq(t){if(!(t instanceof ti)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(t);if(!!o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?im(r?n:n.sort(Yi)):Fo}static from(t){switch(t.length){case 0:return At;case 1:return t[0];default:return new ti(t.every(n=>n instanceof ve)?t:t.reduce((n,r)=>n.concat(r instanceof ve?r:r.members),[]))}}}function uM(e,t,n,r,i,o,s){let a=e.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,f,p,m)=>{let b=m-p-(f-h);for(let y=0;y<a.length;y+=3){let k=a[y+1];if(k<0||h>k+u-d)continue;let _=a[y]+u-d;f>=_?a[y+1]=h<=_?-2:-1:p>=i&&b&&(a[y]+=b,a[y+1]+=b)}d+=b}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(e[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(e[c+1]+o,-1),f=h-i,{index:p,offset:m}=r.content.findIndex(d),b=r.maybeChild(p);if(b&&m==d&&m+b.nodeSize==f){let y=a[c+2].mapInner(n,b,u+1,e[c]+o+1,s);y!=At?(a[c]=d,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=dM(a,e,t,n,i,o,s),u=tu(c,r,0,s);t=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ve(t.sort(Yi),a)}function f_(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Ke(i.from+t,i.to+t,i.type))}return n}function dM(e,t,n,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+o+1);return n}function p_(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let o=0,s;o<e.length;o++)(s=e[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),e[o]=null);return i}function m_(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function tu(e,t,n,r){let i=[],o=!1;t.forEach((a,l)=>{let c=p_(e,a,l+n);if(c){o=!0;let u=tu(c,a,n+l+1,r);u!=At&&i.push(l,l+a.nodeSize,u)}});let s=f_(o?m_(e):e,-n).sort(Yi);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new ve(s,i):At}function Yi(e,t){return e.from-t.from||e.to-t.to}function im(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),Q0(t,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),Q0(t,i,r.copy(o.from,r.to)));break}}}return t}function Q0(e,t,n){for(;t<e.length&&Yi(n,e[t])>0;)t++;e.splice(t,0,n)}function qd(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=At&&t.push(r)}),e.cursorWrapper&&t.push(ve.create(e.state.doc,[e.cursorWrapper.deco])),ti.from(t)}const hM={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},fM=sn&&di<=11;class pM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class mM{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pM,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);sn&&di<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),fM&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,hM)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!W0(this.view)){if(this.suppressingSelectionUpdates)return $r(this.view);if(sn&&di<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&oo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let o=t.focusNode;o;o=Ta(o))n.add(o);for(let o=t.anchorNode;o;o=Ta(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.observer?this.observer.takeRecords():[];this.queue.length&&(n=this.queue.concat(n),this.queue.length=0);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&W0(t)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(qn&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],h=u[1];d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}}let c=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&t.input.lastTouch<Date.now()-300&&Hu(r)&&(c=Xp(t))&&c.eq(te.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,$r(t),this.currentSelection.set(r),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),gM(t)),this.handleDOMChange(o,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||$r(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++)n.push(t.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,o=t.nextSibling;if(sn&&di<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=t.addedNodes[u];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(o=h)}let s=i&&i.parentNode==t.target?dn(i)+1:0,a=r.localPosFromDOM(t.target,s,-1),l=o&&o.parentNode==t.target?dn(o):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Z0=new WeakMap,eb=!1;function gM(e){if(!Z0.has(e)&&(Z0.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=qn,eb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),eb=!0}}function bM(e){let t;function n(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return oo(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function yM(e,t,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Hu(l)||c.push({node:l.focusNode,offset:l.focusOffset})),tn&&e.input.lastKeyCode===8)for(let b=o;b>i;b--){let y=r.childNodes[b-1],k=y.pmViewDesc;if(y.nodeName=="BR"&&!k){o=b;break}if(!k||k.size)break}let d=e.state.doc,h=e.someProp("domParser")||us.fromSchema(e.state.schema),f=d.resolve(s),p=null,m=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:o,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:wM,context:f});if(c&&c[0].pos!=null){let b=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=b),p={anchor:b+s,head:y+s}}return{doc:m,sel:p,from:s,to:a}}function wM(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Ut&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Ut&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}function kM(e,t,n,r,i){if(t<0){let D=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,x=Xp(e,D);if(x&&!e.state.selection.eq(x)){let E=e.state.tr.setSelection(x);D=="pointer"?E.setMeta("pointer",!0):D=="key"&&E.scrollIntoView(),e.dispatch(E)}return}let o=e.state.doc.resolve(t),s=o.sharedDepth(n);t=o.before(s+1),n=e.state.doc.resolve(n).after(s+1);let a=e.state.selection,l=yM(e,t,n),c=e.state.doc,u=c.slice(l.from,l.to),d,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,h="end"):(d=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let f=xM(u.content,l.doc.content,l.from,d,h);if((ps&&e.input.lastIOSEnter>Date.now()-225||cr)&&i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"||D.nodeName=="LI")&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",D=>D(e,Ro(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!f)if(r&&a instanceof ne&&!a.empty&&a.$head.sameParent(a.$anchor)&&!e.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))f={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let D=tb(e,e.state.doc,l.sel);D&&!D.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(D))}return}if(tn&&e.cursorWrapper&&l.sel&&l.sel.anchor==e.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let D=f.endB-f.start;l.sel={anchor:l.sel.anchor+D,head:l.sel.anchor+D}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof ne&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=l.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=l.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),sn&&di<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>l.from&&l.doc.textBetween(f.start-l.from-1,f.start-l.from+1)==" \xA0"&&(f.start--,f.endA--,f.endB--);let p=l.doc.resolveNoCache(f.start-l.from),m=l.doc.resolveNoCache(f.endB-l.from),b=c.resolve(f.start),y=p.sameParent(m)&&p.parent.inlineContent&&b.end()>=f.endA,k;if((ps&&e.input.lastIOSEnter>Date.now()-225&&(!y||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!y&&p.pos<l.doc.content.size&&(k=te.findFrom(l.doc.resolve(p.pos+1),1,!0))&&k.head==m.pos)&&e.someProp("handleKeyDown",D=>D(e,Ro(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>f.start&&DM(c,f.start,f.endA,p,m)&&e.someProp("handleKeyDown",D=>D(e,Ro(8,"Backspace")))){cr&&tn&&e.domObserver.suppressSelectionUpdates();return}tn&&cr&&f.endB==f.start&&(e.input.lastAndroidDelete=Date.now()),cr&&!y&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==f.endA&&(f.endB-=2,m=l.doc.resolveNoCache(f.endB-l.from),setTimeout(()=>{e.someProp("handleKeyDown",function(D){return D(e,Ro(13,"Enter"))})},20));let _=f.start,S=f.endA,v,g,w;if(y){if(p.pos==m.pos)sn&&di<=11&&p.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>$r(e),20)),v=e.state.tr.delete(_,S),g=c.resolve(f.start).marksAcross(c.resolve(f.endA));else if(f.endA==f.endB&&(w=_M(p.parent.content.cut(p.parentOffset,m.parentOffset),b.parent.content.cut(b.parentOffset,f.endA-b.start()))))v=e.state.tr,w.type=="add"?v.addMark(_,S,w.mark):v.removeMark(_,S,w.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let D=p.parent.textBetween(p.parentOffset,m.parentOffset);if(e.someProp("handleTextInput",x=>x(e,_,S,D)))return;v=e.state.tr.insertText(D,_,S)}}if(v||(v=e.state.tr.replace(_,S,l.doc.slice(f.start-l.from,f.endB-l.from))),l.sel){let D=tb(e,v.doc,l.sel);D&&!(tn&&cr&&e.composing&&D.empty&&(f.start!=f.endB||e.input.lastAndroidDelete<Date.now()-100)&&(D.head==_||D.head==v.mapping.map(S)-1)||sn&&D.empty&&D.head==_)&&v.setSelection(D)}g&&v.ensureMarks(g),e.dispatch(v.scrollIntoView())}function tb(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Qp(e,t.resolve(n.anchor),t.resolve(n.head))}function _M(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(B.from(c).eq(e))return{mark:a,type:s}}function DM(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||Wd(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(Wd(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Wd(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Wd(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let o=e.node(r).maybeChild(e.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function xM(e,t,n,r,i){let o=e.findDiffStart(t,n);if(o==null)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&e.size<t.size){let l=r<=o&&r>=s?o-r:0;o-=l,a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}class g_{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new W3,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(sb),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=ib(this),rb(this),this.nodeViews=ob(this),this.docView=P0(this.state.doc,nb(this),qd(this),this.dom,this),this.domObserver=new mM(this,(r,i,o,s)=>kM(this,r,i,o,s)),this.domObserver.start(),H3(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Bf(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(sb),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){let r=this.state,i=!1,o=!1;t.storedMarks&&this.composing&&(d_(this),o=!0),this.state=t;let s=r.plugins!=t.plugins||this._props.plugins!=n.plugins;if(s||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=ob(this);vM(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(s||n.handleDOMEvents!=this._props.handleDOMEvents)&&Bf(this),this.editable=ib(this),rb(this);let a=qd(this),l=nb(this),c=r.plugins!=t.plugins&&!r.doc.eq(t.doc)?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(t.doc,l,a);(u||!t.selection.eq(r.selection))&&(o=!0);let d=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&u3(this);if(o){this.domObserver.stop();let h=u&&(sn||tn)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&CM(r.selection,t.selection);if(u){let f=tn?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(t.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=P0(t.doc,l,a,this.dom,this)),f&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$3(this))?$r(this,h):(Qk(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&d3(d)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Y){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&L0(this,n.getBoundingClientRect(),t)}else L0(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[t];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[t];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(sn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&h3(this.dom),$r(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}posAtCoords(t){return b3(this,t)}coordsAtPos(t,n=1){return qk(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return D3(this,n||this.state,t)}destroy(){!this.docView||(G3(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],qd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(t){return J3(this,t)}dispatch(t){let n=this._props.dispatchTransaction;n?n.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){return Ut&&this.root.nodeType===11&&o3(this.dom.ownerDocument)==this.dom?bM(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function nb(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"&&(t.class+=" "+n[r]),r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),[Ke.node(0,e.state.doc.content.size,t)]}function rb(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ke.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function ib(e){return!e.someProp("editable",t=>t(e.state)===!1)}function CM(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function ob(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function vM(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function sb(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}class ln{constructor(t,n){this.match=t,this.match=t,this.handler=typeof n=="string"?SM(n):n}}function SM(e){return function(t,n,r,i){let o=e;if(n[1]){let s=n[0].lastIndexOf(n[1]);o+=n[0].slice(s+n[1].length),r+=s;let a=r-i;a>0&&(o=n[0].slice(s-a,s)+o,r=i)}return t.tr.insertText(o,r,i)}}new ln(/--$/,"\u2014");new ln(/\.\.\.$/,"\u2026");new ln(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C");new ln(/"$/,"\u201D");new ln(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018");new ln(/'$/,"\u2019");function Es(e,t,n=null,r){return new ln(e,(i,o,s,a)=>{let l=n instanceof Function?n(o):n,c=i.tr.delete(s,a),u=c.doc.resolve(s),d=u.blockRange(),h=d&&J1(d,t,l);if(!h)return null;c.wrap(d,h);let f=c.doc.resolve(s-1).nodeBefore;return f&&f.type==t&&Pu(c.doc,s-1)&&(!r||r(o,f))&&c.join(s-1),c})}function jf(e,t,n=null){return new ln(e,(r,i,o,s)=>{let a=r.doc.resolve(o),l=n instanceof Function?n(i):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t)?r.tr.delete(o,s).setBlockType(o,o,t,l):null})}const xi=typeof navigator<"u"?navigator:null,ab=typeof document<"u"?document:null,Fi=xi&&xi.userAgent||"",zf=/Edge\/(\d+)/.exec(Fi),b_=/MSIE \d/.exec(Fi),Vf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fi),Yu=!!(b_||Vf||zf),EM=b_?document.documentMode:Vf?+Vf[1]:zf?+zf[1]:0,y_=!Yu&&/gecko\/(\d+)/i.test(Fi),AM=y_&&+(/Firefox\/(\d+)/.exec(Fi)||[0,0])[1],Uf=!Yu&&/Chrome\/(\d+)/.exec(Fi),FM=!!Uf,TM=Uf?+Uf[1]:0,w_=!Yu&&!!xi&&/Apple Computer/.test(xi.vendor),k_=w_&&(/Mobile\/\w+/.test(Fi)||!!xi&&xi.maxTouchPoints>2),MM=k_||(xi?/Mac/.test(xi.platform):!1),OM=/Android \d/.test(Fi),__=!!ab&&"webkitFontSmoothing"in ab.documentElement.style,NM=__?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var Po=Object.freeze({__proto__:null,ie:Yu,ie_version:EM,gecko:y_,gecko_version:AM,chrome:FM,chrome_version:TM,safari:w_,ios:k_,mac:MM,android:OM,webkit:__,webkit_version:NM});function Hd(e,t,n,r,i,o){if(e.composing)return!1;const s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;const l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"\uFFFC")+r;for(let c=0;c<i.length;c++){const u=i[c].match.exec(l),d=u&&u[0]&&i[c].handler(s,u,t-(u[0].length-r.length),n);if(!!d)return e.dispatch(d.setMeta(o,{transform:d,from:t,to:n,text:r})),!0}return!1}const LM=new _e("MILKDOWN_CUSTOM_INPUTRULES"),$M=({rules:e})=>{const t=new ye({key:LM,isInputRules:!0,state:{init(){return null},apply(n,r){const i=n.getMeta(this);return i||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,i,o){return Hd(n,r,i,o,e,t)},handleDOMEvents:{compositionend:n=>(setTimeout(()=>{const{$cursor:r}=n.state.selection;r&&Hd(n,r.pos,r.pos,"",e,t)}),!1)},handleKeyDown(n,r){if(r.key!=="Enter")return!1;const{$cursor:i}=n.state.selection;return i?Hd(n,i.pos,i.pos,`
`,e,t):!1}}});return t},om=(e,t,n)=>{const r=e.state,{from:i}=r.selection,{node:o}=e.domAtPos(i),s=o instanceof Text?o.parentElement:o;if(!(s instanceof HTMLElement))throw Lt(s);const a=s.getBoundingClientRect(),l=t.getBoundingClientRect(),c=t.parentElement;if(!c)throw Lt(c);const u=c.getBoundingClientRect(),[d,h]=n(a,l,u);t.style.top=`${d}px`,t.style.left=`${h}px`},sm=(e,t,n)=>{const r=e.state,{from:i,to:o}=r.selection,s=e.coordsAtPos(i),a=e.coordsAtPos(o),l=t.getBoundingClientRect(),c=t.parentElement;if(!c)throw yn();const u=c.getBoundingClientRect(),[d,h]=n(s,a,l,u);t.style.top=`${d}px`,t.style.left=`${h}px`},am=e=>Object.assign(Object.create(e),e).setTime(Date.now()),IM=(e,t)=>Array.isArray(e)&&e.includes(t.type)||t.type===e,RM=(e,t=!0)=>{const n=[];return e.descendants((r,i)=>{if(n.push({node:r,pos:i}),!t)return!1}),n},qf=e=>(t,n)=>RM(t,n).filter(r=>e(r.node)),To=(e,t)=>{const n=t.nodes[e];if(!n)throw iS("node",e);return n},BM=e=>t=>{for(let n=t.depth;n>0;n--){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},ul=e=>t=>BM(e)(t.$from),Ir=(e,t)=>{if(!(e instanceof Y))return;const{node:n,$from:r}=e;if(IM(t,n))return{node:n,pos:r.pos,start:r.start(r.depth),depth:r.depth}},lm=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function PM(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const jM=(e,t,n)=>{let r=PM(e,n);if(!r)return!1;let i=D_(r);if(!i){let s=r.blockRange(),a=s&&Bu(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&E_(e,i,t))return!0;if(r.parent.content.size==0&&(gs(o,"end")||Y.isSelectable(o))){let s=Vp(e.doc,r.before(),r.after(),V.empty);if(s&&s.slice.size<s.to-s.from){if(t){let a=e.tr.step(s);a.setSelection(gs(o,"end")?te.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Y.create(a.doc,i.pos-o.nodeSize)),t(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function gs(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const zM=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=D_(r)}let s=o&&o.nodeBefore;return!s||!Y.isSelectable(s)?!1:(t&&t(e.tr.setSelection(Y.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function D_(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function VM(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const UM=(e,t,n)=>{let r=VM(e,n);if(!r)return!1;let i=x_(r);if(!i)return!1;let o=i.nodeAfter;if(E_(e,i,t))return!0;if(r.parent.content.size==0&&(gs(o,"start")||Y.isSelectable(o))){let s=Vp(e.doc,r.before(),r.after(),V.empty);if(s&&s.slice.size<s.to-s.from){if(t){let a=e.tr.step(s);a.setSelection(gs(o,"start")?te.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Y.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},qM=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=x_(r)}let s=o&&o.nodeAfter;return!s||!Y.isSelectable(s)?!1:(t&&t(e.tr.setSelection(Y.create(e.doc,o.pos)).scrollIntoView()),!0)};function x_(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const C_=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function cm(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const WM=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=cm(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,s.createAndFill());l.setSelection(te.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},v_=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof pn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=cm(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(s,o.createAndFill());a.setSelection(ne.create(a.doc,s+1)),t(a.scrollIntoView())}return!0},HM=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(aa(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Bu(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function GM(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Y&&t.selection.node.isBlock)return!r.parentOffset||!aa(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let o=i.parentOffset==i.parent.content.size,s=t.tr;(t.selection instanceof ne||t.selection instanceof pn)&&s.deleteSelection();let a=r.depth==0?null:cm(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=e&&e(i.parent,o),c=l?[l]:o&&a?[{type:a}]:void 0,u=aa(s.doc,s.mapping.map(r.pos),1,c);if(!c&&!u&&aa(s.doc,s.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),u=!0),u&&(s.split(s.mapping.map(r.pos),1,c),!o&&!r.parentOffset&&r.parent.type!=a)){let d=s.mapping.map(r.before()),h=s.doc.resolve(d);a&&r.node(-1).canReplaceWith(h.index(),h.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}n(s.scrollIntoView())}return!0}}const S_=GM(),KM=(e,t)=>(t&&t(e.tr.setSelection(new pn(e.doc))),!0);function JM(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||Pu(e.doc,t.pos))?!1:(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0)}function E_(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(JM(e,t,n))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let d=t.pos+i.nodeSize,h=B.empty;for(let m=o.length-1;m>=0;m--)h=B.from(o[m].create(null,h));h=B.from(r.copy(h));let f=e.tr.step(new $t(t.pos-1,d,t.pos,d,new V(h,1,0),o.length,!0)),p=d+2*o.length;Pu(f.doc,p)&&f.join(p),n(f.scrollIntoView())}return!0}let l=te.findFrom(t,1),c=l&&l.$from.blockRange(l.$to),u=c&&Bu(c);if(u!=null&&u>=t.depth)return n&&n(e.tr.lift(c,u).scrollIntoView()),!0;if(a&&gs(i,"start",!0)&&gs(r,"end")){let d=r,h=[];for(;h.push(d),!d.isTextblock;)d=d.lastChild;let f=i,p=1;for(;!f.isTextblock;f=f.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,f.content)){if(n){let m=B.empty;for(let y=h.length-1;y>=0;y--)m=B.from(h[y].copy(m));let b=e.tr.step(new $t(t.pos-h.length,t.pos+i.nodeSize,t.pos+p,t.pos+i.nodeSize-p,new V(m,h.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function A_(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(t.tr.setSelection(ne.create(t.doc,e<0?i.start(o):i.end(o)))),!0):!1}}const YM=A_(-1),XM=A_(1);function fr(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&J1(s,e,t);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function Ko(e,t=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,e,t)}r(o.scrollIntoView())}return!0}}function QM(e,t,n){for(let r=0;r<t.length;r++){let{$from:i,$to:o}=t[r],s=i.depth==0?e.inlineContent&&e.type.allowsMarkType(n):!1;if(e.nodesBetween(i.pos,o.pos,a=>{if(s)return!1;s=a.inlineContent&&a.type.allowsMarkType(n)}),s)return!0}return!1}function Xu(e,t=null){return function(n,r){let{empty:i,$cursor:o,ranges:s}=n.selection;if(i&&!o||!QM(n.doc,s,e))return!1;if(r)if(o)e.isInSet(n.storedMarks||o.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{let a=!1,l=n.tr;for(let c=0;!a&&c<s.length;c++){let{$from:u,$to:d}=s[c];a=n.doc.rangeHasMark(u.pos,d.pos,e)}for(let c=0;c<s.length;c++){let{$from:u,$to:d}=s[c];if(a)l.removeMark(u.pos,d.pos,e);else{let h=u.pos,f=d.pos,p=u.nodeAfter,m=d.nodeBefore,b=p&&p.isText?/^\s*/.exec(p.text)[0].length:0,y=m&&m.isText?/\s*$/.exec(m.text)[0].length:0;h+b<f&&(h+=b,f-=y),l.addMark(h,f,e.create(t))}}r(l.scrollIntoView())}return!0}}function dl(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}let Gd=dl(lm,jM,zM),lb=dl(lm,UM,qM);const Fr={Enter:dl(C_,v_,HM,S_),"Mod-Enter":WM,Backspace:Gd,"Mod-Backspace":Gd,"Shift-Backspace":Gd,Delete:lb,"Mod-Delete":lb,"Mod-a":KM},F_={"Ctrl-h":Fr.Backspace,"Alt-Backspace":Fr["Mod-Backspace"],"Ctrl-d":Fr.Delete,"Ctrl-Alt-Backspace":Fr["Mod-Delete"],"Alt-Delete":Fr["Mod-Delete"],"Alt-d":Fr["Mod-Delete"],"Ctrl-a":YM,"Ctrl-e":XM};for(let e in Fr)F_[e]=Fr[e];const ZM=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,T_=ZM?F_:Fr;var Ci={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},nu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cb=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var eO=typeof navigator<"u"&&/Mac/.test(navigator.platform),tO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),nO=eO||cb&&+cb[1]<57;for(var wt=0;wt<10;wt++)Ci[48+wt]=Ci[96+wt]=String(wt);for(var wt=1;wt<=24;wt++)Ci[wt+111]="F"+wt;for(var wt=65;wt<=90;wt++)Ci[wt]=String.fromCharCode(wt+32),nu[wt]=String.fromCharCode(wt);for(var Kd in Ci)nu.hasOwnProperty(Kd)||(nu[Kd]=Ci[Kd]);function rO(e){var t=nO&&(e.ctrlKey||e.altKey||e.metaKey)||tO&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?nu:Ci)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const iO=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function oO(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))iO?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function sO(e){let t=Object.create(null);for(let n in e)t[oO(n)]=e[n];return t}function Jd(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n!==!1&&t.shiftKey&&(e="Shift-"+e),e}function lo(e){return new ye({props:{handleKeyDown:Qu(e)}})}function Qu(e){let t=sO(e);return function(n,r){let i=rO(r),o=i.length==1&&i!=" ",s,a=t[Jd(i,r,!o)];if(a&&a(n.state,n.dispatch,n))return!0;if(o&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Ci[r.keyCode])&&s!=i){let l=t[Jd(s,r,!0)];if(l&&l(n.state,n.dispatch,n))return!0}else if(o&&r.shiftKey){let l=t[Jd(i,r,!0)];if(l&&l(n.state,n.dispatch,n))return!0}return!1}}var aO=Object.defineProperty,lO=(e,t,n)=>t in e?aO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zr=(e,t,n)=>(lO(e,typeof t!="symbol"?t+"":t,n),n),M_=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ae=(e,t,n)=>(M_(e,t,"read from private field"),n?n.call(e):t.get(e)),Pt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bc=(e,t,n,r)=>(M_(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const yc=On("ConfigReady"),cO=e=>t=>(t.record(yc),async n=>(await e(n),n.done(yc),r=>{r.clearTimer(yc)})),Yd=Q([],"themeTimer"),wc=On("ThemeEnvironmentReady"),Jo=On("ThemeReady"),uO=new _e("MILKDOWN_THEME_RESET"),dO=e=>{const t=R2();return e.inject(Cd).inject(ui).inject(Ce,t).inject(Yd,[yc]).record(Jo).record(wc),async n=>{await n.waitTimers(Yd);const r=I2(n.get(Cd));return $1.forEach(i=>{t.inject(i)}),n.set(ui,r),n.done(wc),n.done(Jo),await n.wait(Rr),n.update(ut,i=>i.concat(new ye({key:uO,view:()=>(t.runExecutor(),{destroy:()=>{r.flush()}})}))),i=>{i.remove(Cd).remove(ui).remove(Ce).remove(Yd).clearTimer(Jo).clearTimer(wc)}}},hO=e=>{let t=null;const n=()=>async r=>{await r.wait(wc);const i=r.get(ui),o=r.get(Ce);o.setExecutor(()=>{e==null||e(i,o),t==null||t(i,o),$1.forEach(s=>{o.has(s)||console.warn("Theme key not found: ",s.sliceName)}),o.get(Bp,void 0)})};return n.override=r=>(t=r,n),n},Rr=On("InitReady"),Xd=Q([],"initTimer"),ub=Q({},"editor"),Oa=Q([],"inputRules"),ut=Q([],"prosePlugins"),bs=Q([],"remarkPlugins"),Na=Q([],"nodeView"),La=Q([],"markView"),Xi=Q(Af().use(wf).use(vf),"remark"),fO={},Qd=Q(fO,"remarkStringifyOptions"),pO=e=>t=>(t.inject(ub,e).inject(ut).inject(bs).inject(Oa).inject(Na).inject(La).inject(Qd).inject(Xi,Af().use(wf).use(vf)).inject(Xd,[Jo]).record(Rr),async n=>{await n.waitTimers(Xd);const r=n.get(Qd);return n.set(Xi,Af().use(wf).use(vf,r)),n.done(Rr),i=>{i.remove(ub).remove(ut).remove(bs).remove(Oa).remove(Na).remove(La).remove(Qd).remove(Xi).remove(Xd).clearTimer(Rr)}}),mr=On("schemaReady"),tt=Q({},"schema"),Zd=Q([],"schemaTimer"),fi=Q([],"nodes"),pi=Q([],"marks"),db=e=>{var t;return{...e,parseDOM:(t=e.parseDOM)==null?void 0:t.map(n=>({priority:e.priority,...n}))}},mO=e=>(e.inject(tt).inject(fi).inject(pi).inject(Zd,[Rr]).record(mr),async t=>{await t.waitTimers(Zd);const n=t.get(Xi),r=t.get(bs).reduce((s,a)=>s.use(a),n);t.set(Xi,r);const i=Object.fromEntries(t.get(fi).map(([s,a])=>[s,db(a)])),o=Object.fromEntries(t.get(pi).map(([s,a])=>[s,db(a)]));return t.set(tt,new DS({nodes:i,marks:o})),t.done(mr),s=>{s.remove(tt).remove(fi).remove(pi).remove(Zd).clearTimer(mr)}}),mi=Q(()=>{},"parser"),eh=Q([],"parserTimer"),kc=On("ParserReady"),gO=e=>(e.inject(mi).inject(eh,[mr]).record(kc),async t=>{await t.waitTimers(eh);const n=t.get(fi),r=t.get(pi),i=t.get(Xi),o=t.get(tt),s=[...n.map(([l,c])=>({id:l,...c})).map(l=>({...l,is:"node"})),...r.map(([l,c])=>({id:l,...c})).map(l=>({...l,is:"mark"}))],a=Object.fromEntries(s.map(({id:l,parseMarkdown:c,is:u})=>[l,{...c,is:u,key:l}]));return t.set(mi,cE(o,a,i)),t.done(kc),l=>{l.remove(mi).remove(eh).clearTimer(kc)}}),Yo=Q(()=>"","serializer"),th=Q([],"serializerTimer"),da=On("SerializerReady"),bO=e=>(e.inject(Yo).inject(th,[mr]).record(da),async t=>{await t.waitTimers(th);const n=t.get(fi),r=t.get(pi),i=t.get(Xi),o=t.get(tt),s=[...n,...r],a=Object.fromEntries(s.map(([l,c])=>[l,c.toMarkdown]));return t.set(Yo,CE(o,a,i)),t.done(da),l=>{l.remove(Yo).remove(th).clearTimer(da)}}),_c=Q("","defaultValue"),Gs=Q({},"editorState"),Dc=Q(e=>e,"stateOptions"),xc=Q([],"editorStateTimer"),Cc=On("EditorStateReady"),yO=new _e("MILKDOWN_STATE_TRACKER"),O_=(e,t,n)=>{if(typeof e=="string")return t(e);if(e.type==="html")return us.fromSchema(n).parse(e.dom);if(e.type==="json")return on.fromJSON(n,e.value);throw Xv(e)},wO=e=>(e.inject(_c).inject(Gs).inject(Dc).inject(xc,[kc,da,Sc]).record(Cc),async t=>{await t.waitTimers(xc);const n=t.get(tt),r=t.get(mi),i=t.get(Oa),o=t.get(Dc),s=t.get(ut),a=t.get(_c),l=O_(a,r,n),c=[...s,new ye({key:yO,state:{init:()=>{},apply:(h,f,p,m)=>{t.set(Gs,m)}}}),$M({rules:i}),lo(T_)];t.set(ut,c);const u=o({schema:n,doc:l,plugins:c}),d=ai.create(u);return t.set(Gs,d),t.done(Cc),h=>{h.remove(_c).remove(Gs).remove(Dc).remove(xc).clearTimer(Cc)}}),Ve=Q({},"editorView"),nh=Q({},"editorViewOptions"),vc=Q(null,"root"),rh=Q([],"editorViewTimer"),Wf=Q(null,"rootDOM"),Qi=On("EditorViewReady"),kO=(e,t)=>{const n=document.createElement("div");return n.className="milkdown",e.appendChild(n),t.set(Wf,n),n},_O=e=>{e.classList.add("editor"),e.setAttribute("role","textbox")},DO=new _e("MILKDOWN_VIEW_CLEAR"),xO=e=>(e.inject(vc,document.body).inject(Ve).inject(nh).inject(Wf).inject(rh,[Cc]).record(Qi),async t=>{await t.wait(Rr);const n=t.get(vc)||document.body,r=typeof n=="string"?document.querySelector(n):n;t.update(ut,c=>[new ye({key:DO,view:u=>{const d=r?kO(r,t):void 0;return(()=>{if(d&&r){const h=u.dom;r.replaceChild(d,h),d.appendChild(h)}})(),{destroy:()=>{d!=null&&d.parentNode&&(d==null||d.parentNode.replaceChild(u.dom,d)),d==null||d.remove()}}}}),...c]),await t.waitTimers(rh);const i=t.get(Gs),o=t.get(nh),s=Object.fromEntries(t.get(Na)),a=Object.fromEntries(t.get(La)),l=new g_(r,{state:i,nodeViews:s,markViews:a,...o});return _O(l.dom),t.set(Ve,l),t.done(Qi),c=>{l==null||l.destroy(),c.remove(vc).remove(Ve).remove(nh).remove(Wf).remove(rh).clearTimer(Qi)}});var Ks,Js;class CO{constructor(){Pt(this,Ks,Lu()),Pt(this,Js,null),Zr(this,"setCtx",t=>{bc(this,Js,t)})}create(t,n){return t(ae(this,Ks).sliceMap,n)}get(t){return ae(this,Ks).getSlice(t).get()}call(t,n){if(ae(this,Js)==null)throw oS();const r=this.get(t)(n),i=ae(this,Js).get(Ve);return r(i.state,i.dispatch,i)}remove(t){return ae(this,Ks).removeSlice(t)}}Ks=new WeakMap,Js=new WeakMap;const be=(e,t)=>[e,t],we=(e="cmdKey")=>Q(()=>()=>!1,e),ke=Q({},"commands"),ih=Q([],"commandsTimer"),Sc=On("CommandsReady"),vO=e=>{const t=new CO;return e.inject(ke,t).inject(ih,[mr]).record(Sc),async n=>(await n.waitTimers(ih),n.done(Sc),await n.wait(Qi),t.setCtx(n),r=>{r.remove(ke).remove(ih).clearTimer(Sc)})};var Er,Ys,Ec,Xs,Qs,tr,Zs,Ac,Hf,Gf,Kf,Fc,Mo;const N_=class{constructor(){Pt(this,Er,"Idle"),Pt(this,Ys,[]),Pt(this,Ec,()=>{}),Pt(this,Xs,Lu()),Pt(this,Qs,x1()),Pt(this,tr,new Map),Pt(this,Zs,new WS(ae(this,Xs),ae(this,Qs))),Pt(this,Ac,new KS(ae(this,Xs),ae(this,Qs))),Pt(this,Hf,new GS(ae(this,Xs),ae(this,Qs))),Pt(this,Gf,()=>{const e=[dO,mO,gO,bO,vO,wO,xO,pO(this)],t=cO(async n=>{await Promise.all(ae(this,Ys).map(r=>r(n)))});this.use(e.concat(t))}),Pt(this,Kf,()=>{[...ae(this,tr).entries()].map(async([e,t])=>{var n;const r=(n=t.handler)!=null?n:e(ae(this,Ac));ae(this,tr).set(e,{...t,handler:r})})}),Pt(this,Fc,(e,t=!1)=>Promise.all([e].flat().map(n=>{const r=ae(this,tr).get(n),i=r==null?void 0:r.cleanup;if(t&&ae(this,tr).delete(n),typeof i=="function")return i(ae(this,Hf))}))),Pt(this,Mo,e=>{bc(this,Er,e),ae(this,Ec).call(this,e)}),Zr(this,"use",e=>([e].flat().forEach(t=>{const n=ae(this,Er)==="Created"?t(ae(this,Ac)):void 0;ae(this,tr).set(t,{handler:n,cleanup:void 0})}),this)),Zr(this,"config",e=>(ae(this,Ys).push(e),this)),Zr(this,"onStatusChange",e=>(bc(this,Ec,e),this)),Zr(this,"create",async()=>ae(this,Er)==="OnCreate"?this:(ae(this,Er)==="Created"&&await this.destroy(),ae(this,Mo).call(this,"OnCreate"),ae(this,Gf).call(this),ae(this,Kf).call(this),await Promise.all([...ae(this,tr).entries()].map(async([e,t])=>{const n=t.handler;if(!n)return;const r=await n(ae(this,Zs));return ae(this,tr).set(e,{handler:n,cleanup:r}),r})),ae(this,Mo).call(this,"Created"),this)),Zr(this,"remove",async e=>(await ae(this,Fc).call(this,[e].flat(),!0),this)),Zr(this,"destroy",async(e=!1)=>ae(this,Er)==="Destroyed"||ae(this,Er)==="OnDestroy"?this:(e&&bc(this,Ys,[]),ae(this,Mo).call(this,"OnDestroy"),await ae(this,Fc).call(this,[...ae(this,tr).keys()],e),ae(this,Mo).call(this,"Destroyed"),this)),Zr(this,"action",e=>e(ae(this,Zs)))}static make(){return new N_}get ctx(){return ae(this,Zs)}get status(){return ae(this,Er)}};let SO=N_;Er=new WeakMap,Ys=new WeakMap,Ec=new WeakMap,Xs=new WeakMap,Qs=new WeakMap,tr=new WeakMap,Zs=new WeakMap,Ac=new WeakMap,Hf=new WeakMap,Gf=new WeakMap,Kf=new WeakMap,Fc=new WeakMap,Mo=new WeakMap;function EO(e={}){return new ye({view(t){return new AO(t,e)}})}class AO{constructor(t,n){this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let i=o=>{this[r](o)};return t.dom.addEventListener(r,i),{name:r,handler:i}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n;if(!t.parent.inlineContent){let s=t.nodeBefore,a=t.nodeAfter;if(s||a){let l=this.editorView.nodeDOM(this.cursorPos-(s?s.nodeSize:0));if(l){let c=l.getBoundingClientRect(),u=s?c.bottom:c.top;s&&a&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:c.left,right:c.right,top:u-this.width/2,bottom:u+this.width/2}}}}if(!n){let s=this.editorView.coordsAtPos(this.cursorPos);n={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);let i,o;if(!r||r==document.body&&getComputedStyle(r).position=="static")i=-pageXOffset,o=-pageYOffset;else{let s=r.getBoundingClientRect();i=s.left-r.scrollLeft,o=s.top-r.scrollTop}this.element.style.left=n.left-i+"px",this.element.style.top=n.top-o+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(s=zp(this.editorView.state.doc,s,this.editorView.dragging.slice),s==null))return this.setCursor(null);this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}class Ge extends te{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Ge.valid(r)?new Ge(r):te.near(r)}content(){return V.empty}eq(t){return t instanceof Ge&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ge(t.resolve(n.pos))}getBookmark(){return new um(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!FO(t)||!TO(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Ge.valid(t))return t;let i=t.pos,o=null;for(let s=t.depth;;s--){let a=t.node(s);if(n>0?t.indexAfter(s)<a.childCount:t.index(s)>0){o=a.child(n>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;i+=n;let l=t.doc.resolve(i);if(Ge.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!Y.isSelectable(o)){t=t.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=t.doc.resolve(i);if(Ge.valid(a))return a}return null}}}Ge.prototype.visible=!1;Ge.findFrom=Ge.findGapCursorFrom;te.jsonID("gapcursor",Ge);class um{constructor(t){this.pos=t}map(t){return new um(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Ge.valid(n)?new Ge(n):te.near(n)}}function FO(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function TO(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function MO(){return new ye({props:{decorations:$O,createSelectionBetween(e,t,n){return t.pos==n.pos&&Ge.valid(n)?new Ge(n):null},handleClick:NO,handleKeyDown:OO,handleDOMEvents:{beforeinput:LO}}})}const OO=Qu({ArrowLeft:zl("horiz",-1),ArrowRight:zl("horiz",1),ArrowUp:zl("vert",-1),ArrowDown:zl("vert",1)});function zl(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,o){let s=r.selection,a=t>0?s.$to:s.$from,l=s.empty;if(s instanceof ne){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=Ge.findGapCursorFrom(a,t,l);return c?(i&&i(r.tr.setSelection(new Ge(c))),!0):!1}}function NO(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Ge.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Y.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Ge(r))),!0)}function LO(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Ge))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=B.empty;for(let s=r.length-1;s>=0;s--)i=B.from(r[s].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new V(i,0,0));return o.setSelection(ne.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function $O(e){if(!(e.selection instanceof Ge))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",ve.create(e.doc,[Ke.widget(e.selection.head,t,{key:"gapcursor"})])}const hb=e=>Object.prototype.hasOwnProperty.call(e,"origin");class Gt extends Array{findThenRun(t,n){const r=this.findIndex(i=>hb(i)&&i.origin===t);return r<0?this:(n(r),this)}configure(t,n){return this.findThenRun(t,r=>{this.splice(r,1,t(n))})}replace(t,n){return this.findThenRun(t,r=>{this.splice(r,1,n)})}remove(t){return this.findThenRun(t,n=>{this.splice(n,1)})}headless(){return this.filter(hb).forEach(t=>{this.configure(t.origin,{headless:!0})}),this}static create(t){return new Gt(...t)}}m1("abcedfghicklmn",10);const IO=e=>{const t=()=>async n=>{await n.wait(mr);const[r,i]=e(n);n.get(ke).create(r,i),t.run=o=>n.get(ke).call(r,o),t.key=r};return t},L_=e=>{const t=()=>async n=>{await n.wait(mr);const r=e(n);n.update(ut,i=>[...i,r]),t.plugin=r};return t},$_=e=>{const t=()=>async n=>{await n.wait(Rr);const r=e(n);n.update(bs,i=>[...i,r]),t.plugin=r};return t},RO=e=>{const t=()=>async n=>{await n.wait(mr);const r=e(n);n.update(ut,i=>[...i,lo(r)]),t.keymap=r};return t},BO=e=>(t,...n)=>{var r;const i=(r=e==null?void 0:e(t,...n))!=null?r:n;return Array.isArray(i)?i.filter(o=>o).join(" "):i},Ie=(e,t,n)=>[e,t,n];function dm(e,t){try{const n=e.get(Ce),r=e.get(ui);if(!r.css)throw Eg();return{getClassName:BO(t==null?void 0:t.className),getStyle:i=>t!=null&&t.headless?"":i(r),themeManager:n}}catch{throw Eg()}}const hm=e=>{const t=n=>{const r=e(n);return r.origin=t,r};return t},fm=(e,t)=>n=>{const r=n,i=o=>t((...s)=>o(e(...s),...s));return r.extend=i,r},Zu=(...e)=>{const t=e.length;let n=t;for(;n--;)if(typeof e[n]!="function")throw new TypeError("Expected a function");return(...r)=>{let i=0,o=t?e[i](...r):r[0];for(;++i<t;)o=e[i](o);return o}},As=Q({},"optionsPipeCtx"),hl=Q([],"injectPipeCtx"),pm=async(e,t)=>{const{pipelineCtx:n,onCleanup:r,pre:i}=e,o=n.get(hl);o&&(o.forEach(s=>i.inject(s)),r(s=>{o.forEach(a=>s.remove(a))})),await t()},mm=async(e,t)=>{const{ctx:n}=e;await n.wait(Jo),await t()},fl=Q(void 0,"getRemarkPluginsPipeCtx"),gm=async(e,t)=>{const{ctx:n,pipelineCtx:r,onCleanup:i}=e;await n.wait(Rr);const o=r.get(fl);if(o){const s=o(n);n.update(bs,a=>a.concat(s)),i(()=>{n.update(bs,a=>a.filter(l=>!s.includes(l)))})}await t()},pl=Q(void 0,"getSchemaPipeCtx"),ml=Q({},"Type"),bm=async(e,t)=>{var n;const{ctx:r,pipelineCtx:i,onCleanup:o}=e,s=i.get(pl),a=(n=s==null?void 0:s(e.ctx))!=null?n:{};let l={},c={};if(a.node){l=a.node;const p=Object.entries(a.node);r.update(fi,m=>[...m,...p]),o(()=>{r.update(fi,m=>m.filter(b=>!p.includes(b)))})}if(a.mark){c=a.mark;const p=Object.entries(a.mark);r.update(pi,m=>[...m,...p]),o(()=>{r.update(pi,m=>m.filter(b=>!p.includes(b)))})}await r.wait(mr);const u=r.get(tt),d=Object.keys(l).map(p=>[p,u.nodes[p]]),h=Object.keys(c).map(p=>[p,u.marks[p]]),f=Object.fromEntries([...d,...h]);i.set(ml,f),await t()},gl=Q(void 0,"getCommandsPipeCtx"),ym=async(e,t)=>{const{ctx:n,pipelineCtx:r,onCleanup:i}=e,o=r.get(gl);if(o){const s=r.get(ml),a=o(s,n);a.forEach(([l,c])=>{n.get(ke).create(l,c)}),i(()=>{a.forEach(([l])=>{n.get(ke).remove(l)})})}await t()},bl=Q(void 0,"getInputRulesPipeCtx"),wm=async(e,t)=>{const{ctx:n,pipelineCtx:r,onCleanup:i}=e,o=r.get(bl);if(o){const s=r.get(ml),a=o(s,n);n.update(Oa,l=>[...l,...a]),i(()=>{n.update(Oa,l=>l.filter(c=>!a.includes(c)))})}await t()},yl=Q({},"shortcutsPipeCtx"),km=async(e,t)=>{const{pipelineCtx:n,ctx:r,onCleanup:i}=e,o=n.get(yl),s=n.get(As),a=(u,d)=>{var h,f;return(f=(h=s==null?void 0:s.keymap)==null?void 0:h[u])!=null?f:d},l=Object.entries(o).flatMap(([u,[d,h,f]])=>{const p=()=>r.get(ke).call(d,f),m=a(u,h);return Array.isArray(m)?m.map(b=>({key:b,runner:p})):{key:m,runner:p}}).map(u=>[u.key,u.runner]),c=lo(Object.fromEntries(l));r.update(ut,u=>u.concat(c)),i(()=>{r.update(ut,u=>u.filter(d=>d!==c))}),await t()},wl=Q(void 0,"getProsePluginsPipeCtx"),_m=async(e,t)=>{const{pipelineCtx:n,ctx:r,onCleanup:i}=e,o=n.get(wl);if(o){const s=n.get(ml),a=o(s,r);r.update(ut,l=>[...l,...a]),i(()=>{r.update(ut,l=>l.filter(c=>!a.includes(c)))})}await t()},kl=Q(void 0,"getViewPipeCtx"),Dm=async(e,t)=>{const{pipelineCtx:n,ctx:r,onCleanup:i}=e,o=n.get(kl),s=n.get(As),a=s.view?s.view(r):o==null?void 0:o(r);if(a){const l=Object.entries(a).filter(([u])=>r.get(fi).findIndex(d=>d[0]===u)!==-1),c=Object.entries(a).filter(([u])=>r.get(pi).findIndex(d=>d[0]===u)!==-1);r.update(Na,u=>[...u,...l]),r.update(La,u=>[...u,...c]),i(()=>{r.update(Na,u=>u.filter(d=>!l.includes(d))),r.update(La,u=>u.filter(d=>!c.includes(d)))})}await t()},xm=Q("","idPipeCtx"),Cm=async(e,t)=>{const{pipelineCtx:n}=e;n.inject(xm).inject(As).inject(hl).inject(fl).inject(pl).inject(ml).inject(gl).inject(bl).inject(yl).inject(wl).inject(kl),await t()},PO=e=>(t,n)=>{let r=-1;const i=o=>{if(o<=r)return Promise.reject(new Error("next() called multiple times"));r=o;let s=e[o];if(o===e.length&&(s=n),!s)return Promise.resolve();try{return Promise.resolve(s(t,()=>i(o+1)))}catch(a){return Promise.reject(a)}};return i(0)},vm=e=>{const t=PO(e),n=Lu(),r=x1(),i=new Set,o=new HS(n,r),s=c=>{i.add(c)},a=async c=>{await Promise.all([...i].map(u=>u(c)))},l=(c,u)=>t({pre:c,ctx:u,pipelineCtx:o,onCleanup:s});return l.runCleanup=a,l},Fs=e=>Zu(hm,fm(e,Fs))(t=>n=>async r=>{const i=vm([Cm,mm,async({pipelineCtx:o},s)=>{const a=dm(r,t),l=e(a,t),{id:c,commands:u,remarkPlugins:d,schema:h,inputRules:f,shortcuts:p,prosePlugins:m,view:b,injectSlices:y}=l,k=t==null?void 0:t.view,_=y!=null?y:[],S={...t||{},view:k?v=>({[c]:k(v)}):void 0};o.set(hl,_),o.set(xm,c),o.set(As,S),o.set(fl,d),o.set(pl,v=>({mark:{[c]:h(v)}})),u&&o.set(gl,(v,g)=>u(v[c],g)),f&&o.set(bl,(v,g)=>f(v[c],g)),p&&o.set(yl,p),m&&o.set(wl,(v,g)=>m(v[c],g)),b&&o.set(kl,v=>({[c]:b(v)})),await s()},pm,gm,bm,ym,wm,km,_m,Dm]);return await i(n,r),i.runCleanup}),ht=e=>Zu(hm,fm(e,ht))(t=>n=>async r=>{const i=vm([Cm,mm,async({pipelineCtx:o},s)=>{const a=dm(r,t),l=e(a,t),{id:c,commands:u,remarkPlugins:d,schema:h,inputRules:f,shortcuts:p,prosePlugins:m,view:b,injectSlices:y}=l,k=t==null?void 0:t.view,_=y!=null?y:[],S={...t||{},view:k?v=>({[c]:k(v)}):void 0};o.set(hl,_),o.set(xm,c),o.set(As,S),o.set(fl,d),o.set(pl,v=>({node:{[c]:h(v)}})),u&&o.set(gl,(v,g)=>u(v[c],g)),f&&o.set(bl,(v,g)=>f(v[c],g)),p&&o.set(yl,p),m&&o.set(wl,(v,g)=>m(v[c],g)),b&&o.set(kl,v=>({[c]:b(v)})),await s()},pm,gm,bm,ym,wm,km,_m,Dm]);return await i(n,r),i.runCleanup}),qr=e=>Zu(hm,fm(e,qr))(t=>n=>async r=>{const i=vm([Cm,mm,async({pipelineCtx:o},s)=>{const a=dm(r,t),l=e(a,t),{commands:c,remarkPlugins:u,schema:d,inputRules:h,shortcuts:f,prosePlugins:p,view:m,injectSlices:b}=l,y=b!=null?b:[];o.set(hl,y),o.set(As,t||{}),o.set(fl,u),d&&o.set(pl,d),c&&o.set(gl,c),h&&o.set(bl,h),f&&o.set(yl,f),p&&o.set(wl,p),m&&o.set(kl,m),await s()},pm,gm,bm,ym,wm,km,_m,Dm]);return await i(n,r),i.runCleanup}),I_=(e,t=!1)=>n=>{const r=n.get(Ve),i=n.get(mi)(e);if(!i)return;if(!t){const{state:u}=r;return r.dispatch(u.tr.replace(0,u.doc.content.size,new V(i.content,0,0)))}const o=n.get(tt),s=n.get(Dc),a=n.get(ut),l=n.get(Ce),c=ai.create({schema:o,doc:i,plugins:a,...s});r.updateState(c),l.flush(n)},jO=e=>t=>t.get(Ce).switch(t,e),zO=qr(({getStyle:e,themeManager:t})=>(t.onFlush(()=>{e(({injectGlobal:n})=>{n`
                /* copy from https://github.com/ProseMirror/prosemirror-gapcursor/blob/master/style/gapcursor.css */
                .ProseMirror-gapcursor {
                    display: none;
                    pointer-events: none;
                    position: absolute;
                    margin: 0 !important;
                }

                .ProseMirror-gapcursor:after {
                    content: '';
                    display: block;
                    position: absolute;
                    top: -2px;
                    width: 20px;
                    border-top: ${t.get(Be,"lineWidth")} solid
                        ${t.get(Mt,["secondary"])};
                    animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
                }

                @keyframes ProseMirror-cursor-blink {
                    to {
                        visibility: hidden;
                    }
                }

                .ProseMirror-focused .ProseMirror-gapcursor {
                    display: block;
                }
            `})}),{prosePlugins:(n,r)=>{var i,o;const s=r.get(Ce),a=s.get(Be,"lineWidth"),l=s.get(Mt,["secondary"]),c=Number((o=(i=a==null?void 0:a.match(/\d+/))==null?void 0:i[0])!=null?o:1);return[MO(),EO({color:l,width:c})]}}))();var R_={exports:{}},VO=typeof jl=="object"&&jl&&jl.Object===Object&&jl,B_=VO,UO=B_,qO=typeof self=="object"&&self&&self.Object===Object&&self,WO=UO||qO||Function("return this")(),Ti=WO,HO=Ti,GO=HO.Symbol,Sm=GO;function KO(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var JO=KO,fb=Sm,P_=Object.prototype,YO=P_.hasOwnProperty,XO=P_.toString,zs=fb?fb.toStringTag:void 0;function QO(e){var t=YO.call(e,zs),n=e[zs];try{e[zs]=void 0;var r=!0}catch{}var i=XO.call(e);return r&&(t?e[zs]=n:delete e[zs]),i}var ZO=QO,eN=Object.prototype,tN=eN.toString;function nN(e){return tN.call(e)}var rN=nN,pb=Sm,iN=ZO,oN=rN,sN="[object Null]",aN="[object Undefined]",mb=pb?pb.toStringTag:void 0;function lN(e){return e==null?e===void 0?aN:sN:mb&&mb in Object(e)?iN(e):oN(e)}var _l=lN;function cN(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var j_=cN,uN=_l,dN=j_,hN="[object AsyncFunction]",fN="[object Function]",pN="[object GeneratorFunction]",mN="[object Proxy]";function gN(e){if(!dN(e))return!1;var t=uN(e);return t==fN||t==pN||t==hN||t==mN}var z_=gN,bN=Ti,yN=bN["__core-js_shared__"],wN=yN,oh=wN,gb=function(){var e=/[^.]+$/.exec(oh&&oh.keys&&oh.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function kN(e){return!!gb&&gb in e}var _N=kN,DN=Function.prototype,xN=DN.toString;function CN(e){if(e!=null){try{return xN.call(e)}catch{}try{return e+""}catch{}}return""}var V_=CN,vN=z_,SN=_N,EN=j_,AN=V_,FN=/[\\^$.*+?()[\]{}|]/g,TN=/^\[object .+?Constructor\]$/,MN=Function.prototype,ON=Object.prototype,NN=MN.toString,LN=ON.hasOwnProperty,$N=RegExp("^"+NN.call(LN).replace(FN,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function IN(e){if(!EN(e)||SN(e))return!1;var t=vN(e)?$N:TN;return t.test(AN(e))}var RN=IN;function BN(e,t){return e==null?void 0:e[t]}var PN=BN,jN=RN,zN=PN;function VN(e,t){var n=zN(e,t);return jN(n)?n:void 0}var Dl=VN,UN=Dl,qN=Ti,WN=UN(qN,"DataView"),HN=WN,GN=Dl,KN=Ti,JN=GN(KN,"Map"),YN=JN,XN=Dl,QN=Ti,ZN=XN(QN,"Promise"),e8=ZN,t8=Dl,n8=Ti,r8=t8(n8,"Set"),i8=r8,o8=Dl,s8=Ti,a8=o8(s8,"WeakMap"),l8=a8,Jf=HN,Yf=YN,Xf=e8,Qf=i8,Zf=l8,U_=_l,Ts=V_,bb="[object Map]",c8="[object Object]",yb="[object Promise]",wb="[object Set]",kb="[object WeakMap]",_b="[object DataView]",u8=Ts(Jf),d8=Ts(Yf),h8=Ts(Xf),f8=Ts(Qf),p8=Ts(Zf),Ri=U_;(Jf&&Ri(new Jf(new ArrayBuffer(1)))!=_b||Yf&&Ri(new Yf)!=bb||Xf&&Ri(Xf.resolve())!=yb||Qf&&Ri(new Qf)!=wb||Zf&&Ri(new Zf)!=kb)&&(Ri=function(e){var t=U_(e),n=t==c8?e.constructor:void 0,r=n?Ts(n):"";if(r)switch(r){case u8:return _b;case d8:return bb;case h8:return yb;case f8:return wb;case p8:return kb}return t});var m8=Ri,g8=9007199254740991;function b8(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=g8}var q_=b8,y8=z_,w8=q_;function k8(e){return e!=null&&w8(e.length)&&!y8(e)}var W_=k8,_8=Array.isArray,H_=_8;function D8(e){return e!=null&&typeof e=="object"}var ed=D8,x8=_l,C8=H_,v8=ed,S8="[object String]";function E8(e){return typeof e=="string"||!C8(e)&&v8(e)&&x8(e)==S8}var A8=E8;function F8(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var T8=F8;function M8(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var O8=M8;function N8(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var L8=N8;function $8(e){return e.split("")}var I8=$8,R8="\\ud800-\\udfff",B8="\\u0300-\\u036f",P8="\\ufe20-\\ufe2f",j8="\\u20d0-\\u20ff",z8=B8+P8+j8,V8="\\ufe0e\\ufe0f",U8="\\u200d",q8=RegExp("["+U8+R8+z8+V8+"]");function W8(e){return q8.test(e)}var H8=W8,G_="\\ud800-\\udfff",G8="\\u0300-\\u036f",K8="\\ufe20-\\ufe2f",J8="\\u20d0-\\u20ff",Y8=G8+K8+J8,X8="\\ufe0e\\ufe0f",Q8="["+G_+"]",ep="["+Y8+"]",tp="\\ud83c[\\udffb-\\udfff]",Z8="(?:"+ep+"|"+tp+")",K_="[^"+G_+"]",J_="(?:\\ud83c[\\udde6-\\uddff]){2}",Y_="[\\ud800-\\udbff][\\udc00-\\udfff]",eL="\\u200d",X_=Z8+"?",Q_="["+X8+"]?",tL="(?:"+eL+"(?:"+[K_,J_,Y_].join("|")+")"+Q_+X_+")*",nL=Q_+X_+tL,rL="(?:"+[K_+ep+"?",ep,J_,Y_,Q8].join("|")+")",iL=RegExp(tp+"(?="+tp+")|"+rL+nL,"g");function oL(e){return e.match(iL)||[]}var sL=oL,aL=I8,lL=H8,cL=sL;function uL(e){return lL(e)?cL(e):aL(e)}var dL=uL;function hL(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var fL=hL,pL=fL;function mL(e,t){return pL(t,function(n){return e[n]})}var gL=mL;function bL(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var yL=bL,wL=_l,kL=ed,_L="[object Arguments]";function DL(e){return kL(e)&&wL(e)==_L}var xL=DL,Db=xL,CL=ed,Z_=Object.prototype,vL=Z_.hasOwnProperty,SL=Z_.propertyIsEnumerable,EL=Db(function(){return arguments}())?Db:function(e){return CL(e)&&vL.call(e,"callee")&&!SL.call(e,"callee")},AL=EL,np={exports:{}};function FL(){return!1}var TL=FL;(function(e,t){var n=Ti,r=TL,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;e.exports=c})(np,np.exports);var ML=9007199254740991,OL=/^(?:0|[1-9]\d*)$/;function NL(e,t){var n=typeof e;return t=t==null?ML:t,!!t&&(n=="number"||n!="symbol"&&OL.test(e))&&e>-1&&e%1==0&&e<t}var LL=NL,$L=_l,IL=q_,RL=ed,BL="[object Arguments]",PL="[object Array]",jL="[object Boolean]",zL="[object Date]",VL="[object Error]",UL="[object Function]",qL="[object Map]",WL="[object Number]",HL="[object Object]",GL="[object RegExp]",KL="[object Set]",JL="[object String]",YL="[object WeakMap]",XL="[object ArrayBuffer]",QL="[object DataView]",ZL="[object Float32Array]",e$="[object Float64Array]",t$="[object Int8Array]",n$="[object Int16Array]",r$="[object Int32Array]",i$="[object Uint8Array]",o$="[object Uint8ClampedArray]",s$="[object Uint16Array]",a$="[object Uint32Array]",je={};je[ZL]=je[e$]=je[t$]=je[n$]=je[r$]=je[i$]=je[o$]=je[s$]=je[a$]=!0;je[BL]=je[PL]=je[XL]=je[jL]=je[QL]=je[zL]=je[VL]=je[UL]=je[qL]=je[WL]=je[HL]=je[GL]=je[KL]=je[JL]=je[YL]=!1;function l$(e){return RL(e)&&IL(e.length)&&!!je[$L(e)]}var c$=l$;function u$(e){return function(t){return e(t)}}var d$=u$,rp={exports:{}};(function(e,t){var n=B_,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=a})(rp,rp.exports);var h$=c$,f$=d$,xb=rp.exports,Cb=xb&&xb.isTypedArray,p$=Cb?f$(Cb):h$,m$=p$,g$=yL,b$=AL,y$=H_,w$=np.exports,k$=LL,_$=m$,D$=Object.prototype,x$=D$.hasOwnProperty;function C$(e,t){var n=y$(e),r=!n&&b$(e),i=!n&&!r&&w$(e),o=!n&&!r&&!i&&_$(e),s=n||r||i||o,a=s?g$(e.length,String):[],l=a.length;for(var c in e)(t||x$.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||k$(c,l)))&&a.push(c);return a}var v$=C$,S$=Object.prototype;function E$(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||S$;return e===n}var A$=E$;function F$(e,t){return function(n){return e(t(n))}}var T$=F$,M$=T$,O$=M$(Object.keys,Object),N$=O$,L$=A$,$$=N$,I$=Object.prototype,R$=I$.hasOwnProperty;function B$(e){if(!L$(e))return $$(e);var t=[];for(var n in Object(e))R$.call(e,n)&&n!="constructor"&&t.push(n);return t}var P$=B$,j$=v$,z$=P$,V$=W_;function U$(e){return V$(e)?j$(e):z$(e)}var q$=U$,W$=gL,H$=q$;function G$(e){return e==null?[]:W$(e,H$(e))}var K$=G$,vb=Sm,J$=JO,Y$=m8,X$=W_,Q$=A8,Z$=T8,eI=O8,tI=L8,nI=dL,rI=K$,iI="[object Map]",oI="[object Set]",sh=vb?vb.iterator:void 0;function sI(e){if(!e)return[];if(X$(e))return Q$(e)?nI(e):J$(e);if(sh&&e[sh])return Z$(e[sh]());var t=Y$(e),n=t==iI?eI:t==oI?tI:rI;return n(e)}var aI=sI;const lI="\u2614",cI="\u2615",uI="\u2648",dI="\u2649",hI="\u2650",fI="\u2651",pI="\u2652",mI="\u2653",gI="\u2693",bI="\u2705",yI="\u2728",wI="\u2753",kI="\u2754",_I="\u2755",DI="\u2757",xI="\u2757",CI="\u2795",vI="\u2796",SI="\u2797",EI="#\uFE0F\u20E3",AI="*\uFE0F\u20E3",FI="0\uFE0F\u20E3",TI="1\uFE0F\u20E3",MI="2\uFE0F\u20E3",OI="3\uFE0F\u20E3",NI="4\uFE0F\u20E3",LI="5\uFE0F\u20E3",$I="6\uFE0F\u20E3",II="7\uFE0F\u20E3",RI="8\uFE0F\u20E3",BI="9\uFE0F\u20E3",PI="\xA9\uFE0F",jI="\xAE\uFE0F",zI="\u{1F004}",VI="\u{1F0CF}",UI="\u{1F170}\uFE0F",qI="\u{1F171}\uFE0F",WI="\u{1F17E}\uFE0F",HI="\u{1F17F}\uFE0F",GI="\u{1F18E}",KI="\u{1F191}",JI="\u{1F192}",YI="\u{1F193}",XI="\u{1F194}",QI="\u{1F196}",ZI="\u{1F197}",e6="\u{1F198}",t6="\u{1F199}",n6="\u{1F19A}",r6="\u{1F1E8}\u{1F1F3}",i6="\u{1F1E9}\u{1F1EA}",o6="\u{1F1EA}\u{1F1F8}",s6="\u{1F1EB}\u{1F1F7}",a6="\u{1F1EC}\u{1F1E7}",l6="\u{1F1EC}\u{1F1E7}",c6="\u{1F1EE}\u{1F1F9}",u6="\u{1F1EF}\u{1F1F5}",d6="\u{1F1F0}\u{1F1F7}",h6="\u{1F1F7}\u{1F1FA}",f6="\u{1F1FA}\u{1F1F8}",p6="\u{1F201}",m6="\u{1F202}\uFE0F",g6="\u{1F21A}",b6="\u{1F22F}",y6="\u{1F232}",w6="\u{1F233}",k6="\u{1F234}",_6="\u{1F235}",D6="\u{1F236}",x6="\u{1F237}\uFE0F",C6="\u{1F238}",v6="\u{1F239}",S6="\u{1F23A}",E6="\u{1F250}",A6="\u{1F251}",F6="\u{1F300}",T6="\u{1F301}",M6="\u{1F302}",O6="\u{1F303}",N6="\u{1F304}",L6="\u{1F305}",$6="\u{1F306}",I6="\u{1F307}",R6="\u{1F308}",B6="\u{1F309}",P6="\u{1F30A}",j6="\u{1F30B}",z6="\u{1F30C}",V6="\u{1F30D}",U6="\u{1F30E}",q6="\u{1F30F}",W6="\u{1F310}",H6="\u{1F311}",G6="\u{1F312}",K6="\u{1F313}",J6="\u{1F314}",Y6="\u{1F314}",X6="\u{1F315}",Q6="\u{1F316}",Z6="\u{1F317}",eR="\u{1F318}",tR="\u{1F319}",nR="\u{1F31A}",rR="\u{1F31B}",iR="\u{1F31C}",oR="\u{1F31D}",sR="\u{1F31E}",aR="\u{1F31F}",lR="\u{1F320}",cR="\u{1F321}\uFE0F",uR="\u{1F324}\uFE0F",dR="\u{1F324}\uFE0F",hR="\u{1F325}\uFE0F",fR="\u{1F325}\uFE0F",pR="\u{1F326}\uFE0F",mR="\u{1F326}\uFE0F",gR="\u{1F327}\uFE0F",bR="\u{1F328}\uFE0F",yR="\u{1F329}\uFE0F",wR="\u{1F329}\uFE0F",kR="\u{1F32A}\uFE0F",_R="\u{1F32A}\uFE0F",DR="\u{1F32B}\uFE0F",xR="\u{1F32C}\uFE0F",CR="\u{1F32D}",vR="\u{1F32E}",SR="\u{1F32F}",ER="\u{1F330}",AR="\u{1F331}",FR="\u{1F332}",TR="\u{1F333}",MR="\u{1F334}",OR="\u{1F335}",NR="\u{1F336}\uFE0F",LR="\u{1F337}",$R="\u{1F338}",IR="\u{1F339}",RR="\u{1F33A}",BR="\u{1F33B}",PR="\u{1F33C}",jR="\u{1F33D}",zR="\u{1F33E}",VR="\u{1F33F}",UR="\u{1F340}",qR="\u{1F341}",WR="\u{1F342}",HR="\u{1F343}",GR="\u{1F344}",KR="\u{1F345}",JR="\u{1F346}",YR="\u{1F347}",XR="\u{1F348}",QR="\u{1F349}",ZR="\u{1F34A}",eB="\u{1F34B}",tB="\u{1F34C}",nB="\u{1F34D}",rB="\u{1F34E}",iB="\u{1F34F}",oB="\u{1F350}",sB="\u{1F351}",aB="\u{1F352}",lB="\u{1F353}",cB="\u{1F354}",uB="\u{1F355}",dB="\u{1F356}",hB="\u{1F357}",fB="\u{1F358}",pB="\u{1F359}",mB="\u{1F35A}",gB="\u{1F35B}",bB="\u{1F35C}",yB="\u{1F35D}",wB="\u{1F35E}",kB="\u{1F35F}",_B="\u{1F360}",DB="\u{1F361}",xB="\u{1F362}",CB="\u{1F363}",vB="\u{1F364}",SB="\u{1F365}",EB="\u{1F366}",AB="\u{1F367}",FB="\u{1F368}",TB="\u{1F369}",MB="\u{1F36A}",OB="\u{1F36B}",NB="\u{1F36C}",LB="\u{1F36D}",$B="\u{1F36E}",IB="\u{1F36F}",RB="\u{1F370}",BB="\u{1F371}",PB="\u{1F372}",jB="\u{1F373}",zB="\u{1F373}",VB="\u{1F374}",UB="\u{1F375}",qB="\u{1F376}",WB="\u{1F377}",HB="\u{1F378}",GB="\u{1F379}",KB="\u{1F37A}",JB="\u{1F37B}",YB="\u{1F37C}",XB="\u{1F37D}\uFE0F",QB="\u{1F37E}",ZB="\u{1F37F}",e4="\u{1F380}",t4="\u{1F381}",n4="\u{1F382}",r4="\u{1F383}",i4="\u{1F384}",o4="\u{1F385}",s4="\u{1F386}",a4="\u{1F387}",l4="\u{1F388}",c4="\u{1F389}",u4="\u{1F38A}",d4="\u{1F38B}",h4="\u{1F38C}",f4="\u{1F38D}",p4="\u{1F38E}",m4="\u{1F38F}",g4="\u{1F390}",b4="\u{1F391}",y4="\u{1F392}",w4="\u{1F393}",k4="\u{1F396}\uFE0F",_4="\u{1F397}\uFE0F",D4="\u{1F399}\uFE0F",x4="\u{1F39A}\uFE0F",C4="\u{1F39B}\uFE0F",v4="\u{1F39E}\uFE0F",S4="\u{1F39F}\uFE0F",E4="\u{1F3A0}",A4="\u{1F3A1}",F4="\u{1F3A2}",T4="\u{1F3A3}",M4="\u{1F3A4}",O4="\u{1F3A5}",N4="\u{1F3A6}",L4="\u{1F3A7}",$4="\u{1F3A8}",I4="\u{1F3A9}",R4="\u{1F3AA}",B4="\u{1F3AB}",P4="\u{1F3AC}",j4="\u{1F3AD}",z4="\u{1F3AE}",V4="\u{1F3AF}",U4="\u{1F3B0}",q4="\u{1F3B2}",W4="\u{1F3B3}",H4="\u{1F3B4}",G4="\u{1F3B5}",K4="\u{1F3B6}",J4="\u{1F3B7}",Y4="\u{1F3B8}",X4="\u{1F3B9}",Q4="\u{1F3BA}",Z4="\u{1F3BB}",eP="\u{1F3BC}",tP="\u{1F3BD}",nP="\u{1F3BE}",rP="\u{1F3BF}",iP="\u{1F3C0}",oP="\u{1F3C1}",sP="\u{1F3C2}",aP="\u{1F3C3}\u200D\u2642\uFE0F",lP="\u{1F3C3}\u200D\u2642\uFE0F",cP="\u{1F3C4}\u200D\u2642\uFE0F",uP="\u{1F3C5}",dP="\u{1F3C6}",hP="\u{1F3C7}",fP="\u{1F3C8}",pP="\u{1F3C9}",mP="\u{1F3CA}\u200D\u2642\uFE0F",gP="\u{1F3CB}\uFE0F\u200D\u2642\uFE0F",bP="\u{1F3CC}\uFE0F\u200D\u2642\uFE0F",yP="\u{1F3CD}\uFE0F",wP="\u{1F3CE}\uFE0F",kP="\u{1F3CF}",_P="\u{1F3D0}",DP="\u{1F3D1}",xP="\u{1F3D2}",CP="\u{1F3D3}",vP="\u{1F3D4}\uFE0F",SP="\u{1F3D5}\uFE0F",EP="\u{1F3D6}\uFE0F",AP="\u{1F3D7}\uFE0F",FP="\u{1F3D8}\uFE0F",TP="\u{1F3D9}\uFE0F",MP="\u{1F3DA}\uFE0F",OP="\u{1F3DB}\uFE0F",NP="\u{1F3DC}\uFE0F",LP="\u{1F3DD}\uFE0F",$P="\u{1F3DE}\uFE0F",IP="\u{1F3DF}\uFE0F",RP="\u{1F3E0}",BP="\u{1F3E1}",PP="\u{1F3E2}",jP="\u{1F3E3}",zP="\u{1F3E4}",VP="\u{1F3E5}",UP="\u{1F3E6}",qP="\u{1F3E7}",WP="\u{1F3E8}",HP="\u{1F3E9}",GP="\u{1F3EA}",KP="\u{1F3EB}",JP="\u{1F3EC}",YP="\u{1F3ED}",XP="\u{1F3EE}",QP="\u{1F3EE}",ZP="\u{1F3EF}",ej="\u{1F3F0}",tj="\u{1F3F3}\uFE0F\u200D\u26A7\uFE0F",nj="\u{1F3F3}\uFE0F",rj="\u{1F3F4}\u200D\u2620\uFE0F",ij="\u{1F3F4}",oj="\u{1F3F5}\uFE0F",sj="\u{1F3F7}\uFE0F",aj="\u{1F3F8}",lj="\u{1F3F9}",cj="\u{1F3FA}",uj="\u{1F400}",dj="\u{1F401}",hj="\u{1F402}",fj="\u{1F403}",pj="\u{1F404}",mj="\u{1F405}",gj="\u{1F406}",bj="\u{1F407}",yj="\u{1F408}\u200D\u2B1B",wj="\u{1F408}",kj="\u{1F409}",_j="\u{1F40A}",Dj="\u{1F40B}",xj="\u{1F40C}",Cj="\u{1F40D}",vj="\u{1F40E}",Sj="\u{1F40F}",Ej="\u{1F410}",Aj="\u{1F411}",Fj="\u{1F412}",Tj="\u{1F413}",Mj="\u{1F414}",Oj="\u{1F415}\u200D\u{1F9BA}",Nj="\u{1F415}",Lj="\u{1F416}",$j="\u{1F417}",Ij="\u{1F418}",Rj="\u{1F419}",Bj="\u{1F41A}",Pj="\u{1F41B}",jj="\u{1F41C}",zj="\u{1F41D}",Vj="\u{1F41D}",Uj="\u{1F41E}",qj="\u{1F41E}",Wj="\u{1F41F}",Hj="\u{1F420}",Gj="\u{1F421}",Kj="\u{1F422}",Jj="\u{1F423}",Yj="\u{1F424}",Xj="\u{1F425}",Qj="\u{1F426}",Zj="\u{1F427}",ez="\u{1F428}",tz="\u{1F429}",nz="\u{1F42A}",rz="\u{1F42B}",iz="\u{1F42C}",oz="\u{1F42C}",sz="\u{1F42D}",az="\u{1F42E}",lz="\u{1F42F}",cz="\u{1F430}",uz="\u{1F431}",dz="\u{1F432}",hz="\u{1F433}",fz="\u{1F434}",pz="\u{1F435}",mz="\u{1F436}",gz="\u{1F437}",bz="\u{1F438}",yz="\u{1F439}",wz="\u{1F43A}",kz="\u{1F43B}\u200D\u2744\uFE0F",_z="\u{1F43B}",Dz="\u{1F43C}",xz="\u{1F43D}",Cz="\u{1F43E}",vz="\u{1F43E}",Sz="\u{1F43F}\uFE0F",Ez="\u{1F440}",Az="\u{1F441}\uFE0F",Fz="\u{1F442}",Tz="\u{1F443}",Mz="\u{1F444}",Oz="\u{1F445}",Nz="\u{1F446}",Lz="\u{1F447}",$z="\u{1F448}",Iz="\u{1F449}",Rz="\u{1F44A}",Bz="\u{1F44A}",Pz="\u{1F44B}",jz="\u{1F44C}",zz="\u{1F44D}",Vz="\u{1F44E}",Uz="\u{1F44F}",qz="\u{1F450}",Wz="\u{1F451}",Hz="\u{1F452}",Gz="\u{1F453}",Kz="\u{1F454}",Jz="\u{1F455}",Yz="\u{1F455}",Xz="\u{1F456}",Qz="\u{1F457}",Zz="\u{1F458}",e5="\u{1F459}",t5="\u{1F45A}",n5="\u{1F45B}",r5="\u{1F45C}",i5="\u{1F45D}",o5="\u{1F45E}",s5="\u{1F45E}",a5="\u{1F45F}",l5="\u{1F460}",c5="\u{1F461}",u5="\u{1F462}",d5="\u{1F463}",h5="\u{1F464}",f5="\u{1F465}",p5="\u{1F466}",m5="\u{1F467}",g5="\u{1F468}\u200D\u{1F37C}",b5="\u{1F468}\u200D\u{1F469}\u200D\u{1F466}",y5="\u{1F468}\u200D\u{1F9AF}",w5="\u{1F468}\u200D\u{1F9B0}",k5="\u{1F468}\u200D\u{1F9B1}",_5="\u{1F468}\u200D\u{1F9B2}",D5="\u{1F468}\u200D\u{1F9B3}",x5="\u{1F468}\u200D\u{1F9BC}",C5="\u{1F468}\u200D\u{1F9BD}",v5="\u{1F468}",S5="\u{1F469}\u200D\u{1F37C}",E5="\u{1F469}\u200D\u{1F9AF}",A5="\u{1F469}\u200D\u{1F9B0}",F5="\u{1F469}\u200D\u{1F9B1}",T5="\u{1F469}\u200D\u{1F9B2}",M5="\u{1F469}\u200D\u{1F9B3}",O5="\u{1F469}\u200D\u{1F9BC}",N5="\u{1F469}\u200D\u{1F9BD}",L5="\u{1F469}",$5="\u{1F46B}",I5="\u{1F46B}",R5="\u{1F46B}",B5="\u{1F46C}",P5="\u{1F46C}",j5="\u{1F46D}",z5="\u{1F46D}",V5="\u{1F46E}\u200D\u2642\uFE0F",U5="\u{1F46F}\u200D\u2640\uFE0F",q5="\u{1F470}\u200D\u2640\uFE0F",W5="\u{1F470}\u200D\u2642\uFE0F",H5="\u{1F470}",G5="\u{1F471}\u200D\u2642\uFE0F",K5="\u{1F472}",J5="\u{1F473}\u200D\u2642\uFE0F",Y5="\u{1F474}",X5="\u{1F475}",Q5="\u{1F476}",Z5="\u{1F477}\u200D\u2642\uFE0F",e7="\u{1F478}",t7="\u{1F479}",n7="\u{1F47A}",r7="\u{1F47B}",i7="\u{1F47C}",o7="\u{1F47D}",s7="\u{1F47E}",a7="\u{1F47F}",l7="\u{1F480}",c7="\u{1F481}\u200D\u2640\uFE0F",u7="\u{1F482}\u200D\u2642\uFE0F",d7="\u{1F483}",h7="\u{1F484}",f7="\u{1F485}",p7="\u{1F486}\u200D\u2640\uFE0F",m7="\u{1F487}\u200D\u2640\uFE0F",g7="\u{1F488}",b7="\u{1F489}",y7="\u{1F48A}",w7="\u{1F48B}",k7="\u{1F48C}",_7="\u{1F48D}",D7="\u{1F48E}",x7="\u{1F48F}",C7="\u{1F490}",v7="\u{1F491}",S7="\u{1F492}",E7="\u{1F493}",A7="\u{1F494}",F7="\u{1F495}",T7="\u{1F496}",M7="\u{1F497}",O7="\u{1F498}",N7="\u{1F499}",L7="\u{1F49A}",$7="\u{1F49B}",I7="\u{1F49C}",R7="\u{1F49D}",B7="\u{1F49E}",P7="\u{1F49F}",j7="\u{1F4A0}",z7="\u{1F4A1}",V7="\u{1F4A2}",U7="\u{1F4A3}",q7="\u{1F4A4}",W7="\u{1F4A5}",H7="\u{1F4A5}",G7="\u{1F4A6}",K7="\u{1F4A7}",J7="\u{1F4A8}",Y7="\u{1F4A9}",X7="\u{1F4A9}",Q7="\u{1F4A9}",Z7="\u{1F4AA}",e9="\u{1F4AB}",t9="\u{1F4AC}",n9="\u{1F4AD}",r9="\u{1F4AE}",i9="\u{1F4B0}",o9="\u{1F4B1}",s9="\u{1F4B2}",a9="\u{1F4B3}",l9="\u{1F4B4}",c9="\u{1F4B5}",u9="\u{1F4B6}",d9="\u{1F4B7}",h9="\u{1F4B8}",f9="\u{1F4B9}",p9="\u{1F4BA}",m9="\u{1F4BB}",g9="\u{1F4BC}",b9="\u{1F4BD}",y9="\u{1F4BE}",w9="\u{1F4BF}",k9="\u{1F4C0}",_9="\u{1F4C1}",D9="\u{1F4C2}",x9="\u{1F4C3}",C9="\u{1F4C4}",v9="\u{1F4C5}",S9="\u{1F4C6}",E9="\u{1F4C7}",A9="\u{1F4C8}",F9="\u{1F4C9}",T9="\u{1F4CA}",M9="\u{1F4CB}",O9="\u{1F4CC}",N9="\u{1F4CD}",L9="\u{1F4CE}",$9="\u{1F4CF}",I9="\u{1F4D0}",R9="\u{1F4D1}",B9="\u{1F4D2}",P9="\u{1F4D3}",j9="\u{1F4D4}",z9="\u{1F4D5}",V9="\u{1F4D6}",U9="\u{1F4D6}",q9="\u{1F4D7}",W9="\u{1F4D8}",H9="\u{1F4D9}",G9="\u{1F4DA}",K9="\u{1F4DB}",J9="\u{1F4DC}",Y9="\u{1F4DD}",X9="\u{1F4DD}",Q9="\u{1F4DE}",Z9="\u{1F4DF}",eV="\u{1F4E0}",tV="\u{1F4E1}",nV="\u{1F4E2}",rV="\u{1F4E3}",iV="\u{1F4E4}",oV="\u{1F4E5}",sV="\u{1F4E8}",aV="\u{1F4E9}",lV="\u{1F4EA}",cV="\u{1F4EB}",uV="\u{1F4EC}",dV="\u{1F4ED}",hV="\u{1F4EE}",fV="\u{1F4EF}",pV="\u{1F4F0}",mV="\u{1F4F1}",gV="\u{1F4F2}",bV="\u{1F4F3}",yV="\u{1F4F4}",wV="\u{1F4F5}",kV="\u{1F4F6}",_V="\u{1F4F7}",DV="\u{1F4F8}",xV="\u{1F4F9}",CV="\u{1F4FA}",vV="\u{1F4FB}",SV="\u{1F4FC}",EV="\u{1F4FD}\uFE0F",AV="\u{1F4FF}",FV="\u{1F500}",TV="\u{1F501}",MV="\u{1F502}",OV="\u{1F503}",NV="\u{1F504}",LV="\u{1F505}",$V="\u{1F506}",IV="\u{1F507}",RV="\u{1F508}",BV="\u{1F509}",PV="\u{1F50A}",jV="\u{1F50B}",zV="\u{1F50C}",VV="\u{1F50D}",UV="\u{1F50E}",qV="\u{1F50F}",WV="\u{1F510}",HV="\u{1F511}",GV="\u{1F512}",KV="\u{1F513}",JV="\u{1F514}",YV="\u{1F515}",XV="\u{1F516}",QV="\u{1F517}",ZV="\u{1F518}",eU="\u{1F519}",tU="\u{1F51A}",nU="\u{1F51B}",rU="\u{1F51C}",iU="\u{1F51D}",oU="\u{1F51E}",sU="\u{1F51F}",aU="\u{1F520}",lU="\u{1F521}",cU="\u{1F523}",uU="\u{1F524}",dU="\u{1F525}",hU="\u{1F526}",fU="\u{1F527}",pU="\u{1F528}",mU="\u{1F529}",gU="\u{1F52A}",bU="\u{1F52A}",yU="\u{1F52B}",wU="\u{1F52C}",kU="\u{1F52D}",_U="\u{1F52E}",DU="\u{1F52F}",xU="\u{1F530}",CU="\u{1F531}",vU="\u{1F532}",SU="\u{1F533}",EU="\u{1F534}",AU="\u{1F535}",FU="\u{1F536}",TU="\u{1F537}",MU="\u{1F538}",OU="\u{1F539}",NU="\u{1F53A}",LU="\u{1F53B}",$U="\u{1F53C}",IU="\u{1F53D}",RU="\u{1F549}\uFE0F",BU="\u{1F54A}\uFE0F",PU="\u{1F54B}",jU="\u{1F54C}",zU="\u{1F54D}",VU="\u{1F54E}",UU="\u{1F550}",qU="\u{1F551}",WU="\u{1F552}",HU="\u{1F553}",GU="\u{1F554}",KU="\u{1F555}",JU="\u{1F556}",YU="\u{1F557}",XU="\u{1F558}",QU="\u{1F559}",ZU="\u{1F55A}",eq="\u{1F55B}",tq="\u{1F55C}",nq="\u{1F55D}",rq="\u{1F55E}",iq="\u{1F55F}",oq="\u{1F560}",sq="\u{1F561}",aq="\u{1F562}",lq="\u{1F563}",cq="\u{1F564}",uq="\u{1F565}",dq="\u{1F566}",hq="\u{1F567}",fq="\u{1F56F}\uFE0F",pq="\u{1F570}\uFE0F",mq="\u{1F573}\uFE0F",gq="\u{1F574}\uFE0F",bq="\u{1F575}\uFE0F\u200D\u2642\uFE0F",yq="\u{1F576}\uFE0F",wq="\u{1F577}\uFE0F",kq="\u{1F578}\uFE0F",_q="\u{1F579}\uFE0F",Dq="\u{1F57A}",xq="\u{1F587}\uFE0F",Cq="\u{1F58A}\uFE0F",vq="\u{1F58B}\uFE0F",Sq="\u{1F58C}\uFE0F",Eq="\u{1F58D}\uFE0F",Aq="\u{1F590}\uFE0F",Fq="\u{1F595}",Tq="\u{1F595}",Mq="\u{1F5A4}",Oq="\u{1F5A5}\uFE0F",Nq="\u{1F5A8}\uFE0F",Lq="\u{1F5B1}\uFE0F",$q="\u{1F5B2}\uFE0F",Iq="\u{1F5BC}\uFE0F",Rq="\u{1F5C2}\uFE0F",Bq="\u{1F5C3}\uFE0F",Pq="\u{1F5C4}\uFE0F",jq="\u{1F5D1}\uFE0F",zq="\u{1F5D2}\uFE0F",Vq="\u{1F5D3}\uFE0F",Uq="\u{1F5DC}\uFE0F",qq="\u{1F5DD}\uFE0F",Wq="\u{1F5DE}\uFE0F",Hq="\u{1F5E1}\uFE0F",Gq="\u{1F5E3}\uFE0F",Kq="\u{1F5E8}\uFE0F",Jq="\u{1F5EF}\uFE0F",Yq="\u{1F5F3}\uFE0F",Xq="\u{1F5FA}\uFE0F",Qq="\u{1F5FB}",Zq="\u{1F5FC}",eW="\u{1F5FD}",tW="\u{1F5FE}",nW="\u{1F5FF}",rW="\u{1F600}",iW="\u{1F601}",oW="\u{1F602}",sW="\u{1F603}",aW="\u{1F604}",lW="\u{1F605}",cW="\u{1F606}",uW="\u{1F606}",dW="\u{1F607}",hW="\u{1F608}",fW="\u{1F609}",pW="\u{1F60A}",mW="\u{1F60B}",gW="\u{1F60C}",bW="\u{1F60D}",yW="\u{1F60E}",wW="\u{1F60F}",kW="\u{1F610}",_W="\u{1F611}",DW="\u{1F612}",xW="\u{1F613}",CW="\u{1F614}",vW="\u{1F615}",SW="\u{1F616}",EW="\u{1F617}",AW="\u{1F618}",FW="\u{1F619}",TW="\u{1F61A}",MW="\u{1F61B}",OW="\u{1F61C}",NW="\u{1F61D}",LW="\u{1F61E}",$W="\u{1F61F}",IW="\u{1F620}",RW="\u{1F621}",BW="\u{1F622}",PW="\u{1F623}",jW="\u{1F624}",zW="\u{1F625}",VW="\u{1F626}",UW="\u{1F627}",qW="\u{1F628}",WW="\u{1F629}",HW="\u{1F62A}",GW="\u{1F62B}",KW="\u{1F62C}",JW="\u{1F62D}",YW="\u{1F62E}\u200D\u{1F4A8}",XW="\u{1F62E}",QW="\u{1F62F}",ZW="\u{1F630}",eH="\u{1F631}",tH="\u{1F632}",nH="\u{1F633}",rH="\u{1F634}",iH="\u{1F635}\u200D\u{1F4AB}",oH="\u{1F635}",sH="\u{1F636}\u200D\u{1F32B}\uFE0F",aH="\u{1F636}",lH="\u{1F637}",cH="\u{1F638}",uH="\u{1F639}",dH="\u{1F63A}",hH="\u{1F63B}",fH="\u{1F63C}",pH="\u{1F63D}",mH="\u{1F63E}",gH="\u{1F63F}",bH="\u{1F640}",yH="\u{1F641}",wH="\u{1F642}",kH="\u{1F643}",_H="\u{1F644}",DH="\u{1F645}\u200D\u2640\uFE0F",xH="\u{1F646}\u200D\u2640\uFE0F",CH="\u{1F647}\u200D\u2642\uFE0F",vH="\u{1F648}",SH="\u{1F649}",EH="\u{1F64A}",AH="\u{1F64B}\u200D\u2640\uFE0F",FH="\u{1F64C}",TH="\u{1F64D}\u200D\u2640\uFE0F",MH="\u{1F64E}\u200D\u2640\uFE0F",OH="\u{1F64F}",NH="\u{1F680}",LH="\u{1F681}",$H="\u{1F682}",IH="\u{1F683}",RH="\u{1F684}",BH="\u{1F685}",PH="\u{1F686}",jH="\u{1F687}",zH="\u{1F688}",VH="\u{1F689}",UH="\u{1F68A}",qH="\u{1F68B}",WH="\u{1F68C}",HH="\u{1F68D}",GH="\u{1F68E}",KH="\u{1F68F}",JH="\u{1F690}",YH="\u{1F691}",XH="\u{1F692}",QH="\u{1F693}",ZH="\u{1F694}",eG="\u{1F695}",tG="\u{1F696}",nG="\u{1F697}",rG="\u{1F697}",iG="\u{1F698}",oG="\u{1F699}",sG="\u{1F69A}",aG="\u{1F69B}",lG="\u{1F69C}",cG="\u{1F69D}",uG="\u{1F69E}",dG="\u{1F69F}",hG="\u{1F6A0}",fG="\u{1F6A1}",pG="\u{1F6A2}",mG="\u{1F6A3}\u200D\u2642\uFE0F",gG="\u{1F6A4}",bG="\u{1F6A5}",yG="\u{1F6A6}",wG="\u{1F6A7}",kG="\u{1F6A8}",_G="\u{1F6A9}",DG="\u{1F6AA}",xG="\u{1F6AB}",CG="\u{1F6AC}",vG="\u{1F6AD}",SG="\u{1F6AE}",EG="\u{1F6AF}",AG="\u{1F6B0}",FG="\u{1F6B2}",TG="\u{1F6B3}",MG="\u{1F6B4}\u200D\u2642\uFE0F",OG="\u{1F6B5}\u200D\u2642\uFE0F",NG="\u{1F6B6}\u200D\u2642\uFE0F",LG="\u{1F6B7}",$G="\u{1F6B8}",IG="\u{1F6B9}",RG="\u{1F6BA}",BG="\u{1F6BB}",PG="\u{1F6BC}",jG="\u{1F6BD}",zG="\u{1F6BE}",VG="\u{1F6BF}",UG="\u{1F6C0}",qG="\u{1F6C1}",WG="\u{1F6C2}",HG="\u{1F6C3}",GG="\u{1F6C4}",KG="\u{1F6C5}",JG="\u{1F6CB}\uFE0F",YG="\u{1F6CC}",XG="\u{1F6CD}\uFE0F",QG="\u{1F6CE}\uFE0F",ZG="\u{1F6CF}\uFE0F",eK="\u{1F6D0}",tK="\u{1F6D1}",nK="\u{1F6D2}",rK="\u{1F6D5}",iK="\u{1F6D6}",oK="\u{1F6D7}",sK="\u{1F6E0}\uFE0F",aK="\u{1F6E1}\uFE0F",lK="\u{1F6E2}\uFE0F",cK="\u{1F6E3}\uFE0F",uK="\u{1F6E4}\uFE0F",dK="\u{1F6E5}\uFE0F",hK="\u{1F6E9}\uFE0F",fK="\u{1F6EB}",pK="\u{1F6EC}",mK="\u{1F6F0}\uFE0F",gK="\u{1F6F3}\uFE0F",bK="\u{1F6F4}",yK="\u{1F6F5}",wK="\u{1F6F6}",kK="\u{1F6F7}",_K="\u{1F6F8}",DK="\u{1F6F9}",xK="\u{1F6FA}",CK="\u{1F6FB}",vK="\u{1F6FC}",SK="\u{1F7E0}",EK="\u{1F7E1}",AK="\u{1F7E2}",FK="\u{1F7E3}",TK="\u{1F7E4}",MK="\u{1F7E5}",OK="\u{1F7E6}",NK="\u{1F7E7}",LK="\u{1F7E8}",$K="\u{1F7E9}",IK="\u{1F7EA}",RK="\u{1F7EB}",BK="\u{1F90C}",PK="\u{1F90D}",jK="\u{1F90E}",zK="\u{1F90F}",VK="\u{1F910}",UK="\u{1F911}",qK="\u{1F912}",WK="\u{1F913}",HK="\u{1F914}",GK="\u{1F915}",KK="\u{1F916}",JK="\u{1F917}",YK="\u{1F918}",XK="\u{1F918}",QK="\u{1F919}",ZK="\u{1F91A}",eJ="\u{1F91D}",tJ="\u{1F91E}",nJ="\u{1F91E}",rJ="\u{1F91F}",iJ="\u{1F920}",oJ="\u{1F921}",sJ="\u{1F922}",aJ="\u{1F923}",lJ="\u{1F924}",cJ="\u{1F925}",uJ="\u{1F926}",dJ="\u{1F927}",hJ="\u{1F928}",fJ="\u{1F928}",pJ="\u{1F929}",mJ="\u{1F92A}",gJ="\u{1F92A}",bJ="\u{1F92B}",yJ="\u{1F92B}",wJ="\u{1F92C}",kJ="\u{1F92C}",_J="\u{1F92D}",DJ="\u{1F92D}",xJ="\u{1F92E}",CJ="\u{1F92E}",vJ="\u{1F92F}",SJ="\u{1F92F}",EJ="\u{1F930}",AJ="\u{1F932}",FJ="\u{1F933}",TJ="\u{1F934}",MJ="\u{1F935}\u200D\u2640\uFE0F",OJ="\u{1F935}\u200D\u2642\uFE0F",NJ="\u{1F935}",LJ="\u{1F936}",$J="\u{1F936}",IJ="\u{1F937}",RJ="\u{1F938}",BJ="\u{1F939}",PJ="\u{1F93A}",jJ="\u{1F93C}",zJ="\u{1F93D}",VJ="\u{1F93E}",UJ="\u{1F93F}",qJ="\u{1F940}",WJ="\u{1F941}",HJ="\u{1F942}",GJ="\u{1F943}",KJ="\u{1F944}",JJ="\u{1F945}",YJ="\u{1F947}",XJ="\u{1F948}",QJ="\u{1F949}",ZJ="\u{1F94A}",eY="\u{1F94B}",tY="\u{1F94C}",nY="\u{1F94D}",rY="\u{1F94E}",iY="\u{1F94F}",oY="\u{1F950}",sY="\u{1F951}",aY="\u{1F952}",lY="\u{1F953}",cY="\u{1F954}",uY="\u{1F955}",dY="\u{1F956}",hY="\u{1F957}",fY="\u{1F958}",pY="\u{1F959}",mY="\u{1F95A}",gY="\u{1F95B}",bY="\u{1F95C}",yY="\u{1F95D}",wY="\u{1F95E}",kY="\u{1F95F}",_Y="\u{1F960}",DY="\u{1F961}",xY="\u{1F962}",CY="\u{1F963}",vY="\u{1F964}",SY="\u{1F965}",EY="\u{1F966}",AY="\u{1F967}",FY="\u{1F968}",TY="\u{1F969}",MY="\u{1F96A}",OY="\u{1F96B}",NY="\u{1F96C}",LY="\u{1F96D}",$Y="\u{1F96E}",IY="\u{1F96F}",RY="\u{1F970}",BY="\u{1F971}",PY="\u{1F972}",jY="\u{1F973}",zY="\u{1F974}",VY="\u{1F975}",UY="\u{1F976}",qY="\u{1F977}",WY="\u{1F978}",HY="\u{1F97A}",GY="\u{1F97B}",KY="\u{1F97C}",JY="\u{1F97D}",YY="\u{1F97E}",XY="\u{1F97F}",QY="\u{1F980}",ZY="\u{1F981}",eX="\u{1F982}",tX="\u{1F983}",nX="\u{1F984}",rX="\u{1F985}",iX="\u{1F986}",oX="\u{1F987}",sX="\u{1F988}",aX="\u{1F989}",lX="\u{1F98A}",cX="\u{1F98B}",uX="\u{1F98C}",dX="\u{1F98D}",hX="\u{1F98E}",fX="\u{1F98F}",pX="\u{1F990}",mX="\u{1F991}",gX="\u{1F992}",bX="\u{1F993}",yX="\u{1F994}",wX="\u{1F995}",kX="\u{1F997}",_X="\u{1F998}",DX="\u{1F999}",xX="\u{1F99A}",CX="\u{1F99B}",vX="\u{1F99C}",SX="\u{1F99D}",EX="\u{1F99E}",AX="\u{1F99F}",FX="\u{1F9A0}",TX="\u{1F9A1}",MX="\u{1F9A2}",OX="\u{1F9A3}",NX="\u{1F9A4}",LX="\u{1F9A5}",$X="\u{1F9A6}",IX="\u{1F9A7}",RX="\u{1F9A8}",BX="\u{1F9A9}",PX="\u{1F9AA}",jX="\u{1F9AB}",zX="\u{1F9AC}",VX="\u{1F9AD}",UX="\u{1F9AE}",qX="\u{1F9AF}",WX="\u{1F9B4}",HX="\u{1F9B5}",GX="\u{1F9B6}",KX="\u{1F9B7}",JX="\u{1F9B8}\u200D\u2640\uFE0F",YX="\u{1F9B8}\u200D\u2642\uFE0F",XX="\u{1F9B8}",QX="\u{1F9B9}\u200D\u2640\uFE0F",ZX="\u{1F9B9}\u200D\u2642\uFE0F",eQ="\u{1F9B9}",tQ="\u{1F9BA}",nQ="\u{1F9BB}",rQ="\u{1F9BC}",iQ="\u{1F9BD}",oQ="\u{1F9BE}",sQ="\u{1F9BF}",aQ="\u{1F9C0}",lQ="\u{1F9C1}",cQ="\u{1F9C2}",uQ="\u{1F9C3}",dQ="\u{1F9C4}",hQ="\u{1F9C5}",fQ="\u{1F9C6}",pQ="\u{1F9C7}",mQ="\u{1F9C8}",gQ="\u{1F9C9}",bQ="\u{1F9CA}",yQ="\u{1F9CB}",wQ="\u{1F9CD}\u200D\u2640\uFE0F",kQ="\u{1F9CD}\u200D\u2642\uFE0F",_Q="\u{1F9CD}",DQ="\u{1F9CE}\u200D\u2640\uFE0F",xQ="\u{1F9CE}\u200D\u2642\uFE0F",CQ="\u{1F9CE}",vQ="\u{1F9CF}\u200D\u2640\uFE0F",SQ="\u{1F9CF}\u200D\u2642\uFE0F",EQ="\u{1F9CF}",AQ="\u{1F9D0}",FQ="\u{1F9D1}\u200D\u{1F33E}",TQ="\u{1F9D1}\u200D\u{1F373}",MQ="\u{1F9D1}\u200D\u{1F37C}",OQ="\u{1F9D1}\u200D\u{1F384}",NQ="\u{1F9D1}\u200D\u{1F393}",LQ="\u{1F9D1}\u200D\u{1F3A4}",$Q="\u{1F9D1}\u200D\u{1F3A8}",IQ="\u{1F9D1}\u200D\u{1F3EB}",RQ="\u{1F9D1}\u200D\u{1F3ED}",BQ="\u{1F9D1}\u200D\u{1F4BB}",PQ="\u{1F9D1}\u200D\u{1F4BC}",jQ="\u{1F9D1}\u200D\u{1F527}",zQ="\u{1F9D1}\u200D\u{1F52C}",VQ="\u{1F9D1}\u200D\u{1F680}",UQ="\u{1F9D1}\u200D\u{1F692}",qQ="\u{1F9D1}\u200D\u{1F91D}\u200D\u{1F9D1}",WQ="\u{1F9D1}\u200D\u{1F9AF}",HQ="\u{1F9D1}\u200D\u{1F9B0}",GQ="\u{1F9D1}\u200D\u{1F9B1}",KQ="\u{1F9D1}\u200D\u{1F9B2}",JQ="\u{1F9D1}\u200D\u{1F9B3}",YQ="\u{1F9D1}\u200D\u{1F9BC}",XQ="\u{1F9D1}\u200D\u{1F9BD}",QQ="\u{1F9D1}\u200D\u2695\uFE0F",ZQ="\u{1F9D1}\u200D\u2696\uFE0F",eZ="\u{1F9D1}\u200D\u2708\uFE0F",tZ="\u{1F9D1}",nZ="\u{1F9D2}",rZ="\u{1F9D3}",iZ="\u{1F9D4}\u200D\u2640\uFE0F",oZ="\u{1F9D4}\u200D\u2642\uFE0F",sZ="\u{1F9D4}",aZ="\u{1F9D5}",lZ="\u{1F9D6}\u200D\u2640\uFE0F",cZ="\u{1F9D6}\u200D\u2642\uFE0F",uZ="\u{1F9D6}\u200D\u2642\uFE0F",dZ="\u{1F9D7}\u200D\u2640\uFE0F",hZ="\u{1F9D7}\u200D\u2640\uFE0F",fZ="\u{1F9D7}\u200D\u2642\uFE0F",pZ="\u{1F9D8}\u200D\u2640\uFE0F",mZ="\u{1F9D8}\u200D\u2640\uFE0F",gZ="\u{1F9D8}\u200D\u2642\uFE0F",bZ="\u{1F9D9}\u200D\u2640\uFE0F",yZ="\u{1F9D9}\u200D\u2640\uFE0F",wZ="\u{1F9D9}\u200D\u2642\uFE0F",kZ="\u{1F9DA}\u200D\u2640\uFE0F",_Z="\u{1F9DA}\u200D\u2640\uFE0F",DZ="\u{1F9DA}\u200D\u2642\uFE0F",xZ="\u{1F9DB}\u200D\u2640\uFE0F",CZ="\u{1F9DB}\u200D\u2640\uFE0F",vZ="\u{1F9DB}\u200D\u2642\uFE0F",SZ="\u{1F9DC}\u200D\u2640\uFE0F",EZ="\u{1F9DC}\u200D\u2642\uFE0F",AZ="\u{1F9DC}\u200D\u2642\uFE0F",FZ="\u{1F9DD}\u200D\u2640\uFE0F",TZ="\u{1F9DD}\u200D\u2642\uFE0F",MZ="\u{1F9DD}\u200D\u2642\uFE0F",OZ="\u{1F9DE}\u200D\u2640\uFE0F",NZ="\u{1F9DE}\u200D\u2642\uFE0F",LZ="\u{1F9DE}\u200D\u2642\uFE0F",$Z="\u{1F9DF}\u200D\u2640\uFE0F",IZ="\u{1F9DF}\u200D\u2642\uFE0F",RZ="\u{1F9DF}\u200D\u2642\uFE0F",BZ="\u{1F9E0}",PZ="\u{1F9E1}",jZ="\u{1F9E2}",zZ="\u{1F9E3}",VZ="\u{1F9E4}",UZ="\u{1F9E5}",qZ="\u{1F9E6}",WZ="\u{1F9E7}",HZ="\u{1F9E8}",GZ="\u{1F9E9}",KZ="\u{1F9EA}",JZ="\u{1F9EB}",YZ="\u{1F9EC}",XZ="\u{1F9ED}",QZ="\u{1F9EE}",ZZ="\u{1F9EF}",eee="\u{1F9F0}",tee="\u{1F9F1}",nee="\u{1F9F2}",ree="\u{1F9F3}",iee="\u{1F9F4}",oee="\u{1F9F5}",see="\u{1F9F6}",aee="\u{1F9F7}",lee="\u{1F9F8}",cee="\u{1F9F9}",uee="\u{1F9FA}",dee="\u{1F9FB}",hee="\u{1F9FC}",fee="\u{1F9FD}",pee="\u{1F9FE}",mee="\u{1F9FF}",gee="\u{1FA70}",bee="\u{1FA72}",yee="\u{1FA73}",wee="\u{1FA74}",kee="\u{1FA78}",_ee="\u{1FA79}",Dee="\u{1FA7A}",xee="\u{1FA81}",Cee="\u{1FA82}",vee="\u{1FA83}",See="\u{1FA84}",Eee="\u{1FA85}",Aee="\u{1FA86}",Fee="\u{1FA90}",Tee="\u{1FA91}",Mee="\u{1FA92}",Oee="\u{1FA93}",Nee="\u{1FA94}",Lee="\u{1FA95}",$ee="\u{1FA96}",Iee="\u{1FA97}",Ree="\u{1FA98}",Bee="\u{1FA99}",Pee="\u{1FA9A}",jee="\u{1FA9B}",zee="\u{1FA9C}",Vee="\u{1FA9D}",Uee="\u{1FA9E}",qee="\u{1FA9F}",Wee="\u{1FAA0}",Hee="\u{1FAA1}",Gee="\u{1FAA2}",Kee="\u{1FAA3}",Jee="\u{1FAA4}",Yee="\u{1FAA5}",Xee="\u{1FAA6}",Qee="\u{1FAA7}",Zee="\u{1FAA8}",ete="\u{1FAB0}",tte="\u{1FAB1}",nte="\u{1FAB2}",rte="\u{1FAB3}",ite="\u{1FAB4}",ote="\u{1FAB5}",ste="\u{1FAB6}",ate="\u{1FAC0}",lte="\u{1FAC1}",cte="\u{1FAC2}",ute="\u{1FAD0}",dte="\u{1FAD1}",hte="\u{1FAD2}",fte="\u{1FAD3}",pte="\u{1FAD4}",mte="\u{1FAD5}",gte="\u{1FAD6}",bte="\u203C\uFE0F",yte="\u2049\uFE0F",wte="\u2122\uFE0F",kte="\u2139\uFE0F",_te="\u2194\uFE0F",Dte="\u2195\uFE0F",xte="\u2196\uFE0F",Cte="\u2197\uFE0F",vte="\u2198\uFE0F",Ste="\u2199\uFE0F",Ete="\u21A9\uFE0F",Ate="\u21AA\uFE0F",Fte="\u231A",Tte="\u231B",Mte="\u2328\uFE0F",Ote="\u23CF\uFE0F",Nte="\u23E9",Lte="\u23EA",$te="\u23EB",Ite="\u23EC",Rte="\u23ED\uFE0F",Bte="\u23EE\uFE0F",Pte="\u23EF\uFE0F",jte="\u23F0",zte="\u23F1\uFE0F",Vte="\u23F2\uFE0F",Ute="\u23F3",qte="\u23F8\uFE0F",Wte="\u23F9\uFE0F",Hte="\u23FA\uFE0F",Gte="\u24C2\uFE0F",Kte="\u25AA\uFE0F",Jte="\u25AB\uFE0F",Yte="\u25B6\uFE0F",Xte="\u25C0\uFE0F",Qte="\u25FB\uFE0F",Zte="\u25FC\uFE0F",ene="\u25FD",tne="\u25FE",nne="\u2600\uFE0F",rne="\u2601\uFE0F",ine="\u2602\uFE0F",one="\u2603\uFE0F",sne="\u2604\uFE0F",ane="\u260E\uFE0F",lne="\u260E\uFE0F",cne="\u2611\uFE0F",une="\u2618\uFE0F",dne="\u261D\uFE0F",hne="\u2620\uFE0F",fne="\u2622\uFE0F",pne="\u2623\uFE0F",mne="\u2626\uFE0F",gne="\u262A\uFE0F",bne="\u262E\uFE0F",yne="\u262F\uFE0F",wne="\u2638\uFE0F",kne="\u2639\uFE0F",_ne="\u263A\uFE0F",Dne="\u2640\uFE0F",xne="\u2642\uFE0F",Cne="\u264A",vne="\u264B",Sne="\u264C",Ene="\u264D",Ane="\u264E",Fne="\u264F",Tne="\u265F\uFE0F",Mne="\u2660\uFE0F",One="\u2663\uFE0F",Nne="\u2665\uFE0F",Lne="\u2666\uFE0F",$ne="\u2668\uFE0F",Ine="\u267B\uFE0F",Rne="\u267E\uFE0F",Bne="\u267F",Pne="\u2692\uFE0F",jne="\u2694\uFE0F",zne="\u2695\uFE0F",Vne="\u2695\uFE0F",Une="\u2696\uFE0F",qne="\u2697\uFE0F",Wne="\u2699\uFE0F",Hne="\u269B\uFE0F",Gne="\u269C\uFE0F",Kne="\u26A0\uFE0F",Jne="\u26A1",Yne="\u26A7\uFE0F",Xne="\u26AA",Qne="\u26AB",Zne="\u26B0\uFE0F",ere="\u26B1\uFE0F",tre="\u26BD",nre="\u26BE",rre="\u26C4",ire="\u26C5",ore="\u26C8\uFE0F",sre="\u26CE",are="\u26CF\uFE0F",lre="\u26D1\uFE0F",cre="\u26D3\uFE0F",ure="\u26D4",dre="\u26E9\uFE0F",hre="\u26EA",fre="\u26F0\uFE0F",pre="\u26F1\uFE0F",mre="\u26F2",gre="\u26F3",bre="\u26F4\uFE0F",yre="\u26F5",wre="\u26F5",kre="\u26F7\uFE0F",_re="\u26F8\uFE0F",Dre="\u26F9\uFE0F\u200D\u2642\uFE0F",xre="\u26FA",Cre="\u26FD",vre="\u2702\uFE0F",Sre="\u2708\uFE0F",Ere="\u2709\uFE0F",Are="\u2709\uFE0F",Fre="\u270A",Tre="\u270B",Mre="\u270B",Ore="\u270C\uFE0F",Nre="\u270D\uFE0F",Lre="\u270F\uFE0F",$re="\u2712\uFE0F",Ire="\u2714\uFE0F",Rre="\u2716\uFE0F",Bre="\u271D\uFE0F",Pre="\u2721\uFE0F",jre="\u2733\uFE0F",zre="\u2734\uFE0F",Vre="\u2744\uFE0F",Ure="\u2747\uFE0F",qre="\u274C",Wre="\u274E",Hre="\u2763\uFE0F",Gre="\u2764\uFE0F\u200D\u{1F525}",Kre="\u2764\uFE0F\u200D\u{1FA79}",Jre="\u2764\uFE0F",Yre="\u27A1\uFE0F",Xre="\u27B0",Qre="\u27BF",Zre="\u2934\uFE0F",eie="\u2935\uFE0F",tie="\u2B05\uFE0F",nie="\u2B06\uFE0F",rie="\u2B07\uFE0F",iie="\u2B1B",oie="\u2B1C",sie="\u2B50",aie="\u2B55",lie="\u3030\uFE0F",cie="\u303D\uFE0F",uie="\u3297\uFE0F",die="\u3299\uFE0F",hie={100:"\u{1F4AF}",1234:"\u{1F522}",umbrella_with_rain_drops:lI,coffee:cI,aries:uI,taurus:dI,sagittarius:hI,capricorn:fI,aquarius:pI,pisces:mI,anchor:gI,white_check_mark:bI,sparkles:yI,question:wI,grey_question:kI,grey_exclamation:_I,exclamation:DI,heavy_exclamation_mark:xI,heavy_plus_sign:CI,heavy_minus_sign:vI,heavy_division_sign:SI,hash:EI,keycap_star:AI,zero:FI,one:TI,two:MI,three:OI,four:NI,five:LI,six:$I,seven:II,eight:RI,nine:BI,copyright:PI,registered:jI,mahjong:zI,black_joker:VI,a:UI,b:qI,o2:WI,parking:HI,ab:GI,cl:KI,cool:JI,free:YI,id:XI,new:"\u{1F195}",ng:QI,ok:ZI,sos:e6,up:t6,vs:n6,"flag-ac":"\u{1F1E6}\u{1F1E8}","flag-ad":"\u{1F1E6}\u{1F1E9}","flag-ae":"\u{1F1E6}\u{1F1EA}","flag-af":"\u{1F1E6}\u{1F1EB}","flag-ag":"\u{1F1E6}\u{1F1EC}","flag-ai":"\u{1F1E6}\u{1F1EE}","flag-al":"\u{1F1E6}\u{1F1F1}","flag-am":"\u{1F1E6}\u{1F1F2}","flag-ao":"\u{1F1E6}\u{1F1F4}","flag-aq":"\u{1F1E6}\u{1F1F6}","flag-ar":"\u{1F1E6}\u{1F1F7}","flag-as":"\u{1F1E6}\u{1F1F8}","flag-at":"\u{1F1E6}\u{1F1F9}","flag-au":"\u{1F1E6}\u{1F1FA}","flag-aw":"\u{1F1E6}\u{1F1FC}","flag-ax":"\u{1F1E6}\u{1F1FD}","flag-az":"\u{1F1E6}\u{1F1FF}","flag-ba":"\u{1F1E7}\u{1F1E6}","flag-bb":"\u{1F1E7}\u{1F1E7}","flag-bd":"\u{1F1E7}\u{1F1E9}","flag-be":"\u{1F1E7}\u{1F1EA}","flag-bf":"\u{1F1E7}\u{1F1EB}","flag-bg":"\u{1F1E7}\u{1F1EC}","flag-bh":"\u{1F1E7}\u{1F1ED}","flag-bi":"\u{1F1E7}\u{1F1EE}","flag-bj":"\u{1F1E7}\u{1F1EF}","flag-bl":"\u{1F1E7}\u{1F1F1}","flag-bm":"\u{1F1E7}\u{1F1F2}","flag-bn":"\u{1F1E7}\u{1F1F3}","flag-bo":"\u{1F1E7}\u{1F1F4}","flag-bq":"\u{1F1E7}\u{1F1F6}","flag-br":"\u{1F1E7}\u{1F1F7}","flag-bs":"\u{1F1E7}\u{1F1F8}","flag-bt":"\u{1F1E7}\u{1F1F9}","flag-bv":"\u{1F1E7}\u{1F1FB}","flag-bw":"\u{1F1E7}\u{1F1FC}","flag-by":"\u{1F1E7}\u{1F1FE}","flag-bz":"\u{1F1E7}\u{1F1FF}","flag-ca":"\u{1F1E8}\u{1F1E6}","flag-cc":"\u{1F1E8}\u{1F1E8}","flag-cd":"\u{1F1E8}\u{1F1E9}","flag-cf":"\u{1F1E8}\u{1F1EB}","flag-cg":"\u{1F1E8}\u{1F1EC}","flag-ch":"\u{1F1E8}\u{1F1ED}","flag-ci":"\u{1F1E8}\u{1F1EE}","flag-ck":"\u{1F1E8}\u{1F1F0}","flag-cl":"\u{1F1E8}\u{1F1F1}","flag-cm":"\u{1F1E8}\u{1F1F2}",cn:r6,"flag-cn":"\u{1F1E8}\u{1F1F3}","flag-co":"\u{1F1E8}\u{1F1F4}","flag-cp":"\u{1F1E8}\u{1F1F5}","flag-cr":"\u{1F1E8}\u{1F1F7}","flag-cu":"\u{1F1E8}\u{1F1FA}","flag-cv":"\u{1F1E8}\u{1F1FB}","flag-cw":"\u{1F1E8}\u{1F1FC}","flag-cx":"\u{1F1E8}\u{1F1FD}","flag-cy":"\u{1F1E8}\u{1F1FE}","flag-cz":"\u{1F1E8}\u{1F1FF}",de:i6,"flag-de":"\u{1F1E9}\u{1F1EA}","flag-dg":"\u{1F1E9}\u{1F1EC}","flag-dj":"\u{1F1E9}\u{1F1EF}","flag-dk":"\u{1F1E9}\u{1F1F0}","flag-dm":"\u{1F1E9}\u{1F1F2}","flag-do":"\u{1F1E9}\u{1F1F4}","flag-dz":"\u{1F1E9}\u{1F1FF}","flag-ea":"\u{1F1EA}\u{1F1E6}","flag-ec":"\u{1F1EA}\u{1F1E8}","flag-ee":"\u{1F1EA}\u{1F1EA}","flag-eg":"\u{1F1EA}\u{1F1EC}","flag-eh":"\u{1F1EA}\u{1F1ED}","flag-er":"\u{1F1EA}\u{1F1F7}",es:o6,"flag-es":"\u{1F1EA}\u{1F1F8}","flag-et":"\u{1F1EA}\u{1F1F9}","flag-eu":"\u{1F1EA}\u{1F1FA}","flag-fi":"\u{1F1EB}\u{1F1EE}","flag-fj":"\u{1F1EB}\u{1F1EF}","flag-fk":"\u{1F1EB}\u{1F1F0}","flag-fm":"\u{1F1EB}\u{1F1F2}","flag-fo":"\u{1F1EB}\u{1F1F4}",fr:s6,"flag-fr":"\u{1F1EB}\u{1F1F7}","flag-ga":"\u{1F1EC}\u{1F1E6}",gb:a6,uk:l6,"flag-gb":"\u{1F1EC}\u{1F1E7}","flag-gd":"\u{1F1EC}\u{1F1E9}","flag-ge":"\u{1F1EC}\u{1F1EA}","flag-gf":"\u{1F1EC}\u{1F1EB}","flag-gg":"\u{1F1EC}\u{1F1EC}","flag-gh":"\u{1F1EC}\u{1F1ED}","flag-gi":"\u{1F1EC}\u{1F1EE}","flag-gl":"\u{1F1EC}\u{1F1F1}","flag-gm":"\u{1F1EC}\u{1F1F2}","flag-gn":"\u{1F1EC}\u{1F1F3}","flag-gp":"\u{1F1EC}\u{1F1F5}","flag-gq":"\u{1F1EC}\u{1F1F6}","flag-gr":"\u{1F1EC}\u{1F1F7}","flag-gs":"\u{1F1EC}\u{1F1F8}","flag-gt":"\u{1F1EC}\u{1F1F9}","flag-gu":"\u{1F1EC}\u{1F1FA}","flag-gw":"\u{1F1EC}\u{1F1FC}","flag-gy":"\u{1F1EC}\u{1F1FE}","flag-hk":"\u{1F1ED}\u{1F1F0}","flag-hm":"\u{1F1ED}\u{1F1F2}","flag-hn":"\u{1F1ED}\u{1F1F3}","flag-hr":"\u{1F1ED}\u{1F1F7}","flag-ht":"\u{1F1ED}\u{1F1F9}","flag-hu":"\u{1F1ED}\u{1F1FA}","flag-ic":"\u{1F1EE}\u{1F1E8}","flag-id":"\u{1F1EE}\u{1F1E9}","flag-ie":"\u{1F1EE}\u{1F1EA}","flag-il":"\u{1F1EE}\u{1F1F1}","flag-im":"\u{1F1EE}\u{1F1F2}","flag-in":"\u{1F1EE}\u{1F1F3}","flag-io":"\u{1F1EE}\u{1F1F4}","flag-iq":"\u{1F1EE}\u{1F1F6}","flag-ir":"\u{1F1EE}\u{1F1F7}","flag-is":"\u{1F1EE}\u{1F1F8}",it:c6,"flag-it":"\u{1F1EE}\u{1F1F9}","flag-je":"\u{1F1EF}\u{1F1EA}","flag-jm":"\u{1F1EF}\u{1F1F2}","flag-jo":"\u{1F1EF}\u{1F1F4}",jp:u6,"flag-jp":"\u{1F1EF}\u{1F1F5}","flag-ke":"\u{1F1F0}\u{1F1EA}","flag-kg":"\u{1F1F0}\u{1F1EC}","flag-kh":"\u{1F1F0}\u{1F1ED}","flag-ki":"\u{1F1F0}\u{1F1EE}","flag-km":"\u{1F1F0}\u{1F1F2}","flag-kn":"\u{1F1F0}\u{1F1F3}","flag-kp":"\u{1F1F0}\u{1F1F5}",kr:d6,"flag-kr":"\u{1F1F0}\u{1F1F7}","flag-kw":"\u{1F1F0}\u{1F1FC}","flag-ky":"\u{1F1F0}\u{1F1FE}","flag-kz":"\u{1F1F0}\u{1F1FF}","flag-la":"\u{1F1F1}\u{1F1E6}","flag-lb":"\u{1F1F1}\u{1F1E7}","flag-lc":"\u{1F1F1}\u{1F1E8}","flag-li":"\u{1F1F1}\u{1F1EE}","flag-lk":"\u{1F1F1}\u{1F1F0}","flag-lr":"\u{1F1F1}\u{1F1F7}","flag-ls":"\u{1F1F1}\u{1F1F8}","flag-lt":"\u{1F1F1}\u{1F1F9}","flag-lu":"\u{1F1F1}\u{1F1FA}","flag-lv":"\u{1F1F1}\u{1F1FB}","flag-ly":"\u{1F1F1}\u{1F1FE}","flag-ma":"\u{1F1F2}\u{1F1E6}","flag-mc":"\u{1F1F2}\u{1F1E8}","flag-md":"\u{1F1F2}\u{1F1E9}","flag-me":"\u{1F1F2}\u{1F1EA}","flag-mf":"\u{1F1F2}\u{1F1EB}","flag-mg":"\u{1F1F2}\u{1F1EC}","flag-mh":"\u{1F1F2}\u{1F1ED}","flag-mk":"\u{1F1F2}\u{1F1F0}","flag-ml":"\u{1F1F2}\u{1F1F1}","flag-mm":"\u{1F1F2}\u{1F1F2}","flag-mn":"\u{1F1F2}\u{1F1F3}","flag-mo":"\u{1F1F2}\u{1F1F4}","flag-mp":"\u{1F1F2}\u{1F1F5}","flag-mq":"\u{1F1F2}\u{1F1F6}","flag-mr":"\u{1F1F2}\u{1F1F7}","flag-ms":"\u{1F1F2}\u{1F1F8}","flag-mt":"\u{1F1F2}\u{1F1F9}","flag-mu":"\u{1F1F2}\u{1F1FA}","flag-mv":"\u{1F1F2}\u{1F1FB}","flag-mw":"\u{1F1F2}\u{1F1FC}","flag-mx":"\u{1F1F2}\u{1F1FD}","flag-my":"\u{1F1F2}\u{1F1FE}","flag-mz":"\u{1F1F2}\u{1F1FF}","flag-na":"\u{1F1F3}\u{1F1E6}","flag-nc":"\u{1F1F3}\u{1F1E8}","flag-ne":"\u{1F1F3}\u{1F1EA}","flag-nf":"\u{1F1F3}\u{1F1EB}","flag-ng":"\u{1F1F3}\u{1F1EC}","flag-ni":"\u{1F1F3}\u{1F1EE}","flag-nl":"\u{1F1F3}\u{1F1F1}","flag-no":"\u{1F1F3}\u{1F1F4}","flag-np":"\u{1F1F3}\u{1F1F5}","flag-nr":"\u{1F1F3}\u{1F1F7}","flag-nu":"\u{1F1F3}\u{1F1FA}","flag-nz":"\u{1F1F3}\u{1F1FF}","flag-om":"\u{1F1F4}\u{1F1F2}","flag-pa":"\u{1F1F5}\u{1F1E6}","flag-pe":"\u{1F1F5}\u{1F1EA}","flag-pf":"\u{1F1F5}\u{1F1EB}","flag-pg":"\u{1F1F5}\u{1F1EC}","flag-ph":"\u{1F1F5}\u{1F1ED}","flag-pk":"\u{1F1F5}\u{1F1F0}","flag-pl":"\u{1F1F5}\u{1F1F1}","flag-pm":"\u{1F1F5}\u{1F1F2}","flag-pn":"\u{1F1F5}\u{1F1F3}","flag-pr":"\u{1F1F5}\u{1F1F7}","flag-ps":"\u{1F1F5}\u{1F1F8}","flag-pt":"\u{1F1F5}\u{1F1F9}","flag-pw":"\u{1F1F5}\u{1F1FC}","flag-py":"\u{1F1F5}\u{1F1FE}","flag-qa":"\u{1F1F6}\u{1F1E6}","flag-re":"\u{1F1F7}\u{1F1EA}","flag-ro":"\u{1F1F7}\u{1F1F4}","flag-rs":"\u{1F1F7}\u{1F1F8}",ru:h6,"flag-ru":"\u{1F1F7}\u{1F1FA}","flag-rw":"\u{1F1F7}\u{1F1FC}","flag-sa":"\u{1F1F8}\u{1F1E6}","flag-sb":"\u{1F1F8}\u{1F1E7}","flag-sc":"\u{1F1F8}\u{1F1E8}","flag-sd":"\u{1F1F8}\u{1F1E9}","flag-se":"\u{1F1F8}\u{1F1EA}","flag-sg":"\u{1F1F8}\u{1F1EC}","flag-sh":"\u{1F1F8}\u{1F1ED}","flag-si":"\u{1F1F8}\u{1F1EE}","flag-sj":"\u{1F1F8}\u{1F1EF}","flag-sk":"\u{1F1F8}\u{1F1F0}","flag-sl":"\u{1F1F8}\u{1F1F1}","flag-sm":"\u{1F1F8}\u{1F1F2}","flag-sn":"\u{1F1F8}\u{1F1F3}","flag-so":"\u{1F1F8}\u{1F1F4}","flag-sr":"\u{1F1F8}\u{1F1F7}","flag-ss":"\u{1F1F8}\u{1F1F8}","flag-st":"\u{1F1F8}\u{1F1F9}","flag-sv":"\u{1F1F8}\u{1F1FB}","flag-sx":"\u{1F1F8}\u{1F1FD}","flag-sy":"\u{1F1F8}\u{1F1FE}","flag-sz":"\u{1F1F8}\u{1F1FF}","flag-ta":"\u{1F1F9}\u{1F1E6}","flag-tc":"\u{1F1F9}\u{1F1E8}","flag-td":"\u{1F1F9}\u{1F1E9}","flag-tf":"\u{1F1F9}\u{1F1EB}","flag-tg":"\u{1F1F9}\u{1F1EC}","flag-th":"\u{1F1F9}\u{1F1ED}","flag-tj":"\u{1F1F9}\u{1F1EF}","flag-tk":"\u{1F1F9}\u{1F1F0}","flag-tl":"\u{1F1F9}\u{1F1F1}","flag-tm":"\u{1F1F9}\u{1F1F2}","flag-tn":"\u{1F1F9}\u{1F1F3}","flag-to":"\u{1F1F9}\u{1F1F4}","flag-tr":"\u{1F1F9}\u{1F1F7}","flag-tt":"\u{1F1F9}\u{1F1F9}","flag-tv":"\u{1F1F9}\u{1F1FB}","flag-tw":"\u{1F1F9}\u{1F1FC}","flag-tz":"\u{1F1F9}\u{1F1FF}","flag-ua":"\u{1F1FA}\u{1F1E6}","flag-ug":"\u{1F1FA}\u{1F1EC}","flag-um":"\u{1F1FA}\u{1F1F2}","flag-un":"\u{1F1FA}\u{1F1F3}",us:f6,"flag-us":"\u{1F1FA}\u{1F1F8}","flag-uy":"\u{1F1FA}\u{1F1FE}","flag-uz":"\u{1F1FA}\u{1F1FF}","flag-va":"\u{1F1FB}\u{1F1E6}","flag-vc":"\u{1F1FB}\u{1F1E8}","flag-ve":"\u{1F1FB}\u{1F1EA}","flag-vg":"\u{1F1FB}\u{1F1EC}","flag-vi":"\u{1F1FB}\u{1F1EE}","flag-vn":"\u{1F1FB}\u{1F1F3}","flag-vu":"\u{1F1FB}\u{1F1FA}","flag-wf":"\u{1F1FC}\u{1F1EB}","flag-ws":"\u{1F1FC}\u{1F1F8}","flag-xk":"\u{1F1FD}\u{1F1F0}","flag-ye":"\u{1F1FE}\u{1F1EA}","flag-yt":"\u{1F1FE}\u{1F1F9}","flag-za":"\u{1F1FF}\u{1F1E6}","flag-zm":"\u{1F1FF}\u{1F1F2}","flag-zw":"\u{1F1FF}\u{1F1FC}",koko:p6,sa:m6,u7121:g6,u6307:b6,u7981:y6,u7a7a:w6,u5408:k6,u6e80:_6,u6709:D6,u6708:x6,u7533:C6,u5272:v6,u55b6:S6,ideograph_advantage:E6,accept:A6,cyclone:F6,foggy:T6,closed_umbrella:M6,night_with_stars:O6,sunrise_over_mountains:N6,sunrise:L6,city_sunset:$6,city_sunrise:I6,rainbow:R6,bridge_at_night:B6,ocean:P6,volcano:j6,milky_way:z6,earth_africa:V6,earth_americas:U6,earth_asia:q6,globe_with_meridians:W6,new_moon:H6,waxing_crescent_moon:G6,first_quarter_moon:K6,moon:J6,waxing_gibbous_moon:Y6,full_moon:X6,waning_gibbous_moon:Q6,last_quarter_moon:Z6,waning_crescent_moon:eR,crescent_moon:tR,new_moon_with_face:nR,first_quarter_moon_with_face:rR,last_quarter_moon_with_face:iR,full_moon_with_face:oR,sun_with_face:sR,star2:aR,stars:lR,thermometer:cR,mostly_sunny:uR,sun_small_cloud:dR,barely_sunny:hR,sun_behind_cloud:fR,partly_sunny_rain:pR,sun_behind_rain_cloud:mR,rain_cloud:gR,snow_cloud:bR,lightning:yR,lightning_cloud:wR,tornado:kR,tornado_cloud:_R,fog:DR,wind_blowing_face:xR,hotdog:CR,taco:vR,burrito:SR,chestnut:ER,seedling:AR,evergreen_tree:FR,deciduous_tree:TR,palm_tree:MR,cactus:OR,hot_pepper:NR,tulip:LR,cherry_blossom:$R,rose:IR,hibiscus:RR,sunflower:BR,blossom:PR,corn:jR,ear_of_rice:zR,herb:VR,four_leaf_clover:UR,maple_leaf:qR,fallen_leaf:WR,leaves:HR,mushroom:GR,tomato:KR,eggplant:JR,grapes:YR,melon:XR,watermelon:QR,tangerine:ZR,lemon:eB,banana:tB,pineapple:nB,apple:rB,green_apple:iB,pear:oB,peach:sB,cherries:aB,strawberry:lB,hamburger:cB,pizza:uB,meat_on_bone:dB,poultry_leg:hB,rice_cracker:fB,rice_ball:pB,rice:mB,curry:gB,ramen:bB,spaghetti:yB,bread:wB,fries:kB,sweet_potato:_B,dango:DB,oden:xB,sushi:CB,fried_shrimp:vB,fish_cake:SB,icecream:EB,shaved_ice:AB,ice_cream:FB,doughnut:TB,cookie:MB,chocolate_bar:OB,candy:NB,lollipop:LB,custard:$B,honey_pot:IB,cake:RB,bento:BB,stew:PB,fried_egg:jB,cooking:zB,fork_and_knife:VB,tea:UB,sake:qB,wine_glass:WB,cocktail:HB,tropical_drink:GB,beer:KB,beers:JB,baby_bottle:YB,knife_fork_plate:XB,champagne:QB,popcorn:ZB,ribbon:e4,gift:t4,birthday:n4,jack_o_lantern:r4,christmas_tree:i4,santa:o4,fireworks:s4,sparkler:a4,balloon:l4,tada:c4,confetti_ball:u4,tanabata_tree:d4,crossed_flags:h4,bamboo:f4,dolls:p4,flags:m4,wind_chime:g4,rice_scene:b4,school_satchel:y4,mortar_board:w4,medal:k4,reminder_ribbon:_4,studio_microphone:D4,level_slider:x4,control_knobs:C4,film_frames:v4,admission_tickets:S4,carousel_horse:E4,ferris_wheel:A4,roller_coaster:F4,fishing_pole_and_fish:T4,microphone:M4,movie_camera:O4,cinema:N4,headphones:L4,art:$4,tophat:I4,circus_tent:R4,ticket:B4,clapper:P4,performing_arts:j4,video_game:z4,dart:V4,slot_machine:U4,"8ball":"\u{1F3B1}",game_die:q4,bowling:W4,flower_playing_cards:H4,musical_note:G4,notes:K4,saxophone:J4,guitar:Y4,musical_keyboard:X4,trumpet:Q4,violin:Z4,musical_score:eP,running_shirt_with_sash:tP,tennis:nP,ski:rP,basketball:iP,checkered_flag:oP,snowboarder:sP,"woman-running":"\u{1F3C3}\u200D\u2640\uFE0F","man-running":"\u{1F3C3}\u200D\u2642\uFE0F",runner:aP,running:lP,"woman-surfing":"\u{1F3C4}\u200D\u2640\uFE0F","man-surfing":"\u{1F3C4}\u200D\u2642\uFE0F",surfer:cP,sports_medal:uP,trophy:dP,horse_racing:hP,football:fP,rugby_football:pP,"woman-swimming":"\u{1F3CA}\u200D\u2640\uFE0F","man-swimming":"\u{1F3CA}\u200D\u2642\uFE0F",swimmer:mP,"woman-lifting-weights":"\u{1F3CB}\uFE0F\u200D\u2640\uFE0F","man-lifting-weights":"\u{1F3CB}\uFE0F\u200D\u2642\uFE0F",weight_lifter:gP,"woman-golfing":"\u{1F3CC}\uFE0F\u200D\u2640\uFE0F","man-golfing":"\u{1F3CC}\uFE0F\u200D\u2642\uFE0F",golfer:bP,racing_motorcycle:yP,racing_car:wP,cricket_bat_and_ball:kP,volleyball:_P,field_hockey_stick_and_ball:DP,ice_hockey_stick_and_puck:xP,table_tennis_paddle_and_ball:CP,snow_capped_mountain:vP,camping:SP,beach_with_umbrella:EP,building_construction:AP,house_buildings:FP,cityscape:TP,derelict_house_building:MP,classical_building:OP,desert:NP,desert_island:LP,national_park:$P,stadium:IP,house:RP,house_with_garden:BP,office:PP,post_office:jP,european_post_office:zP,hospital:VP,bank:UP,atm:qP,hotel:WP,love_hotel:HP,convenience_store:GP,school:KP,department_store:JP,factory:YP,izakaya_lantern:XP,lantern:QP,japanese_castle:ZP,european_castle:ej,"rainbow-flag":"\u{1F3F3}\uFE0F\u200D\u{1F308}",transgender_flag:tj,waving_white_flag:nj,pirate_flag:rj,"flag-england":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0065}\u{E006E}\u{E0067}\u{E007F}","flag-scotland":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0073}\u{E0063}\u{E0074}\u{E007F}","flag-wales":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0077}\u{E006C}\u{E0073}\u{E007F}",waving_black_flag:ij,rosette:oj,label:sj,badminton_racquet_and_shuttlecock:aj,bow_and_arrow:lj,amphora:cj,"skin-tone-2":"\u{1F3FB}","skin-tone-3":"\u{1F3FC}","skin-tone-4":"\u{1F3FD}","skin-tone-5":"\u{1F3FE}","skin-tone-6":"\u{1F3FF}",rat:uj,mouse2:dj,ox:hj,water_buffalo:fj,cow2:pj,tiger2:mj,leopard:gj,rabbit2:bj,black_cat:yj,cat2:wj,dragon:kj,crocodile:_j,whale2:Dj,snail:xj,snake:Cj,racehorse:vj,ram:Sj,goat:Ej,sheep:Aj,monkey:Fj,rooster:Tj,chicken:Mj,service_dog:Oj,dog2:Nj,pig2:Lj,boar:$j,elephant:Ij,octopus:Rj,shell:Bj,bug:Pj,ant:jj,bee:zj,honeybee:Vj,ladybug:Uj,lady_beetle:qj,fish:Wj,tropical_fish:Hj,blowfish:Gj,turtle:Kj,hatching_chick:Jj,baby_chick:Yj,hatched_chick:Xj,bird:Qj,penguin:Zj,koala:ez,poodle:tz,dromedary_camel:nz,camel:rz,dolphin:iz,flipper:oz,mouse:sz,cow:az,tiger:lz,rabbit:cz,cat:uz,dragon_face:dz,whale:hz,horse:fz,monkey_face:pz,dog:mz,pig:gz,frog:bz,hamster:yz,wolf:wz,polar_bear:kz,bear:_z,panda_face:Dz,pig_nose:xz,feet:Cz,paw_prints:vz,chipmunk:Sz,eyes:Ez,"eye-in-speech-bubble":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F",eye:Az,ear:Fz,nose:Tz,lips:Mz,tongue:Oz,point_up_2:Nz,point_down:Lz,point_left:$z,point_right:Iz,facepunch:Rz,punch:Bz,wave:Pz,ok_hand:jz,"+1":"\u{1F44D}",thumbsup:zz,"-1":"\u{1F44E}",thumbsdown:Vz,clap:Uz,open_hands:qz,crown:Wz,womans_hat:Hz,eyeglasses:Gz,necktie:Kz,shirt:Jz,tshirt:Yz,jeans:Xz,dress:Qz,kimono:Zz,bikini:e5,womans_clothes:t5,purse:n5,handbag:r5,pouch:i5,mans_shoe:o5,shoe:s5,athletic_shoe:a5,high_heel:l5,sandal:c5,boot:u5,footprints:d5,bust_in_silhouette:h5,busts_in_silhouette:f5,boy:p5,girl:m5,"male-farmer":"\u{1F468}\u200D\u{1F33E}","male-cook":"\u{1F468}\u200D\u{1F373}",man_feeding_baby:g5,"male-student":"\u{1F468}\u200D\u{1F393}","male-singer":"\u{1F468}\u200D\u{1F3A4}","male-artist":"\u{1F468}\u200D\u{1F3A8}","male-teacher":"\u{1F468}\u200D\u{1F3EB}","male-factory-worker":"\u{1F468}\u200D\u{1F3ED}","man-boy-boy":"\u{1F468}\u200D\u{1F466}\u200D\u{1F466}","man-boy":"\u{1F468}\u200D\u{1F466}","man-girl-boy":"\u{1F468}\u200D\u{1F467}\u200D\u{1F466}","man-girl-girl":"\u{1F468}\u200D\u{1F467}\u200D\u{1F467}","man-girl":"\u{1F468}\u200D\u{1F467}","man-man-boy":"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}","man-man-boy-boy":"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}\u200D\u{1F466}","man-man-girl":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}","man-man-girl-boy":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F466}","man-man-girl-girl":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F467}","man-woman-boy":"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}",family:b5,"man-woman-boy-boy":"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","man-woman-girl":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}","man-woman-girl-boy":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","man-woman-girl-girl":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","male-technologist":"\u{1F468}\u200D\u{1F4BB}","male-office-worker":"\u{1F468}\u200D\u{1F4BC}","male-mechanic":"\u{1F468}\u200D\u{1F527}","male-scientist":"\u{1F468}\u200D\u{1F52C}","male-astronaut":"\u{1F468}\u200D\u{1F680}","male-firefighter":"\u{1F468}\u200D\u{1F692}",man_with_probing_cane:y5,red_haired_man:w5,curly_haired_man:k5,bald_man:_5,white_haired_man:D5,man_in_motorized_wheelchair:x5,man_in_manual_wheelchair:C5,"male-doctor":"\u{1F468}\u200D\u2695\uFE0F","male-judge":"\u{1F468}\u200D\u2696\uFE0F","male-pilot":"\u{1F468}\u200D\u2708\uFE0F","man-heart-man":"\u{1F468}\u200D\u2764\uFE0F\u200D\u{1F468}","man-kiss-man":"\u{1F468}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}",man:v5,"female-farmer":"\u{1F469}\u200D\u{1F33E}","female-cook":"\u{1F469}\u200D\u{1F373}",woman_feeding_baby:S5,"female-student":"\u{1F469}\u200D\u{1F393}","female-singer":"\u{1F469}\u200D\u{1F3A4}","female-artist":"\u{1F469}\u200D\u{1F3A8}","female-teacher":"\u{1F469}\u200D\u{1F3EB}","female-factory-worker":"\u{1F469}\u200D\u{1F3ED}","woman-boy-boy":"\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","woman-boy":"\u{1F469}\u200D\u{1F466}","woman-girl-boy":"\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","woman-girl-girl":"\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","woman-girl":"\u{1F469}\u200D\u{1F467}","woman-woman-boy":"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}","woman-woman-boy-boy":"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","woman-woman-girl":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}","woman-woman-girl-boy":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","woman-woman-girl-girl":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","female-technologist":"\u{1F469}\u200D\u{1F4BB}","female-office-worker":"\u{1F469}\u200D\u{1F4BC}","female-mechanic":"\u{1F469}\u200D\u{1F527}","female-scientist":"\u{1F469}\u200D\u{1F52C}","female-astronaut":"\u{1F469}\u200D\u{1F680}","female-firefighter":"\u{1F469}\u200D\u{1F692}",woman_with_probing_cane:E5,red_haired_woman:A5,curly_haired_woman:F5,bald_woman:T5,white_haired_woman:M5,woman_in_motorized_wheelchair:O5,woman_in_manual_wheelchair:N5,"female-doctor":"\u{1F469}\u200D\u2695\uFE0F","female-judge":"\u{1F469}\u200D\u2696\uFE0F","female-pilot":"\u{1F469}\u200D\u2708\uFE0F","woman-heart-man":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F468}","woman-heart-woman":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F469}","woman-kiss-man":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}","woman-kiss-woman":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}",woman:L5,man_and_woman_holding_hands:$5,woman_and_man_holding_hands:I5,couple:R5,two_men_holding_hands:B5,men_holding_hands:P5,two_women_holding_hands:j5,women_holding_hands:z5,"female-police-officer":"\u{1F46E}\u200D\u2640\uFE0F","male-police-officer":"\u{1F46E}\u200D\u2642\uFE0F",cop:V5,"women-with-bunny-ears-partying":"\u{1F46F}\u200D\u2640\uFE0F","woman-with-bunny-ears-partying":"\u{1F46F}\u200D\u2640\uFE0F",dancers:U5,"men-with-bunny-ears-partying":"\u{1F46F}\u200D\u2642\uFE0F","man-with-bunny-ears-partying":"\u{1F46F}\u200D\u2642\uFE0F",woman_with_veil:q5,man_with_veil:W5,bride_with_veil:H5,"blond-haired-woman":"\u{1F471}\u200D\u2640\uFE0F","blond-haired-man":"\u{1F471}\u200D\u2642\uFE0F",person_with_blond_hair:G5,man_with_gua_pi_mao:K5,"woman-wearing-turban":"\u{1F473}\u200D\u2640\uFE0F","man-wearing-turban":"\u{1F473}\u200D\u2642\uFE0F",man_with_turban:J5,older_man:Y5,older_woman:X5,baby:Q5,"female-construction-worker":"\u{1F477}\u200D\u2640\uFE0F","male-construction-worker":"\u{1F477}\u200D\u2642\uFE0F",construction_worker:Z5,princess:e7,japanese_ogre:t7,japanese_goblin:n7,ghost:r7,angel:i7,alien:o7,space_invader:s7,imp:a7,skull:l7,"woman-tipping-hand":"\u{1F481}\u200D\u2640\uFE0F",information_desk_person:c7,"man-tipping-hand":"\u{1F481}\u200D\u2642\uFE0F","female-guard":"\u{1F482}\u200D\u2640\uFE0F","male-guard":"\u{1F482}\u200D\u2642\uFE0F",guardsman:u7,dancer:d7,lipstick:h7,nail_care:f7,"woman-getting-massage":"\u{1F486}\u200D\u2640\uFE0F",massage:p7,"man-getting-massage":"\u{1F486}\u200D\u2642\uFE0F","woman-getting-haircut":"\u{1F487}\u200D\u2640\uFE0F",haircut:m7,"man-getting-haircut":"\u{1F487}\u200D\u2642\uFE0F",barber:g7,syringe:b7,pill:y7,kiss:w7,love_letter:k7,ring:_7,gem:D7,couplekiss:x7,bouquet:C7,couple_with_heart:v7,wedding:S7,heartbeat:E7,broken_heart:A7,two_hearts:F7,sparkling_heart:T7,heartpulse:M7,cupid:O7,blue_heart:N7,green_heart:L7,yellow_heart:$7,purple_heart:I7,gift_heart:R7,revolving_hearts:B7,heart_decoration:P7,diamond_shape_with_a_dot_inside:j7,bulb:z7,anger:V7,bomb:U7,zzz:q7,boom:W7,collision:H7,sweat_drops:G7,droplet:K7,dash:J7,hankey:Y7,poop:X7,shit:Q7,muscle:Z7,dizzy:e9,speech_balloon:t9,thought_balloon:n9,white_flower:r9,moneybag:i9,currency_exchange:o9,heavy_dollar_sign:s9,credit_card:a9,yen:l9,dollar:c9,euro:u9,pound:d9,money_with_wings:h9,chart:f9,seat:p9,computer:m9,briefcase:g9,minidisc:b9,floppy_disk:y9,cd:w9,dvd:k9,file_folder:_9,open_file_folder:D9,page_with_curl:x9,page_facing_up:C9,date:v9,calendar:S9,card_index:E9,chart_with_upwards_trend:A9,chart_with_downwards_trend:F9,bar_chart:T9,clipboard:M9,pushpin:O9,round_pushpin:N9,paperclip:L9,straight_ruler:$9,triangular_ruler:I9,bookmark_tabs:R9,ledger:B9,notebook:P9,notebook_with_decorative_cover:j9,closed_book:z9,book:V9,open_book:U9,green_book:q9,blue_book:W9,orange_book:H9,books:G9,name_badge:K9,scroll:J9,memo:Y9,pencil:X9,telephone_receiver:Q9,pager:Z9,fax:eV,satellite_antenna:tV,loudspeaker:nV,mega:rV,outbox_tray:iV,inbox_tray:oV,package:"\u{1F4E6}","e-mail":"\u{1F4E7}",incoming_envelope:sV,envelope_with_arrow:aV,mailbox_closed:lV,mailbox:cV,mailbox_with_mail:uV,mailbox_with_no_mail:dV,postbox:hV,postal_horn:fV,newspaper:pV,iphone:mV,calling:gV,vibration_mode:bV,mobile_phone_off:yV,no_mobile_phones:wV,signal_strength:kV,camera:_V,camera_with_flash:DV,video_camera:xV,tv:CV,radio:vV,vhs:SV,film_projector:EV,prayer_beads:AV,twisted_rightwards_arrows:FV,repeat:TV,repeat_one:MV,arrows_clockwise:OV,arrows_counterclockwise:NV,low_brightness:LV,high_brightness:$V,mute:IV,speaker:RV,sound:BV,loud_sound:PV,battery:jV,electric_plug:zV,mag:VV,mag_right:UV,lock_with_ink_pen:qV,closed_lock_with_key:WV,key:HV,lock:GV,unlock:KV,bell:JV,no_bell:YV,bookmark:XV,link:QV,radio_button:ZV,back:eU,end:tU,on:nU,soon:rU,top:iU,underage:oU,keycap_ten:sU,capital_abcd:aU,abcd:lU,symbols:cU,abc:uU,fire:dU,flashlight:hU,wrench:fU,hammer:pU,nut_and_bolt:mU,hocho:gU,knife:bU,gun:yU,microscope:wU,telescope:kU,crystal_ball:_U,six_pointed_star:DU,beginner:xU,trident:CU,black_square_button:vU,white_square_button:SU,red_circle:EU,large_blue_circle:AU,large_orange_diamond:FU,large_blue_diamond:TU,small_orange_diamond:MU,small_blue_diamond:OU,small_red_triangle:NU,small_red_triangle_down:LU,arrow_up_small:$U,arrow_down_small:IU,om_symbol:RU,dove_of_peace:BU,kaaba:PU,mosque:jU,synagogue:zU,menorah_with_nine_branches:VU,clock1:UU,clock2:qU,clock3:WU,clock4:HU,clock5:GU,clock6:KU,clock7:JU,clock8:YU,clock9:XU,clock10:QU,clock11:ZU,clock12:eq,clock130:tq,clock230:nq,clock330:rq,clock430:iq,clock530:oq,clock630:sq,clock730:aq,clock830:lq,clock930:cq,clock1030:uq,clock1130:dq,clock1230:hq,candle:fq,mantelpiece_clock:pq,hole:mq,man_in_business_suit_levitating:gq,"female-detective":"\u{1F575}\uFE0F\u200D\u2640\uFE0F","male-detective":"\u{1F575}\uFE0F\u200D\u2642\uFE0F",sleuth_or_spy:bq,dark_sunglasses:yq,spider:wq,spider_web:kq,joystick:_q,man_dancing:Dq,linked_paperclips:xq,lower_left_ballpoint_pen:Cq,lower_left_fountain_pen:vq,lower_left_paintbrush:Sq,lower_left_crayon:Eq,raised_hand_with_fingers_splayed:Aq,middle_finger:Fq,reversed_hand_with_middle_finger_extended:Tq,"spock-hand":"\u{1F596}",black_heart:Mq,desktop_computer:Oq,printer:Nq,three_button_mouse:Lq,trackball:$q,frame_with_picture:Iq,card_index_dividers:Rq,card_file_box:Bq,file_cabinet:Pq,wastebasket:jq,spiral_note_pad:zq,spiral_calendar_pad:Vq,compression:Uq,old_key:qq,rolled_up_newspaper:Wq,dagger_knife:Hq,speaking_head_in_silhouette:Gq,left_speech_bubble:Kq,right_anger_bubble:Jq,ballot_box_with_ballot:Yq,world_map:Xq,mount_fuji:Qq,tokyo_tower:Zq,statue_of_liberty:eW,japan:tW,moyai:nW,grinning:rW,grin:iW,joy:oW,smiley:sW,smile:aW,sweat_smile:lW,laughing:cW,satisfied:uW,innocent:dW,smiling_imp:hW,wink:fW,blush:pW,yum:mW,relieved:gW,heart_eyes:bW,sunglasses:yW,smirk:wW,neutral_face:kW,expressionless:_W,unamused:DW,sweat:xW,pensive:CW,confused:vW,confounded:SW,kissing:EW,kissing_heart:AW,kissing_smiling_eyes:FW,kissing_closed_eyes:TW,stuck_out_tongue:MW,stuck_out_tongue_winking_eye:OW,stuck_out_tongue_closed_eyes:NW,disappointed:LW,worried:$W,angry:IW,rage:RW,cry:BW,persevere:PW,triumph:jW,disappointed_relieved:zW,frowning:VW,anguished:UW,fearful:qW,weary:WW,sleepy:HW,tired_face:GW,grimacing:KW,sob:JW,face_exhaling:YW,open_mouth:XW,hushed:QW,cold_sweat:ZW,scream:eH,astonished:tH,flushed:nH,sleeping:rH,face_with_spiral_eyes:iH,dizzy_face:oH,face_in_clouds:sH,no_mouth:aH,mask:lH,smile_cat:cH,joy_cat:uH,smiley_cat:dH,heart_eyes_cat:hH,smirk_cat:fH,kissing_cat:pH,pouting_cat:mH,crying_cat_face:gH,scream_cat:bH,slightly_frowning_face:yH,slightly_smiling_face:wH,upside_down_face:kH,face_with_rolling_eyes:_H,"woman-gesturing-no":"\u{1F645}\u200D\u2640\uFE0F",no_good:DH,"man-gesturing-no":"\u{1F645}\u200D\u2642\uFE0F","woman-gesturing-ok":"\u{1F646}\u200D\u2640\uFE0F",ok_woman:xH,"man-gesturing-ok":"\u{1F646}\u200D\u2642\uFE0F","woman-bowing":"\u{1F647}\u200D\u2640\uFE0F","man-bowing":"\u{1F647}\u200D\u2642\uFE0F",bow:CH,see_no_evil:vH,hear_no_evil:SH,speak_no_evil:EH,"woman-raising-hand":"\u{1F64B}\u200D\u2640\uFE0F",raising_hand:AH,"man-raising-hand":"\u{1F64B}\u200D\u2642\uFE0F",raised_hands:FH,"woman-frowning":"\u{1F64D}\u200D\u2640\uFE0F",person_frowning:TH,"man-frowning":"\u{1F64D}\u200D\u2642\uFE0F","woman-pouting":"\u{1F64E}\u200D\u2640\uFE0F",person_with_pouting_face:MH,"man-pouting":"\u{1F64E}\u200D\u2642\uFE0F",pray:OH,rocket:NH,helicopter:LH,steam_locomotive:$H,railway_car:IH,bullettrain_side:RH,bullettrain_front:BH,train2:PH,metro:jH,light_rail:zH,station:VH,tram:UH,train:qH,bus:WH,oncoming_bus:HH,trolleybus:GH,busstop:KH,minibus:JH,ambulance:YH,fire_engine:XH,police_car:QH,oncoming_police_car:ZH,taxi:eG,oncoming_taxi:tG,car:nG,red_car:rG,oncoming_automobile:iG,blue_car:oG,truck:sG,articulated_lorry:aG,tractor:lG,monorail:cG,mountain_railway:uG,suspension_railway:dG,mountain_cableway:hG,aerial_tramway:fG,ship:pG,"woman-rowing-boat":"\u{1F6A3}\u200D\u2640\uFE0F","man-rowing-boat":"\u{1F6A3}\u200D\u2642\uFE0F",rowboat:mG,speedboat:gG,traffic_light:bG,vertical_traffic_light:yG,construction:wG,rotating_light:kG,triangular_flag_on_post:_G,door:DG,no_entry_sign:xG,smoking:CG,no_smoking:vG,put_litter_in_its_place:SG,do_not_litter:EG,potable_water:AG,"non-potable_water":"\u{1F6B1}",bike:FG,no_bicycles:TG,"woman-biking":"\u{1F6B4}\u200D\u2640\uFE0F","man-biking":"\u{1F6B4}\u200D\u2642\uFE0F",bicyclist:MG,"woman-mountain-biking":"\u{1F6B5}\u200D\u2640\uFE0F","man-mountain-biking":"\u{1F6B5}\u200D\u2642\uFE0F",mountain_bicyclist:OG,"woman-walking":"\u{1F6B6}\u200D\u2640\uFE0F","man-walking":"\u{1F6B6}\u200D\u2642\uFE0F",walking:NG,no_pedestrians:LG,children_crossing:$G,mens:IG,womens:RG,restroom:BG,baby_symbol:PG,toilet:jG,wc:zG,shower:VG,bath:UG,bathtub:qG,passport_control:WG,customs:HG,baggage_claim:GG,left_luggage:KG,couch_and_lamp:JG,sleeping_accommodation:YG,shopping_bags:XG,bellhop_bell:QG,bed:ZG,place_of_worship:eK,octagonal_sign:tK,shopping_trolley:nK,hindu_temple:rK,hut:iK,elevator:oK,hammer_and_wrench:sK,shield:aK,oil_drum:lK,motorway:cK,railway_track:uK,motor_boat:dK,small_airplane:hK,airplane_departure:fK,airplane_arriving:pK,satellite:mK,passenger_ship:gK,scooter:bK,motor_scooter:yK,canoe:wK,sled:kK,flying_saucer:_K,skateboard:DK,auto_rickshaw:xK,pickup_truck:CK,roller_skate:vK,large_orange_circle:SK,large_yellow_circle:EK,large_green_circle:AK,large_purple_circle:FK,large_brown_circle:TK,large_red_square:MK,large_blue_square:OK,large_orange_square:NK,large_yellow_square:LK,large_green_square:$K,large_purple_square:IK,large_brown_square:RK,pinched_fingers:BK,white_heart:PK,brown_heart:jK,pinching_hand:zK,zipper_mouth_face:VK,money_mouth_face:UK,face_with_thermometer:qK,nerd_face:WK,thinking_face:HK,face_with_head_bandage:GK,robot_face:KK,hugging_face:JK,the_horns:YK,sign_of_the_horns:XK,call_me_hand:QK,raised_back_of_hand:ZK,"left-facing_fist":"\u{1F91B}","right-facing_fist":"\u{1F91C}",handshake:eJ,crossed_fingers:tJ,hand_with_index_and_middle_fingers_crossed:nJ,i_love_you_hand_sign:rJ,face_with_cowboy_hat:iJ,clown_face:oJ,nauseated_face:sJ,rolling_on_the_floor_laughing:aJ,drooling_face:lJ,lying_face:cJ,"woman-facepalming":"\u{1F926}\u200D\u2640\uFE0F","man-facepalming":"\u{1F926}\u200D\u2642\uFE0F",face_palm:uJ,sneezing_face:dJ,face_with_raised_eyebrow:hJ,face_with_one_eyebrow_raised:fJ,"star-struck":"\u{1F929}",grinning_face_with_star_eyes:pJ,zany_face:mJ,grinning_face_with_one_large_and_one_small_eye:gJ,shushing_face:bJ,face_with_finger_covering_closed_lips:yJ,face_with_symbols_on_mouth:wJ,serious_face_with_symbols_covering_mouth:kJ,face_with_hand_over_mouth:_J,smiling_face_with_smiling_eyes_and_hand_covering_mouth:DJ,face_vomiting:xJ,face_with_open_mouth_vomiting:CJ,exploding_head:vJ,shocked_face_with_exploding_head:SJ,pregnant_woman:EJ,"breast-feeding":"\u{1F931}",palms_up_together:AJ,selfie:FJ,prince:TJ,woman_in_tuxedo:MJ,man_in_tuxedo:OJ,person_in_tuxedo:NJ,mrs_claus:LJ,mother_christmas:$J,"woman-shrugging":"\u{1F937}\u200D\u2640\uFE0F","man-shrugging":"\u{1F937}\u200D\u2642\uFE0F",shrug:IJ,"woman-cartwheeling":"\u{1F938}\u200D\u2640\uFE0F","man-cartwheeling":"\u{1F938}\u200D\u2642\uFE0F",person_doing_cartwheel:RJ,"woman-juggling":"\u{1F939}\u200D\u2640\uFE0F","man-juggling":"\u{1F939}\u200D\u2642\uFE0F",juggling:BJ,fencer:PJ,"woman-wrestling":"\u{1F93C}\u200D\u2640\uFE0F","man-wrestling":"\u{1F93C}\u200D\u2642\uFE0F",wrestlers:jJ,"woman-playing-water-polo":"\u{1F93D}\u200D\u2640\uFE0F","man-playing-water-polo":"\u{1F93D}\u200D\u2642\uFE0F",water_polo:zJ,"woman-playing-handball":"\u{1F93E}\u200D\u2640\uFE0F","man-playing-handball":"\u{1F93E}\u200D\u2642\uFE0F",handball:VJ,diving_mask:UJ,wilted_flower:qJ,drum_with_drumsticks:WJ,clinking_glasses:HJ,tumbler_glass:GJ,spoon:KJ,goal_net:JJ,first_place_medal:YJ,second_place_medal:XJ,third_place_medal:QJ,boxing_glove:ZJ,martial_arts_uniform:eY,curling_stone:tY,lacrosse:nY,softball:rY,flying_disc:iY,croissant:oY,avocado:sY,cucumber:aY,bacon:lY,potato:cY,carrot:uY,baguette_bread:dY,green_salad:hY,shallow_pan_of_food:fY,stuffed_flatbread:pY,egg:mY,glass_of_milk:gY,peanuts:bY,kiwifruit:yY,pancakes:wY,dumpling:kY,fortune_cookie:_Y,takeout_box:DY,chopsticks:xY,bowl_with_spoon:CY,cup_with_straw:vY,coconut:SY,broccoli:EY,pie:AY,pretzel:FY,cut_of_meat:TY,sandwich:MY,canned_food:OY,leafy_green:NY,mango:LY,moon_cake:$Y,bagel:IY,smiling_face_with_3_hearts:RY,yawning_face:BY,smiling_face_with_tear:PY,partying_face:jY,woozy_face:zY,hot_face:VY,cold_face:UY,ninja:qY,disguised_face:WY,pleading_face:HY,sari:GY,lab_coat:KY,goggles:JY,hiking_boot:YY,womans_flat_shoe:XY,crab:QY,lion_face:ZY,scorpion:eX,turkey:tX,unicorn_face:nX,eagle:rX,duck:iX,bat:oX,shark:sX,owl:aX,fox_face:lX,butterfly:cX,deer:uX,gorilla:dX,lizard:hX,rhinoceros:fX,shrimp:pX,squid:mX,giraffe_face:gX,zebra_face:bX,hedgehog:yX,sauropod:wX,"t-rex":"\u{1F996}",cricket:kX,kangaroo:_X,llama:DX,peacock:xX,hippopotamus:CX,parrot:vX,raccoon:SX,lobster:EX,mosquito:AX,microbe:FX,badger:TX,swan:MX,mammoth:OX,dodo:NX,sloth:LX,otter:$X,orangutan:IX,skunk:RX,flamingo:BX,oyster:PX,beaver:jX,bison:zX,seal:VX,guide_dog:UX,probing_cane:qX,bone:WX,leg:HX,foot:GX,tooth:KX,female_superhero:JX,male_superhero:YX,superhero:XX,female_supervillain:QX,male_supervillain:ZX,supervillain:eQ,safety_vest:tQ,ear_with_hearing_aid:nQ,motorized_wheelchair:rQ,manual_wheelchair:iQ,mechanical_arm:oQ,mechanical_leg:sQ,cheese_wedge:aQ,cupcake:lQ,salt:cQ,beverage_box:uQ,garlic:dQ,onion:hQ,falafel:fQ,waffle:pQ,butter:mQ,mate_drink:gQ,ice_cube:bQ,bubble_tea:yQ,woman_standing:wQ,man_standing:kQ,standing_person:_Q,woman_kneeling:DQ,man_kneeling:xQ,kneeling_person:CQ,deaf_woman:vQ,deaf_man:SQ,deaf_person:EQ,face_with_monocle:AQ,farmer:FQ,cook:TQ,person_feeding_baby:MQ,mx_claus:OQ,student:NQ,singer:LQ,artist:$Q,teacher:IQ,factory_worker:RQ,technologist:BQ,office_worker:PQ,mechanic:jQ,scientist:zQ,astronaut:VQ,firefighter:UQ,people_holding_hands:qQ,person_with_probing_cane:WQ,red_haired_person:HQ,curly_haired_person:GQ,bald_person:KQ,white_haired_person:JQ,person_in_motorized_wheelchair:YQ,person_in_manual_wheelchair:XQ,health_worker:QQ,judge:ZQ,pilot:eZ,adult:tZ,child:nZ,older_adult:rZ,woman_with_beard:iZ,man_with_beard:oZ,bearded_person:sZ,person_with_headscarf:aZ,woman_in_steamy_room:lZ,man_in_steamy_room:cZ,person_in_steamy_room:uZ,woman_climbing:dZ,person_climbing:hZ,man_climbing:fZ,woman_in_lotus_position:pZ,person_in_lotus_position:mZ,man_in_lotus_position:gZ,female_mage:bZ,mage:yZ,male_mage:wZ,female_fairy:kZ,fairy:_Z,male_fairy:DZ,female_vampire:xZ,vampire:CZ,male_vampire:vZ,mermaid:SZ,merman:EZ,merperson:AZ,female_elf:FZ,male_elf:TZ,elf:MZ,female_genie:OZ,male_genie:NZ,genie:LZ,female_zombie:$Z,male_zombie:IZ,zombie:RZ,brain:BZ,orange_heart:PZ,billed_cap:jZ,scarf:zZ,gloves:VZ,coat:UZ,socks:qZ,red_envelope:WZ,firecracker:HZ,jigsaw:GZ,test_tube:KZ,petri_dish:JZ,dna:YZ,compass:XZ,abacus:QZ,fire_extinguisher:ZZ,toolbox:eee,bricks:tee,magnet:nee,luggage:ree,lotion_bottle:iee,thread:oee,yarn:see,safety_pin:aee,teddy_bear:lee,broom:cee,basket:uee,roll_of_paper:dee,soap:hee,sponge:fee,receipt:pee,nazar_amulet:mee,ballet_shoes:gee,"one-piece_swimsuit":"\u{1FA71}",briefs:bee,shorts:yee,thong_sandal:wee,drop_of_blood:kee,adhesive_bandage:_ee,stethoscope:Dee,"yo-yo":"\u{1FA80}",kite:xee,parachute:Cee,boomerang:vee,magic_wand:See,pinata:Eee,nesting_dolls:Aee,ringed_planet:Fee,chair:Tee,razor:Mee,axe:Oee,diya_lamp:Nee,banjo:Lee,military_helmet:$ee,accordion:Iee,long_drum:Ree,coin:Bee,carpentry_saw:Pee,screwdriver:jee,ladder:zee,hook:Vee,mirror:Uee,window:qee,plunger:Wee,sewing_needle:Hee,knot:Gee,bucket:Kee,mouse_trap:Jee,toothbrush:Yee,headstone:Xee,placard:Qee,rock:Zee,fly:ete,worm:tte,beetle:nte,cockroach:rte,potted_plant:ite,wood:ote,feather:ste,anatomical_heart:ate,lungs:lte,people_hugging:cte,blueberries:ute,bell_pepper:dte,olive:hte,flatbread:fte,tamale:pte,fondue:mte,teapot:gte,bangbang:bte,interrobang:yte,tm:wte,information_source:kte,left_right_arrow:_te,arrow_up_down:Dte,arrow_upper_left:xte,arrow_upper_right:Cte,arrow_lower_right:vte,arrow_lower_left:Ste,leftwards_arrow_with_hook:Ete,arrow_right_hook:Ate,watch:Fte,hourglass:Tte,keyboard:Mte,eject:Ote,fast_forward:Nte,rewind:Lte,arrow_double_up:$te,arrow_double_down:Ite,black_right_pointing_double_triangle_with_vertical_bar:Rte,black_left_pointing_double_triangle_with_vertical_bar:Bte,black_right_pointing_triangle_with_double_vertical_bar:Pte,alarm_clock:jte,stopwatch:zte,timer_clock:Vte,hourglass_flowing_sand:Ute,double_vertical_bar:qte,black_square_for_stop:Wte,black_circle_for_record:Hte,m:Gte,black_small_square:Kte,white_small_square:Jte,arrow_forward:Yte,arrow_backward:Xte,white_medium_square:Qte,black_medium_square:Zte,white_medium_small_square:ene,black_medium_small_square:tne,sunny:nne,cloud:rne,umbrella:ine,snowman:one,comet:sne,phone:ane,telephone:lne,ballot_box_with_check:cne,shamrock:une,point_up:dne,skull_and_crossbones:hne,radioactive_sign:fne,biohazard_sign:pne,orthodox_cross:mne,star_and_crescent:gne,peace_symbol:bne,yin_yang:yne,wheel_of_dharma:wne,white_frowning_face:kne,relaxed:_ne,female_sign:Dne,male_sign:xne,gemini:Cne,cancer:vne,leo:Sne,virgo:Ene,libra:Ane,scorpius:Fne,chess_pawn:Tne,spades:Mne,clubs:One,hearts:Nne,diamonds:Lne,hotsprings:$ne,recycle:Ine,infinity:Rne,wheelchair:Bne,hammer_and_pick:Pne,crossed_swords:jne,medical_symbol:zne,staff_of_aesculapius:Vne,scales:Une,alembic:qne,gear:Wne,atom_symbol:Hne,fleur_de_lis:Gne,warning:Kne,zap:Jne,transgender_symbol:Yne,white_circle:Xne,black_circle:Qne,coffin:Zne,funeral_urn:ere,soccer:tre,baseball:nre,snowman_without_snow:rre,partly_sunny:ire,thunder_cloud_and_rain:ore,ophiuchus:sre,pick:are,helmet_with_white_cross:lre,chains:cre,no_entry:ure,shinto_shrine:dre,church:hre,mountain:fre,umbrella_on_ground:pre,fountain:mre,golf:gre,ferry:bre,boat:yre,sailboat:wre,skier:kre,ice_skate:_re,"woman-bouncing-ball":"\u26F9\uFE0F\u200D\u2640\uFE0F","man-bouncing-ball":"\u26F9\uFE0F\u200D\u2642\uFE0F",person_with_ball:Dre,tent:xre,fuelpump:Cre,scissors:vre,airplane:Sre,email:Ere,envelope:Are,fist:Fre,hand:Tre,raised_hand:Mre,v:Ore,writing_hand:Nre,pencil2:Lre,black_nib:$re,heavy_check_mark:Ire,heavy_multiplication_x:Rre,latin_cross:Bre,star_of_david:Pre,eight_spoked_asterisk:jre,eight_pointed_black_star:zre,snowflake:Vre,sparkle:Ure,x:qre,negative_squared_cross_mark:Wre,heavy_heart_exclamation_mark_ornament:Hre,heart_on_fire:Gre,mending_heart:Kre,heart:Jre,arrow_right:Yre,curly_loop:Xre,loop:Qre,arrow_heading_up:Zre,arrow_heading_down:eie,arrow_left:tie,arrow_up:nie,arrow_down:rie,black_large_square:iie,white_large_square:oie,star:sie,o:aie,wavy_dash:lie,part_alternation_mark:cie,congratulations:uie,secret:die};var eD=aI,Pr=hie,fie=/:([a-zA-Z0-9_\-\+]+):/g,pie=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function ys(e){var t=e.indexOf(":");return t>-1?t===e.length-1?(e=e.substring(0,t),ys(e)):(e=e.substr(t+1),ys(e)):e}function tD(e){return typeof e=="string"&&e.length>0?":"+e+":":e}function mie(e){return typeof e=="string"&&e[0]!==":"?tD(e):e}var gie=String.fromCharCode(65039),bie=new RegExp(gie,"g");function ws(e){return e.replace(bie,"")}var Em=Object.keys(Pr).reduce(function(e,t){return e[ws(Pr[t])]=t,e},{}),Te={emoji:Pr};Te._get=function(t){return Em[ws(t)]?t:Pr.hasOwnProperty(t)?Pr[t]:mie(t)};Te.get=function(t){return t=ys(t),Te._get(t)};Te.find=function(t){return Te.findByName(t)||Te.findByCode(t)};Te.findByName=function(t){var n=ys(t),r=Pr[n];return r?{emoji:r,key:n}:void 0};Te.findByCode=function(t){var n=ws(t),r=Em[n];return r?{emoji:Pr[r],key:r}:void 0};Te.hasEmoji=function(t){return Te.hasEmojiByName(t)||Te.hasEmojiByCode(t)};Te.hasEmojiByName=function(t){var n=Te.findByName(t);return!!n&&n.key===ys(t)};Te.hasEmojiByCode=function(t){var n=Te.findByCode(t);return!!n&&ws(n.emoji)===ws(t)};Te.which=function(t,n){var r=ws(t),i=Em[r];return n?tD(i):i};Te.emojify=function(t,n,r){return t?t.split(fie).map(function(o,s){if(s%2===0)return o;var a=Te._get(o),l=a.indexOf(":")>-1;return l&&typeof n=="function"?n(o):!l&&typeof r=="function"?r(a,o):a}).join(""):""};Te.random=function(){var t=Object.keys(Pr),n=Math.floor(Math.random()*t.length),r=t[n],i=Te._get(r);return{key:r,emoji:i}};Te.search=function(t){var n=Object.keys(Pr),r=ys(t),i=n.filter(function(o){return o.toString().indexOf(r)===0});return i.map(function(o){return{key:o,emoji:Te._get(o)}})};Te.unemojify=function(t){if(!t)return"";var n=eD(t);return n.map(function(r){return Te.which(r,!0)||r}).join("")};Te.replace=function(t,n,r){if(!t)return"";var i=typeof n=="function"?n:function(){return n},o=eD(t),s=o.map(function(a,l){var c=Te.findByCode(a);return c&&r&&o[l+1]===" "&&(o[l+1]=""),c?i(c):a}).join("");return r?s.replace(pie,""):s};Te.strip=function(t){return Te.replace(t,"",!0)};var yie=Te;(function(e){e.exports=yie})(R_);const ha=PT(R_.exports),Sb=[{name:"angry",emoji:"\u{1F620}",tags:["mad","annoyed"],description:"angry face",emoticons:[">:(",">:[",">:-(",">:-[",">=(",">=[",">=-(",">=-["]},{name:"blush",emoji:"\u{1F60A}",tags:["proud"],description:"smiling face with smiling eyes",emoticons:[':")',':"]',':"D',':-")',':-"]',':-"D','=")','="]','="D','=-")','=-"]','=-"D']},{name:"broken_heart",emoji:"\u{1F494}",tags:[],description:"broken heart",emoticons:["<\\3","</3"]},{name:"confused",emoji:"\u{1F615}",tags:[],description:"confused face",emoticons:[":/",":\\",":-/",":-\\","=/","=\\","=-/","=-\\"]},{name:"cry",emoji:"\u{1F622}",tags:["sad","tear"],description:"crying face",emoticons:[":,(",":,[",":,|",":,-(",":,-[",":,-|",":'(",":'[",":'|",":'-(",":'-[",":'-|","=,(","=,[","=,|","=,-(","=,-[","=,-|","='(","='[","='|","='-(","='-[","='-|"]},{name:"frowning",emoji:"\u{1F626}",tags:[],description:"frowning face with open mouth",emoticons:[":(",":[",":-(",":-[","=(","=[","=-(","=-["]},{name:"heart",emoji:"\u2764\uFE0F",tags:["love"],description:"red heart",emoticons:["<3"]},{name:"imp",emoji:"\u{1F47F}",tags:["angry","devil","evil","horns"],description:"angry face with horns",emoticons:["]:(","]:[","]:-(","]:-[","]=(","]=[","]=-(","]=-["]},{name:"innocent",emoji:"\u{1F607}",tags:["angel"],description:"smiling face with halo",emoticons:["o:)","o:]","o:D","o:-)","o:-]","o:-D","o=)","o=]","o=D","o=-)","o=-]","o=-D","O:)","O:]","O:D","O:-)","O:-]","O:-D","O=)","O=]","O=D","O=-)","O=-]","O=-D","0:)","0:]","0:D","0:-)","0:-]","0:-D","0=)","0=]","0=D","0=-)","0=-]","0=-D"]},{name:"joy",emoji:"\u{1F602}",tags:["tears"],description:"face with tears of joy",emoticons:[":,)",":,]",":,D",":,-)",":,-]",":,-D",":')",":']",":'D",":'-)",":'-]",":'-D","=,)","=,]","=,D","=,-)","=,-]","=,-D","=')","=']","='D","='-)","='-]","='-D"]},{name:"kissing",emoji:"\u{1F617}",tags:[],description:"kissing face",emoticons:[":*",":-*","=*","=-*"]},{name:"laughing",emoji:"\u{1F606}",tags:["happy","haha"],description:"grinning squinting face",emoticons:["x)","x]","xD","x-)","x-]","x-D","X)","X]","X-)","X-]","X-D"]},{name:"man",emoji:"\u{1F468}",tags:["mustache","father","dad"],description:"man",emoticons:[":3",":-3","=3","=-3",";3",";-3","x3","x-3","X3","X-3"]},{name:"neutral_face",emoji:"\u{1F610}",tags:["meh"],description:"neutral face",emoticons:[":|",":-|","=|","=-|"]},{name:"no_mouth",emoji:"\u{1F636}",tags:["mute","silence"],description:"face without mouth",emoticons:[":-"]},{name:"open_mouth",emoji:"\u{1F62E}",tags:["surprise","impressed","wow"],description:"face with open mouth",emoticons:[":o",":O",":0",":-o",":-O",":-0","=o","=O","=0","=-o","=-O","=-0"]},{name:"rage",emoji:"\u{1F621}",tags:["angry"],description:"pouting face",emoticons:[":@",":-@","=@","=-@"]},{name:"smile",emoji:"\u{1F604}",tags:["happy","joy","laugh","pleased"],description:"grinning face with smiling eyes",emoticons:[":D",":-D","=D","=-D"]},{name:"smiley",emoji:"\u{1F603}",tags:["happy","joy","haha"],description:"grinning face with big eyes",emoticons:[":)",":]",":-)",":-]","=)","=]","=-)","=-]"]},{name:"smiling_imp",emoji:"\u{1F608}",tags:["devil","evil","horns"],description:"smiling face with horns",emoticons:["]:)","]:]","]:D","]:-)","]:-]","]:-D","]=)","]=]","]=D","]=-)","]=-]","]=-D"]},{name:"sob",emoji:"\u{1F62D}",tags:["sad","cry","bawling"],description:"loudly crying face",emoticons:[":,'(",":,'[",":,'-(",":,'-[",":',(",":',[",":',-(",":',-[","=,'(","=,'[","=,'-(","=,'-[","=',(","=',[","=',-(","=',-["]},{name:"stuck_out_tongue",emoji:"\u{1F61B}",tags:[],description:"face with tongue",emoticons:[":p",":P",":d",":-p",":-P",":-d","=p","=P","=d","=-p","=-P","=-d"]},{name:"stuck_out_tongue_closed_eyes",emoji:"\u{1F61D}",tags:["prank"],description:"squinting face with tongue",emoticons:["xP","x-p","x-P","x-d","Xp","Xd","X-p","X-P","X-d"]},{name:"stuck_out_tongue_winking_eye",emoji:"\u{1F61C}",tags:["prank","silly"],description:"winking face with tongue",emoticons:[";p",";P",";d",";-p",";-P",";-d"]},{name:"sunglasses",emoji:"\u{1F60E}",tags:["cool"],description:"smiling face with sunglasses",emoticons:["8)","8]","8D","8-)","8-]","8-D","B)","B]","B-)","B-]","B-D"]},{name:"sweat",emoji:"\u{1F613}",tags:[],description:"downcast face with sweat",emoticons:[",:(",",:[",",:-(",",:-[",",=(",",=[",",=-(",",=-[","':(","':[","':-(","':-[","'=(","'=[","'=-(","'=-["]},{name:"sweat_smile",emoji:"\u{1F605}",tags:["hot"],description:"grinning face with sweat",emoticons:[",:)",",:]",",:D",",:-)",",:-]",",:-D",",=)",",=]",",=D",",=-)",",=-]",",=-D","':)","':]","':D","':-)","':-]","':-D","'=)","'=]","'=D","'=-)","'=-]","'=-D"]},{name:"unamused",emoji:"\u{1F612}",tags:["meh"],description:"unamused face",emoticons:[":$",":s",":z",":S",":Z",":-$",":-s",":-z",":-S",":-Z","=$","=s","=z","=S","=Z","=-$","=-s","=-z","=-S","=-Z"]},{name:"wink",emoji:"\u{1F609}",tags:["flirt"],description:"winking face",emoticons:[";)",";]",";D",";-)",";-]",";-D"]}],wie=/:\+1:|:-1:|:[\w-]+:/g,kie=/[$@|*'",;.=:\-)([\]\\/<>038BOopPsSdDxXzZ]{2,5}/g,Eb=/_/g,_ie={padSpaceAfter:!1,emoticon:!1};function Die(e){const t=Object.assign({},_ie,e),n=!!t.padSpaceAfter,r=!!t.emoticon;function i(a){const l=Sb.find(f=>f.emoticons.includes(a)),c=Sb.find(f=>f.emoticons.includes(a.slice(0,-1))),u=c?a.slice(-1):"",d=n?" ":"";return(l?l.emoji+d:c&&c.emoji+d+u)||a}function o(a){let l=ha.get(a);if(a.endsWith("_man:")&&l===a){const c="man-"+a.slice(1,-5).replace(Eb,"-"),u=ha.get(c);u!==c&&(l=u)}else if(a.endsWith("_woman:")&&l===a){const c="woman-"+a.slice(1,-7).replace(Eb,"-"),u=ha.get(c);u!==c&&(l=u)}return n&&l!==a?l+" ":l}function s(a){io(a,"text",function(l){l.value=l.value.replace(wie,o),r&&(l.value=l.value.replace(kie,i))})}return s}/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var xie=function(){var e={base:"https://twemoji.maxcdn.com/v/14.0.2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:k,toCodePoint:g},onerror:function(){this.parentNode&&this.parentNode.replaceChild(l(this.alt,!1),this)},parse:_,replace:S,test:v},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,i=String.fromCharCode(8205),o=/[&<>'"]/g,s=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,a=String.fromCharCode;return e;function l(w,D){return document.createTextNode(D?w.replace(r,""):w)}function c(w){return w.replace(o,m)}function u(w,D){return"".concat(D.base,D.size,"/",w,D.ext)}function d(w,D){for(var x=w.childNodes,E=x.length,C,A;E--;)C=x[E],A=C.nodeType,A===3?D.push(C):A===1&&!("ownerSVGElement"in C)&&!s.test(C.nodeName.toLowerCase())&&d(C,D);return D}function h(w){return g(w.indexOf(i)<0?w.replace(r,""):w)}function f(w,D){for(var x=d(w,[]),E=x.length,C,A,M,$,P,O,N,z,q,H,T,F,ee;E--;){for(M=!1,$=document.createDocumentFragment(),P=x[E],O=P.nodeValue,z=0;N=n.exec(O);){if(q=N.index,q!==z&&$.appendChild(l(O.slice(z,q),!0)),T=N[0],F=h(T),z=q+T.length,ee=D.callback(F,D),F&&ee){H=new Image,H.onerror=D.onerror,H.setAttribute("draggable","false"),C=D.attributes(T,F);for(A in C)C.hasOwnProperty(A)&&A.indexOf("on")!==0&&!H.hasAttribute(A)&&H.setAttribute(A,C[A]);H.className=D.className,H.alt=T,H.src=ee,M=!0,$.appendChild(H)}H||$.appendChild(l(T,!1)),H=null}M&&(z<O.length&&$.appendChild(l(O.slice(z),!0)),P.parentNode.replaceChild($,P))}return w}function p(w,D){return S(w,function(x){var E=x,C=h(x),A=D.callback(C,D),M,$;if(C&&A){E="<img ".concat('class="',D.className,'" ','draggable="false" ','alt="',x,'"',' src="',A,'"'),M=D.attributes(x,C);for($ in M)M.hasOwnProperty($)&&$.indexOf("on")!==0&&E.indexOf(" "+$+"=")===-1&&(E=E.concat(" ",$,'="',c(M[$]),'"'));E=E.concat("/>")}return E})}function m(w){return t[w]}function b(){return null}function y(w){return typeof w=="number"?w+"x"+w:w}function k(w){var D=typeof w=="string"?parseInt(w,16):w;return D<65536?a(D):(D-=65536,a(55296+(D>>10),56320+(D&1023)))}function _(w,D){return(!D||typeof D=="function")&&(D={callback:D}),(typeof w=="string"?p:f)(w,{callback:D.callback||u,attributes:typeof D.attributes=="function"?D.attributes:b,base:typeof D.base=="string"?D.base:e.base,ext:D.ext||e.ext,size:D.folder||y(D.size||e.size),className:D.className||e.className,onerror:D.onerror||e.onerror})}function S(w,D){return String(w).replace(n,D)}function v(w){n.lastIndex=0;var D=n.test(w);return n.lastIndex=0,D}function g(w,D){for(var x=[],E=0,C=0,A=0;A<w.length;)E=w.charCodeAt(A++),C?(x.push((65536+(C-55296<<10)+(E-56320)).toString(16)),C=0):55296<=E&&E<=56319?C=E:x.push(E.toString(16));return x.join(D||"-")}}();const Cie=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,vie=/:\+1|:-1|:[\w-]+/,Sie=/:\+1:|:-1:|:[\w-]+:/,Eie=/(:([^:\s]+):)$/,Aie=e=>({title:e}),Am=(e,t)=>xie.parse(e,{attributes:Aie,...t}),Fie=(e,t,n,r,i,o)=>{if(e.composing)return!1;const{state:s}=e,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;const l=(a.parent.textBetween(Math.max(0,a.parentOffset-10),a.parentOffset,void 0,"\uFFFC")+r).toLowerCase();if(Sie.test(l))return!1;const c=vie.exec(l);if(c&&c[0]&&l.endsWith(c[0])){const u=c[0];return i(t-(u.length-r.length),n),o(u),!0}return!1},Tie=(e,t,n,r,i)=>{for(;t.firstChild;)t.firstChild.remove();e.forEach(({emoji:o,key:s},a)=>{const l=document.createElement("div");l.className="milkdown-emoji-filter_item";const c=document.createElement("span");c.innerHTML=Am(o,i),c.className="milkdown-emoji-filter_item-emoji";const u=document.createElement("span");u.textContent=`:${s}:`,u.className="milkdown-emoji-filter_item-key",l.appendChild(c),l.appendChild(u),t.appendChild(l),a===0&&r(l);const d=f=>{const{target:p}=f;p instanceof HTMLElement&&r(p)},h=f=>{f.preventDefault(),n()};l.addEventListener("mouseenter",d),l.addEventListener("mousedown",h)})},Mie=(e,{css:t,cx:n})=>{const r=e.get(ct,void 0),i=e.get(Un,void 0),o=e.get(Lr,void 0),s=e.get(Be,"radius"),a=e.get(Bn,"typography"),l=(u,d=1)=>e.get(Mt,[u,d]),c=t`
        min-height: 36px;
        max-height: 320px;
        overflow-y: auto;
        border-radius: ${s};
        position: absolute;
        background: ${l("surface")};

        &.hide {
            display: none;
        }

        .milkdown-emoji-filter_item {
            display: flex;
            gap: 8px;
            height: 36px;
            padding: 0 14px;
            align-items: center;
            justify-content: flex-start;
            cursor: pointer;
            line-height: 2;
            font-family: ${a};
            font-size: 14px;
            &.active {
                background: ${l("secondary",.12)};
                color: ${l("primary")};
            }
        }

        .emoji {
            height: 14px;
            width: 14px;
            margin: 0 1px 0 1.5px;
            vertical-align: -1.5px;
        }
    `;return n(r,i,o,c)},Oie=new _e("MILKDOWN_EMOJI_FILTER"),Nie=(e,t,n)=>{let r=!1,i=0,o="",s=null;const a=()=>{r=!1,i=0,o="",s=null},l=c=>{s&&s.classList.remove("active"),c&&c.classList.add("active"),s=c};return new ye({key:Oie,props:{handleKeyDown(c,u){return["Delete","Backspace"].includes(u.key)?(o=o.slice(0,-1),o.length<=1&&a(),!1):!(!r||!["ArrowUp","ArrowDown","Enter"].includes(u.key))},handleTextInput(c,u,d,h){return r=Fie(c,u,d,h,f=>{i=f},f=>{o=f}),r||a(),!1}},view:c=>{const{parentNode:u}=c.dom;if(!u)throw yn();const d=document.createElement("div");d.classList.add("milkdown-emoji-filter","hide"),e.themeManager.onFlush(()=>{const m=d.className.split(" ").filter(y=>["hide","milkdown-emoji-filter"].includes(y));d.className=m.join(" ");const b=e.getStyle(y=>Mie(e.themeManager,y));b&&b.split(" ").forEach(y=>d.classList.add(y))});const h=()=>{var m;if(!s)return;const{tr:b}=c.state,y=c.state.schema.node("emoji",{html:(m=s.firstElementChild)==null?void 0:m.innerHTML});c.dispatch(b.delete(i,i+o.length).insert(i,y)),a(),d.classList.add("hide")};u.appendChild(d);const f=m=>{if(!r||!(m instanceof KeyboardEvent))return;const{key:b}=m;if(b==="Enter"){h();return}if(["ArrowDown","ArrowUp"].includes(b)){const y=b==="ArrowDown"?(s==null?void 0:s.nextElementSibling)||d.firstElementChild:(s==null?void 0:s.previousElementSibling)||d.lastElementChild;if(!y)return;l(y)}},p=m=>{!r||(m.stopPropagation(),a(),d.classList.add("hide"))};return u.addEventListener("keydown",f),u.addEventListener("mousedown",p),{update:m=>{const{selection:b}=m.state;if(b.from-b.to!==0||!r)return a(),d.classList.add("hide"),null;const y=ha.search(o).slice(0,t),{node:k}=m.domAtPos(i);return y.length===0||!k?(d.classList.add("hide"),null):(d.style.maxHeight="",d.classList.remove("hide"),Tie(y,d,h,l,n),om(m,d,(_,S,v)=>{const g=d.parentElement;if(!g)throw yn();const w=m.coordsAtPos(i);let D=w.left-v.left;D<0&&(D=0);let x,E;const C=w.top-v.top,A=v.height+v.top-w.bottom;A>=S.height+28?x="bottom":C>=S.height+28?x="top":A>=C?(x="bottom",E=A-28):(x="top",E=C-28),(C<0||A<0)&&(E=v.height-(w.bottom-w.top)-28,E>S.height&&(E=void 0));const M=x==="top"?w.top-v.top-(E!=null?E:S.height)-14+g.scrollTop:w.bottom-v.top+14+g.scrollTop;d.style.maxHeight=E!==void 0&&E>0?`${E}px`:"";const $=g.clientWidth-(d.offsetWidth+4);return D>$&&(D=$),[M,D]}),null)},destroy:()=>{u.removeEventListener("keydown",f),u.removeEventListener("mousedown",p),d.remove()}}}})},Ab=Cie(),Lie=e=>!!e.children,$ie=e=>!!e.value;function Iie(e,t){return n(e,0,null)[0];function n(r,i,o){if(Lie(r)){const s=[];for(let a=0,l=r.children.length;a<l;a++){const c=r.children[a];if(c){const u=n(c,a,r);if(u)for(let d=0,h=u.length;d<h;d++){const f=u[d];f&&s.push(f)}}}r.children=s}return t(r,i,o)}}const Rie=e=>()=>{function t(n){Iie(n,r=>{if(!$ie(r))return[r];const i=r.value,o=[];let s,a=i;for(;s=Ab.exec(a);){const{index:l}=s,c=s[0];c&&(l>0&&o.push({...r,value:a.slice(0,l)}),o.push({...r,value:Am(c,e),type:"emoji"}),a=a.slice(l+c.length)),Ab.lastIndex=0}return a.length&&o.push({...r,value:a}),o})}return t},Bie=ht((e,t)=>{const n=()=>e.getStyle(({css:r})=>r`
                .emoji {
                    height: 1em;
                    width: 1em;
                    margin: 0 1px 0 1.5px;
                    vertical-align: -1.5px;
                }
            `);return{id:"emoji",schema:()=>({group:"inline",inline:!0,atom:!0,attrs:{html:{default:""}},parseDOM:[{tag:'span[data-type="emoji"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw Lt(r);return{html:r.innerHTML}}}],toDOM:r=>{const i=document.createElement("span");return i.classList.add("emoji-wrapper"),i.dataset.type="emoji",e.themeManager.onFlush(()=>{const o=n();o&&i.classList.add(o)}),i.innerHTML=r.attrs.html,{dom:i}},parseMarkdown:{match:({type:r})=>r==="emoji",runner:(r,i,o)=>{r.addNode(o,{html:i.value})}},toMarkdown:{match:r=>r.type.name==="emoji",runner:(r,i)=>{const o=document.createElement("span");o.innerHTML=i.attrs.html;const s=o.querySelector("img"),a=s==null?void 0:s.title;o.remove(),r.addNode("text",void 0,a)}}}),inputRules:r=>[new ln(Eie,(i,o,s,a)=>{const l=o[0];if(!l)return null;const c=ha.get(l);if(!c||l.includes(c))return null;const u=Am(c,t==null?void 0:t.twemojiOptions);return i.tr.setMeta("emoji",!0).replaceRangeWith(s,a,r.create({html:u})).scrollIntoView()})],remarkPlugins:()=>[Die,Rie(t==null?void 0:t.twemojiOptions)],prosePlugins:()=>{var r;return[Nie(e,(r=t==null?void 0:t.maxListSize)!=null?r:6,t==null?void 0:t.twemojiOptions)]}}}),Pie=Gt.create([Bie()]);var ru=200,_t=function(){};_t.prototype.append=function(t){return t.length?(t=_t.from(t),!this.length&&t||t.length<ru&&this.leafAppend(t)||this.length<ru&&t.leafPrepend(this)||this.appendInner(t)):this};_t.prototype.prepend=function(t){return t.length?_t.from(t).append(this):this};_t.prototype.appendInner=function(t){return new jie(this,t)};_t.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?_t.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};_t.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};_t.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};_t.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(t(o,s))},n,r),i};_t.from=function(t){return t instanceof _t?t:t&&t.length?new nD(t):_t.empty};var nD=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new t(this.values.slice(i,o))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=ru)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=ru)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(_t);_t.empty=new nD([]);var jie=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(_t),rD=_t;const zie=500;class $n{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=t.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new rr(d.map));let f=d.step.map(i.slice(o)),p;f&&s.maybeStep(f).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new rr(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new $n(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(t,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let d=t.steps[u].invert(t.docs[u]),h=new rr(t.mapping.maps[u],d,n),f;(f=l&&l.merge(h))&&(h=f,u?o.pop():a=a.slice(0,a.length-1)),o.push(h),n&&(s++,n=void 0),i||(l=h)}let c=s-r.depth;return c>Uie&&(a=Vie(a,c),s-=c),new $n(a.append(o),s)}remapping(t,n){let r=new Wo;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},t,n),r}addMaps(t){return this.eventCount==0?this:new $n(this.items.append(t.map(n=>new rr(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let f=o.getMirror(--l);if(f==null)return;s=Math.min(s,f);let p=o.maps[f];if(h.step){let m=t.steps[f].invert(t.docs[f]),b=h.selection&&h.selection.map(o.slice(l+1,f));b&&a++,r.push(new rr(p,m,b))}else r.push(new rr(p))},i);let c=[];for(let h=n;h<s;h++)c.push(new rr(o.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new $n(u,a);return d.emptyItemCount()>zie&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=t)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new rr(c.invert(),l,u),h,f=i.length-1;(h=i.length&&i[f].merge(d))?i[f]=h:i.push(d)}}else s.map&&r--},this.items.length,0),new $n(rD.from(i.reverse()),o)}}$n.empty=new $n(rD.empty,0);function Vie(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class rr{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new rr(n.getMap().invert(),n,this.selection)}}}class ei{constructor(t,n,r,i){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i}}const Uie=20;function qie(e,t,n,r){let i=n.getMeta(gi),o;if(i)return i.historyState;n.getMeta(Hie)&&(e=new ei(e.done,e.undone,null,0));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(s&&s.getMeta(gi))return s.getMeta(gi).redo?new ei(e.done.addTransform(n,void 0,r,Tc(t)),e.undone,Fb(n.mapping.maps[n.steps.length-1]),e.prevTime):new ei(e.done,e.undone.addTransform(n,void 0,r,Tc(t)),null,e.prevTime);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=e.prevTime==0||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Wie(n,e.prevRanges)),l=s?ah(e.prevRanges,n.mapping):Fb(n.mapping.maps[n.steps.length-1]);return new ei(e.done.addTransform(n,a?t.selection.getBookmark():void 0,r,Tc(t)),$n.empty,l,n.time)}else return(o=n.getMeta("rebased"))?new ei(e.done.rebased(n,o),e.undone.rebased(n,o),ah(e.prevRanges,n.mapping),e.prevTime):new ei(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),ah(e.prevRanges,n.mapping),e.prevTime)}function Wie(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&i>=t[o]&&(n=!0)}),n}function Fb(e){let t=[];return e.forEach((n,r,i,o)=>t.push(i,o)),t}function ah(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function iD(e,t,n,r){let i=Tc(t),o=gi.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,i),c=new ei(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(gi,{redo:r,historyState:c}).scrollIntoView())}let lh=!1,Tb=null;function Tc(e){let t=e.plugins;if(Tb!=t){lh=!1,Tb=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){lh=!0;break}}return lh}const gi=new _e("history"),Hie=new _e("closeHistory");function oD(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new ye({key:gi,state:{init(){return new ei($n.empty,$n.empty,null,0)},apply(t,n,r){return qie(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?iu:r=="historyRedo"?Xo:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}const iu=(e,t)=>{let n=gi.getState(e);return!n||n.done.eventCount==0?!1:(t&&iD(n,e,t,!1),!0)},Xo=(e,t)=>{let n=gi.getState(e);return!n||n.undone.eventCount==0?!1:(t&&iD(n,e,t,!0),!0)},Gie=we("Undo"),Kie=we("Redo"),Jie=qr(()=>({commands:()=>[be(Gie,()=>iu),be(Kie,()=>Xo)],prosePlugins:()=>[oD(),lo({"Mod-z":iu,"Mod-y":Xo,"Shift-Mod-z":Xo})]})),Yie=Gt.create([Jie()]);var Xie=Object.defineProperty,Qie=(e,t,n)=>t in e?Xie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qn=(e,t,n)=>(Qie(e,typeof t!="symbol"?t+"":t,n),n);class sD{constructor(){Qn(this,"beforeMountedListeners",[]),Qn(this,"mountedListeners",[]),Qn(this,"updatedListeners",[]),Qn(this,"markdownUpdatedListeners",[]),Qn(this,"blurListeners",[]),Qn(this,"focusListeners",[]),Qn(this,"destroyListeners",[]),Qn(this,"beforeMount",t=>(this.beforeMountedListeners.push(t),this)),Qn(this,"mounted",t=>(this.mountedListeners.push(t),this)),Qn(this,"updated",t=>(this.updatedListeners.push(t),this))}get listeners(){return{beforeMounted:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners}}markdownUpdated(t){return this.markdownUpdatedListeners.push(t),this}blur(t){return this.blurListeners.push(t),this}focus(t){return this.focusListeners.push(t),this}destroy(t){return this.destroyListeners.push(t),this}}const ou=Q(new sD,"listener"),Zie=new _e("MILKDOWN_LISTENER"),eoe=e=>(e.inject(ou,new sD),async t=>{await t.wait(Rr);const n=t.get(ou),{listeners:r}=n;r.beforeMounted.forEach(l=>l(t)),await t.wait(da);const i=t.get(Yo);let o=null,s=null;const a=new ye({key:Zie,view:()=>({destroy:()=>{r.destroy.forEach(l=>l(t))}}),props:{handleDOMEvents:{focus:()=>(r.focus.forEach(l=>l(t)),!1),blur:()=>(r.blur.forEach(l=>l(t)),!1)}},state:{init:()=>{},apply:l=>{if(!l.docChanged)return;const{doc:c}=l;if(r.updated.length>0&&(o==null||!o.eq(c))&&r.updated.forEach(u=>{u(t,c,o)}),r.markdownUpdated.length>0&&(o==null||!o.eq(c))){const u=i(l.doc);(s==null||s!==u)&&(r.markdownUpdated.forEach(d=>{d(t,u,s)}),s=u)}o=c}}});t.update(ut,l=>l.concat(a)),await t.wait(Qi),r.mounted.forEach(l=>l(t))}),aD=(e,t)=>{if(!t)return!1;const{from:n,to:r}=e.selection;return e.doc.rangeHasMark(n,n===r?r+1:r,t)},toe=e=>{const{selection:t}=e;return t instanceof ne?!!e.doc.textBetween(t.from,t.to):!1},noe=e=>Boolean(ul(t=>!!t.type.spec.code)(e.selection)),roe=(e,t)=>!toe(e)||noe(e)||aD(e,t),Vs=(e,t,n,r)=>({icon:e,onClick:t,isHidden:()=>i=>roe(i.state,r),isActive:()=>i=>aD(i.state,n),canAddToDOM:()=>i=>!!n&&!!i.state.schema.marks[n.name]}),ioe=e=>{const t=e.get(tt).marks;return[Vs("bold","ToggleBold",t.strong),Vs("italic","ToggleItalic",t.em),Vs("strikeThrough","ToggleStrikeThrough",t.strike_through),Vs("code","ToggleInlineCode",t.code_inline),Vs("link","ToggleLink",t.link)]},ooe=(e,t=ioe)=>{const n=({icon:r,onClick:i,isHidden:o,isActive:s,canAddToDOM:a})=>{var l;return{$:typeof r=="function"?r(e):(l=e.get(Ce).get(it,r))==null?void 0:l.dom,command:typeof i=="string"?()=>e.get(ke).call(i):i(e),disable:o(e),active:s(e),enable:a(e)}};return t(e).map(n)},soe=(e,t,n)=>{e.classList.remove("hide"),sm(t,e,(r,i,o,s)=>{const a=e.parentElement;if(!a)throw yn();const l=i.left-r.left;let c=r.left-s.left-(o.width-l)/2,u=r.top-s.top-o.height-14+a.scrollTop;c<0&&(c=0);const d=a.clientWidth-(o.width+4);return c>d&&(c=d),(u<a.scrollTop||n&&s.bottom-r.bottom>o.height)&&(u=r.bottom-s.top+14+a.scrollTop),[u,c]})},aoe=(e,{css:t})=>{const n=(i,o=1)=>e.get(Mt,[i,o]),r=e.get(Be,"lineWidth");return t`
        display: inline-flex;
        cursor: pointer;
        justify-content: space-evenly;
        position: absolute;
        border-radius: ${e.get(Be,"radius")};
        z-index: 2;

        ${e.get(ct,void 0)}
        ${e.get(Un,void 0)}

        overflow: hidden;
        background: ${n("surface")};

        .icon {
            position: relative;
            color: ${n("solid",.87)};

            width: 48px;
            line-height: 48px;
            text-align: center;
            transition: all 0.4s ease-in-out;
            &:hover {
                background-color: ${n("secondary",.12)};
            }
            &.active {
                color: ${n("primary")};
            }
            &:not(:last-child)::after {
                content: '';
                position: absolute;
                top: 0;
                right: calc(-0.5 * ${r});
                width: ${r};
                bottom: 0;
                background: ${n("line")};
            }
        }
        &.hide,
        .hide {
            display: none;
        }
    `},loe=(e,t,n)=>{const r=document.createElement("div");return t.themeManager.onFlush(()=>{const i=t.getStyle(o=>aoe(t.themeManager,o))||"";i&&r.classList.add(i)}),r.classList.add(t.getClassName({},n)),{dom:r,render:i=>{var o;e.filter(s=>s.enable(i)&&s.$!=null).forEach(({$:s})=>r.appendChild(s)),(o=i.dom.parentNode)==null||o.appendChild(r)}}},coe=(e,t)=>Object.values(e).filter(n=>n.enable(t)&&n.$!=null).every(({$:n})=>n.classList.contains("hide")),uoe=(e,t)=>(e.filter(n=>n.enable(t)&&n.$!=null).forEach(n=>{var r;if((r=n.disable)!=null&&r.call(n,t)){n.$.classList.add("hide");return}if(n.$.classList.remove("hide"),n.active(t)){n.$.classList.add("active");return}n.$.classList.remove("active")}),coe(e,t)),Mb=(e,t,n,r)=>{const{dom:i,render:o}=loe(e,t,r),s=l=>{const c=e.find(({$:u})=>l.target instanceof Element&&u.contains(l.target));!c||(l.stopPropagation(),l.preventDefault(),c.command())},a=()=>{i.classList.add("hide")};return i.addEventListener("mousedown",s),{destroy:()=>{i.removeEventListener("mousedown",s),i.remove()},hide:a,update:l=>{if(uoe(e,l)){a();return}soe(i,l,n)},render:o}},doe=(e,t,n,r)=>{let i=Mb(e,t,n,r),o=!1;const s=()=>{i.hide()},a=(l,c)=>{const{state:u}=l;if(!l.editable||o){s();return}(c==null?void 0:c.doc.eq(u.doc))&&c.selection.eq(u.selection)||i.update(l)};return{recreate:l=>{i=Mb(e,t,n,r),i.render(l),a(l)},update:a,destroy:()=>{i.destroy()},render:l=>{i.render(l),a(l)},setHide:l=>{o=l}}},hoe=new _e("MILKDOWN_TOOLTIP"),foe=qr((e,t)=>({id:"tooltip",prosePlugins:(n,r)=>{var i;const o=doe(ooe(r,t==null?void 0:t.items),e,(i=t==null?void 0:t.bottom)!=null?i:!1,"tooltip");return[new ye({key:hoe,props:{handleClick:s=>(o.setHide(!1),o.update(s),!1),handleDOMEvents:{mousedown:()=>(o.setHide(!1),!1)}},view:s=>(o.recreate(s),{update:o.update,destroy:o.destroy})})]}})),poe=Gt.create([foe()]);function lD(e){return function(t,n){let{$from:r,$to:i,node:o}=t.selection;if(o&&o.isBlock||r.depth<2||!r.sameParent(i))return!1;let s=r.node(-1);if(s.type!=e)return!1;if(r.parent.content.size==0&&r.node(-1).childCount==r.indexAfter(-1)){if(r.depth==3||r.node(-3).type!=e||r.index(-2)!=r.node(-2).childCount-1)return!1;if(n){let u=B.empty,d=r.index(-1)?1:r.index(-2)?2:3;for(let b=r.depth-d;b>=r.depth-3;b--)u=B.from(r.node(b).copy(u));let h=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;u=u.append(B.from(e.createAndFill()));let f=r.before(r.depth-(d-1)),p=t.tr.replace(f,r.after(-h),new V(u,4-d,0)),m=-1;p.doc.nodesBetween(f,p.doc.content.size,(b,y)=>{if(m>-1)return!1;b.isTextblock&&b.content.size==0&&(m=y+1)}),m>-1&&p.setSelection(te.near(p.doc.resolve(m))),n(p.scrollIntoView())}return!0}let a=i.pos==r.end()?s.contentMatchAt(0).defaultType:null,l=t.tr.delete(r.pos,i.pos),c=a?[null,{type:a}]:void 0;return aa(l.doc,r.pos,2,c)?(n&&n(l.split(r.pos,2,c).scrollIntoView()),!0):!1}}function cD(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==e);return o?n?r.node(o.depth-1).type==e?moe(t,n,e,o):goe(t,n,o):!0:!1}}function moe(e,t,n,r){let i=e.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new $t(o-1,s,o,s,new V(B.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new s1(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Bu(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return Pu(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}function goe(e,t,n){let r=e.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?B.empty:B.from(i))))return!1;let d=o.pos,h=d+s.nodeSize;return r.step(new $t(d-(a?1:0),h+(l?1:0),d+1,h-1,new V((a?B.empty:B.from(i.copy(B.empty))).append(l?B.empty:B.from(i.copy(B.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function uD(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==e);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=B.from(c?e.create():null),d=new V(B.from(e.create(null,B.from(a.type.create(null,u)))),c?3:1,0),h=o.start,f=o.end;n(t.tr.step(new $t(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}const Ob={}.hasOwnProperty;function boe(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return io(e,"definition",r=>{const i=Nb(r.identifier);i&&!Ob.call(t,i)&&(t[i]=r)}),n;function n(r){const i=Nb(r);return i&&Ob.call(t,i)?t[i]:null}}function Nb(e){return String(e||"").toUpperCase()}function yoe(){return e=>{const t=boe(e);io(e,(n,r,i)=>{if(n.type==="definition"&&i!==null&&typeof r=="number")return i.children.splice(r,1),[_f,r];if(n.type==="imageReference"||n.type==="linkReference"){const o=t(n.identifier);if(o&&i!==null&&typeof r=="number"){const s=n.type==="imageReference"?{type:"image",url:o.url,title:o.title,alt:n.alt}:{type:"link",url:o.url,title:o.title,children:n.children};return i.children[r]=s,[_f,r]}}})}}const Qe={HardBreak:"HardBreak",Blockquote:"Blockquote",BulletList:"BulletList",OrderedList:"OrderedList",CodeFence:"CodeFence",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",DowngradeHeading:"DowngradeHeading",Text:"Text",CodeInline:"CodeInline",Em:"Em",Bold:"Bold",NextListItem:"NextListItem",SinkListItem:"SinkListItem",LiftListItem:"LiftListItem"},Lb="code_inline",$b=we("ToggleInlineCode"),woe=Fs(e=>({id:Lb,schema:()=>({priority:100,code:!0,inclusive:!1,parseDOM:[{tag:"code"}],toDOM:t=>["code",{class:e.getClassName(t.attrs,"code-inline")}],parseMarkdown:{match:t=>t.type==="inlineCode",runner:(t,n,r)=>{t.openMark(r),t.addText(n.value),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name===Lb,runner:(t,n,r)=>{t.withMark(n,"inlineCode",r.text||"")}}}),commands:t=>[be($b,()=>(n,r)=>{const{selection:i,tr:o}=n;if(i.empty)return!1;const{from:s,to:a}=i;return n.doc.rangeHasMark(s,a,t)?(r==null||r(o.removeMark(s,a,t)),!0):(Object.keys(n.schema.marks).filter(l=>l!==t.name).map(l=>n.schema.marks[l]).forEach(l=>{o.removeMark(s,a,l)}),r==null||r(o.addMark(s,a,t.create())),!0)})],shortcuts:{[Qe.CodeInline]:Ie($b,"Mod-e")}})),ch="em",Ib=we("ToggleItalic"),koe=Fs(e=>({id:ch,schema:()=>({inclusive:!1,parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:t=>t==="italic"}],toDOM:t=>["em",{class:e.getClassName(t.attrs,ch)}],parseMarkdown:{match:t=>t.type==="emphasis",runner:(t,n,r)=>{t.openMark(r),t.next(n.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name===ch,runner:(t,n)=>{t.withMark(n,"emphasis")}}}),commands:t=>[be(Ib,()=>Xu(t))],shortcuts:{[Qe.Em]:Ie(Ib,"Mod-i")}})),_oe=new _e("MILKDOWN_LINK_INPUT"),Doe=we("ToggleLink"),Rb=we("ModifyLink"),Vl="link",xoe=Fs((e,t)=>({id:Vl,schema:()=>({attrs:{href:{},title:{default:null}},parseDOM:[{tag:"a[href]",getAttrs:n=>{if(!(n instanceof HTMLElement))throw Lt(n);return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM:n=>["a",{...n.attrs,class:e.getClassName(n.attrs,Vl)}],parseMarkdown:{match:n=>n.type==="link",runner:(n,r,i)=>{const o=r.url,s=r.title;n.openMark(i,{href:o,title:s}),n.next(r.children),n.closeMark(i)}},toMarkdown:{match:n=>n.type.name===Vl,runner:(n,r)=>{n.withMark(r,"link",void 0,{title:r.attrs.title,url:r.attrs.href})}}}),commands:n=>[be(Doe,(r="")=>Xu(n,{href:r})),be(Rb,(r="")=>(i,o)=>{var s;if(!o)return!1;const{marks:a}=i.schema;let l,c=-1;const{selection:u}=i,{from:d,to:h}=u;if(i.doc.nodesBetween(d,d===h?h+1:h,(k,_)=>{var S;if((S=a.link)!=null&&S.isInSet(k.marks))return l=k,c=_,!1}),!l)return!1;const f=l.marks.find(({type:k})=>k===n);if(!f)return!1;const p=c,m=c+l.nodeSize,{tr:b}=i,y=(s=a.link)==null?void 0:s.create({...f.attrs,href:r});return y?(o(b.removeMark(p,m,f).addMark(p,m,y).setSelection(new ne(b.selection.$anchor)).scrollIntoView()),!0):!1})],prosePlugins:(n,r)=>{let i=!1;return[new ye({key:_oe,view:o=>{var s,a,l;const c=e.themeManager.get("input-chip",{placeholder:(a=(s=t==null?void 0:t.input)==null?void 0:s.placeholder)!=null?a:"Input Web Link",buttonText:(l=t==null?void 0:t.input)==null?void 0:l.buttonText,onUpdate:f=>{r.get(ke).call(Rb,f)},calculatePosition:(f,p)=>{sm(f,p,(m,b,y,k)=>{const _=f.dom.parentElement;if(!_)throw yn();const S=b.left-m.left;let v=m.left-k.left-(y.width-S)/2,g=m.bottom-k.top+14+_.scrollTop;i&&(g=m.top-k.top-y.height-14+_.scrollTop),v<0&&(v=0);const w=_.clientWidth-(y.width+4);return v>w&&(v=w),[g,v]})}});if(!c)return{};const u=f=>{var p;const{selection:m,doc:b}=f.state,{from:y,to:k}=m;if(!f.hasFocus())return!1;if(m instanceof ne&&k<b.content.size&&y<b.content.size&&b.rangeHasMark(y,y===k?k+1:k,n)){let _=m.empty;if(((p=t==null?void 0:t.input)==null?void 0:p.displayWhenSelected)&&!_&&b.nodesBetween(y,y===k?k+1:k,(S,v)=>{if(S.marks.some(g=>g.type===n&&y>=v&&k<=v+S.nodeSize))return _=!0,!1}),_)return i=!1,!0}if(m instanceof Y){const{node:_}=m;if(_.type.name==="image"&&_.marks.findIndex(S=>S.type.name===Vl)>-1)return i=!0,!0}return!1},d=f=>{const{selection:p}=f.state;let m;const{from:b,to:y}=p;if(f.state.doc.nodesBetween(b,b===y?y+1:y,_=>{if(n.isInSet(_.marks))return m=_,!1}),!m)return;const k=m.marks.find(_=>_.type===n);return k?k.attrs.href:void 0},h=f=>{!f.editable||(u(f)?(c.show(f),c.update(d(f))):c.hide())};return c.init(o),h(o),{update:(f,p)=>{(p==null?void 0:p.doc.eq(f.state.doc))&&p.selection.eq(f.state.selection)||requestAnimationFrame(()=>{h(f)})},destroy:()=>{c.destroy()}}}})]}})),uh="strong",Bb=we("ToggleBold"),Coe=Fs(e=>({id:uh,schema:()=>({inclusive:!1,parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-style",getAttrs:t=>t==="bold"}],toDOM:t=>["strong",{class:e.getClassName(t.attrs,uh)}],parseMarkdown:{match:t=>t.type==="strong",runner:(t,n,r)=>{t.openMark(r),t.next(n.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name===uh,runner:(t,n)=>{t.withMark(n,"strong")}}}),commands:t=>[be(Bb,()=>Xu(t))],shortcuts:{[Qe.Bold]:Ie(Bb,"Mod-b")}})),voe=[woe(),koe(),Coe(),xoe()],Ul="blockquote",Pb=we("WrapInBlockquote"),Soe=ht(e=>({id:Ul,schema:()=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:t=>["blockquote",{class:e.getClassName(t.attrs,Ul)},0],parseMarkdown:{match:({type:t})=>t===Ul,runner:(t,n,r)=>{t.openNode(r).next(n.children).closeNode()}},toMarkdown:{match:t=>t.type.name===Ul,runner:(t,n)=>{t.openNode("blockquote").next(n.content).closeNode()}}}),inputRules:t=>[Es(/^\s*>\s$/,t)],commands:t=>[be(Pb,()=>fr(t))],shortcuts:{[Qe.Blockquote]:Ie(Pb,"Mod-Shift-b")}})),jb=we("WrapInBulletList"),Eoe=ht(e=>{const t="bullet_list";return{id:t,schema:()=>({content:"listItem+",group:"block",attrs:{spread:{default:!1}},parseDOM:[{tag:"ul",getAttrs:n=>{if(!(n instanceof HTMLElement))throw Lt(n);return{spread:n.dataset.spread}}}],toDOM:n=>["ul",{"data-spread":n.attrs.spread,class:e.getClassName(n.attrs,"bullet-list")},0],parseMarkdown:{match:({type:n,ordered:r})=>n==="list"&&!r,runner:(n,r,i)=>{const o=r.spread!=null?`${r.spread}`:"false";n.openNode(i,{spread:o}).next(r.children).closeNode()}},toMarkdown:{match:n=>n.type.name===t,runner:(n,r)=>{n.openNode("list",void 0,{ordered:!1,spread:r.attrs.spread==="true"}).next(r.content).closeNode()}}}),inputRules:n=>[Es(/^\s*([-+*])\s$/,n)],commands:n=>[be(jb,()=>fr(n))],shortcuts:{[Qe.BulletList]:Ie(jb,"Mod-Alt-8")}}}),Aoe=["","javascript","typescript","bash","sql","json","html","css","c","cpp","java","ruby","python","go","rust","markdown"],Foe=/^```(?<language>[a-z]*)?[\s\n]$/,Toe=/^~~~(?<language>[a-z]*)?[\s\n]$/,zb=we("TurnIntoCodeFence"),dh="fence",Fm=ht((e,t)=>{const n=(t==null?void 0:t.languageList)||Aoe;return{id:dh,schema:r=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:""},fold:{default:!0}},parseDOM:[{tag:"div.code-fence-container",preserveWhitespace:"full",getAttrs:i=>{var o;if(!(i instanceof HTMLElement))throw Lt(i);return{language:(o=i.querySelector("pre"))==null?void 0:o.dataset.language}},getContent:(i,o)=>{var s,a;if(!(i instanceof HTMLElement))throw Lt(i);const l=(a=(s=i.querySelector("pre"))==null?void 0:s.textContent)!=null?a:"";if(!l)return B.empty;const c=o.text(l);return B.from(c)}},{tag:"pre",preserveWhitespace:"full",getAttrs:i=>{if(!(i instanceof HTMLElement))throw Lt(i);return{language:i.dataset.language}}}],toDOM:i=>{const o=document.createElement("select");return n.forEach(s=>{const a=document.createElement("option");a.value=s,a.innerText=s||"--",s===i.attrs.language&&(a.selected=!0),o.appendChild(a)}),o.onchange=s=>{const a=s.target;if(!(a instanceof HTMLSelectElement))return;const l=r.get(Ve);if(!l.editable){a.value=i.attrs.language;return}const{top:c,left:u}=a.getBoundingClientRect(),d=l.posAtCoords({top:c,left:u});if(!d)return;const{tr:h}=l.state;l.dispatch(h.setNodeMarkup(d.inside,void 0,{...i.attrs,language:a.value}))},["div",{class:"code-fence-container"},o,["pre",{"data-language":i.attrs.language,class:e.getClassName(i.attrs,"code-fence")},["code",{spellCheck:"false"},0]]]},parseMarkdown:{match:({type:i})=>i==="code",runner:(i,o,s)=>{const a=o.lang,l=o.value;i.openNode(s,{language:a}),l&&i.addText(l),i.closeNode()}},toMarkdown:{match:i=>i.type.name===dh,runner:(i,o)=>{var s;i.addNode("code",void 0,((s=o.content.firstChild)==null?void 0:s.text)||"",{lang:o.attrs.language})}}}),inputRules:r=>[jf(Foe,r,i=>{const[o,s]=i;if(o)return{language:s}}),jf(Toe,r,i=>{const[o,s]=i;if(o)return{language:s}})],commands:r=>[be(zb,()=>Ko(r))],shortcuts:{[Qe.CodeFence]:Ie(zb,"Mod-Alt-c")},view:()=>(r,i,o)=>{let s=r;const a=m=>{const{tr:b}=i.state;i.dispatch(b.setNodeMarkup(o(),void 0,{fold:!0,language:m}))},l=()=>{const{tr:m}=i.state;i.dispatch(m.setNodeMarkup(o(),void 0,{...s.attrs,fold:!0}))},c=()=>{const{tr:m}=i.state;i.dispatch(m.setNodeMarkup(o(),void 0,{...s.attrs,fold:!1}))},u=e.themeManager.get("code-fence",{view:i,onBlur:l,onFocus:c,onSelectLanguage:a,editable:()=>i.editable,languageList:n});if(!u)return{};const{dom:d,contentDOM:h,onUpdate:f,onDestroy:p}=u;return f(s),{dom:d,contentDOM:h,update:m=>m.type.name!==dh?!1:(s=m,f(s),!0),destroy:p}}}}),Moe=ht(()=>({id:"doc",schema:()=>({content:"block+",parseMarkdown:{match:({type:e})=>e==="root",runner:(e,t,n)=>{e.injectRoot(t,n)}},toMarkdown:{match:e=>e.type.name==="doc",runner:(e,t)=>{e.openNode("root"),e.next(t.content)}}})})),Vb=we("InsertHardbreak"),Ooe=new _e("MILKDOWN_HARDBREAK_FILTER"),Noe=ht((e,t)=>{var n;const r=(n=t==null?void 0:t.notIn)!=null?n:["table","fence"];return{id:"hardbreak",schema:()=>({inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:i=>["br",{class:e.getClassName(i.attrs,"hardbreak")}],parseMarkdown:{match:({type:i})=>i==="break",runner:(i,o,s)=>{i.addNode(s)}},toMarkdown:{match:i=>i.type.name==="hardbreak",runner:i=>{i.addNode("break")}}}),commands:i=>[be(Vb,()=>(o,s)=>{var a;const{selection:l,tr:c}=o;if(l.empty){const u=l.$from.node();if(u.childCount>0&&((a=u.lastChild)==null?void 0:a.type.name)==="hardbreak")return s==null||s(c.replaceRangeWith(l.to-1,l.to,o.schema.node("paragraph")).setSelection(te.near(c.doc.resolve(l.to))).scrollIntoView()),!0}return s==null||s(c.setMeta("hardbreak",!0).replaceSelectionWith(i.create()).scrollIntoView()),!0})],shortcuts:{[Qe.HardBreak]:Ie(Vb,"Shift-Enter")},prosePlugins:i=>[new ye({key:Ooe,filterTransaction:(o,s)=>{const a=o.getMeta("hardbreak"),[l]=o.steps;if(a&&l){const{from:c}=l,u=s.doc.resolve(c);let d=u.depth,h=!0;for(;d>0;)r.includes(u.node(d).type.name)&&(h=!1),d--;return h}return!0}}),new ye({key:new _e("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(o,s,a)=>{if(!o.length)return;const[l]=o;if(!l)return;const[c]=l.steps;if(l.getMeta("hardbreak")){if(!(c instanceof Ot))return;const{from:u}=c;return a.tr.setNodeMarkup(u,i,void 0,[])}if(c instanceof Nr){let u=a.tr;const{from:d,to:h}=c;return a.doc.nodesBetween(d,h,(f,p)=>{f.type===i&&(u=u.setNodeMarkup(p,i,void 0,[]))}),u}}})]}}),Ub=Array(6).fill(0).map((e,t)=>t+1),Li=we("TurnIntoHeading"),qb=we("DowngradeHeading"),hh=new _e("MILKDOWN_HEADING_ID"),Loe=new _e("MILKDOWN_HEADING_HASH"),$oe=e=>e.textContent.replace(/[\p{P}\p{S}]/gu,"").replace(/\s/g,"-").toLowerCase().trim(),Ioe=(e,t,n)=>{let r=!1;const i=(o,s)=>{const a=o.tr.setMeta("addToHistory",!1);let l=!1;o.doc.descendants((c,u)=>{if(c.type===t&&!r){if(c.textContent.trim().length===0)return;const d=c.attrs,h=n(c);d.id!==h&&(l=!0,a.setMeta(hh,!0).setNodeMarkup(u,void 0,{...d,id:h}))}}),l&&s(a)};return new ye({key:hh,props:{handleDOMEvents:{compositionstart:()=>(r=!0,!1),compositionend:()=>{r=!1;const o=e.get(Ve);return setTimeout(()=>{i(o.state,s=>o.dispatch(s))},0),!1}}},appendTransaction:(o,s,a)=>{let l=null;return o.every(c=>!c.getMeta(hh))&&o.some(c=>c.docChanged)&&i(a,c=>{l=c}),l},view:o=>{const s=o.state.doc;let a=o.state.tr.setMeta("addToHistory",!1);return s.descendants((l,c)=>{l.type.name==="heading"&&l.attrs.level&&(l.attrs.id||(a=a.setNodeMarkup(c,void 0,{...l.attrs,id:n(l)})))}),o.dispatch(a),{}}})},Roe=(e,t,n)=>new ye({key:Loe,state:{init:()=>ve.empty,apply:r=>{var i;const o=e.get(Ve);if(!((i=o.hasFocus)!=null&&i.call(o))||!o.editable)return ve.empty;const{$from:s}=r.selection,a=s.node();if(a.type!==t)return ve.empty;const l=a.attrs.level,c=h=>Array(h).fill(0).map(f=>"#").join(""),u=document.createElement("span");u.textContent=c(l),u.contentEditable="false",n.themeManager.onFlush(()=>{const h=n.getStyle(({css:f})=>{const p=Hn(n.themeManager);return f`
                            margin-right: 4px;
                            color: ${p("primary")};
                        `});h&&(u.className=h)});const d=Ke.widget(s.before()+1,u,{side:-1});return ve.create(r.doc,[d])}},props:{handleDOMEvents:{focus:r=>{const i=am(r.state.tr);return r.dispatch(i),!1}},decorations(r){return this.getState(r)}}}),Boe=ht((e,t)=>{var n,r;const i="heading",o=(n=t==null?void 0:t.getId)!=null?n:$oe,s=(r=t==null?void 0:t.displayHashtag)!=null?r:!0;return{id:i,schema:()=>({content:"inline*",group:"block",defining:!0,attrs:{id:{default:""},level:{default:1}},parseDOM:Ub.map(a=>({tag:`h${a}`,getAttrs:l=>{if(!(l instanceof HTMLElement))throw Lt(l);return{level:a,id:l.id}}})),toDOM:a=>[`h${a.attrs.level}`,{id:a.attrs.id||o(a),class:e.getClassName(a.attrs,`heading h${a.attrs.level}`)},0],parseMarkdown:{match:({type:a})=>a===i,runner:(a,l,c)=>{const u=l.depth;a.openNode(c,{level:u}),a.next(l.children),a.closeNode()}},toMarkdown:{match:a=>a.type.name===i,runner:(a,l)=>{var c;if(a.openNode("heading",void 0,{depth:l.attrs.level}),l.childCount>=1&&((c=l.lastChild)==null?void 0:c.type.name)==="hardbreak"){const u=[];l.content.forEach((d,h,f)=>{f!==l.childCount-1&&u.push(d)}),a.next(B.fromArray(u))}else a.next(l.content);a.closeNode()}}}),inputRules:(a,l)=>Ub.map(c=>jf(new RegExp(`^(#{1,${c}})\\s$`),a,()=>{const u=l.get(Ve),{$from:d}=u.state.selection,h=d.node();if(h.type.name==="heading"){let f=Number(h.attrs.level)+Number(c);return f>6&&(f=6),{level:f}}return{level:c}})),commands:(a,l)=>[be(Li,(c=1)=>c<1?Ko(c===0&&l.get(tt).nodes.paragraph||a):Ko(c===0&&l.get(tt).nodes.paragraph||a,{level:c})),be(qb,()=>(c,u,d)=>{const{$from:h}=c.selection,f=h.node();if(f.type!==a||!c.selection.empty||h.parentOffset!==0)return!1;const p=f.attrs.level-1;return p?(u==null||u(c.tr.setNodeMarkup(c.selection.$from.before(),void 0,{...f.attrs,level:p})),!0):Ko(l.get(tt).nodes.paragraph||a)(c,u,d)})],shortcuts:{[Qe.H1]:Ie(Li,"Mod-Alt-1",1),[Qe.H2]:Ie(Li,"Mod-Alt-2",2),[Qe.H3]:Ie(Li,"Mod-Alt-3",3),[Qe.H4]:Ie(Li,"Mod-Alt-4",4),[Qe.H5]:Ie(Li,"Mod-Alt-5",5),[Qe.H6]:Ie(Li,"Mod-Alt-6",6),[Qe.DowngradeHeading]:Ie(qb,["Backspace","Delete"])},prosePlugins:(a,l)=>{const c=[Ioe(l,a,o)];return s&&c.push(Roe(l,a,e)),c}}}),fh="hr",Poe=we("InsertHr"),joe=ht(e=>({id:fh,schema:()=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:t=>["hr",{class:e.getClassName(t.attrs,fh)}],parseMarkdown:{match:({type:t})=>t==="thematicBreak",runner:(t,n,r)=>{t.addNode(r)}},toMarkdown:{match:t=>t.type.name===fh,runner:t=>{t.addNode("thematicBreak")}}}),inputRules:t=>[new ln(/^(?:---|___\s|\*\*\*\s)$/,(n,r,i,o)=>{const{tr:s}=n;return r[0]&&s.replaceWith(i-1,o,t.create()),s})],commands:(t,n)=>[be(Poe,()=>(r,i)=>{if(!i)return!0;const o=n.get(tt).node("paragraph"),{tr:s,selection:a}=r,{from:l}=a,c=t.create();if(!c)return!0;const u=s.replaceSelectionWith(c).insert(l,o),d=te.findFrom(u.doc.resolve(l),1,!0);return d&&i(u.setSelection(d).scrollIntoView()),!0})]})),Wb=we("ModifyImage"),zoe=we("InsertImage"),ql="image",Voe=new _e("MILKDOWN_IMAGE_INPUT"),Uoe=ht((e,t)=>({id:"image",schema:()=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:""},alt:{default:""},title:{default:""}},parseDOM:[{tag:"img[src]",getAttrs:n=>{if(!(n instanceof HTMLElement))throw Lt(n);return{src:n.getAttribute("src")||"",alt:n.getAttribute("alt")||"",title:n.getAttribute("title")||n.getAttribute("alt")||""}}}],toDOM:n=>["img",{...n.attrs,class:e.getClassName(n.attrs,ql)}],parseMarkdown:{match:({type:n})=>n===ql,runner:(n,r,i)=>{const o=r.url,s=r.alt,a=r.title;n.addNode(i,{src:o,alt:s,title:a})}},toMarkdown:{match:n=>n.type.name===ql,runner:(n,r)=>{n.addNode("image",void 0,void 0,{title:r.attrs.title,url:r.attrs.src,alt:r.attrs.alt})}}}),commands:n=>[be(zoe,(r="")=>(i,o)=>{if(!o)return!0;const{tr:s}=i,a=n.create({src:r});if(!a)return!0;const l=s.replaceSelectionWith(a);return o(l.scrollIntoView()),!0}),be(Wb,(r="")=>(i,o)=>{const s=Ir(i.selection,n);if(!s)return!1;const{tr:a}=i;return o==null||o(a.setNodeMarkup(s.pos,void 0,{...s.node.attrs,loading:!0,src:r}).scrollIntoView()),!0})],inputRules:n=>[new ln(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(r,i,o,s)=>{const[a,l,c="",u]=i,{tr:d}=r;return a&&d.replaceWith(o,s,n.create({src:c,alt:l,title:u})),d})],view:()=>n=>{var r,i;let o=n;const s=(r=t==null?void 0:t.placeholder)!=null?r:"Add an Image",a=(i=t==null?void 0:t.isBlock)!=null?i:!1,l=e.themeManager.get("image",{placeholder:s,isBlock:a});if(!l)return{};const{dom:c,onUpdate:u}=l;return u(o),{dom:c,update:d=>d.type.name!==ql?!1:(o=d,u(o),!0),selectNode:()=>{c.classList.add("ProseMirror-selectednode")},deselectNode:()=>{c.classList.remove("ProseMirror-selectednode")}}},prosePlugins:(n,r)=>[new ye({key:Voe,view:i=>{var o,s,a;const l=e.themeManager.get("input-chip",{placeholder:(s=(o=t==null?void 0:t.input)==null?void 0:o.placeholder)!=null?s:"Input Image Link",buttonText:(a=t==null?void 0:t.input)==null?void 0:a.buttonText,onUpdate:h=>{r.get(ke).call(Wb,h)}});if(!l)return{};const c=h=>Boolean(h.hasFocus()&&n&&Ir(h.state.selection,n)),u=h=>{const f=Ir(h.state.selection,n);return f?f.node.attrs.src:void 0},d=h=>{!h.editable||(c(h)?(l.show(h),l.update(u(h))):l.hide())};return l.init(i),d(i),{update:(h,f)=>{(f==null?void 0:f.doc.eq(h.state.doc))&&f.selection.eq(h.state.selection)||d(h)},destroy:()=>{l.destroy()}}}})]})),Hb="list_item",Gb=we("SplitListItem"),Kb=we("SinkListItem"),Jb=we("LiftListItem"),qoe=new _e("MILKDOWN_KEEP_LIST_ORDER"),Woe=e=>{const t=(n,r)=>{const i=To("ordered_list",n.schema);let o=n.tr;n.doc.descendants((s,a,l,c)=>{if(s.type===e&&(l==null?void 0:l.type)===i){let u=!1;const d={...s.attrs};s.attrs.listType!=="ordered"&&(d.listType="ordered",u=!0);const h=l==null?void 0:l.maybeChild(0);h&&h.type===e&&h.attrs.listType==="ordered"&&(d.label=`${c+1}.`,u=!0),s.attrs.label==="\u2022"&&(d.label=`${c+1}.`,u=!0),u&&(o=o.setNodeMarkup(a,void 0,d))}}),r(o)};return new ye({key:qoe,appendTransaction:(n,r,i)=>{let o=null;return n.some(s=>s.docChanged)&&t(i,s=>{o=s}),o}})},Hoe=ht(e=>({id:Hb,schema:()=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"\u2022"},listType:{default:"bullet"},spread:{default:"true"}},defining:!0,parseDOM:[{tag:"li.list-item",getAttrs:t=>{if(!(t instanceof HTMLElement))throw Lt(t);return{label:t.dataset.label,listType:t.dataset["list-type"],spread:t.dataset.spread}},contentElement:t=>{if(!(t instanceof HTMLElement))throw Lt(t);return t.querySelector(".list-item_body")||t}},{tag:"li"}],toDOM:t=>["li",{class:e.getClassName(t.attrs,"list-item"),"data-label":t.attrs.label,"data-list-type":t.attrs.listType,"data-spread":t.attrs.spread},["div",{class:e.getClassName(t.attrs,"list-item_label")},t.attrs.label],["div",{class:e.getClassName(t.attrs,"list-item_body")},0]],parseMarkdown:{match:({type:t,checked:n})=>t==="listItem"&&n===null,runner:(t,n,r)=>{const i=n.label!=null?`${n.label}.`:"\u2022",o=n.label!=null?"ordered":"bullet",s=n.spread!=null?`${n.spread}`:"true";t.openNode(r,{label:i,listType:o,spread:s}),t.next(n.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name===Hb,runner:(t,n)=>{t.openNode("listItem",void 0,{spread:n.attrs.spread==="true"}),t.next(n.content),t.closeNode()}}}),inputRules:t=>[Es(/^\s*([-+*])\s$/,t)],commands:t=>[be(Gb,()=>lD(t)),be(Kb,()=>uD(t)),be(Jb,()=>cD(t))],shortcuts:{[Qe.NextListItem]:Ie(Gb,"Enter"),[Qe.SinkListItem]:Ie(Kb,"Mod-]"),[Qe.LiftListItem]:Ie(Jb,"Mod-[")},prosePlugins:t=>[Woe(t)]})),Yb=we("WrapInOrderedList"),Xb="ordered_list",Goe=ht(e=>({id:Xb,schema:()=>({content:"listItem+",group:"block",attrs:{order:{default:1},spread:{default:!1}},parseDOM:[{tag:"ol",getAttrs:t=>{if(!(t instanceof HTMLElement))throw Lt(t);return{spread:t.dataset.spread,order:t.hasAttribute("start")?Number(t.getAttribute("start")):1}}}],toDOM:t=>["ol",{...t.attrs.order===1?{}:t.attrs.order,"data-spread":t.attrs.spread,class:e.getClassName(t.attrs,"ordered-list")},0],parseMarkdown:{match:({type:t,ordered:n})=>t==="list"&&!!n,runner:(t,n,r)=>{const i=n.spread!=null?`${n.spread}`:"true";t.openNode(r,{spread:i}).next(n.children).closeNode()}},toMarkdown:{match:t=>t.type.name===Xb,runner:(t,n)=>{t.openNode("list",void 0,{ordered:!0,start:1,spread:n.attrs.spread==="true"}),t.next(n.content),t.closeNode()}}}),inputRules:t=>[Es(/^(\d+)\.\s$/,t,n=>({order:Number(n[1])}),(n,r)=>r.childCount+r.attrs.order===Number(n[1]))],commands:t=>[be(Yb,()=>fr(t))],shortcuts:{[Qe.OrderedList]:Ie(Yb,"Mod-Alt-7")}})),Qb=we("TurnIntoText"),Zb="paragraph",Koe=ht(e=>({id:Zb,schema:()=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:t=>["p",{class:e.getClassName(t.attrs,Zb)},0],parseMarkdown:{match:t=>t.type==="paragraph",runner:(t,n,r)=>{t.openNode(r),n.children?t.next(n.children):t.addText(n.value),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="paragraph",runner:(t,n)=>{var r;if(t.openNode("paragraph"),n.childCount>=1&&((r=n.lastChild)==null?void 0:r.type.name)==="hardbreak"){const i=[];n.content.forEach((o,s,a)=>{a!==n.childCount-1&&i.push(o)}),t.next(B.fromArray(i))}else t.next(n.content);t.closeNode()}}}),commands:t=>[be(Qb,()=>Ko(t))],shortcuts:{[Qe.Text]:Ie(Qb,"Mod-Alt-0")}})),Joe=ht(()=>({id:"text",schema:()=>({group:"inline",parseMarkdown:{match:({type:e})=>e==="text",runner:(e,t)=>{e.addText(t.value)}},toMarkdown:{match:e=>e.type.name==="text",runner:(e,t)=>{e.addNode("text",void 0,t.text)}}})})),Yoe=[Moe(),Koe(),Noe(),Soe(),Fm(),Eoe(),Goe(),Hoe(),Boe(),joe(),Uoe(),Joe()],Xoe=()=>{function e(t){io(t,"list",n=>{var r;if(n.ordered){const i=(r=n.start)!=null?r:1;n.children.forEach((o,s)=>{o.label=s+i})}})}return e},Qoe=e=>!!e.children,Zoe=e=>e.type==="html";function ese(e,t){return n(e,0,null)[0];function n(r,i,o){if(Qoe(r)){const s=[];for(let a=0,l=r.children.length;a<l;a++){const c=r.children[a];if(c){const u=n(c,a,r);if(u)for(let d=0,h=u.length;d<h;d++){const f=u[d];f&&s.push(f)}}}r.children=s}return t(r,i,o)}}const tse=()=>{function e(t){ese(t,n=>Zoe(n)?[]:[n])}return e},nse=new _e("MILKDOWN_INLINE_NODES_CURSOR"),rse=()=>{let e=!1;const t=new ye({key:nse,state:{init(){return!1},apply(n){if(!n.selection.empty)return!1;const r=n.selection.$from,i=r.nodeBefore,o=r.nodeAfter;return!!(i&&o&&i.isInline&&!i.isText&&o.isInline&&!o.isText)}},props:{handleDOMEvents:{compositionend:(n,r)=>e?(e=!1,requestAnimationFrame(()=>{if(t.getState(n.state)){const i=n.state.selection.from;r.preventDefault(),n.dispatch(n.state.tr.insertText(r.data||"",i))}}),!0):!1,compositionstart:n=>(t.getState(n.state)&&(e=!0),!1),beforeinput:(n,r)=>{if(t.getState(n.state)&&r instanceof InputEvent&&r.data&&!e){const i=n.state.selection.from;return r.preventDefault(),n.dispatch(n.state.tr.insertText(r.data||"",i)),!0}return!1}},decorations(n){if(t.getState(n)){const r=n.selection.$from.pos,i=document.createElement("span"),o=Ke.widget(r,i,{side:-1}),s=document.createElement("span"),a=Ke.widget(r,s);return setTimeout(()=>{i.contentEditable="true",s.contentEditable="true"}),ve.create(n.doc,[o,a])}return ve.empty}}});return t},ph=/\[(?<span>((www|https:\/\/|http:\/\/)[^\s\]]+))]\((?<url>[^\s\]]+)\)/,ise=e=>new RegExp(`\\\\(?=[^\\w\\s${e}\\\\]|_)`,"g"),ose=e=>{let t=e,n=t.match(ph);for(;n&&n.groups;){const{span:r}=n.groups;t=t.replace(ph,r),n=t.match(ph)}return t},sse=(e,t,n)=>{const r=e.split(""),i=r[t];return r[t]&&r[n]&&(r[t]=r[n],r[n]=i),r.join("").toString()},ase=e=>t=>t.replace(ise(e),""),lse=e=>t=>{const n=t.indexOf(e.hole),r=t.charAt(n-1),i=t.charAt(n+1),o=/[^\w]|_/;return i?r&&o.test(r)&&o.test(i)?e.punctuation:e.char:e.punctuation},cse=(e,t,n)=>{let r=t,i=!1;return e.descendants(o=>{var s;if(i)return!1;if(o.isText){const a=(s=o.text)==null?void 0:s.indexOf(n);if(a!=null&&a>=0)return i=!0,r+=a,!1}r+=o.nodeSize}),r},use={placeholderConfig:{hole:"\u2205",punctuation:"\u2042",char:"\u2234"},globalNodes:["footnote_definition"],shouldSyncNode:({prevNode:e,nextNode:t})=>e.inlineContent&&t&&e.type===t.type&&!e.eq(t),movePlaceholder:(e,t)=>{const n=["*","_"];let r=t.indexOf(e);for(;n.includes(t[r-1]||"")&&n.includes(t[r+1]||"");)t=sse(t,r,r+1),r=r+1;return t}},xl=Q(use,"inlineSyncConfig"),dse=e=>{const{selection:t}=e,{$from:n}=t;return n.node()},hse=(e,t,n,r)=>{const i=e.get(Yo),o=t.schema.topNodeType.create(void 0,[n,...r]);return i(o)},fse=(e,t)=>{const n=e.get(xl),r=n.placeholderConfig.hole,[i="",...o]=t.split(`

`),s=c=>n.movePlaceholder(r,c);let a=Zu(ase(r),s,ose)(i);const l=lse(n.placeholderConfig)(a);return a=a.replace(r,l),a=[a,...o].join(`

`),[a,l]},pse=(e,t)=>{const n=e.get(mi)(t);return n?n.firstChild:null},mse=(e,t)=>{const{globalNodes:n}=e.get(xl),r=[];return t.doc.descendants(i=>{if(n.includes(i.type.name)||n.includes(i.type))return r.push(i),!1}),r},gse=e=>e.split(`

`)[0]||"",dD=(e,t)=>{try{const n=mse(e,t),r=dse(t),i=hse(e,t,r,n),[o,s]=fse(e,i),a=pse(e,o);return!a||r.type!==a.type?null:(a.attrs={...r.attrs},a.descendants(l=>{var c;const u=l.marks.find(d=>d.type.name==="link");u&&((c=l.text)==null?void 0:c.includes(s))&&u.attrs.href.includes(s)&&(u.attrs.href=u.attrs.href.replace(s,""))}),{text:gse(o),prevNode:r,nextNode:a,placeholder:s})}catch{return null}},bse=(e,t,n,r,i)=>{const{placeholderConfig:o}=e.get(xl),s=o.hole;let a=n.tr.setMeta(t,!0).insertText(s,n.selection.from);const l=n.apply(a),c=dD(e,l);if(!c)return;const{$from:u}=l.selection,d=u.before(),h=u.after(),f=cse(c.nextNode,d,c.placeholder);a=a.replaceWith(d,h,c.nextNode).setNodeMarkup(d,void 0,i).delete(f+1,f+2),a=a.setSelection(ne.near(a.doc.resolve(f+1))),r(a)},mh=new _e("MILKDOWN_INLINE_SYNC"),yse=e=>{let t=null;return new ye({key:mh,state:{init:()=>null,apply:(n,r,i,o)=>{var s;const a=e.get(Ve);if(!((s=a.hasFocus)!=null&&s.call(a))||!a.editable||!n.docChanged||n.getMeta(mh))return null;const l=dD(e,o);if(!l)return null;t&&(cancelAnimationFrame(t),t=null);const{prevNode:c,nextNode:u,text:d}=l,{shouldSyncNode:h}=e.get(xl);return h({prevNode:c,nextNode:u,ctx:e,tr:n,text:d})&&(t=requestAnimationFrame(()=>{t=null;const{dispatch:f,state:p}=e.get(Ve);bse(e,mh,p,f,c.attrs)})),null}}})},wse=[qr(()=>({injectSlices:[xl],prosePlugins:(e,t)=>[rse(),yse(t)],remarkPlugins:()=>[yoe,tse,Xoe]}))()],kse=Gt.create([...Yoe,...voe]),_se=Gt.create([...wse,...kse]),Dse={tokenize:Ese,partial:!0},hD={tokenize:Ase,partial:!0},fD={tokenize:Fse,partial:!0},Qo={tokenize:Mse,partial:!0},pD={tokenize:Tse,partial:!0},mD={tokenize:vse,previous:yD},gD={tokenize:Sse,previous:Mm},Wr={tokenize:Cse,previous:wD},kr={},xse={text:kr};let $i=48;for(;$i<123;)kr[$i]=Wr,$i++,$i===58?$i=65:$i===91&&($i=97);kr[43]=Wr;kr[45]=Wr;kr[46]=Wr;kr[95]=Wr;kr[72]=[Wr,gD];kr[104]=[Wr,gD];kr[87]=[Wr,mD];kr[119]=[Wr,mD];function Cse(e,t,n){const r=this;let i,o;return s;function s(f){return!ey(f)||!wD(r.previous)||Om(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(f))}function a(f){return ey(f)?(e.consume(f),a):f===64?(e.consume(f),l):n(f)}function l(f){return f===46?e.check(Qo,h,c)(f):f===45||f===95?e.check(Qo,n,u)(f):Nt(f)?(!o&&Xc(f)&&(o=!0),e.consume(f),l):h(f)}function c(f){return e.consume(f),i=!0,o=void 0,l}function u(f){return e.consume(f),d}function d(f){return f===46?e.check(Qo,n,c)(f):l(f)}function h(f){return i&&!o?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function vse(e,t,n){const r=this;return i;function i(s){return s!==87&&s!==119||!yD(r.previous)||Om(r.events)?n(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Dse,e.attempt(hD,e.attempt(fD,o),n),n)(s))}function o(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function Sse(e,t,n){const r=this;return i;function i(p){return p!==72&&p!==104||!Mm(r.previous)||Om(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(p),o)}function o(p){return p===84||p===116?(e.consume(p),s):n(p)}function s(p){return p===84||p===116?(e.consume(p),a):n(p)}function a(p){return p===80||p===112?(e.consume(p),l):n(p)}function l(p){return p===83||p===115?(e.consume(p),c):c(p)}function c(p){return p===58?(e.consume(p),u):n(p)}function u(p){return p===47?(e.consume(p),d):n(p)}function d(p){return p===47?(e.consume(p),h):n(p)}function h(p){return p===null||Ea(p)||zu(p)||Vu(p)?n(p):e.attempt(hD,e.attempt(fD,f),n)(p)}function f(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function Ese(e,t,n){return r;function r(l){return e.consume(l),i}function i(l){return l===87||l===119?(e.consume(l),o):n(l)}function o(l){return l===87||l===119?(e.consume(l),s):n(l)}function s(l){return l===46?(e.consume(l),a):n(l)}function a(l){return l===null||W(l)?n(l):t(l)}}function Ase(e,t,n){let r,i;return o;function o(l){return l===38?e.check(pD,a,s)(l):l===46||l===95?e.check(Qo,a,s)(l):l===null||Ea(l)||zu(l)||l!==45&&Vu(l)?a(l):(e.consume(l),o)}function s(l){return l===46?(i=r,r=void 0,e.consume(l),o):(l===95&&(r=!0),e.consume(l),o)}function a(l){return!i&&!r?t(l):n(l)}}function Fse(e,t){let n=0;return r;function r(s){return s===38?e.check(pD,t,i)(s):(s===40&&n++,s===41?e.check(Qo,o,i)(s):Tm(s)?t(s):bD(s)?e.check(Qo,t,i)(s):(e.consume(s),r))}function i(s){return e.consume(s),r}function o(s){return n--,n<0?t(s):i(s)}}function Tse(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return jt(s)?(e.consume(s),i):s===59?(e.consume(s),o):n(s)}function o(s){return Tm(s)?t(s):n(s)}}function Mse(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return bD(o)?(e.consume(o),i):Tm(o)?t(o):n(o)}}function bD(e){return e===33||e===34||e===39||e===41||e===42||e===44||e===46||e===58||e===59||e===60||e===63||e===95||e===126}function Tm(e){return e===null||e===60||Ae(e)}function ey(e){return e===43||e===45||e===46||e===95||Nt(e)}function yD(e){return e===null||e===40||e===42||e===95||e===126||Ae(e)}function Mm(e){return e===null||!jt(e)}function wD(e){return e!==47&&Mm(e)}function Om(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Ose={tokenize:jse,partial:!0};function Nse(){return{document:{[91]:{tokenize:Rse,continuation:{tokenize:Bse},exit:Pse}},text:{[91]:{tokenize:Ise},[93]:{add:"after",tokenize:Lse,resolveTo:$se}}}}function Lse(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!s||!s._balanced)return n(l);const c=Pn(r.sliceSerialize({start:s.end,end:r.now()}));return c.charCodeAt(0)!==94||!o.includes(c.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function $se(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function Ise(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,s;return a;function a(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(h){let f;return h===null||h===91||o++>999?n(h):h===93?s?(e.exit("chunkString"),f=e.exit("gfmFootnoteCallString"),i.includes(Pn(r.sliceSerialize(f)))?d(h):n(h)):n(h):(e.consume(h),Ae(h)||(s=!0),h===92?u:c)}function u(h){return h===91||h===92||h===93?(e.consume(h),o++,c):c(h)}function d(h){return e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t}}function Rse(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,s=0,a;return l;function l(m){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(m){return m===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),u):n(m)}function u(m){let b;return m===null||m===91||s>999?n(m):m===93?a?(b=e.exit("gfmFootnoteDefinitionLabelString"),o=Pn(r.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f):n(m):W(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),s++,u):(e.enter("chunkString").contentType="string",d(m))}function d(m){return m===null||W(m)||m===91||m===93||s>999?(e.exit("chunkString"),u(m)):(Ae(m)||(a=!0),s++,e.consume(m),m===92?h:d)}function h(m){return m===91||m===92||m===93?(e.consume(m),s++,d):d(m)}function f(m){return m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),Z(e,p,"gfmFootnoteDefinitionWhitespace")):n(m)}function p(m){return i.includes(o)||i.push(o),t(m)}}function Bse(e,t,n){return e.check(al,t,e.attempt(Ose,t,n))}function Pse(e){e.exit("gfmFootnoteDefinition")}function jse(e,t,n){const r=this;return Z(e,i,"gfmFootnoteDefinitionIndent",4+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(o):n(o)}}function zse(e={}){let t=e.singleTilde;const n={tokenize:i,resolveAll:r};return t==null&&(t=!0),{text:{[126]:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(o,s){let a=-1;for(;++a<o.length;)if(o[a][0]==="enter"&&o[a][1].type==="strikethroughSequenceTemporary"&&o[a][1]._close){let l=a;for(;l--;)if(o[l][0]==="exit"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._open&&o[a][1].end.offset-o[a][1].start.offset===o[l][1].end.offset-o[l][1].start.offset){o[a][1].type="strikethroughSequence",o[l][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},o[l][1].start),end:Object.assign({},o[a][1].end)},u={type:"strikethroughText",start:Object.assign({},o[l][1].end),end:Object.assign({},o[a][1].start)},d=[["enter",c,s],["enter",o[l][1],s],["exit",o[l][1],s],["enter",u,s]];mn(d,d.length,0,Uu(s.parser.constructs.insideSpan.null,o.slice(l+1,a),s)),mn(d,d.length,0,[["exit",u,s],["enter",o[a][1],s],["exit",o[a][1],s],["exit",c,s]]),mn(o,l-1,a-l+3,d),a=l+d.length-2;break}}for(a=-1;++a<o.length;)o[a][1].type==="strikethroughSequenceTemporary"&&(o[a][1].type="data");return o}function i(o,s,a){const l=this.previous,c=this.events;let u=0;return d;function d(f){return l===126&&c[c.length-1][1].type!=="characterEscape"?a(f):(o.enter("strikethroughSequenceTemporary"),h(f))}function h(f){const p=Qc(l);if(f===126)return u>1?a(f):(o.consume(f),u++,h);if(u<2&&!t)return a(f);const m=o.exit("strikethroughSequenceTemporary"),b=Qc(f);return m._open=!b||b===2&&Boolean(p),m._close=!p||p===2&&Boolean(b),s(f)}}}const Vse={flow:{null:{tokenize:qse,resolve:Use}}},ty={tokenize:Wse,partial:!0};function Use(e,t){let n=-1,r,i,o,s,a,l,c;for(;++n<e.length;){const u=e[n][1];if(o&&(u.type==="temporaryTableCellContent"&&(s=s||n,a=n),(u.type==="tableCellDivider"||u.type==="tableRow")&&a)){const d={type:"tableContent",start:e[s][1].start,end:e[a][1].end},h={type:"chunkText",start:d.start,end:d.end,contentType:"text"};e.splice(s,a-s+1,["enter",d,t],["enter",h,t],["exit",h,t],["exit",d,t]),n-=a-s-3,s=void 0,a=void 0}if(e[n][0]==="exit"&&l!==void 0&&l+(c?0:1)<n&&(u.type==="tableCellDivider"||u.type==="tableRow"&&(l+3<n||e[l][1].type!=="whitespace"))){const d={type:i?"tableDelimiter":r?"tableHeader":"tableData",start:e[l][1].start,end:e[n][1].end};e.splice(n+(u.type==="tableCellDivider"?1:0),0,["exit",d,t]),e.splice(l,0,["enter",d,t]),n+=2,l=n+1,c=!0}u.type==="tableRow"&&(o=e[n][0]==="enter",o&&(l=n+1,c=!1)),u.type==="tableDelimiterRow"&&(i=e[n][0]==="enter",i&&(l=n+1,c=!1)),u.type==="tableHead"&&(r=e[n][0]==="enter")}return e}function qse(e,t,n){const r=this,i=[];let o=0,s,a;return l;function l(O){return e.enter("table")._align=i,e.enter("tableHead"),e.enter("tableRow"),O===124?c(O):(o++,e.enter("temporaryTableCellContent"),h(O))}function c(O){return e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),s=!0,u}function u(O){return O===null||W(O)?p(O):me(O)?(e.enter("whitespace"),e.consume(O),d):(s&&(s=void 0,o++),O===124?c(O):(e.enter("temporaryTableCellContent"),h(O)))}function d(O){return me(O)?(e.consume(O),d):(e.exit("whitespace"),u(O))}function h(O){return O===null||O===124||Ae(O)?(e.exit("temporaryTableCellContent"),u(O)):(e.consume(O),O===92?f:h)}function f(O){return O===92||O===124?(e.consume(O),h):h(O)}function p(O){if(O===null)return n(O);e.exit("tableRow"),e.exit("tableHead");const N=r.interrupt;return r.interrupt=!0,e.attempt({tokenize:P,partial:!0},function(z){return r.interrupt=N,e.enter("tableDelimiterRow"),m(z)},function(z){return r.interrupt=N,n(z)})(O)}function m(O){return O===null||W(O)?S(O):me(O)?(e.enter("whitespace"),e.consume(O),b):O===45?(e.enter("tableDelimiterFiller"),e.consume(O),a=!0,i.push("none"),y):O===58?(e.enter("tableDelimiterAlignment"),e.consume(O),e.exit("tableDelimiterAlignment"),i.push("left"),k):O===124?(e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),m):n(O)}function b(O){return me(O)?(e.consume(O),b):(e.exit("whitespace"),m(O))}function y(O){return O===45?(e.consume(O),y):(e.exit("tableDelimiterFiller"),O===58?(e.enter("tableDelimiterAlignment"),e.consume(O),e.exit("tableDelimiterAlignment"),i[i.length-1]=i[i.length-1]==="left"?"center":"right",_):m(O))}function k(O){return O===45?(e.enter("tableDelimiterFiller"),e.consume(O),a=!0,y):n(O)}function _(O){return O===null||W(O)?S(O):me(O)?(e.enter("whitespace"),e.consume(O),b):O===124?(e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),m):n(O)}function S(O){return e.exit("tableDelimiterRow"),!a||o!==i.length?n(O):O===null?v(O):e.check(ty,v,e.attempt({tokenize:P,partial:!0},Z(e,g,"linePrefix",4),v))(O)}function v(O){return e.exit("table"),t(O)}function g(O){return e.enter("tableBody"),w(O)}function w(O){return e.enter("tableRow"),O===124?D(O):(e.enter("temporaryTableCellContent"),C(O))}function D(O){return e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),x}function x(O){return O===null||W(O)?M(O):me(O)?(e.enter("whitespace"),e.consume(O),E):O===124?D(O):(e.enter("temporaryTableCellContent"),C(O))}function E(O){return me(O)?(e.consume(O),E):(e.exit("whitespace"),x(O))}function C(O){return O===null||O===124||Ae(O)?(e.exit("temporaryTableCellContent"),x(O)):(e.consume(O),O===92?A:C)}function A(O){return O===92||O===124?(e.consume(O),C):C(O)}function M(O){return e.exit("tableRow"),O===null?$(O):e.check(ty,$,e.attempt({tokenize:P,partial:!0},Z(e,w,"linePrefix",4),$))(O)}function $(O){return e.exit("tableBody"),v(O)}function P(O,N,z){return q;function q(T){return O.enter("lineEnding"),O.consume(T),O.exit("lineEnding"),Z(O,H,"linePrefix")}function H(T){if(r.parser.lazy[r.now().line]||T===null||W(T))return z(T);const F=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&F&&F[1].type==="linePrefix"&&F[2].sliceSerialize(F[1],!0).length>=4?z(T):(r._gfmTableDynamicInterruptHack=!0,O.check(r.parser.constructs.flow,function(ee){return r._gfmTableDynamicInterruptHack=!1,z(ee)},function(ee){return r._gfmTableDynamicInterruptHack=!1,N(ee)})(T))}}}function Wse(e,t,n){let r=0;return i;function i(s){return e.enter("check"),e.consume(s),o}function o(s){return s===-1||s===32?(e.consume(s),r++,r===4?t:o):s===null||Ae(s)?t(s):n(s)}}const Hse={tokenize:Kse},Gse={text:{[91]:Hse}};function Kse(e,t,n){const r=this;return i;function i(a){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(a):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(a),e.exit("taskListCheckMarker"),o)}function o(a){return Ae(a)?(e.enter("taskListCheckValueUnchecked"),e.consume(a),e.exit("taskListCheckValueUnchecked"),s):a===88||a===120?(e.enter("taskListCheckValueChecked"),e.consume(a),e.exit("taskListCheckValueChecked"),s):n(a)}function s(a){return a===93?(e.enter("taskListCheckMarker"),e.consume(a),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:Jse},t,n)):n(a)}}function Jse(e,t,n){const r=this;return Z(e,i,"whitespace");function i(o){const s=r.events[r.events.length-1];return(s&&s[1].type==="whitespace"||W(o))&&o!==null?t(o):n(o)}}function Yse(e){return ok([xse,Nse(),zse(e),Vse,Gse])}function ny(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function Xse(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const Qse={}.hasOwnProperty,Zse=function(e,t,n,r){let i,o;typeof t=="string"||t instanceof RegExp?(o=[[t,n]],i=r):(o=t,i=n),i||(i={});const s=qu(i.ignore||[]),a=eae(o);let l=-1;for(;++l<a.length;)kk(e,"text",c);return e;function c(d,h){let f=-1,p;for(;++f<h.length;){const m=h[f];if(s(m,p?p.children.indexOf(m):void 0,p))return;p=m}if(p)return u(d,h)}function u(d,h){const f=h[h.length-1],p=a[l][0],m=a[l][1];let b=0;const y=f.children.indexOf(d);let k=!1,_=[],S;p.lastIndex=0;let v=p.exec(d.value);for(;v;){S=v.index;const g={index:v.index,input:v.input,stack:[...h,d]};let w=m(...v,g);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w!==!1&&(b!==S&&_.push({type:"text",value:d.value.slice(b,S)}),Array.isArray(w)?_.push(...w):w&&_.push(w),b=S+v[0].length,k=!0),!p.global)break;v=p.exec(d.value)}return k?(b<d.value.length&&_.push({type:"text",value:d.value.slice(b)}),f.children.splice(y,1,..._)):_=[d],y+_.length}};function eae(e){const t=[];if(typeof e!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(e)){let n=-1;for(;++n<e.length;)t.push([ry(e[n][0]),iy(e[n][1])])}else{let n;for(n in e)Qse.call(e,n)&&t.push([ry(n),iy(e[n])])}return t}function ry(e){return typeof e=="string"?new RegExp(Xse(e),"g"):e}function iy(e){return typeof e=="function"?e:()=>e}const gh="phrasing",bh=["autolink","link","image","label"],tae={transforms:[lae],enter:{literalAutolink:rae,literalAutolinkEmail:yh,literalAutolinkHttp:yh,literalAutolinkWww:yh},exit:{literalAutolink:aae,literalAutolinkEmail:sae,literalAutolinkHttp:iae,literalAutolinkWww:oae}},nae={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:gh,notInConstruct:bh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:gh,notInConstruct:bh},{character:":",before:"[ps]",after:"\\/",inConstruct:gh,notInConstruct:bh}]};function rae(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function yh(e){this.config.enter.autolinkProtocol.call(this,e)}function iae(e){this.config.exit.autolinkProtocol.call(this,e)}function oae(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.url="http://"+this.sliceSerialize(e)}function sae(e){this.config.exit.autolinkEmail.call(this,e)}function aae(e){this.exit(e)}function lae(e){Zse(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,cae],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,uae]],{ignore:["link","linkReference"]})}function cae(e,t,n,r,i){let o="";if(!kD(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!dae(n)))return!1;const s=hae(n+r);if(!s[0])return!1;const a={type:"link",title:null,url:o+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[a,{type:"text",value:s[1]}]:a}function uae(e,t,n,r){return!kD(r,!0)||/[_-\d]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function dae(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function hae(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);let n,r,i,o;if(t)for(e=e.slice(0,t.index),o=t[0],n=o.indexOf(")"),r=ny(e,"("),i=ny(e,")");n!==-1&&r>i;)e+=o.slice(0,n+1),o=o.slice(n+1),n=o.indexOf(")"),i++;return[e,o]}function kD(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||zu(n)||Vu(n))&&(!t||n!==47)}function fae(){return{enter:{gfmFootnoteDefinition:e,gfmFootnoteDefinitionLabelString:t,gfmFootnoteCall:i,gfmFootnoteCallString:o},exit:{gfmFootnoteDefinition:r,gfmFootnoteDefinitionLabelString:n,gfmFootnoteCall:a,gfmFootnoteCallString:s}};function e(l){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},l)}function t(){this.buffer()}function n(l){const c=this.resume(),u=this.stack[this.stack.length-1];u.label=c,u.identifier=Pn(this.sliceSerialize(l)).toLowerCase()}function r(l){this.exit(l)}function i(l){this.enter({type:"footnoteReference",identifier:"",label:""},l)}function o(){this.buffer()}function s(l){const c=this.resume(),u=this.stack[this.stack.length-1];u.label=c,u.identifier=Pn(this.sliceSerialize(l)).toLowerCase()}function a(l){this.exit(l)}}function pae(){return e.peek=t,{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:n,footnoteReference:e}};function e(r,i,o,s){const a=Fa(s);let l=a.move("[^");const c=o.enter("footnoteReference"),u=o.enter("reference");return l+=a.move(Cf(o,xf(r),{...a.current(),before:l,after:"]"})),u(),c(),l+=a.move("]"),l}function t(){return"["}function n(r,i,o,s){const a=Fa(s);let l=a.move("[^");const c=o.enter("footnoteDefinition"),u=o.enter("label");return l+=a.move(Cf(o,xf(r),{...a.current(),before:l,after:"]"})),u(),l+=a.move("]:"+(r.children&&r.children.length>0?" ":"")),a.shift(4),l+=a.move(Lk(Nk(r,o,a.current()),d)),c(),l;function d(h,f,p){return f?(p?"":"    ")+h:h}}}const mae={canContainEols:["delete"],enter:{strikethrough:yae},exit:{strikethrough:wae}},gae=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],bae={unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:gae}],handlers:{delete:_D}};_D.peek=kae;function yae(e){this.enter({type:"delete",children:[]},e)}function wae(e){this.exit(e)}function _D(e,t,n,r){const i=Fa(r),o=n.enter("emphasis");let s=i.move("~~");return s+=Jp(e,n,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),o(),s}function kae(){return"~"}function _ae(e,t={}){const n=(t.align||[]).concat(),r=t.stringLength||xae,i=[],o=[],s=[],a=[];let l=0,c=-1;for(;++c<e.length;){const p=[],m=[];let b=-1;for(e[c].length>l&&(l=e[c].length);++b<e[c].length;){const y=Dae(e[c][b]);if(t.alignDelimiters!==!1){const k=r(y);m[b]=k,(a[b]===void 0||k>a[b])&&(a[b]=k)}p.push(y)}o[c]=p,s[c]=m}let u=-1;if(typeof n=="object"&&"length"in n)for(;++u<l;)i[u]=oy(n[u]);else{const p=oy(n);for(;++u<l;)i[u]=p}u=-1;const d=[],h=[];for(;++u<l;){const p=i[u];let m="",b="";p===99?(m=":",b=":"):p===108?m=":":p===114&&(b=":");let y=t.alignDelimiters===!1?1:Math.max(1,a[u]-m.length-b.length);const k=m+"-".repeat(y)+b;t.alignDelimiters!==!1&&(y=m.length+y+b.length,y>a[u]&&(a[u]=y),h[u]=y),d[u]=k}o.splice(1,0,d),s.splice(1,0,h),c=-1;const f=[];for(;++c<o.length;){const p=o[c],m=s[c];u=-1;const b=[];for(;++u<l;){const y=p[u]||"";let k="",_="";if(t.alignDelimiters!==!1){const S=a[u]-(m[u]||0),v=i[u];v===114?k=" ".repeat(S):v===99?S%2?(k=" ".repeat(S/2+.5),_=" ".repeat(S/2-.5)):(k=" ".repeat(S/2),_=k):_=" ".repeat(S)}t.delimiterStart!==!1&&!u&&b.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&y==="")&&(t.delimiterStart!==!1||u)&&b.push(" "),t.alignDelimiters!==!1&&b.push(k),b.push(y),t.alignDelimiters!==!1&&b.push(_),t.padding!==!1&&b.push(" "),(t.delimiterEnd!==!1||u!==l-1)&&b.push("|")}f.push(t.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return f.join(`
`)}function Dae(e){return e==null?"":String(e)}function xae(e){return e.length}function oy(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const Cae={enter:{table:vae,tableData:sy,tableHeader:sy,tableRow:Eae},exit:{codeText:Aae,table:Sae,tableData:wh,tableHeader:wh,tableRow:wh}};function vae(e){const t=e._align;this.enter({type:"table",align:t.map(n=>n==="none"?null:n),children:[]},e),this.setData("inTable",!0)}function Sae(e){this.exit(e),this.setData("inTable")}function Eae(e){this.enter({type:"tableRow",children:[]},e)}function wh(e){this.exit(e)}function sy(e){this.enter({type:"tableCell",children:[]},e)}function Aae(e){let t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,Fae));const n=this.stack[this.stack.length-1];n.value=t,this.exit(e)}function Fae(e,t){return t==="|"?t:e}function Tae(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:s,tableRow:a,tableCell:l,inlineCode:h}};function s(f,p,m,b){return c(u(f,m,b),f.align)}function a(f,p,m,b){const y=d(f,m,b),k=c([y]);return k.slice(0,k.indexOf(`
`))}function l(f,p,m,b){const y=m.enter("tableCell"),k=m.enter("phrasing"),_=Jp(f,m,{...b,before:o,after:o});return k(),y(),_}function c(f,p){return _ae(f,{align:p,alignDelimiters:r,padding:n,stringLength:i})}function u(f,p,m){const b=f.children;let y=-1;const k=[],_=p.enter("table");for(;++y<b.length;)k[y]=d(b[y],p,m);return _(),k}function d(f,p,m){const b=f.children;let y=-1;const k=[],_=p.enter("tableRow");for(;++y<b.length;)k[y]=l(b[y],f,p,m);return _(),k}function h(f,p,m){let b=Gp(f,p,m);return m.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}const Mae={exit:{taskListCheckValueChecked:ay,taskListCheckValueUnchecked:ay,paragraph:Nae}},Oae={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Lae}};function ay(e){const t=this.stack[this.stack.length-2];t.checked=e.type==="taskListCheckValueChecked"}function Nae(e){const t=this.stack[this.stack.length-2],n=this.stack[this.stack.length-1],r=t.children,i=n.children[0];let o=-1,s;if(t&&t.type==="listItem"&&typeof t.checked=="boolean"&&i&&i.type==="text"){for(;++o<r.length;){const a=r[o];if(a.type==="paragraph"){s=a;break}}s===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}this.exit(e)}function Lae(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",a=Fa(r);o&&a.move(s);let l=Mk(e,t,n,{...r,...a.current()});return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+s}}function $ae(){return[tae,fae(),mae,Cae,Mae]}function Iae(e){return{extensions:[nae,pae(),bae,Tae(e),Oae]}}function Rae(e={}){const t=this.data();n("micromarkExtensions",Yse(e)),n("fromMarkdownExtensions",$ae()),n("toMarkdownExtensions",Iae(e));function n(r,i){(t[r]?t[r]:t[r]=[]).push(i)}}var Bae=Object.defineProperty,Pae=(e,t,n)=>t in e?Bae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zi=(e,t,n)=>(Pae(e,typeof t!="symbol"?t+"":t,n),n);const DD=e=>`footnote-ref-${e}`,xD=e=>`footnote-def-${e}`,jae=new _e("MILKDOWN_FOOTNOTE_DEF_INPUT"),ly=we("ModifyFootnoteDef"),zae=ht(e=>{const t="footnote_definition",n="footnoteDefinition";return{id:t,schema:r=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:""}},parseDOM:[{tag:`div[data-type="${t}"]`,getAttrs:i=>{if(!(i instanceof HTMLElement))throw Lt(i);return{label:i.dataset.label}},contentElement:"dd"}],toDOM:i=>{const o=i.attrs.label,s=e.getClassName(i.attrs,"footnote-definition"),a=document.createElement("dt");a.textContent=`[${o}]:`,a.onclick=()=>{const c=r.get(Ve),u=Y.create(c.state.doc,c.state.selection.from-2);c.dispatch(c.state.tr.setSelection(u))};const l=document.createElement("a");return l.href=`#${DD(o)}`,l.contentEditable="false",l.textContent="\u21A9",l.onmousedown=c=>{c.preventDefault()},["div",{class:s,"data-label":o,"data-type":t,id:xD(o)},["div",{class:"footnote-definition_content"},a,["dd",0]],["div",{class:"footnote-definition_anchor"},l]]},parseMarkdown:{match:({type:i})=>i===n,runner:(i,o,s)=>{i.openNode(s,{label:o.label}).next(o.children).closeNode()}},toMarkdown:{match:i=>i.type.name===t,runner:(i,o)=>{i.openNode(n,void 0,{label:o.attrs.label,identifier:o.attrs.label}).next(o.content).closeNode()}}}),commands:r=>[be(ly,(i="")=>(o,s)=>{const a=Ir(o.selection,r);if(!a)return!1;const{tr:l}=o,c=l.setNodeMarkup(a.pos,void 0,{...a.node.attrs,label:i});return s==null||s(c.setSelection(Y.create(c.doc,a.pos))),!0})],inputRules:r=>[Es(/(?:\[\^)([^:]+)(?::)$/,r,i=>{var o;return{label:(o=i[1])!=null?o:"footnote"}},()=>!1)],prosePlugins:(r,i)=>[new ye({key:jae,view:o=>{const s=e.themeManager.get("input-chip",{width:"12em",placeholder:"Input Footnote Label",onUpdate:u=>{i.get(ke).call(ly,u)},isBindMode:!0});if(!s)return{};const a=u=>Boolean(r&&Ir(u.state.selection,r)),l=u=>{const d=Ir(u.state.selection,r);return d?d.node.attrs.label:void 0},c=u=>{!u.editable||(a(u)?(s.show(u),s.update(l(u))):s.hide())};return s.init(o),c(o),{update:(u,d)=>{(d==null?void 0:d.doc.eq(u.state.doc))&&d.selection.eq(u.state.selection)||c(u)},destroy:()=>{s.destroy()}}}})]}}),cy=we("ModifyFootnoteRef"),Vae=new _e("MILKDOWN_FOOTNOTE_REF_INPUT"),Uae=ht(e=>{const t="footnote_reference";return{id:t,schema:n=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:""}},parseDOM:[{tag:`sup[data-type="${t}"]`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw Lt(r);return{label:r.dataset.label}}}],toDOM:r=>{const i=r.attrs.label,o=document.createElement("a"),s=`#${xD(i)}`;return o.href=s,o.textContent=`[${i}]`,o.onclick=a=>{n.get(Ve).editable&&a.preventDefault()},o.ondblclick=()=>{n.get(Ve).editable&&(window.location.href=s)},["sup",{"data-label":i,"data-type":t,id:DD(i)},o]},parseMarkdown:{match:({type:r})=>r==="footnoteReference",runner:(r,i,o)=>{r.addNode(o,{label:i.label})}},toMarkdown:{match:r=>r.type.name===t,runner:(r,i)=>{r.addNode("footnoteReference",void 0,void 0,{label:i.attrs.label,identifier:i.attrs.label})}}}),commands:n=>[be(cy,(r="")=>(i,o)=>{const s=Ir(i.selection,n);if(!s)return!1;const{tr:a}=i,l=a.setNodeMarkup(s.pos,void 0,{...s.node.attrs,label:r});return o==null||o(l.setSelection(Y.create(l.doc,s.pos))),!0})],inputRules:n=>[new ln(/(?:\[\^)([^\]]+)(?:\])$/,(r,i,o,s)=>{const a=r.doc.resolve(o),l=a.index(),c=r.doc.resolve(s);if(!a.parent.canReplaceWith(l,c.index(),n))return null;const u=i[1];return r.tr.replaceRangeWith(o,s,n.create({label:u}))})],prosePlugins:(n,r)=>{const i=e.themeManager.get("input-chip",{width:"12em",placeholder:"Input Footnote Label",onUpdate:l=>{r.get(ke).call(cy,l)},isBindMode:!0});if(!i)return[];const o=l=>Boolean(n&&Ir(l.state.selection,n)),s=l=>{const c=Ir(l.state.selection,n);return c?c.node.attrs.label:void 0},a=l=>{!l.editable||(o(l)?(i.show(l),i.update(s(l))):i.hide())};return[new ye({key:Vae,view:l=>(i.init(l),a(l),{update:(c,u)=>{(u==null?void 0:u.doc.eq(c.state.doc))&&u.selection.eq(c.state.selection)||a(c)},destroy:()=>{i.destroy()}})})]}}}),CD=new WeakMap,qae=e=>CD.get(e),Wae=(e,t)=>(CD.set(e,t),t);class uy{constructor(t,n,r,i){zi(this,"tableStart"),zi(this,"map"),zi(this,"table"),this.left=t,this.top=n,this.right=r,this.bottom=i}}class Re{constructor(t,n,r,i){this.width=t,this.height=n,this.map=r,this.problems=i,this.width=t,this.height=n,this.map=r,this.problems=i}findCell(t){for(let n=0;n<this.map.length;n++){const r=this.map[n];if(r!=t)continue;const i=n%this.width,o=n/this.width|0;let s=i+1,a=o+1;for(let l=1;s<this.width&&this.map[n+l]==r;l++)s++;for(let l=1;a<this.height&&this.map[n+this.width*l]==r;l++)a++;return new uy(i,o,s,a)}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let n=0;n<this.map.length;n++)if(this.map[n]==t)return n%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,n,r){const{left:i,right:o,top:s,bottom:a}=this.findCell(t);return n=="horiz"?(r<0?i==0:o==this.width)?void 0:this.map[s*this.width+(r<0?i-1:o)]:(r<0?s==0:a==this.height)?void 0:this.map[i+this.width*(r<0?s-1:a)]}rectBetween(t,n){const{left:r,right:i,top:o,bottom:s}=this.findCell(t),{left:a,right:l,top:c,bottom:u}=this.findCell(n);return new uy(Math.min(r,a),Math.min(o,c),Math.max(i,l),Math.max(s,u))}cellsInRect(t){const n=[],r={};for(let i=t.top;i<t.bottom;i++)for(let o=t.left;o<t.right;o++){const s=i*this.width+o,a=this.map[s];r[a]||(r[a]=!0,(o!=t.left||!o||this.map[s-1]!=a)&&(i!=t.top||!i||this.map[s-this.width]!=a)&&n.push(a))}return n}positionAt(t,n,r){for(let i=0,o=0;;i++){const s=o+r.child(i).nodeSize;if(i==t){let a=n+t*this.width;const l=(t+1)*this.width;for(;a<l&&this.map[a]<o;)a++;return a==l?s-1:this.map[a]}o=s}}static get(t){return qae(t)||Wae(t,Hae(t))}}function Hae(e){if(e.type.spec.tableRole!="table")throw new RangeError(`Not a table node: ${e.type.name}`);const t=Gae(e),n=e.childCount,r=[],i=[];let o=0,s;for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=e.child(c);u++;for(let p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==d.childCount)break;const m=d.child(p),{colspan:b,rowspan:y,colwidth:k}=m.attrs;for(let _=0;_<y;_++){if(_+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:y-_});break}const S=o+_*t;for(let v=0;v<b;v++){r[S+v]==0?r[S+v]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:b-v});const g=k&&k[v];if(g){const w=(S+v)%t*2,D=i[w];D==null||D!=g&&i[w+1]==1?(i[w]=g,i[w+1]=1):D==g&&i[w+1]++}}}o+=b,u+=m.nodeSize}const h=(c+1)*t;let f=0;for(;o<h;)r[o++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),u++}const a=new Re(t,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&Kae(a,i,e),a}function Gae(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let o=0;if(n)for(let s=0;s<r;s++){const a=e.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(o+=c.attrs.colspan)}}for(let s=0;s<i.childCount;s++){const a=i.child(s);o+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=o:t!=o&&(t=Math.max(t,o))}return t}function Kae(e,t,n){e.problems||(e.problems=[]);for(let r=0,i={};r<e.map.length;r++){const o=e.map[r];if(i[o])continue;i[o]=!0;const s=n.nodeAt(o);let a=null;for(let l=0;l<s.attrs.colspan;l++){const c=(r+l)%e.width,u=t[c*2];u!=null&&(!s.attrs.colwidth||s.attrs.colwidth[l]!=u)&&((a||(a=Jae(s.attrs)))[l]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}function Jae(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}class De extends te{constructor(t,n=t){const r=t.node(-1),i=Re.get(r),o=t.start(-1),s=i.rectBetween(t.pos-o,n.pos-o),a=t.node(0),l=i.cellsInRect(s).filter(u=>u!=n.pos-o);l.unshift(n.pos-o);const c=l.map(u=>{const d=r.nodeAt(u),h=u+o+1;return new tk(a.resolve(h),a.resolve(h+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n,this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(ip(r)&&ip(i)&&Lm(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?De.rowSelection(r,i):o&&this.isColSelection()?De.colSelection(r,i):new De(r,i)}return ne.between(r,i)}content(){const t=this.$anchorCell.node(-1),n=Re.get(t),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},s=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let u=l*n.width+i.left,d=i.left;d<i.right;d++,u++){const h=n.map[u];if(!o[h]){o[h]=!0;const f=n.findCell(h);let p=t.nodeAt(h);const m=i.left-f.left,b=f.right-i.right;if(m>0||b>0){let y=p.attrs;m>0&&(y=co(y,0,m)),b>0&&(y=co(y,y.colspan-b,b)),f.left<i.left?p=p.type.createAndFill(y):p=p.type.create(y,p.content)}if(f.top<i.top||f.bottom>i.bottom){const y=wn(p.attrs,"rowspan",Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top));f.top<i.top?p=p.type.createAndFill(y):p=p.type.create(y,p.content)}c.push(p)}}s.push(t.child(l).copy(B.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:s;return new V(B.from(a),1,1)}replace(t,n=V.empty){const r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){const{$from:a,$to:l}=i[s],c=t.mapping.slice(r);t.replace(c.map(a.pos),c.map(l.pos),s?V.empty:n)}const o=te.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,n){this.replace(t,new V(B.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=Re.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<o.length;s++)t(n.nodeAt(o[s]),i+o[s])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=Re.get(t.node(-1)),i=t.start(-1),o=r.findCell(t.pos-i),s=r.findCell(n.pos-i),a=t.node(0);if(o.top<=s.top){if(o.top>0){const l=r.map[o.left];t=a.resolve(i+l)}if(s.bottom<r.height){const l=r.map[r.width*(r.height-1)+s.right-1];n=a.resolve(i+l)}}else{if(s.top>0){const l=r.map[o.left];n=a.resolve(i+l)}if(o.bottom<r.height){const l=r.map[r.width*(r.height-1)+o.right-1];t=a.resolve(i+l)}}return new De(t,n)}isRowSelection(){const t=Re.get(this.$anchorCell.node(-1)),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),i=t.colCount(this.$headCell.pos-n);if(Math.min(r,i)>0)return!1;const o=r+this.$anchorCell.nodeAfter.attrs.colspan,s=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,s)==t.width}eq(t){return t instanceof De&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=Re.get(t.node(-1)),i=t.start(-1),o=r.findCell(t.pos-i),s=r.findCell(n.pos-i),a=t.node(0);if(o.left<=s.left){if(o.left>0){const l=r.map[o.top*r.width];t=a.resolve(i+l)}if(s.right<r.width){const l=r.map[r.width*(s.top+1)-1];n=a.resolve(i+l)}}else{if(s.left>0){const l=r.map[s.top*r.width];n=a.resolve(i+l)}if(o.right<r.width){const l=r.map[r.width*(o.top+1)-1];t=a.resolve(i+l)}}return new De(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new De(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new De(t.resolve(n),t.resolve(r))}getBookmark(){return new Nm(this.$anchorCell.pos,this.$headCell.pos)}}De.prototype.visible=!1;te.jsonID("cell",De);class Nm{constructor(t,n){this.anchor=t,this.head=n,this.anchor=t,this.head=n}map(t){return new Nm(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&Lm(n,r)?new De(n,r):te.near(r,1)}}function Yae(e){if(!(e.selection instanceof De))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(Ke.node(r,r+n.nodeSize,{class:"selectedCell"}))}),ve.create(e.doc,t)}function Xae({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let o=t.depth;o>=0&&!(t.before(o+1)>t.start(o));o--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}function Qae({$from:e,$to:t}){let n,r;for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){n=o;break}}for(let i=t.depth;i>0;i--){const o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return n!==r&&t.parentOffset===0}function Zae(e,t,n){const r=(t||e).selection,i=(t||e).doc;let o,s;if(r instanceof Y&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")o=De.create(i,r.from);else if(s=="row"){const a=i.resolve(r.from+1);o=De.rowSelection(a,a)}else if(!n){const a=Re.get(r.node),l=r.from+1,c=a.map[a.width*a.height-1],u=l+c;o=De.create(i,l+1,u)}}else r instanceof ne&&Xae(r)?o=ne.create(i,r.from):r instanceof ne&&Qae(r)&&(o=ne.create(i,r.$from.start(),r.$from.end()));return o&&(t||(t=e.tr)).setSelection(o),t}function dy(e,t){const n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(s=>Number(s)):null,i=Number(e.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const s in t){const a=t[s].getFromDOM,l=a&&a(e);l!=null&&(o[s]=l)}return o}function hy(e,t){const n={};e.attrs.colspan!=1&&(n.colspan=e.attrs.colspan),e.attrs.rowspan!=1&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(const r in t){const i=t[r].setDOMAttr;i&&i(e.attrs[r],n)}return n}function ele(e){const t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const i in t)n[i]={default:t[i].default};const r=n;return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:r,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:i=>dy(i,t)}],toDOM(i){return["td",hy(i,t),0]}},table_header:{content:e.cellContent,attrs:r,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:i=>dy(i,t)}],toDOM(i){return["th",hy(i,t),0]}}}}function Fn(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r==null?void 0:r.spec.tableRole;i&&(t[i]=r)}}return t}const Wl=ele({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:e=>e.style.textAlign||"left",setDOMAttr:(e,t)=>{t.style=`text-align: ${e||"left"}`}}}});function Cl(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1))}function ip(e){return e.parent.type.spec.tableRole=="row"?e.nodeAfter:null}function tle(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function Lm(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function vD(e,t,n){const r=e.start(-1),i=Re.get(e.node(-1)).nextCell(e.pos-r,t,n);return i==null?null:e.node(0).resolve(r+i)}function wn(e,t,n){const r={};for(const i in e)r[i]=e[i];return r[t]=n,r}function co(e,t,n=1){const r=wn(e,"colspan",e.colspan-n);if(r.colwidth){const i=r.colwidth;r.colwidth=i.slice(),i.splice(t,n),i.some(o=>o>0)||(r.colwidth=null)}return r}function Tn(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function td(e){const t=e.selection;return t instanceof De?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&t.node.type.spec.tableRole=="cell"?t.$anchor:Cl(t.$head)||nle(t.$head)}function nle(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function rle(e,t,n=1){const r=wn(e,"colspan",e.colspan+n);if(r.colwidth){const i=r.colwidth;r.colwidth=i.slice();for(let o=0;o<n;o++)i.splice(t,0,0)}return r}function ile(e,t,n){const r=Fn(t.type.schema).header_cell;for(let i=0;i<e.height;i++){const o=e.map[n+i*e.width];if(t.nodeAt(o).type!=r)return!1}return!0}const ole=e=>(t,n)=>{if(!Tn(t))return!1;const{$head:r}=t.selection,i=r.after(),o=t.tr.replaceWith(i,i,e.createAndFill());return o.setSelection(te.near(o.doc.resolve(i),1)),n==null||n(o.scrollIntoView()),!0};function ks(e){const t=e.selection,n=td(e),r=n.node(-1),i=n.start(-1),o=Re.get(r);let s;return t instanceof De?s=o.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s=o.findCell(n.pos-i),s.tableStart=i,s.map=o,s.table=r,s}function SD(e,{map:t,tableStart:n,table:r},i){t=t,r=r,n=n;let o=i>0?-1:0;ile(t,r,i+o)&&(o=i==0||i==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){const l=t.map[a],c=r.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,rle(c.attrs,i-t.colCount(l))),s+=c.attrs.rowspan-1}else{const l=t.map[a+o],c=o==null?Fn(r.type.schema).cell:r.nodeAt(l).type,u=t.positionAt(s,i,r);e.insert(e.mapping.map(n+u),c.createAndFill())}}return e}const sle=(e,t)=>{if(!Tn(e))return!1;if(t){const n=ks(e);t(SD(e.tr,n,n.left))}return!0},ale=(e,t)=>{if(!Tn(e))return!1;if(t){const n=ks(e);t(SD(e.tr,n,n.right))}return!0};function lle(e,{map:t,table:n,tableStart:r},i){t=t,n=n,r=r;const o=e.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+i,l=t.map[a],c=n.nodeAt(l);if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(o).map(r+l),null,co(c.attrs,i-t.colCount(l)));else{const u=e.mapping.slice(o).map(r+l);e.delete(u,u+c.nodeSize)}s+=c.attrs.rowspan}}const cle=(e,t)=>{if(!Tn(e))return!1;if(t){const n=ks(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;lle(r,n,i),i!=n.left;i--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=Re.get(n.table);t(r)}return!0};function ule(e,{map:t,tableStart:n,table:r},i){t=t,r=r,n=n;let o=0;for(let l=0;l<i;l++)o+=r.child(l).nodeSize;const s=o+r.child(i).nodeSize,a=e.mapping.maps.length;e.delete(o+n,s+n);for(let l=0,c=i*t.width;l<t.width;l++,c++){const u=t.map[c];if(i>0&&u==t.map[c-t.width]){const d=r.nodeAt(u).attrs;e.setNodeMarkup(e.mapping.slice(a).map(u+n),null,wn(d,"rowspan",d.rowspan-1)),l+=d.colspan-1}else if(i<t.width&&u==t.map[c+t.width]){const d=r.nodeAt(u),h=d.type.create(wn(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),f=t.positionAt(i+1,l,r);e.insert(e.mapping.slice(a).map(n+f),h),l+=d.attrs.colspan-1}}}const dle=(e,t)=>{if(!Tn(e))return!1;if(t){const n=ks(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;ule(r,n,i),i!=n.top;i--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=Re.get(n.table);t(r)}return!0};function kh(e,t){return(n,r)=>{if(!Tn(n))return!1;const i=td(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){const o=n.tr;n.selection instanceof De?n.selection.forEachCell((s,a)=>{s.attrs[e]!==t&&o.setNodeMarkup(a,null,wn(s.attrs,e,t))}):o.setNodeMarkup(i.pos,null,wn(i.nodeAfter.attrs,e,t)),r(o)}return!0}}function hle(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,i=e.before();r>=0;r--){const o=e.node(-1).child(r);if(o.childCount)return i-1-o.lastChild.nodeSize;i-=o.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),i=e.after();r<n.childCount;r++){const o=n.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}}function fy(e){return(t,n)=>{if(!Tn(t))return!1;const r=hle(td(t),e);if(r==null)return!1;if(n){const i=t.doc.resolve(r);n(t.tr.setSelection(ne.between(i,tle(i))).scrollIntoView())}return!0}}const fle=(e,t)=>{const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1},nd=e=>ul(t=>t.type.spec.tableRole==="table")(e),ple=e=>t=>{const n=nd(t);if(!n)return;const r=Re.get(n.node);if(!(e<0||e>=r.width))return r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height}).map(i=>{const o=n.node.nodeAt(i);if(!o)return;const s=i+n.start;return{pos:s,start:s+1,node:o}}).filter(i=>i!=null)},mle=e=>t=>{const n=nd(t);if(!n)return;const r=Re.get(n.node);if(!(e<0||e>=r.height))return r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1}).map(i=>{const o=n.node.nodeAt(i);if(!o)return;const s=i+n.start;return{pos:s,start:s+1,node:o}}).filter(i=>i!=null)},_h=(e,t=3,n=3)=>{const{cell:r,header_cell:i,row:o,table:s}=Fn(e),a=Array(n).fill(0).map(()=>r.createAndFill(null)),l=Array(n).fill(0).map(()=>i.createAndFill(null)),c=Array(t).fill(0).map((u,d)=>o.create(null,d===0?l:a));return s.create(null,c)},py=e=>t=>n=>{const r=nd(n.selection),i=e==="row";if(r){const o=Re.get(r.node);if(t>=0&&t<(i?o.height:o.width)){const s=o.positionAt(i?t:o.height-1,i?o.width-1:t,r.node),a=n.doc.resolve(r.start+s),l=i?De.rowSelection:De.colSelection,c=o.positionAt(i?t:0,i?0:t,r.node),u=n.doc.resolve(r.start+c);return am(n.setSelection(l(a,u)))}}return n},gle=e=>{const t=nd(e);if(!t)return;const n=Re.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map(r=>{const i=t.node.nodeAt(r),o=r+t.start;return{pos:o,start:o+1,node:i}})},ble=e=>{const t=gle(e.selection);if(t&&t[0]){const n=e.doc.resolve(t[0].pos),r=t[t.length-1];if(r){const i=e.doc.resolve(r.pos);return am(e.setSelection(new De(i,n)))}}return e};function my(e,{map:t,tableStart:n,table:r},i){const o=Array(i).fill(0).reduce((c,u,d)=>c+r.child(d).nodeSize,n),{cell:s,row:a}=Fn(r.type.schema),l=Array(t.width).fill(0).map((c,u)=>{const d=r.nodeAt(t.map[u]);return s.createAndFill({alignment:d==null?void 0:d.attrs.alignment})});return e.insert(o,a.create(null,l)),e}const Zn=e=>e.state.selection,yle=e=>{const t=Re.get(e.$anchorCell.node(-1)),n=e.$anchorCell.start(-1),r=t.cellsInRect({left:0,right:t.width,top:0,bottom:1}),i=t.cellsInRect(t.rectBetween(e.$anchorCell.pos-n,e.$headCell.pos-n));for(let o=0,s=r.length;o<s;o++)if(!i.includes(r[o]))return!1;return!0},wle=(e,t)=>{Object.values(e).forEach(n=>{var r;if((r=n.disable)!=null&&r.call(n,t)){n.$.classList.add("hide");return}n.$.classList.remove("hide")})},kle=e=>{var t,n,r,i,o,s,a,l;return{[0]:{$:(t=e.get(Ce).get(it,"leftArrow"))==null?void 0:t.dom,command:()=>sle,disable:c=>!Zn(c).isColSelection()},[1]:{$:(n=e.get(Ce).get(it,"rightArrow"))==null?void 0:n.dom,command:()=>ale,disable:c=>!Zn(c).isColSelection()},[2]:{$:(r=e.get(Ce).get(it,"upArrow"))==null?void 0:r.dom,command:()=>(c,u)=>{if(!Tn(c))return!1;if(u){const d=ks(c);u(my(c.tr,d,d.top))}return!0},disable:c=>!Zn(c).isRowSelection()||Zn(c).$head.parent.type.name==="table_header"},[3]:{$:(i=e.get(Ce).get(it,"downArrow"))==null?void 0:i.dom,command:()=>(c,u)=>{if(!Tn(c))return!1;if(u){const d=ks(c);u(my(c.tr,d,d.bottom))}return!0},disable:c=>!Zn(c).isRowSelection()},[4]:{$:(o=e.get(Ce).get(it,"alignLeft"))==null?void 0:o.dom,command:()=>kh("alignment","left"),disable:c=>!Zn(c).isColSelection()},[5]:{$:(s=e.get(Ce).get(it,"alignCenter"))==null?void 0:s.dom,command:()=>kh("alignment","center"),disable:c=>!Zn(c).isColSelection()},[6]:{$:(a=e.get(Ce).get(it,"alignRight"))==null?void 0:a.dom,command:()=>kh("alignment","right"),disable:c=>!Zn(c).isColSelection()},[7]:{$:(l=e.get(Ce).get(it,"delete"))==null?void 0:l.dom,command:(c,u)=>{const d=Zn(u),h=d.isColSelection(),f=d.isRowSelection();return h&&f?fle:h?cle:dle},disable:c=>{const u=Zn(c);return u.isRowSelection()?u.isColSelection()?!1:yle(u):!1}}}},_le=(e,t)=>{const{selection:n}=e.state,r=n.isColSelection(),i=n.isRowSelection();om(e,t,(o,s,a)=>{const l=t.parentElement;if(!l)throw yn();let c=i?o.left-a.left-s.width/2-8:o.left-a.left+(o.width-s.width)/2,u=o.top-a.top-s.height-(r?14:0)-14+l.scrollTop;c<0&&(c=0);const d=l.clientWidth-(s.width+4);return c>d&&(c=d),u<l.scrollTop&&(u=o.top-a.top+14+l.scrollTop),[u,c]})};var In=(e=>(e.Left="Left",e.Top="Top",e.Point="Point",e))(In||{});const Dle=(e,{css:t,injectGlobal:n})=>{const r=Hn(e),i=e.get(Be,"radius"),o=e.get(Be,"lineWidth");return n`
        .milkdown {
            .tableWrapper {
                table {
                    width: calc(100% - 32px) !important;
                    margin: 16px 0 16px 16px !important;

                    .milkdown-cell-left,
                    .milkdown-cell-point,
                    .milkdown-cell-top {
                        position: absolute;

                        &::after {
                            cursor: pointer;
                            position: absolute;
                            top: 0;
                            left: 0;
                            height: 100%;
                            width: 100%;
                            display: block;
                            transition: all 0.2s ease-in-out;
                            background: ${r("secondary",.12)};
                            content: '';
                        }

                        &:hover::after {
                            background: ${r("secondary",.38)};
                        }
                    }

                    .milkdown-cell-left {
                        left: -14px;
                        top: 0;
                        bottom: 0;
                        width: 8px;
                    }

                    .milkdown-cell-top {
                        left: 0;
                        right: 0;
                        top: -14px;
                        height: 8px;
                    }

                    .milkdown-cell-point {
                        left: -18px;
                        top: -18px;
                        width: 16px;
                        height: 16px;

                        .icon {
                            position: absolute;
                            top: 0;
                            bottom: 0;
                            left: 0;
                            right: 0;
                        }
                    }
                }
            }
        }
    `,t`
        display: inline-flex;
        cursor: pointer;
        z-index: 2;

        justify-content: space-evenly;

        position: absolute;

        border-radius: ${i};

        ${e.get(ct,void 0)};
        ${e.get(Un,void 0)};

        overflow: hidden;
        background: ${r("surface")};

        .icon {
            position: relative;
            color: ${r("solid",.87)};

            width: 48px;
            line-height: 48px;
            text-align: center;
            transition: all 0.4s ease-in-out;

            &:hover {
                background-color: ${r("secondary",.12)};
            }

            &.active {
                color: ${r("primary")};
            }

            &:not(:last-child)::after {
                content: '';
                position: absolute;
                right: 0;
                top: 0;
                width: ${o};
                bottom: 0;
                background: ${r("line")};
            }
        }

        &.hide,
        .hide {
            display: none;
        }
    `},xle=e=>{switch(e){case In.Left:return"milkdown-cell-left";case In.Top:return"milkdown-cell-top";case In.Point:default:return"milkdown-cell-point"}};function Dh(e,t,n,r=0){return Ke.widget(t.pos+1,i=>{var o;const s=document.createElement("div");return s.classList.add(xle(n)),n===In.Point&&s.appendChild((o=e.get(Ce).get(it,"select"))==null?void 0:o.dom),s.addEventListener("mousedown",a=>{if(i)switch(a.preventDefault(),n){case In.Point:{i.dispatch(ble(i.state.tr));return}case In.Left:{i.dispatch(py("row")(r)(i.state.tr));return}case In.Top:i.dispatch(py("col")(r)(i.state.tr))}}),s})}const Cle=(e,t)=>new ye({key:new _e("MILKDOWN_TABLE_OP"),props:{decorations:n=>{if(!e.get(Ve).editable)return null;const r=[],i=ple(0)(n.selection);if(!i)return null;const o=mle(0)(n.selection);if(!o)return null;const[s]=i;return r.push(Dh(e,s,In.Point)),i.forEach((a,l)=>{r.push(Dh(e,a,In.Left,l))}),o.forEach((a,l)=>{r.push(Dh(e,a,In.Top,l))}),ve.create(n.doc,r)}},view:n=>{var r;const i=Object.fromEntries(Object.entries(kle(e)).filter(([,l])=>l.$!=null)),o=document.createElement("div");t.themeManager.onFlush(()=>{const l=t.getStyle(c=>Dle(t.themeManager,c));l&&o.classList.add(l)}),o.classList.add("table-tooltip","hide"),Object.values(i).forEach(({$:l})=>o.appendChild(l)),(r=n.dom.parentNode)==null||r.appendChild(o);const s=l=>{!n||(l.stopPropagation(),l.preventDefault(),Object.values(i).forEach(({$:c,command:u})=>{c.contains(l.target)&&u(l,n)(n.state,n.dispatch,n)}))},a=()=>{o.classList.add("hide")};return o.addEventListener("mousedown",s),{update:(l,c)=>{const u=l.state;if(!((c==null?void 0:c.doc.eq(u.doc))&&c.selection.eq(u.selection))){if(!(u.selection instanceof De)||!l.editable){a();return}if(wle(i,l),Object.values(i).every(({$:d})=>d.classList.contains("hide"))){a();return}o.classList.remove("hide"),_le(l,o)}},destroy:()=>{o.removeEventListener("mousedown",s),o.remove()}}}}),vle=e=>e.type.name==="paragraph"&&e.nodeSize===2,Sle=e=>e.type.name==="paragraph",Ele=new _e("plugin_autoInsertZeroSpace"),Ale=()=>new ye({key:Ele,props:{handleDOMEvents:{compositionstart(e){const{state:t,dispatch:n}=e,{tr:r,selection:i}=t,{$from:o}=i;return Po.safari&&Tn(t)&&i.empty&&vle(o.parent)&&n(r.insertText("\u2060",o.start())),!1},compositionend(e){const{state:t,dispatch:n}=e,{tr:r,selection:i}=t,{$from:o}=i;return Po.safari&&Tn(t)&&i.empty&&Sle(o.parent)&&o.parent.textContent.startsWith("\u2060")&&n(r.delete(o.start(),o.start()+1)),!1}}}});class Fle{constructor(t,n){zi(this,"dom"),zi(this,"contentDOM"),zi(this,"table"),zi(this,"colgroup"),this.node=t,this.cellMinWidth=n,this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),op(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,op(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}}function op(e,t,n,r,i,o){var s;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;for(let d=0,h=0;d<u.childCount;d++){const{colspan:f,colwidth:p}=u.child(d).attrs;for(let m=0;m<f;m++,h++){const b=i==h?o:p&&p[m],y=b?`${b}px`:"";a+=b||r,b||(l=!1),c?(c.style.width!=y&&(c.style.width=y),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=y}}for(;c;){const d=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=d}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}const vn=new _e("tableColumnResizing");function Tle({handleWidth:e=5,cellMinWidth:t=25,View:n=Fle,lastColumnResizable:r=!0}={}){return new ye({key:vn,state:{init(i,o){return this.spec.props.nodeViews[Fn(o.schema).table.name]=s=>new n(s,t),new fa(-1,!1)},apply(i,o){return o.apply(i)}},props:{attributes(i){return vn.getState(i).activeHandle>-1?{class:"resize-cursor"}:void 0},handleDOMEvents:{mousemove(i,o){!i.editable||Mle(i,o,e,r)},mouseleave(i){!i.editable||Ole(i)},mousedown(i,o){!i.editable||Nle(i,o,t)}},decorations(i){const o=vn.getState(i);return o.activeHandle>-1?Ple(i,o.activeHandle):null},nodeViews:{}}})}class fa{constructor(t,n){this.activeHandle=t,this.dragging=n,this.activeHandle=t,this.dragging=n}apply(t){let n=this;const r=t.getMeta(vn);if(r&&r.setHandle!=null)return new fa(r.setHandle,null);if(r&&r.setDragging!==void 0)return new fa(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let i=t.mapping.map(n.activeHandle,-1);ip(t.doc.resolve(i))||(i=0),n=new fa(i,n.dragging)}return n}}function Mle(e,t,n,r){const i=vn.getState(e.state);if(!i.dragging){const o=$le(t.target);let s=-1;if(o){const{left:a,right:l}=o.getBoundingClientRect();l-t.clientX<=n||t.clientX===Math.floor(a)?s=gy(e,t,"right"):t.clientX-a<=n&&(s=gy(e,t,"left"))}if(s!=i.activeHandle){if(!r&&s!==-1){const a=e.state.doc.resolve(s),l=a.node(-1),c=Re.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}ED(e,s)}}}function Ole(e){const t=vn.getState(e.state);t.activeHandle>-1&&!t.dragging&&ED(e,-1)}function Nle(e,t,n){const r=vn.getState(e.state);if(r.activeHandle==-1||r.dragging)return!1;const i=e.state.doc.nodeAt(r.activeHandle),o=Lle(e,r.activeHandle,i.attrs);e.dispatch(e.state.tr.setMeta(vn,{setDragging:{startX:t.clientX,startWidth:o}}));function s(l){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);const c=vn.getState(e.state);c.dragging&&(Ile(e,c.activeHandle,by(c.dragging,l,n)),e.dispatch(e.state.tr.setMeta(vn,{setDragging:null})))}function a(l){if(!l.which)return s(l);const c=vn.getState(e.state),u=by(c.dragging,l,n);Rle(e,c.activeHandle,u,n)}return window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault(),!0}function Lle(e,t,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=e.domAtPos(t);let s=o.node.childNodes[o.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(s-=r[l],a--);return s/a}function $le(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}function gy(e,t,n){const r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return-1;const{pos:i}=r,o=Cl(e.state.doc.resolve(i));if(!o)return-1;if(n=="right")return o.pos;const s=Re.get(o.node(-1)),a=o.start(-1),l=s.map.indexOf(o.pos-a);return l%s.width==0?-1:a+s.map[l-1]}function by(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function ED(e,t){e.dispatch(e.state.tr.setMeta(vn,{setHandle:t}))}function Ile(e,t,n){const r=e.state.doc.resolve(t),i=r.node(-1),o=Re.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<o.height;c++){const u=c*o.width+a;if(c&&o.map[u]==o.map[u-o.width])continue;const d=o.map[u],{attrs:h}=i.nodeAt(d),f=h.colspan==1?0:a-o.colCount(d);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():Ble(h.colspan);p[f]=n,l.setNodeMarkup(s+d,null,wn(h,"colwidth",p))}l.docChanged&&e.dispatch(l)}function Rle(e,t,n,r){const i=e.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),a=Re.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let l=e.domAtPos(i.start(-1)).node;for(;l.nodeName!="TABLE";)l=l.parentNode;op(o,l.firstChild,l,r,a,n)}function Ble(e){const t=[];for(let n=0;n<e;n++)t.push(0);return t}function Ple(e,t){const n=[],r=e.doc.resolve(t),i=r.node(-1),o=Re.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let l=0;l<o.height;l++){const c=a+l*o.width-1;if((a==o.width||o.map[c]!=o.map[c+1])&&(l==0||o.map[c-1]!=o.map[c-1-o.width])){const u=o.map[c],d=s+u+i.nodeAt(u).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(Ke.widget(d,h))}}return ve.create(e.doc,n)}function jle(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.firstChild.type.spec.tableRole=="table");)n--,r--,t=t.firstChild.content;const i=t.firstChild,o=i.type.spec.tableRole,s=i.type.schema,a=[];if(o=="row")for(let l=0;l<t.childCount;l++){let c=t.child(l).content;const u=l?0:Math.max(0,n-1),d=l<t.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=sp(Fn(s).row,new V(c,u,d)).content),a.push(c)}else if(o=="cell"||o=="header_cell")a.push(n||r?sp(Fn(s).row,new V(t,n,r)).content:t);else return null;return zle(s,a)}function zle(e,t){const n=[];for(let i=0;i<t.length;i++){const o=t[i];for(let s=o.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=o.child(s).attrs;for(let c=i;c<i+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(B.empty),n[i]<r){const o=Fn(e).cell.createAndFill(),s=[];for(let a=n[i];a<r;a++)s.push(o);t[i]=t[i].append(B.from(s))}return{height:t.length,width:r,rows:t}}function sp(e,t){const n=e.createAndFill();return new ek(n).replace(0,n.content.size,t).doc}function Vle({width:e,height:t,rows:n},r,i){if(e!=r){const o=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=o[a]||0,d=0;u<r;d++){let h=l.child(d%l.childCount);u+h.attrs.colspan>r&&(h=h.type.create(co(h.attrs,h.attrs.colspan,u+h.attrs.colspan-r),h.content)),c.push(h),u+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)o[a+f]=(o[a+f]||0)+h.attrs.colspan}s.push(B.from(c))}n=s,e=r}if(t!=i){const o=[];for(let s=0,a=0;s<i;s++,a++){const l=[],c=n[a%t];for(let u=0;u<c.childCount;u++){let d=c.child(u);s+d.attrs.rowspan>i&&(d=d.type.create(wn(d.attrs,"rowspan",Math.max(1,i-d.attrs.rowspan)),d.content)),l.push(d)}o.push(B.from(l))}n=o,t=i}return{width:e,height:t,rows:n}}function Ule(e,t,n,r,i,o,s){const a=e.doc.type.schema,l=Fn(a);let c,u;if(i>t.width)for(let d=0,h=0;d<t.height;d++){const f=n.child(d);h+=f.nodeSize;const p=[];let m;f.lastChild==null||f.lastChild.type==l.cell?m=c||(c=l.cell.createAndFill()):m=u||(u=l.header_cell.createAndFill());for(let b=t.width;b<i;b++)p.push(m);e.insert(e.mapping.slice(s).map(h-1+r),p)}if(o>t.height){const d=[];for(let p=0,m=(t.height-1)*t.width;p<Math.max(t.width,i);p++){const b=p>=t.width?!1:n.nodeAt(t.map[m+p]).type==l.header_cell;d.push(b?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,B.from(d)),f=[];for(let p=t.height;p<o;p++)f.push(h);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),f)}return!!(c||u)}function yy(e,t,n,r,i,o,s,a){if(s==0||s==t.height)return!1;let l=!1;for(let c=i;c<o;c++){const u=s*t.width+c,d=t.map[u];if(t.map[u-t.width]==d){l=!0;const h=n.nodeAt(d),{top:f,left:p}=t.findCell(d);e.setNodeMarkup(e.mapping.slice(a).map(d+r),null,wn(h.attrs,"rowspan",s-f)),e.insert(e.mapping.slice(a).map(t.positionAt(s,p,n)),h.type.createAndFill(wn(h.attrs,"rowspan",f+h.attrs.rowspan-s))),c+=h.attrs.colspan-1}}return l}function wy(e,t,n,r,i,o,s,a){if(s==0||s==t.width)return!1;let l=!1;for(let c=i;c<o;c++){const u=c*t.width+s,d=t.map[u];if(t.map[u-1]==d){l=!0;const h=n.nodeAt(d),f=t.colCount(d),p=e.mapping.slice(a).map(d+r);e.setNodeMarkup(p,null,co(h.attrs,s-f,h.attrs.colspan-(s-f))),e.insert(p+h.nodeSize,h.type.createAndFill(co(h.attrs,0,s-f))),c+=h.attrs.rowspan-1}}return l}function ky(e,t,n,r,i){let o=n?e.doc.nodeAt(n-1):e.doc,s=Re.get(o);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,d=e.tr;let h=0;function f(){o=n?d.doc.nodeAt(n-1):d.doc,s=Re.get(o),h=d.mapping.maps.length}Ule(d,s,o,n,c,u,h)&&f(),yy(d,s,o,n,l,c,a,h)&&f(),yy(d,s,o,n,l,c,u,h)&&f(),wy(d,s,o,n,a,u,l,h)&&f(),wy(d,s,o,n,a,u,c,h)&&f();for(let p=a;p<u;p++){const m=s.positionAt(p,l,o),b=s.positionAt(p,c,o);d.replace(d.mapping.slice(h).map(m+n),d.mapping.slice(h).map(b+n),new V(i.rows[p-a],0,0))}f(),d.setSelection(new De(d.doc.resolve(n+s.positionAt(a,l,o)),d.doc.resolve(n+s.positionAt(u-1,c-1,o)))),t(d)}const qle=new _e("fix-tables");function AD(e,t,n,r){const i=e.childCount,o=t.childCount;e:for(let s=0,a=0;s<o;s++){const l=t.child(s);for(let c=a,u=Math.min(i,s+3);c<u;c++)if(e.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<i&&e.child(a).sameMarkup(l)?AD(e.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Wle(e,t){let n;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(n=Hle(e,i,o,n))};return t?t.doc!=e.doc&&AD(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Hle(e,t,n,r){const i=Re.get(t);if(!i.problems)return r;r||(r=e.tr);const o=[];for(let l=0;l<i.height;l++)o.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const u=t.nodeAt(c.pos);for(let d=0;d<u.attrs.rowspan;d++)o[c.row+d]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,co(u.attrs,u.attrs.colspan-c.n,c.n))}else if(c.type=="missing")o[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=t.nodeAt(c.pos);r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,wn(u.attrs,"rowspan",u.attrs.rowspan-c.n))}else if(c.type=="colwidth mismatch"){const u=t.nodeAt(c.pos);r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,wn(u.attrs,"colwidth",c.colwidth))}}let s,a;for(let l=0;l<o.length;l++)o[l]&&(s==null&&(s=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const u=t.child(l),d=c+u.nodeSize,h=o[l];if(h>0){let f="cell";u.firstChild&&(f=u.firstChild.type.spec.tableRole);const p=[];for(let b=0;b<h;b++)p.push(Fn(e.schema)[f].createAndFill());const m=(l==0||s==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(m),p)}c=d}return r.setMeta(qle,{fixTables:!0})}const ni=new _e("selectingCells");function _y(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t}function xh(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?Cl(e.state.doc.resolve(n.pos)):null}function Gle(e,t){const n=t;if(n.ctrlKey||n.metaKey)return;const r=_y(e,n.target);let i;if(n.shiftKey&&e.state.selection instanceof De)o(e.state.selection.$anchorCell,n),n.preventDefault();else if(n.shiftKey&&r&&(i=Cl(e.state.selection.$anchor))!=null&&xh(e,n).pos!=i.pos)o(i,n),n.preventDefault();else if(!r)return;function o(l,c){let u=xh(e,c);const d=ni.getState(e.state)==null;if(!u||!Lm(l,u))if(d)u=l;else return;const h=new De(l,u);if(d||!e.state.selection.eq(h)){const f=e.state.tr.setSelection(h);d&&f.setMeta(ni,l.pos),e.dispatch(f)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),ni.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(ni,-1))}function a(l){const c=ni.getState(e.state);let u;if(c!=null)u=e.state.doc.resolve(c);else if(_y(e,l.target)!=r&&(u=xh(e,n),!u))return s();u&&o(u,l)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function Kle(e,t){const n=e.state.doc,r=Cl(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new De(r))),!0):!1}function Mc(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function FD(e,t,n){if(!(e.state.selection instanceof ne))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const s=r.before(i),a=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?s:null}}return null}function Hl(e,t){return(n,r,i)=>{const o=n.selection;if(o instanceof De)return Mc(n,r,te.near(o.$headCell,t));if(e!="horiz"&&!o.empty)return!1;const s=FD(i,e,t);if(s==null)return!1;if(e=="horiz")return Mc(n,r,te.near(n.doc.resolve(o.head+t),t));{const a=n.doc.resolve(s),l=vD(a,e,t);let c;return l?c=te.near(l,1):t<0?c=te.near(n.doc.resolve(a.before(-1)),-1):c=te.near(n.doc.resolve(a.after(-1)),1),Mc(n,r,c)}}}function Gl(e,t){return(n,r,i)=>{let o=n.selection;if(!(o instanceof De)){const a=FD(i,e,t);if(a==null)return!1;o=new De(n.doc.resolve(a))}const s=vD(o.$headCell,e,t);return s?Mc(n,r,new De(o.$anchorCell,s)):!1}}function Kl(e,t){const n=e.selection;if(!(n instanceof De))return!1;if(t){const r=e.tr,i=Fn(e.schema).cell.createAndFill().content;n.forEachCell((o,s)=>{o.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+o.nodeSize-1),new V(i,0,0))}),r.docChanged&&t(r)}return!0}const Jle=Qu({ArrowLeft:Hl("horiz",-1),ArrowRight:Hl("horiz",1),ArrowUp:Hl("vert",-1),ArrowDown:Hl("vert",1),"Shift-ArrowLeft":Gl("horiz",-1),"Shift-ArrowRight":Gl("horiz",1),"Shift-ArrowUp":Gl("vert",-1),"Shift-ArrowDown":Gl("vert",1),Backspace:Kl,"Mod-Backspace":Kl,Delete:Kl,"Mod-Delete":Kl});function Yle(e,t,n){if(!Tn(e.state))return!1;let r=jle(n);const i=e.state.selection;if(i instanceof De){r||(r={width:1,height:1,rows:[B.from(sp(Fn(e.state.schema).cell,n))]});const o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),a=Re.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=Vle(r,a.right-a.left,a.bottom-a.top),ky(e.state,e.dispatch,s,a,r),!0}else if(r){const o=td(e.state),s=o.start(-1);return ky(e.state,e.dispatch,s,Re.get(o.node(-1)).findCell(o.pos-s),r),!0}else return!1}function Xle({allowTableNodeSelection:e=!1}={}){return new ye({key:ni,state:{init(){return null},apply(t,n){const r=t.getMeta(ni);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:i,pos:o}=t.mapping.mapResult(n);return i?null:o}},props:{decorations:Yae,handleDOMEvents:{mousedown:Gle},createSelectionBetween(t){return ni.getState(t.state)!=null?t.state.selection:null},handleTripleClick:Kle,handleKeyDown:Jle,handlePaste:Yle},appendTransaction(t,n,r){return Zae(r,Wle(r,n),e)}})}const Oc={NextCell:"NextCell",PrevCell:"PrevCell",ExitTable:"ExitTable"},Dy=we("PrevCell"),xy=we("NextCell"),Cy=we("BreakTable"),Qle=we("InsertTable"),Zle=qr(e=>({schema:()=>({node:{table:{...Wl.table,parseMarkdown:{match:t=>t.type==="table",runner:(t,n,r)=>{const i=n.align,o=n.children.map((s,a)=>({...s,align:i,isHeader:a===0}));t.openNode(r),t.next(o),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table",runner:(t,n)=>{var r;const i=(r=n.content.firstChild)==null?void 0:r.content;if(!i)return;const o=[];i.forEach(s=>{o.push(s.attrs.alignment)}),t.openNode("table",void 0,{align:o}),t.next(n.content),t.closeNode()}}},table_row:{...Wl.table_row,parseMarkdown:{match:t=>t.type==="tableRow",runner:(t,n,r)=>{const i=n.align,o=n.children.map((s,a)=>({...s,align:i[a],isHeader:n.isHeader}));t.openNode(r),t.next(o),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_row",runner:(t,n)=>{t.openNode("tableRow"),t.next(n.content),t.closeNode()}}},table_cell:{...Wl.table_cell,parseMarkdown:{match:t=>t.type==="tableCell"&&!t.isHeader,runner:(t,n,r)=>{const i=n.align;t.openNode(r,{alignment:i}).openNode(t.schema.nodes.paragraph).next(n.children).closeNode().closeNode()}},toMarkdown:{match:t=>t.type.name==="table_cell",runner:(t,n)=>{t.openNode("tableCell").next(n.content).closeNode()}}},table_header:{...Wl.table_header,parseMarkdown:{match:t=>t.type==="tableCell"&&!!t.isHeader,runner:(t,n,r)=>{const i=n.align;t.openNode(r,{alignment:i}),t.openNode(t.schema.nodes.paragraph),t.next(n.children),t.closeNode(),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_header",runner:(t,n)=>{t.openNode("tableCell"),t.next(n.content),t.closeNode()}}}}}),inputRules:(t,n)=>[new ln(/^\|\|\s$/,(r,i,o,s)=>{const a=r.doc.resolve(o);if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t.table))return null;const l=_h(n.get(tt)),c=r.tr.replaceRangeWith(o,s,l).scrollIntoView();return c.setSelection(ne.create(c.doc,o+3))}),new ln(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(r,i,o,s)=>{var a,l;const c=r.doc.resolve(o);if(!c.node(-1).canReplaceWith(c.index(-1),c.indexAfter(-1),t.table))return null;const u=_h(n.get(tt),Number((a=i.groups)==null?void 0:a.row),Number((l=i.groups)==null?void 0:l.col)),d=r.tr.replaceRangeWith(o,s,u).scrollIntoView();return d.setSelection(ne.create(d.doc,o+3))})],commands:(t,n)=>[be(Dy,()=>fy(-1)),be(xy,()=>fy(1)),be(Cy,()=>ole(n.get(tt).nodes.paragraph)),be(Qle,()=>(r,i)=>{const{selection:o,tr:s}=r,{from:a}=o,l=_h(n.get(tt)),c=s.replaceSelectionWith(l),u=te.findFrom(c.doc.resolve(a),1,!0);return u&&(i==null||i(c.setSelection(u))),!0})],shortcuts:{[Oc.NextCell]:Ie(xy,"Mod-]"),[Oc.PrevCell]:Ie(Dy,"Mod-["),[Oc.ExitTable]:Ie(Cy,"Mod-Enter")},prosePlugins:(t,n)=>[Cle(n,e),Ale(),Tle(),Xle()]})),ea={...Qe,...Oc,StrikeThrough:"StrikeThrough",TaskList:"TaskList"},vy=we("ToggleStrikeThrough"),Sy="strike_through",ece=Fs(e=>({id:Sy,schema:()=>({inclusive:!1,parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:t=>t==="line-through"}],toDOM:t=>["del",{class:e.getClassName(t.attrs,"strike-through")}],parseMarkdown:{match:t=>t.type==="delete",runner:(t,n,r)=>{t.openMark(r),t.next(n.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name===Sy,runner:(t,n)=>{t.withMark(n,"delete")}}}),commands:t=>[be(vy,()=>Xu(t))],shortcuts:{[ea.StrikeThrough]:Ie(vy,"Mod-Alt-x")}})),Ey=we("SplitTaskListItem"),Ay=we("SinkTaskListItem"),Fy=we("LiftTaskListItem"),Ty=we("TurnIntoTaskList"),tce=ht(e=>{const t="task_list_item";return{id:t,schema:n=>({group:"listItem",content:"paragraph block*",defining:!0,priority:60,attrs:{checked:{default:!1}},parseDOM:[{tag:'li[data-type="task-item"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw Lt(r);return{checked:r.dataset.checked==="true"}}}],toDOM:r=>{const i=document.createElement("input");return i.type="checkbox",i.checked=r.attrs.checked,i.className=e.getClassName(r.attrs,"task-list-item_checkbox"),i.onchange=o=>{const s=o.target;if(!(s instanceof HTMLInputElement))return;const a=n.get(Ve);if(!a.editable){i.checked=!i.checked;return}const{top:l,left:c}=s.getBoundingClientRect(),u=a.posAtCoords({top:l,left:c});if(!u)return;const{tr:d}=a.state;a.dispatch(d.setNodeMarkup(u.inside,void 0,{checked:s.checked}))},["li",{"data-type":"task-item","data-checked":r.attrs.checked?"true":"false",class:e.getClassName(r.attrs,"task-list-item")},i,["span",{class:e.getClassName(r.attrs,"task-list-item_body")},0]]},parseMarkdown:{match:({type:r,checked:i})=>r==="listItem"&&i!==null,runner:(r,i,o)=>{r.openNode(o,{checked:i.checked}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name===t,runner:(r,i)=>{r.openNode("listItem",void 0,{checked:i.attrs.checked}),r.next(i.content),r.closeNode()}}}),inputRules:n=>[Es(/^\s*(\[([ |x])\])\s$/,n,r=>({checked:r[r.length-1]==="x"}))],commands:n=>[be(Ey,()=>lD(n)),be(Ay,()=>uD(n)),be(Fy,()=>cD(n)),be(Ty,()=>fr(n))],shortcuts:{[ea.NextListItem]:Ie(Ey,"Enter"),[ea.SinkListItem]:Ie(Ay,"Mod-]"),[ea.LiftListItem]:Ie(Fy,"Mod-["),[ea.TaskList]:Ie(Ty,"Mod-Alt-9")},view:()=>(n,r,i)=>{let o=n;const s=e.themeManager.get("task-list-item",{editable:()=>r.editable,onChange:u=>{const{tr:d}=r.state;r.dispatch(d.setNodeMarkup(i(),void 0,{checked:u}))}});if(!s)return{};const{dom:a,contentDOM:l,onUpdate:c}=s;return c(o),{dom:a,contentDOM:l,update:u=>u.type.name!==t?!1:(o=u,c(o),!0)}}}}),nce=Gt.create([..._se,$_(()=>Rae),Zle(),ece(),tce(),Uae(),zae()]),rce=/\d/,ice=["-","_","/","."];function oce(e=""){if(!rce.test(e))return e.toUpperCase()===e}function TD(e,t){const n=t!=null?t:ice,r=[];if(!e||typeof e!="string")return r;let i="",o,s;for(const a of e){const l=n.includes(a);if(l===!0){r.push(i),i="",o=void 0;continue}const c=oce(a);if(s===!1){if(o===!1&&c===!0){r.push(i),i=a,o=c;continue}if(o===!0&&c===!1&&i.length>1){const u=i[i.length-1];r.push(i.slice(0,Math.max(0,i.length-1))),i=u+a,o=c;continue}}i+=a,o=c,s=l}return r.push(i),r}function sce(e){return e?e[0].toUpperCase()+e.slice(1):""}function $m(e){return e?(Array.isArray(e)?e:TD(e)).map(t=>sce(t)).join(""):""}function Rn(e,t){return e?(Array.isArray(e)?e:TD(e)).map(n=>n.toLowerCase()).join(t!=null?t:"-"):""}const rd=Q([],"componentSchemas"),MD=Q(()=>()=>({}),"renderVue");function OD(e=[]){var t;for(const n of e){n.slots=(t=n.slots)!=null?t:[];for(const r of n.props)r.name=Rn(r.name)}return e.sort((n,r)=>n.name.localeCompare(r.name))}function ace(e){return t=>t.set(rd,OD(e))}const lce=(e,t)=>n=>(n.inject(rd,OD(oe(e.components))),n.inject(MD,t),r=>{var s,a,l;let i;const o=(s=oe(e.content))!=null?s:{key:"",markdown:"",matter:{}};r.set(_c,(l=(a=oe(e.content))==null?void 0:a.markdown)!=null?l:""),r.get(ou).markdownUpdated((c,u,d)=>{var p,m;if(d===null||u.trim()===d.trim())return;const{key:h,markdown:f}=(p=oe(e.content))!=null?p:{key:"",markdown:"",matter:{}};if(i!==h){i=h;const b=r.get(mi);if(r.get(Yo)(b(f))===o.markdown)return}(m=e.onChanged)==null||m.call(e,u)})}),cce=()=>[{id:"text",icon:"text",content:"Text",command:e=>e.get(ke).call("TurnIntoHeading",0),disabled:(e,t)=>!t.node.type.isTextblock},{id:"h1",icon:"h1",content:"Heading 1",command:e=>e.get(ke).call("TurnIntoHeading",1),disabled:(e,t)=>!t.node.type.isTextblock},{id:"h2",icon:"h2",content:"Heading 2",command:e=>e.get(ke).call("TurnIntoHeading",2),disabled:(e,t)=>!t.node.type.isTextblock},{id:"h3",icon:"h3",content:"Heading 3",command:e=>e.get(ke).call("TurnIntoHeading",3),disabled:(e,t)=>!t.node.type.isTextblock},{id:"bullet_list",icon:"bulletList",content:"Bullet list",command:e=>e.get(ke).call("WrapInBulletList"),disabled:e=>{const t=e.get(Ve),n=To("bullet_list",t.state.schema);return!fr(n)(t.state)}},{id:"ordered_list",icon:"orderedList",content:"Ordered list",command:e=>e.get(ke).call("WrapInOrderedList"),disabled:e=>{const t=e.get(Ve),n=To("ordered_list",t.state.schema);return!fr(n)(t.state)}},{id:"task_list",icon:"taskList",content:"Task list",command:e=>e.get(ke).call("TurnIntoTaskList"),disabled:e=>{const t=e.get(Ve),n=To("task_list_item",t.state.schema);return!fr(n)(t.state)}},{id:"blockquote",icon:"quote",content:"Blockquote",command:e=>e.get(ke).call("WrapInBlockquote"),disabled:e=>{const t=e.get(Ve),n=To("blockquote",t.state.schema);return!fr(n)(t.state)}},{id:"code_fence",icon:"code",content:"Code",command:e=>e.get(ke).call("TurnIntoCodeFence"),disabled:e=>{const t=e.get(Ve),n=To("fence",t.state.schema);return!Ko(n)(t.state)}}];var rs,Au,ND,Fu,LD;class uce{constructor(t){qe(this,Au);qe(this,Fu);vr(this,"dom$");qe(this,rs,void 0);vt(this,rs,t),this.dom$=Rs(this,Fu,LD).call(this),Rs(this,Au,ND).call(this)}hide(){this.dom$.classList.add("hide")}show(){this.dom$.classList.remove("hide")}toggle(){this.dom$.classList.toggle("hide")}mount(t){var n;(n=t.dom.parentNode)==null||n.appendChild(this.dom$)}unmount(){this.dom$.remove()}render(t,n){const r=t.dom.parentElement;if(!r)throw yn();const i=n.getBoundingClientRect(),o=r.getBoundingClientRect(),s=this.dom$.getBoundingClientRect(),a=i.left-o.left-s.width,l=i.top-o.top+r.scrollTop;this.dom$.style.left=`${a}px`,this.dom$.style.top=`${l}px`}}rs=new WeakMap,Au=new WeakSet,ND=function(){const{themeManager:t,getStyle:n}=ue(this,rs);t.onFlush(()=>{if(!this.dom$)return;const r=n(({css:i})=>{const o=Hn(t);return i`
                    position: absolute;
                    color: ${o("solid")};
                    cursor: grab;
                    border-radius: ${t.get(Be,"radius")};
                    transition: background-color 0.4s;
                    height: 24px;
                    line-height: 24px;
                    &:hover {
                        color: ${o("primary")};
                        background-color: ${o("background")};
                    }
                    &.hide {
                        display: none;
                    }
                `});if(r){const i=["block-handle",r,"hide"].filter(o=>o!=null).join(" ");this.dom$.className=i}})},Fu=new WeakSet,LD=function(){const{themeManager:t}=ue(this,rs),n=document.createElement("div");n.draggable=!0;const r=t.get(it,"dragHandle");return n.appendChild(r.dom),n};var is,Ui,Za,qi,ss,as,Tu,$D,Mu,ID,el;class dce{constructor(t,n,r,i,o){qe(this,Tu);qe(this,Mu);vr(this,"dom$");qe(this,is,void 0);qe(this,Ui,void 0);qe(this,Za,void 0);qe(this,qi,void 0);qe(this,ss,void 0);qe(this,as,void 0);qe(this,el,t=>{let n=t.target;for(;n&&!n.dataset.id&&n.parentElement;)n=n.parentElement;if(n){const r=n.dataset.id,i=ue(this,qi).find(s=>s.id===r),o=ue(this,as).call(this);o&&(i==null||i.command(ue(this,Ui),o))}ue(this,ss).hide(),this.hide()});vt(this,is,t),vt(this,Ui,n),vt(this,Za,r),vt(this,ss,i),vt(this,qi,ue(this,Za).call(this,ue(this,Ui))),vt(this,as,o),this.dom$=Rs(this,Mu,ID).call(this),Rs(this,Tu,$D).call(this)}hide(){this.dom$.classList.add("hide")}show(){this.dom$.classList.remove("hide")}toggle(){this.dom$.classList.toggle("hide")}mount(t){var n;(n=t.dom.parentNode)==null||n.appendChild(this.dom$),this.dom$.addEventListener("click",ue(this,el))}unmount(){this.dom$.remove(),this.dom$.removeEventListener("click",ue(this,el))}render(t,n){const r=t.dom.parentElement;if(!r)throw yn();if(ue(this,qi).reduce((d,{disabled:h,id:f})=>{const p=ue(this,as).call(this);if(!p)return d;const m=h(ue(this,Ui),p),b=this.dom$.querySelector(`[data-id="${f}"]`);return b?m?(b.classList.add("hide"),d):(b.classList.remove("hide"),!1):d},!0)){this.hide();return}const o=n.getBoundingClientRect(),s=r.getBoundingClientRect(),a=ue(this,ss).dom$.getBoundingClientRect(),l=this.dom$.getBoundingClientRect(),c=o.left-s.left-a.width;let u=o.top-s.top+r.scrollTop+a.height;if(s.height+s.top-o.bottom<l.height){const d=o.top-s.top-l.height+r.scrollTop;d>0&&(u=d)}this.dom$.style.left=`${c}px`,this.dom$.style.top=`${u}px`}}is=new WeakMap,Ui=new WeakMap,Za=new WeakMap,qi=new WeakMap,ss=new WeakMap,as=new WeakMap,Tu=new WeakSet,$D=function(){const{themeManager:t,getStyle:n}=ue(this,is);t.onFlush(()=>{if(!this.dom$)return;const r=n(({css:i})=>{const o=Hn(t);return i`
                    position: absolute;
                    cursor: pointer;
                    background: ${o("surface")};
                    z-index: 2;
                    border-radius: ${t.get(Be,"radius")};
                    width: 140px;

                    ${t.get(Un,void 0)};
                    ${t.get(ct,void 0)}

                    &.hide {
                        display: none;
                    }

                    .block-menu_item {
                        font-size: 14px;
                        display: flex;
                        height: 24px;
                        padding: 4px 10px;
                        align-items: center;
                        justify-content: start;
                        gap: 10px;
                        transition: all 0.4s;

                        &:hover {
                            background: ${o("secondary",.12)};
                            color: ${o("primary")};
                        }

                        &.hide {
                            display: none;
                        }
                    }
                `});if(r){const i=["block-menu",r,"hide"].filter(o=>o!=null).join(" ");this.dom$.className=i}})},Mu=new WeakSet,ID=function(){const t=document.createElement("div");return ue(this,qi).forEach(({icon:n,content:r,id:i})=>{const o=document.createElement("div"),s=document.createElement("span");s.textContent=r;let a;typeof n=="string"?a=ue(this,is).themeManager.get(it,n).dom:a=n,o.appendChild(a),o.appendChild(s),o.dataset.id=i,o.classList.add("block-menu_item"),t.appendChild(o)}),t},el=new WeakMap;const hce=(e,t)=>{var i;const{state:n}=e,r=n.selection.$anchor;for(let o=r.depth;o>0;o--)if(r.node(o).type.spec.tableRole==="table"){const a=e.posAtCoords({left:t.clientX,top:t.clientY});if(!a)return null;const l=(i=e.dragging)==null?void 0:i.slice;if(!l)return null;const c=e.state.doc.resolve(a.pos),u=zp(e.state.doc,c.pos,l);if(!u)return null;let d=n.tr;d=d.delete(r.before(o),r.after(o));const h=d.mapping.map(u);return d=d.replaceRange(h,h,l).scrollIntoView(),d}return null},fce=(e,t,n)=>{const{node:r}=e.domAtPos(n.pos);let i=r,o=i.parentElement;for(;o&&o!==t&&n.pos===e.posAtDOM(o,0);)i=o,o=o.parentElement;return i},pce=e=>!e.type.isBlock,mce=e=>{let t=e.parent;const n=e.node();return t===n&&(t=e.node(e.depth-1)),!t||t.type.name==="doc"?!1:t.firstChild===n},gce=(e,t,n)=>{const r=t.dom.parentElement;if(!r)throw yn();const i=t.posAtDOM(e,0);if(i===0)return null;let o=t.state.doc.resolve(i),s=o.node();for(;s&&(pce(s)||mce(o)||!n(s));)o=t.state.doc.resolve(o.before()),s=o.node();o=t.state.doc.resolve(o.pos-o.parentOffset);const a=fce(t,r,o);return{node:s,$pos:o,el:a}};let My=null;function bce(){return My||(My=document.implementation.createHTMLDocument("title"))}const yce={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};function wce(e,t){const n=[];let{openStart:r,openEnd:i,content:o}=t;for(;r>1&&i>1&&o.childCount===1&&o.firstChild.childCount===1;){r-=1,i-=1;const f=o.firstChild;n.push(f.type.name,f.attrs!==f.type.defaultAttrs?f.attrs:null),o=f.content}const s=e.someProp("clipboardSerializer")||dr.fromSchema(e.state.schema),a=bce(),l=a.createElement("div");l.appendChild(s.serializeFragment(o,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType===1&&(u=yce[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){const p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType===1&&c.setAttribute("data-pm-slice",`${r} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);const h=e.someProp("clipboardTextSerializer",f=>f(t))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:h}}const Oy=Po.ie&&Po.ie_version<15||Po.ios&&Po.webkit_version<604;var Ou,ls,Mr,ir,tl,nl,Wi,ta,rl,il,ol;class kce{constructor(t,n,r,i){qe(this,Wi);vr(this,"blockHandle$");vr(this,"blockMenu$");qe(this,Ou,()=>{if(!ue(this,Mr))return null;const t=ue(this,Mr),n=ue(this,Wi,ta);if(Y.isSelectable(t.node)){const r=Y.create(n.state.doc,t.$pos.pos-1);return n.dispatch(n.state.tr.setSelection(r)),n.focus(),vt(this,ls,r),r}return null});qe(this,ls,null);qe(this,Mr,null);qe(this,ir,!1);qe(this,tl,void 0);qe(this,nl,void 0);qe(this,rl,()=>{ue(this,Ou).call(this)});qe(this,il,()=>{if(!ue(this,ir)){requestAnimationFrame(()=>{!ue(this,Mr)||(this.blockMenu$.toggle(),this.blockMenu$.render(ue(this,Wi,ta),ue(this,Mr).el),ue(this,Wi,ta).focus())});return}vt(this,ir,!1),vt(this,ls,null)});qe(this,ol,t=>{vt(this,ir,!0);const n=ue(this,ls);if(t.dataTransfer&&n){const r=ue(this,Wi,ta),i=n.content();t.dataTransfer.effectAllowed="copyMove";const{dom:o,text:s}=wce(r,i);t.dataTransfer.clearData(),t.dataTransfer.setData(Oy?"Text":"text/html",o.innerHTML),Oy||t.dataTransfer.setData("text/plain",s),r.dragging={slice:i,move:!0}}});vr(this,"keydownCallback",()=>(this.blockMenu$.hide(),this.blockHandle$.hide(),!1));vr(this,"mousedownCallback",()=>(this.blockMenu$.hide(),!1));vr(this,"mousemoveCallback",(t,n)=>{if(!t.editable)return!1;const r=n.target;if(!(r instanceof Element))return ue(this,ir)||this.blockHandle$.hide(),!1;const i=gce(r,t,ue(this,nl));return vt(this,Mr,i),i?(this.blockHandle$.show(),this.blockHandle$.render(t,i.el),!1):(ue(this,ir)||this.blockHandle$.hide(),!1)});vr(this,"dropCallback",(t,n)=>{if(ue(this,ir)){const r=n,i=hce(t,r);if(vt(this,ir,!1),i)return t.dispatch(i),r.preventDefault(),!0}return!1});vt(this,tl,t),vt(this,nl,r),this.blockHandle$=new uce(n),this.blockMenu$=new dce(n,t,i,this.blockHandle$,()=>ue(this,Mr))}mount(t){this.blockHandle$.dom$.addEventListener("mousedown",ue(this,rl)),this.blockHandle$.dom$.addEventListener("mouseup",ue(this,il)),this.blockHandle$.dom$.addEventListener("dragstart",ue(this,ol)),this.blockHandle$.mount(t),this.blockMenu$.mount(t)}unmount(){this.blockHandle$.dom$.removeEventListener("mousedown",ue(this,rl)),this.blockHandle$.dom$.removeEventListener("mouseup",ue(this,il)),this.blockHandle$.dom$.removeEventListener("dragstart",ue(this,ol)),this.blockHandle$.unmount(),this.blockMenu$.unmount()}}Ou=new WeakMap,ls=new WeakMap,Mr=new WeakMap,ir=new WeakMap,tl=new WeakMap,nl=new WeakMap,Wi=new WeakSet,ta=function(){return ue(this,tl).get(Ve)},rl=new WeakMap,il=new WeakMap,ol=new WeakMap;const _ce=new _e("MILKDOWN_BLOCK"),Dce=(e,t,n,r)=>{const i=new kce(e,t,n,r);return new ye({key:_ce,props:{handleDOMEvents:{drop:(o,s)=>i.dropCallback(o,s),mousemove:(o,s)=>i.mousemoveCallback(o,s),mousedown:()=>i.mousedownCallback(),keydown:()=>i.keydownCallback()}},view:o=>(i.mount(o),{destroy:()=>{i.unmount()}})})},xce=e=>{const{name:t}=e.type;return!(t.startsWith("table")&&t!=="table")},Cce=qr((e,t)=>{var i,o;const n=(i=t==null?void 0:t.filterNodes)!=null?i:xce,r=(o=t==null?void 0:t.configBuilder)!=null?o:cce;return{prosePlugins:(s,a)=>[Dce(a,e,n,r)]}}),vce=Gt.create([Cce()]),Sce=Fm.extend((e,t,n)=>({...e,schema:r=>{const i=e.schema(r);return{...i,attrs:{...i.attrs,filename:{default:""}},parseMarkdown:{match:i.parseMarkdown.match,runner:(o,s,a)=>{var l,c;o.openNode(a,{language:s.lang,filename:((c=(l=s.meta)==null?void 0:l.match(/^\[(.+)\]$/))==null?void 0:c[1])||""}),s.value&&o.addText(s.value),o.closeNode()}},toMarkdown:{match:i.toMarkdown.match,runner:(o,s)=>{var a;o.addNode("code",void 0,((a=s.content.firstChild)==null?void 0:a.text)||"",{lang:s.attrs.language,meta:s.attrs.filename?`[${s.attrs.filename}]`:""})}}}}})),zn=()=>new Map,su=e=>{const t=zn();return e.forEach((n,r)=>{t.set(r,n)}),t},_r=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},Ece=(e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n},Ace=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},_s=()=>new Set,Ch=e=>e[e.length-1],Fce=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},RD=Array.from,Ny=Array.isArray;class id{constructor(){this._observers=zn()}on(t,n){_r(this._observers,t,_s).add(n)}once(t,n){const r=(...i)=>{this.off(t,r),n(...i)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return RD((this._observers.get(t)||zn()).values()).forEach(r=>r(...n))}destroy(){this._observers=zn()}}const yr=Math.floor,Nc=Math.abs,bi=(e,t)=>e<t?e:t,jr=(e,t)=>e>t?e:t,Tce=Math.pow,BD=e=>e!==0?e<0:1/e<0,Mce=String.fromCharCode,Oce=e=>e.toLowerCase(),Nce=/^\s*/g,Lce=e=>e.replace(Nce,""),$ce=/([A-Z])/g,Ly=(e,t)=>Lce(e.replace($ce,n=>`${t}${Oce(n)}`)),Ice=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},$a=typeof TextEncoder<"u"?new TextEncoder:null,Rce=e=>$a.encode(e),Bce=$a?Rce:Ice;let pa=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});pa&&pa.decode(new Uint8Array).length===1&&(pa=null);const $y=e=>e===void 0?null:e;class Pce{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let PD=new Pce,jD=!0;try{typeof localStorage<"u"&&(PD=localStorage,jD=!1)}catch{}const zD=PD,jce=e=>jD||addEventListener("storage",e),VD=Object.keys,zce=(e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n},au=e=>VD(e).length,Vce=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},UD=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Uce=(e,t)=>e===t||au(e)===au(t)&&Vce(e,(n,r)=>(n!==void 0||UD(t,r))&&t[r]===n),Im=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Im(e,t,n+1)}},qce=(e,t)=>e===t,ma=(e,t)=>{if(e==null||t==null)return qce(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!ma(e.get(n),t.get(n)))return!1;break}case Object:if(au(e)!==au(t))return!1;for(const n in e)if(!UD(e,n)||!ma(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!ma(e[n],t[n]))return!1;break;default:return!1}return!0},Wce=(e,t)=>t.includes(e),uo=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),Rm=typeof window<"u"&&!uo;typeof navigator<"u"&&/Mac/.test(navigator.platform);let er;const Hce=()=>{if(er===void 0)if(uo){er=zn();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&er.set(t,""),t=r):t!==null&&(er.set(t,r),t=null)}t!==null&&er.set(t,"")}else typeof location=="object"?(er=zn(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");er.set(`--${Ly(t,"-")}`,n),er.set(`-${Ly(t,"-")}`,n)}})):er=zn();return er},ap=e=>Hce().has(e),lp=e=>$y(uo?process.env[e.toUpperCase()]:zD.getItem(e)),Gce=e=>ap("--"+e)||lp(e)!==null;Gce("production");const Iy=uo&&Wce({}.FORCE_COLOR,["true","1","2"]),Kce=!ap("no-colors")&&(!uo||process.stdout.isTTY||Iy)&&(!uo||ap("color")||Iy||lp("COLORTERM")!==null||(lp("TERM")||"").includes("color")),Ry=1,By=2,vh=4,Sh=8,Ia=32,Br=64,gn=128,od=31,cp=63,Zi=127,Jce=2147483647,qD=Number.MAX_SAFE_INTEGER,Yce=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&yr(e)===e),Ms=e=>new Error(e),Vn=()=>{throw Ms("Method unimplemented")},Mn=()=>{throw Ms("Unexpected case")},WD=Ms("Unexpected end of array"),HD=Ms("Integer out of Range");class sd{constructor(t){this.arr=t,this.pos=0}}const Mi=e=>new sd(e),Xce=e=>e.pos!==e.arr.length,Qce=(e,t)=>{const n=jm(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},Ft=e=>Qce(e,ie(e)),Ds=e=>e.arr[e.pos++],ie=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const i=e.arr[e.pos++];if(t=t+(i&Zi)*n,n*=128,i<gn)return t;if(t>qD)throw HD}throw WD},Bm=e=>{let t=e.arr[e.pos++],n=t&cp,r=64;const i=(t&Br)>0?-1:1;if((t&gn)===0)return i*n;const o=e.arr.length;for(;e.pos<o;){if(t=e.arr[e.pos++],n=n+(t&Zi)*r,r*=128,t<gn)return i*n;if(n>qD)throw HD}throw WD},Zce=e=>{let t=ie(e);if(t===0)return"";{let n=String.fromCodePoint(Ds(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Ds(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},eue=e=>pa.decode(Ft(e)),yi=pa?eue:Zce,Pm=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},tue=e=>Pm(e,4).getFloat32(0,!1),nue=e=>Pm(e,8).getFloat64(0,!1),rue=e=>Pm(e,8).getBigInt64(0,!1),iue=[e=>{},e=>null,Bm,tue,nue,rue,e=>!1,e=>!0,yi,e=>{const t=ie(e),n={};for(let r=0;r<t;r++){const i=yi(e);n[i]=Ra(e)}return n},e=>{const t=ie(e),n=[];for(let r=0;r<t;r++)n.push(Ra(e));return n},Ft],Ra=e=>iue[127-Ds(e)](e);class Py extends sd{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Xce(this)?this.count=ie(this)+1:this.count=-1),this.count--,this.s}}class Lc extends sd{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=Bm(this);const t=BD(this.s);this.count=1,t&&(this.s=-this.s,this.count=ie(this)+2)}return this.count--,this.s}}class Eh extends sd{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=Bm(this),n=t&1;this.diff=yr(t/2),this.count=1,n&&(this.count=ie(this)+2)}return this.s+=this.diff,this.count--,this.s}}class oue{constructor(t){this.decoder=new Lc(t),this.str=yi(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const GD=e=>new Uint8Array(e),jm=(e,t,n)=>new Uint8Array(e,t,n),sue=e=>new Uint8Array(e),aue=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=Mce(e[n]);return btoa(t)},lue=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),cue=e=>{const t=atob(e),n=GD(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},uue=e=>{const t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},due=Rm?aue:lue,hue=Rm?cue:uue,fue=e=>{const t=GD(e.byteLength);return t.set(e),t};class vl{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Tt=()=>new vl,zm=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},We=e=>{const t=new Uint8Array(zm(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(jm(e.cbuf.buffer,0,e.cpos),n),t},pue=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(jm(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(jr(n,t)*2),e.cpos=0)},lt=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},up=lt,J=(e,t)=>{for(;t>Zi;)lt(e,gn|Zi&t),t=yr(t/128);lt(e,Zi&t)},Vm=(e,t)=>{const n=BD(t);for(n&&(t=-t),lt(e,(t>cp?gn:0)|(n?Br:0)|cp&t),t=yr(t/64);t>0;)lt(e,(t>Zi?gn:0)|Zi&t),t=yr(t/128)},dp=new Uint8Array(3e4),mue=dp.length/3,gue=(e,t)=>{if(t.length<mue){const n=$a.encodeInto(t,dp).written||0;J(e,n);for(let r=0;r<n;r++)lt(e,dp[r])}else Ye(e,Bce(t))},bue=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;J(e,r);for(let i=0;i<r;i++)lt(e,n.codePointAt(i))},eo=$a&&$a.encodeInto?gue:bue,ad=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=bi(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(jr(n*2,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},Ye=(e,t)=>{J(e,t.byteLength),ad(e,t)},Um=(e,t)=>{pue(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},yue=(e,t)=>Um(e,4).setFloat32(0,t,!1),wue=(e,t)=>Um(e,8).setFloat64(0,t,!1),kue=(e,t)=>Um(e,8).setBigInt64(0,t,!1),jy=new DataView(new ArrayBuffer(4)),_ue=e=>(jy.setFloat32(0,e),jy.getFloat32(0)===e),Ba=(e,t)=>{switch(typeof t){case"string":lt(e,119),eo(e,t);break;case"number":Yce(t)&&Nc(t)<=Jce?(lt(e,125),Vm(e,t)):_ue(t)?(lt(e,124),yue(e,t)):(lt(e,123),wue(e,t));break;case"bigint":lt(e,122),kue(e,t);break;case"object":if(t===null)lt(e,126);else if(t instanceof Array){lt(e,117),J(e,t.length);for(let n=0;n<t.length;n++)Ba(e,t[n])}else if(t instanceof Uint8Array)lt(e,116),Ye(e,t);else{lt(e,118);const n=Object.keys(t);J(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];eo(e,i),Ba(e,t[i])}}break;case"boolean":lt(e,t?120:121);break;default:lt(e,127)}};class zy extends vl{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&J(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const Vy=e=>{e.count>0&&(Vm(e.encoder,e.count===1?e.s:-e.s),e.count>1&&J(e.encoder,e.count-2))};class $c{constructor(){this.encoder=new vl,this.s=0,this.count=0}write(t){this.s===t?this.count++:(Vy(this),this.count=1,this.s=t)}toUint8Array(){return Vy(this),We(this.encoder)}}const Uy=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);Vm(e.encoder,t),e.count>1&&J(e.encoder,e.count-2)}};class Ah{constructor(){this.encoder=new vl,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Uy(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Uy(this),We(this.encoder)}}class Due{constructor(){this.sarr=[],this.s="",this.lensE=new $c}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new vl;return this.sarr.push(this.s),this.s="",eo(t,this.sarr.join("")),ad(t,this.lensE.toUint8Array()),We(t)}}const qy=typeof crypto>"u"?null:crypto,xue=qy!==null?e=>{const t=new ArrayBuffer(e),n=new Uint8Array(t);return qy.getRandomValues(n),t}:e=>{const t=new ArrayBuffer(e),n=new Uint8Array(t);for(let r=0;r<e;r++)n[r]=Math.ceil(Math.random()*4294967295>>>0);return t},Cue=Math.random,KD=()=>new Uint32Array(xue(4))[0],vue=e=>e[yr(Cue()*e.length)],Sue=[1e7]+-1e3+-4e3+-8e3+-1e11,Eue=()=>Sue.replace(/[018]/g,e=>(e^KD()&15>>e/4).toString(16)),vi=Date.now,Aue=e=>new Promise(e),Hr=Symbol;class Fue{constructor(t,n){this.left=t,this.right=n}}const Sr=(e,t)=>new Fue(e,t),Oi=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const Tue=e=>Ece(e,(t,n)=>`${n}:${t};`).join("");Oi.ELEMENT_NODE;Oi.TEXT_NODE;Oi.CDATA_SECTION_NODE;Oi.COMMENT_NODE;Oi.DOCUMENT_NODE;Oi.DOCUMENT_TYPE_NODE;Oi.DOCUMENT_FRAGMENT_NODE;const Mue=e=>class{constructor(n){this._=n}destroy(){e(this._)}},Oue=Mue(clearTimeout),lu=(e,t)=>new Oue(setTimeout(t,e)),qm=Hr(),Wm=Hr(),JD=Hr(),YD=Hr(),XD=Hr(),Hm=Hr(),QD=Hr(),Gm=Hr(),ZD=Hr(),Nue={[qm]:Sr("font-weight","bold"),[Wm]:Sr("font-weight","normal"),[JD]:Sr("color","blue"),[XD]:Sr("color","green"),[YD]:Sr("color","grey"),[Hm]:Sr("color","red"),[QD]:Sr("color","purple"),[Gm]:Sr("color","orange"),[ZD]:Sr("color","black")},ex={[qm]:"\x1B[1m",[Wm]:"\x1B[2m",[JD]:"\x1B[34m",[XD]:"\x1B[32m",[YD]:"\x1B[37m",[Hm]:"\x1B[31m",[QD]:"\x1B[35m",[Gm]:"\x1B[38;5;208m",[ZD]:"\x1B[0m"},Lue=e=>{const t=[],n=[],r=zn();let i=[],o=0;for(;o<e.length;o++){const s=e[o],a=Nue[s];if(a!==void 0)r.set(a.left,a.right);else if(s.constructor===String||s.constructor===Number){const l=Tue(r);o>0||l.length>0?(t.push("%c"+s),n.push(l)):t.push(s)}else break}for(o>0&&(i=n,i.unshift(t.join("")));o<e.length;o++){const s=e[o];s instanceof Symbol||i.push(s)}return i},$ue=e=>{const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];if(ex[i]===void 0)if(i.constructor===String||i.constructor===Number)t.push(i);else break}for(r>0&&n.push(t.join(""));r<e.length;r++){const i=e[r];i instanceof Symbol||(i.constructor===Object?n.push(JSON.stringify(i)):n.push(i))}return n},Iue=e=>{const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r],o=ex[i];if(o!==void 0)t.push(o);else if(i.constructor===String||i.constructor===Number)t.push(i);else break}for(r>0&&(t.push("\x1B[0m"),n.push(t.join("")));r<e.length;r++){const i=e[r];i instanceof Symbol||n.push(i)}return n},Rue=Kce?uo?Iue:Lue:$ue,Bue=(...e)=>{console.log(...Rue(e)),Pue.forEach(t=>t.print(e))},Pue=new Set,tx=e=>({[Symbol.iterator](){return this},next:e}),jue=(e,t)=>tx(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),Fh=(e,t)=>tx(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class Km{constructor(t,n){this.clock=t,this.len=n}}class Os{constructor(){this.clients=new Map}}const zr=(e,t,n)=>t.clients.forEach((r,i)=>{const o=e.doc.store.clients.get(i);for(let s=0;s<r.length;s++){const a=r[s];gx(e,o,a.clock,a.len,n)}}),zue=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const i=yr((n+r)/2),o=e[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;n=i+1}else r=i-1}return null},Sl=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&zue(n,t.clock)!==null},Jm=e=>{e.clients.forEach(t=>{t.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<t.length;n++){const i=t[r-1],o=t[n];i.clock+i.len>=o.clock?i.len=jr(i.len,o.clock+o.len-i.clock):(r<n&&(t[r]=o),r++)}t.length=r})},hp=e=>{const t=new Os;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){const o=r.slice();for(let s=n+1;s<e.length;s++)Fce(o,e[s].clients.get(i)||[]);t.clients.set(i,o)}});return Jm(t),t},Pa=(e,t,n,r)=>{_r(e.clients,t,()=>[]).push(new Km(n,r))},Ym=()=>new Os,nx=e=>{const t=Ym();return e.clients.forEach((n,r)=>{const i=[];for(let o=0;o<n.length;o++){const s=n[o];if(s.deleted){const a=s.id.clock;let l=s.length;if(o+1<n.length)for(let c=n[o+1];o+1<n.length&&c.deleted;c=n[++o+1])l+=c.length;i.push(new Km(a,l))}}i.length>0&&t.clients.set(r,i)}),t},Ns=(e,t)=>{J(e.restEncoder,t.clients.size),t.clients.forEach((n,r)=>{e.resetDsCurVal(),J(e.restEncoder,r);const i=n.length;J(e.restEncoder,i);for(let o=0;o<i;o++){const s=n[o];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},Xm=e=>{const t=new Os,n=ie(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const i=ie(e.restDecoder),o=ie(e.restDecoder);if(o>0){const s=_r(t.clients,i,()=>[]);for(let a=0;a<o;a++)s.push(new Km(e.readDsClock(),e.readDsLen()))}}return t},Wy=(e,t,n)=>{const r=new Os,i=ie(e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();const s=ie(e.restDecoder),a=ie(e.restDecoder),l=n.clients.get(s)||[],c=Xe(n,s);for(let u=0;u<a;u++){const d=e.readDsClock(),h=d+e.readDsLen();if(d<c){c<h&&Pa(r,s,c,h-c);let f=wr(l,d),p=l[f];for(!p.deleted&&p.id.clock<d&&(l.splice(f+1,0,pu(t,p,d-p.id.clock)),f++);f<l.length&&(p=l[f++],p.id.clock<h);)p.deleted||(h<p.id.clock+p.length&&l.splice(f,0,pu(t,p,h-p.id.clock)),p.delete(t))}else Pa(r,s,d,h-d)}}if(r.clients.size>0){const o=new ho;return J(o.restEncoder,0),Ns(o,r),o.toUint8Array()}return null},rx=KD;class mo extends id{constructor({guid:t=Eue(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=rx(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new px,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.whenLoaded=Aue(l=>{this.on("load",()=>{this.isLoaded=!0,l(this)})})}load(){const t=this._item;t!==null&&!this.shouldLoad&&Le(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(t=>t.guid))}transact(t,n=null){Le(this,t,n)}get(t,n=Dt){const r=_r(this.share,t,()=>{const o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==Dt&&i!==n)if(i===Dt){const o=new n;o._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;s!==null;s=s.right)s.parent=o;return o._length=r._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,es)}getText(t=""){return this.get(t,fo)}getMap(t=""){return this.get(t,Cs)}getXmlFragment(t=""){return this.get(t,Vr)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){RD(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new mo({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,Le(t.parent.doc,r=>{const i=n.doc;t.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,n){super.on(t,n)}off(t,n){super.off(t,n)}}class ix{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return ie(this.restDecoder)}readDsLen(){return ie(this.restDecoder)}}class ox extends ix{readLeftID(){return se(ie(this.restDecoder),ie(this.restDecoder))}readRightID(){return se(ie(this.restDecoder),ie(this.restDecoder))}readClient(){return ie(this.restDecoder)}readInfo(){return Ds(this.restDecoder)}readString(){return yi(this.restDecoder)}readParentInfo(){return ie(this.restDecoder)===1}readTypeRef(){return ie(this.restDecoder)}readLen(){return ie(this.restDecoder)}readAny(){return Ra(this.restDecoder)}readBuf(){return fue(Ft(this.restDecoder))}readJSON(){return JSON.parse(yi(this.restDecoder))}readKey(){return yi(this.restDecoder)}}class Vue{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ie(this.restDecoder),this.dsCurrVal}readDsLen(){const t=ie(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class xs extends Vue{constructor(t){super(t),this.keys=[],ie(t),this.keyClockDecoder=new Eh(Ft(t)),this.clientDecoder=new Lc(Ft(t)),this.leftClockDecoder=new Eh(Ft(t)),this.rightClockDecoder=new Eh(Ft(t)),this.infoDecoder=new Py(Ft(t),Ds),this.stringDecoder=new oue(Ft(t)),this.parentInfoDecoder=new Py(Ft(t),Ds),this.typeRefDecoder=new Lc(Ft(t)),this.lenDecoder=new Lc(Ft(t))}readLeftID(){return new Zo(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Zo(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Ra(this.restDecoder)}readBuf(){return Ft(this.restDecoder)}readJSON(){return Ra(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class sx{constructor(){this.restEncoder=Tt()}toUint8Array(){return We(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){J(this.restEncoder,t)}writeDsLen(t){J(this.restEncoder,t)}}class El extends sx{writeLeftID(t){J(this.restEncoder,t.client),J(this.restEncoder,t.clock)}writeRightID(t){J(this.restEncoder,t.client),J(this.restEncoder,t.clock)}writeClient(t){J(this.restEncoder,t)}writeInfo(t){up(this.restEncoder,t)}writeString(t){eo(this.restEncoder,t)}writeParentInfo(t){J(this.restEncoder,t?1:0)}writeTypeRef(t){J(this.restEncoder,t)}writeLen(t){J(this.restEncoder,t)}writeAny(t){Ba(this.restEncoder,t)}writeBuf(t){Ye(this.restEncoder,t)}writeJSON(t){eo(this.restEncoder,JSON.stringify(t))}writeKey(t){eo(this.restEncoder,t)}}class ax{constructor(){this.restEncoder=Tt(),this.dsCurrVal=0}toUint8Array(){return We(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,J(this.restEncoder,n)}writeDsLen(t){t===0&&Mn(),J(this.restEncoder,t-1),this.dsCurrVal+=t}}class ho extends ax{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Ah,this.clientEncoder=new $c,this.leftClockEncoder=new Ah,this.rightClockEncoder=new Ah,this.infoEncoder=new zy(up),this.stringEncoder=new Due,this.parentInfoEncoder=new zy(up),this.typeRefEncoder=new $c,this.lenEncoder=new $c}toUint8Array(){const t=Tt();return J(t,0),Ye(t,this.keyClockEncoder.toUint8Array()),Ye(t,this.clientEncoder.toUint8Array()),Ye(t,this.leftClockEncoder.toUint8Array()),Ye(t,this.rightClockEncoder.toUint8Array()),Ye(t,We(this.infoEncoder)),Ye(t,this.stringEncoder.toUint8Array()),Ye(t,We(this.parentInfoEncoder)),Ye(t,this.typeRefEncoder.toUint8Array()),Ye(t,this.lenEncoder.toUint8Array()),ad(t,We(this.restEncoder)),We(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Ba(this.restEncoder,t)}writeBuf(t){Ye(this.restEncoder,t)}writeJSON(t){Ba(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const Uue=(e,t,n,r)=>{r=jr(r,t[0].id.clock);const i=wr(t,r);J(e.restEncoder,t.length-i),e.writeClient(n),J(e.restEncoder,r);const o=t[i];o.write(e,r-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(e,0)},Qm=(e,t,n)=>{const r=new Map;n.forEach((i,o)=>{Xe(t,o)>i&&r.set(o,i)}),Al(t).forEach((i,o)=>{n.has(o)||r.set(o,0)}),J(e.restEncoder,r.size),Array.from(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{Uue(e,t.clients.get(i),i,o)})},que=(e,t)=>{const n=zn(),r=ie(e.restDecoder);for(let i=0;i<r;i++){const o=ie(e.restDecoder),s=new Array(o),a=e.readClient();let l=ie(e.restDecoder);n.set(a,{i:0,refs:s});for(let c=0;c<o;c++){const u=e.readInfo();switch(od&u){case 0:{const d=e.readLen();s[c]=new Sn(se(a,l),d),l+=d;break}case 10:{const d=ie(e.restDecoder);s[c]=new En(se(a,l),d),l+=d;break}default:{const d=(u&(Br|gn))===0,h=new Fe(se(a,l),null,(u&gn)===gn?e.readLeftID():null,null,(u&Br)===Br?e.readRightID():null,d?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,d&&(u&Ia)===Ia?e.readString():null,Bx(e,u));s[c]=h,l+=h.length}}}}return n},Wue=(e,t,n)=>{const r=[];let i=Array.from(n.keys()).sort((f,p)=>f-p);if(i.length===0)return null;const o=()=>{if(i.length===0)return null;let f=n.get(i[i.length-1]);for(;f.refs.length===f.i;)if(i.pop(),i.length>0)f=n.get(i[i.length-1]);else return null;return f};let s=o();if(s===null&&r.length===0)return null;const a=new px,l=new Map,c=(f,p)=>{const m=l.get(f);(m==null||m>p)&&l.set(f,p)};let u=s.refs[s.i++];const d=new Map,h=()=>{for(const f of r){const p=f.id.client,m=n.get(p);m?(m.i--,a.clients.set(p,m.refs.slice(m.i)),n.delete(p),m.i=0,m.refs=[]):a.clients.set(p,[f]),i=i.filter(b=>b!==p)}r.length=0};for(;;){if(u.constructor!==En){const p=_r(d,u.id.client,()=>Xe(t,u.id.client))-u.id.clock;if(p<0)r.push(u),c(u.id.client,u.id.clock-1),h();else{const m=u.getMissing(e,t);if(m!==null){r.push(u);const b=n.get(m)||{refs:[],i:0};if(b.refs.length===b.i)c(m,Xe(t,m)),h();else{u=b.refs[b.i++];continue}}else(p===0||p<u.length)&&(u.integrate(e,p),d.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(s!==null&&s.i<s.refs.length)u=s.refs[s.i++];else{if(s=o(),s===null)break;u=s.refs[s.i++]}}if(a.clients.size>0){const f=new ho;return Qm(f,a,new Map),J(f.restEncoder,0),{missing:l,update:f.toUint8Array()}}return null},Hue=(e,t)=>Qm(e,t.doc.store,t.beforeState),Gue=(e,t,n,r=new xs(e))=>Le(t,i=>{i.local=!1;let o=!1;const s=i.doc,a=s.store,l=que(r,s),c=Wue(i,a,l),u=a.pendingStructs;if(u){for(const[h,f]of u.missing)if(f<Xe(a,h)){o=!0;break}if(c){for(const[h,f]of c.missing){const p=u.missing.get(h);(p==null||p>f)&&u.missing.set(h,f)}u.update=cu([u.update,c.update])}}else a.pendingStructs=c;const d=Wy(r,i,a);if(a.pendingDs){const h=new xs(Mi(a.pendingDs));ie(h.restDecoder);const f=Wy(h,i,a);d&&f?a.pendingDs=cu([d,f]):a.pendingDs=d||f}else a.pendingDs=d;if(o){const h=a.pendingStructs.update;a.pendingStructs=null,lx(i.doc,h)}},n,!1),lx=(e,t,n,r=xs)=>{const i=Mi(t);Gue(i,e,n,new r(i))},cx=(e,t,n)=>lx(e,t,n,ox),Kue=(e,t,n=new Map)=>{Qm(e,t.store,n),Ns(e,nx(t.store))},Jue=(e,t=new Uint8Array([0]),n=new ho)=>{const r=dx(t);Kue(n,e,r);const i=[n.toUint8Array()];if(e.store.pendingDs&&i.push(e.store.pendingDs),e.store.pendingStructs&&i.push(pde(e.store.pendingStructs.update,t)),i.length>1){if(n.constructor===El)return hde(i.map((o,s)=>s===0?o:gde(o)));if(n.constructor===ho)return cu(i)}return i[0]},ux=(e,t)=>Jue(e,t,new El),Yue=e=>{const t=new Map,n=ie(e.restDecoder);for(let r=0;r<n;r++){const i=ie(e.restDecoder),o=ie(e.restDecoder);t.set(i,o)}return t},dx=e=>Yue(new ix(Mi(e))),hx=(e,t)=>(J(e.restEncoder,t.size),Array.from(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{J(e.restEncoder,n),J(e.restEncoder,r)}),e),Xue=(e,t)=>hx(e,Al(t.store)),Que=(e,t=new ax)=>(e instanceof Map?hx(t,e):Xue(t,e),t.toUint8Array()),Zue=e=>Que(e,new sx);class ede{constructor(){this.l=[]}}const Hy=()=>new ede,Gy=(e,t)=>e.l.push(t),Ky=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(i=>t!==i),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},fx=(e,t,n)=>Im(e.l,[t,n]);class Zo{constructor(t,n){this.client=t,this.clock=n}}const jo=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,se=(e,t)=>new Zo(e,t),ja=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Mn()},za=(e,t)=>{for(;t!==null;){if(t.parent===e)return!0;t=t.parent._item}return!1};class Va{constructor(t,n,r,i=0){this.type=t,this.tname=n,this.item=r,this.assoc=i}}const ga=e=>new Va(e.type==null?null:se(e.type.client,e.type.clock),e.tname||null,e.item==null?null:se(e.item.client,e.item.clock),e.assoc==null?0:e.assoc);class tde{constructor(t,n,r=0){this.type=t,this.index=n,this.assoc=r}}const nde=(e,t,n=0)=>new tde(e,t,n),Jl=(e,t,n)=>{let r=null,i=null;return e._item===null?i=ja(e):r=se(e._item.id.client,e._item.id.clock),new Va(r,i,t,n)},Th=(e,t,n=0)=>{let r=e._start;if(n<0){if(t===0)return Jl(e,null,n);t--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>t)return Jl(e,se(r.id.client,r.id.clock+t),n);t-=r.length}if(r.right===null&&n<0)return Jl(e,r.lastId,n);r=r.right}return Jl(e,null,n)},rde=(e,t)=>{const n=t.store,r=e.item,i=e.type,o=e.tname,s=e.assoc;let a=null,l=0;if(r!==null){if(Xe(n,r.client)<=r.clock)return null;const c=gp(n,r),u=c.item;if(!(u instanceof Fe))return null;if(a=u.parent,a._item===null||!a._item.deleted){l=u.deleted||!u.countable?0:c.diff+(s>=0?0:1);let d=u.left;for(;d!==null;)!d.deleted&&d.countable&&(l+=d.length),d=d.left}}else{if(o!==null)a=t.get(o);else if(i!==null){if(Xe(n,i.client)<=i.clock)return null;const{item:c}=gp(n,i);if(c instanceof Fe&&c.content instanceof Gn)a=c.content.type;else return null}else throw Mn();s>=0?l=a._length:l=0}return nde(a,l,e.assoc)},Jy=(e,t)=>e===t||e!==null&&t!==null&&e.tname===t.tname&&jo(e.item,t.item)&&jo(e.type,t.type)&&e.assoc===t.assoc;class Zm{constructor(t,n){this.ds=t,this.sv=n}}const eg=(e,t)=>new Zm(e,t);eg(Ym(),new Map);const ide=e=>eg(nx(e.store),Al(e.store)),Oo=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Sl(t.ds,e.id),fp=(e,t)=>{const n=_r(e.meta,fp,_s),r=e.doc.store;n.has(t)||(t.sv.forEach((i,o)=>{i<Xe(r,o)&&en(e,se(o,i))}),zr(e,t.ds,i=>{}),n.add(t))};class px{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Al=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const i=n[n.length-1];t.set(r,i.id.clock+i.length)}),t},Xe=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},mx=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw Mn()}n.push(t)},wr=(e,t)=>{let n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;let s=yr(t/(o+i.length-1)*r);for(;n<=r;){if(i=e[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;n=s+1}else r=s-1;s=yr((n+r)/2)}throw Mn()},ode=(e,t)=>{const n=e.clients.get(t.client);return n[wr(n,t.clock)]},Ic=ode,pp=(e,t,n)=>{const r=wr(t,n),i=t[r];return i.id.clock<n&&i instanceof Fe?(t.splice(r+1,0,pu(e,i,n-i.id.clock)),r+1):r},en=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[pp(e,n,t.clock)]},Yy=(e,t,n)=>{const r=t.clients.get(n.client),i=wr(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Sn&&r.splice(i+1,0,pu(e,o,n.clock-o.id.clock+1)),o},sde=(e,t,n)=>{const r=e.clients.get(t.id.client);r[wr(r,t.id.clock)]=n},gx=(e,t,n,r,i)=>{if(r===0)return;const o=n+r;let s=pp(e,t,n),a;do a=t[s++],o<a.id.clock+a.length&&pp(e,t,o),i(a);while(s<t.length&&t[s].id.clock<o)};class ade{constructor(t,n,r){this.doc=t,this.deleteSet=new Os,this.beforeState=Al(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Xy=(e,t)=>t.deleteSet.clients.size===0&&!Ace(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Jm(t.deleteSet),Hue(e,t),Ns(e,t.deleteSet),!0),Qy=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&_r(e.changed,t,_s).add(n)},Rc=(e,t)=>{const n=e[t-1],r=e[t];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(e.splice(t,1),r instanceof Fe&&r.parentSub!==null&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},lde=(e,t,n)=>{for(const[r,i]of e.clients.entries()){const o=t.clients.get(r);for(let s=i.length-1;s>=0;s--){const a=i[s],l=a.clock+a.len;for(let c=wr(o,a.clock),u=o[c];c<o.length&&u.id.clock<l;u=o[++c]){const d=o[c];if(a.clock+a.len<=d.id.clock)break;d instanceof Fe&&d.deleted&&!d.keep&&n(d)&&d.gc(t,!1)}}}},cde=(e,t)=>{e.clients.forEach((n,r)=>{const i=t.clients.get(r);for(let o=n.length-1;o>=0;o--){const s=n[o],a=bi(i.length-1,1+wr(i,s.clock+s.len-1));for(let l=a,c=i[l];l>0&&c.id.clock>=s.clock;c=i[--l])Rc(i,l)}})},bx=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{Jm(o),n.afterState=Al(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&(l=l.filter(u=>u.target._item===null||!u.target._item.deleted),l.forEach(u=>{u.currentTarget=c}),l.sort((u,d)=>u.path.length-d.path.length),fx(c._dEH,l,n))})),a.push(()=>r.emit("afterTransaction",[n,r]))}),Im(a,[])}finally{r.gc&&lde(o,i,r.gcFilter),cde(o,i),n.afterState.forEach((u,d)=>{const h=n.beforeState.get(d)||0;if(h!==u){const f=i.clients.get(d),p=jr(wr(f,h),1);for(let m=f.length-1;m>=p;m--)Rc(f,m)}});for(let u=0;u<s.length;u++){const{client:d,clock:h}=s[u].id,f=i.clients.get(d),p=wr(f,h);p+1<f.length&&Rc(f,p+1),p>0&&Rc(f,p)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(Bue(Gm,qm,"[yjs] ",Wm,Hm,"Changed the client-id because another client seems to be using it."),r.clientID=rx()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new El;Xy(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new ho;Xy(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(u=>u.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):bx(e,t+1)}}},Le=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let o=!1;e._transaction===null&&(o=!0,e._transaction=new ade(e,n,r),i.push(e._transaction),i.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{if(o){const s=e._transaction===i[0];e._transaction=null,s&&bx(i,0)}}};class ude{constructor(t,n){this.insertions=n,this.deletions=t,this.meta=new Map}}const Zy=(e,t,n)=>{zr(e,n.deletions,r=>{r instanceof Fe&&t.scope.some(i=>za(i,r))&&lg(r,!1)})},ew=(e,t,n)=>{let r=null,i=null;const o=e.doc,s=e.scope;if(Le(o,a=>{for(;t.length>0&&r===null;){const l=o.store,c=t.pop(),u=new Set,d=[];let h=!1;zr(a,c.insertions,f=>{if(f instanceof Fe){if(f.redone!==null){let{item:p,diff:m}=gp(l,f.id);m>0&&(p=en(a,se(p.id.client,p.id.clock+m))),f=p}!f.deleted&&s.some(p=>za(p,f))&&d.push(f)}}),zr(a,c.deletions,f=>{f instanceof Fe&&s.some(p=>za(p,f))&&!Sl(c.insertions,f.id)&&u.add(f)}),u.forEach(f=>{h=Rx(a,f,u,c.insertions,e.ignoreRemoteMapChanges)!==null||h});for(let f=d.length-1;f>=0;f--){const p=d[f];e.deleteFilter(p)&&(p.delete(a),h=!0)}r=h?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),i=a},e),r!=null){const a=i.changedParentTypes;e.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:a},e])}return r};class yx extends id{constructor(t,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:i=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=Ny(t)?t[0].doc:t.doc}={}){super(),this.scope=[],this.addToScope(t),this.deleteFilter=i,o.add(this),this.trackedOrigins=o,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=a,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(b=>l.changedParentTypes.has(b))||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,u=this.redoing,d=c?this.redoStack:this.undoStack;c?this.stopCapturing():u||this.clear(!1,!0);const h=new Os;l.afterState.forEach((b,y)=>{const k=l.beforeState.get(y)||0,_=b-k;_>0&&Pa(h,y,k,_)});const f=vi();let p=!1;if(this.lastChange>0&&f-this.lastChange<this.captureTimeout&&d.length>0&&!c&&!u){const b=d[d.length-1];b.deletions=hp([b.deletions,l.deleteSet]),b.insertions=hp([b.insertions,h])}else d.push(new ude(l.deleteSet,h)),p=!0;!c&&!u&&(this.lastChange=f),zr(l,l.deleteSet,b=>{b instanceof Fe&&this.scope.some(y=>za(y,b))&&lg(b,!0)});const m=[{stackItem:d[d.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];p?this.emit("stack-item-added",m):this.emit("stack-item-updated",m)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){t=Ny(t)?t:[t],t.forEach(n=>{this.scope.every(r=>r!==n)&&this.scope.push(n)})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,n=!0){(t&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{t&&(this.undoStack.forEach(i=>Zy(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>Zy(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let t;try{t=ew(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){this.redoing=!0;let t;try{t=ew(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*dde(e){const t=ie(e.restDecoder);for(let n=0;n<t;n++){const r=ie(e.restDecoder),i=e.readClient();let o=ie(e.restDecoder);for(let s=0;s<r;s++){const a=e.readInfo();if(a===10){const l=ie(e.restDecoder);yield new En(se(i,o),l),o+=l}else if((od&a)!==0){const l=(a&(Br|gn))===0,c=new Fe(se(i,o),null,(a&gn)===gn?e.readLeftID():null,null,(a&Br)===Br?e.readRightID():null,l?e.readParentInfo()?e.readString():e.readLeftID():null,l&&(a&Ia)===Ia?e.readString():null,Bx(e,a));yield c,o+=c.length}else{const l=e.readLen();yield new Sn(se(i,o),l),o+=l}}}}class tg{constructor(t,n){this.gen=dde(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===En);return this.curr}}class ng{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const hde=e=>cu(e,ox,El),fde=(e,t)=>{if(e.constructor===Sn){const{client:n,clock:r}=e.id;return new Sn(se(n,r+t),e.length-t)}else if(e.constructor===En){const{client:n,clock:r}=e.id;return new En(se(n,r+t),e.length-t)}else{const n=e,{client:r,clock:i}=n.id;return new Fe(se(r,i+t),null,se(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},cu=(e,t=xs,n=ho)=>{if(e.length===1)return e[0];const r=e.map(u=>new t(Mi(u)));let i=r.map(u=>new tg(u,!0)),o=null;const s=new n,a=new ng(s);for(;i=i.filter(h=>h.curr!==null),i.sort((h,f)=>{if(h.curr.id.client===f.curr.id.client){const p=h.curr.id.clock-f.curr.id.clock;return p===0?h.curr.constructor===f.curr.constructor?0:h.curr.constructor===En?1:-1:p}else return f.curr.id.client-h.curr.id.client}),i.length!==0;){const u=i[0],d=u.curr.id.client;if(o!==null){let h=u.curr,f=!1;for(;h!==null&&h.id.clock+h.length<=o.struct.id.clock+o.struct.length&&h.id.client>=o.struct.id.client;)h=u.next(),f=!0;if(h===null||h.id.client!==d||f&&h.id.clock>o.struct.id.clock+o.struct.length)continue;if(d!==o.struct.id.client)ri(a,o.struct,o.offset),o={struct:h,offset:0},u.next();else if(o.struct.id.clock+o.struct.length<h.id.clock)if(o.struct.constructor===En)o.struct.length=h.id.clock+h.length-o.struct.id.clock;else{ri(a,o.struct,o.offset);const p=h.id.clock-o.struct.id.clock-o.struct.length;o={struct:new En(se(d,o.struct.id.clock+o.struct.length),p),offset:0}}else{const p=o.struct.id.clock+o.struct.length-h.id.clock;p>0&&(o.struct.constructor===En?o.struct.length-=p:h=fde(h,p)),o.struct.mergeWith(h)||(ri(a,o.struct,o.offset),o={struct:h,offset:0},u.next())}}else o={struct:u.curr,offset:0},u.next();for(let h=u.curr;h!==null&&h.id.client===d&&h.id.clock===o.struct.id.clock+o.struct.length&&h.constructor!==En;h=u.next())ri(a,o.struct,o.offset),o={struct:h,offset:0}}o!==null&&(ri(a,o.struct,o.offset),o=null),rg(a);const l=r.map(u=>Xm(u)),c=hp(l);return Ns(s,c),s.toUint8Array()},pde=(e,t,n=xs,r=ho)=>{const i=dx(t),o=new r,s=new ng(o),a=new n(Mi(e)),l=new tg(a,!1);for(;l.curr;){const u=l.curr,d=u.id.client,h=i.get(d)||0;if(l.curr.constructor===En){l.next();continue}if(u.id.clock+u.length>h)for(ri(s,u,jr(h-u.id.clock,0)),l.next();l.curr&&l.curr.id.client===d;)ri(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===d&&l.curr.id.clock+l.curr.length<=h;)l.next()}rg(s);const c=Xm(a);return Ns(o,c),o.toUint8Array()},wx=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:We(e.encoder.restEncoder)}),e.encoder.restEncoder=Tt(),e.written=0)},ri=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&wx(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),J(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},rg=e=>{wx(e);const t=e.encoder.restEncoder;J(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];J(t,r.written),ad(t,r.restEncoder)}},mde=(e,t,n)=>{const r=new t(Mi(e)),i=new tg(r,!1),o=new n,s=new ng(o);for(let l=i.curr;l!==null;l=i.next())ri(s,l,0);rg(s);const a=Xm(r);return Ns(o,a),o.toUint8Array()},gde=e=>mde(e,xs,El);class ld{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null}get path(){return bde(this.currentTarget,this.target)}deletes(t){return Sl(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const o=n._map.get(i);let s,a;if(this.adds(o)){let l=o.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(o))if(l!==null&&this.deletes(l))s="delete",a=Ch(l.content.getContent());else return;else l!==null&&this.deletes(l)?(s="update",a=Ch(l.content.getContent())):(s="add",a=void 0)}else if(this.deletes(o))s="delete",a=Ch(o.content.getContent());else return;t.set(i,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){const n=this.target,r=_s(),i=_s(),o=[];if(t={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&o.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,i.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=t}return t}}const bde=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)i.deleted||r++,i=i.right;n.unshift(r)}t=t._item.parent}return n},kx=80;let ig=0;class yde{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=ig++}}const wde=e=>{e.timestamp=ig++},_x=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=ig++},kde=(e,t,n)=>{if(e.length>=kx){const r=e.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return _x(r,t,n),r}else{const r=new yde(t,n);return e.push(r),r}},cd=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((o,s)=>Nc(t-o.index)<Nc(t-s.index)?o:s);let r=e._start,i=0;for(n!==null&&(r=n.p,i=n.index,wde(n));r.right!==null&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&Nc(n.index-i)<r.parent.length/kx?(_x(n,r,i),n):kde(e._searchMarker,r,i)},Ua=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){e.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=jr(t,i.index+n))}},ud=(e,t,n)=>{const r=e,i=t.changedParentTypes;for(;_r(i,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;fx(r._eH,n,t)};class Dt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Hy(),this._dEH=Hy(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw Vn()}clone(){throw Vn()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Gy(this._eH,t)}observeDeep(t){Gy(this._dEH,t)}unobserve(t){Ky(this._eH,t)}unobserveDeep(t){Ky(this._dEH,t)}toJSON(){}}const Dx=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let o=e._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){const s=o.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)i.push(s[a]),r--;t=0}}o=o.right}return i},xx=e=>{const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)t.push(r[i])}n=n.right}return t},Cx=(e,t)=>{const n=[];let r=e._start;for(;r!==null;){if(r.countable&&Oo(r,t)){const i=r.content.getContent();for(let o=0;o<i.length;o++)n.push(i[o])}r=r.right}return n},qa=(e,t)=>{let n=0,r=e._start;for(;r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let o=0;o<i.length;o++)t(i[o],n++,e)}r=r.right}},vx=(e,t)=>{const n=[];return qa(e,(r,i)=>{n.push(t(r,i,e))}),n},_de=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},Sx=(e,t)=>{const n=cd(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},uu=(e,t,n,r)=>{let i=n;const o=e.doc,s=o.clientID,a=o.store,l=n===null?t._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new Fe(se(s,Xe(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new po(c)),i.integrate(e,0),c=[])};r.forEach(d=>{if(d===null)c.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(d);break;default:switch(u(),d.constructor){case Uint8Array:case ArrayBuffer:i=new Fe(se(s,Xe(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Fl(new Uint8Array(d))),i.integrate(e,0);break;case mo:i=new Fe(se(s,Xe(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Tl(d)),i.integrate(e,0);break;default:if(d instanceof Dt)i=new Fe(se(s,Xe(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Gn(d)),i.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},Ex=Ms("Length exceeded!"),Ax=(e,t,n,r)=>{if(n>t._length)throw Ex;if(n===0)return t._searchMarker&&Ua(t._searchMarker,n,r.length),uu(e,t,null,r);const i=n,o=cd(t,n);let s=t._start;for(o!==null&&(s=o.p,n-=o.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&en(e,se(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&Ua(t._searchMarker,i,r.length),uu(e,t,s,r)},Dde=(e,t,n)=>{let i=(t._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return uu(e,t,i,n)},Fx=(e,t,n,r)=>{if(r===0)return;const i=n,o=r,s=cd(t,n);let a=t._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&en(e,se(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&en(e,se(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw Ex;t._searchMarker&&Ua(t._searchMarker,i,-o+r)},du=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},og=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,s=o.clientID;let a;if(r==null)a=new po([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new po([r]);break;case Uint8Array:a=new Fl(r);break;case mo:a=new Tl(r);break;default:if(r instanceof Dt)a=new Gn(r);else throw new Error("Unexpected content type")}new Fe(se(s,Xe(o.store,s)),i,i&&i.lastId,null,null,t,n,a).integrate(e,0)},sg=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Tx=e=>{const t={};return e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},Mx=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted},Yl=e=>jue(e.entries(),t=>!t[1].deleted);class xde extends ld{constructor(t,n){super(t,n),this._transaction=n}}class es extends Dt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new es;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new es}clone(){const t=new es;return t.insert(0,this.toArray().map(n=>n instanceof Dt?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,n){super._callObserver(t,n),ud(this,t,new xde(this,t))}insert(t,n){this.doc!==null?Le(this.doc,r=>{Ax(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Le(this.doc,n=>{Dde(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Le(this.doc,r=>{Fx(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return Sx(this,t)}toArray(){return xx(this)}slice(t=0,n=this.length){return Dx(this,t,n)}toJSON(){return this.map(t=>t instanceof Dt?t.toJSON():t)}map(t){return vx(this,t)}forEach(t){qa(this,t)}[Symbol.iterator](){return _de(this)}_write(t){t.writeTypeRef(Hde)}}const Cde=e=>new es;class vde extends ld{constructor(t,n,r){super(t,n),this.keysChanged=r}}class Cs extends Dt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Cs}clone(){const t=new Cs;return this.forEach((n,r)=>{t.set(r,n instanceof Dt?n.clone():n)}),t}_callObserver(t,n){ud(this,t,new vde(this,t,n))}toJSON(){const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];t[r]=i instanceof Dt?i.toJSON():i}}),t}get size(){return[...Yl(this._map)].length}keys(){return Fh(Yl(this._map),t=>t[0])}values(){return Fh(Yl(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return Fh(Yl(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Le(this.doc,n=>{du(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Le(this.doc,r=>{og(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return sg(this,t)}has(t){return Mx(this,t)}clear(){this.doc!==null?Le(this.doc,t=>{this.forEach(function(n,r,i){du(t,i,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(Gde)}}const Sde=e=>new Cs,ci=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&Uce(e,t);class mp{constructor(t,n,r,i){this.left=t,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Mn(),this.right.content.constructor){case nt:this.right.deleted||Ls(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const tw=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case nt:t.right.deleted||Ls(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&en(e,se(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Xl=(e,t,n)=>{const r=new Map,i=cd(t,n);if(i){const o=new mp(i.p.left,i.p,i.index,r);return tw(e,o,n-i.index)}else{const o=new mp(null,t._start,0,r);return tw(e,o,n)}},Ox=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===nt&&ci(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach((s,a)=>{const l=n.left,c=n.right,u=new Fe(se(o,Xe(i.store,o)),l,l&&l.lastId,c,c&&c.id,t,null,new nt(a,s));u.integrate(e,0),n.right=u,n.forward()})},Ls=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},Nx=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===nt&&ci(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},Lx=(e,t,n,r)=>{const i=e.doc,o=i.clientID,s=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)||null;if(!ci(c,l)){s.set(a,c);const{left:u,right:d}=n;n.right=new Fe(se(o,Xe(i.store,o)),u,u&&u.lastId,d,d&&d.id,t,null,new nt(a,l)),n.right.integrate(e,0),n.forward()}}return s},Mh=(e,t,n,r,i)=>{n.currentAttributes.forEach((h,f)=>{i[f]===void 0&&(i[f]=null)});const o=e.doc,s=o.clientID;Nx(n,i);const a=Lx(e,t,n,i),l=r.constructor===String?new Wn(r):r instanceof Dt?new Gn(r):new go(r);let{left:c,right:u,index:d}=n;t._searchMarker&&Ua(t._searchMarker,n.index,l.getLength()),u=new Fe(se(s,Xe(o.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=d,n.forward(),Ox(e,t,n,a)},nw=(e,t,n,r,i)=>{const o=e.doc,s=o.clientID;Nx(n,i);const a=Lx(e,t,n,i);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===nt));){if(!n.right.deleted)switch(n.right.content.constructor){case nt:{const{key:l,value:c}=n.right.content,u=i[l];if(u!==void 0){if(ci(u,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(e)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&en(e,se(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Fe(se(s,Xe(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Wn(l)),n.right.integrate(e,0),n.forward()}Ox(e,t,n,a)},$x=(e,t,n,r,i)=>{let o=n;const s=su(i);for(;o&&(!o.countable||o.deleted);)!o.deleted&&o.content.constructor===nt&&Ls(s,o.content),o=o.right;let a=0,l=!1;for(;t!==o;){if(n===t&&(l=!0),!t.deleted){const c=t.content;switch(c.constructor){case nt:{const{key:u,value:d}=c;((s.get(u)||null)!==d||(r.get(u)||null)===d)&&(t.delete(e),a++,!l&&(i.get(u)||null)===d&&(r.get(u)||null)!==d&&i.delete(u));break}}}t=t.right}return a},Ede=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===nt){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},Ade=e=>{let t=0;return Le(e.doc,n=>{let r=e._start,i=e._start,o=zn();const s=su(o);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case nt:Ls(s,i.content);break;default:t+=$x(n,r,i,o,s),o=su(s),r=i;break}i=i.right}}),t},rw=(e,t,n)=>{const r=n,i=su(t.currentAttributes),o=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Gn:case go:case Wn:n<t.right.length&&en(e,se(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}o&&$x(e,o,t.right,i,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&Ua(s._searchMarker,t.index,-r+n),t};class Fde extends ld{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Le(t,r=>{const i=new Map,o=new Map;let s=this.target._start,a=null;const l={};let c="",u=0,d=0;const h=()=>{if(a!==null){let f;switch(a){case"delete":f={delete:d},d=0;break;case"insert":f={insert:c},i.size>0&&(f.attributes={},i.forEach((p,m)=>{p!==null&&(f.attributes[m]=p)})),c="";break;case"retain":if(f={retain:u},Object.keys(l).length>0){f.attributes={};for(const p in l)f.attributes[p]=l[p]}u=0;break}n.push(f),a=null}};for(;s!==null;){switch(s.content.constructor){case Gn:case go:this.adds(s)?this.deletes(s)||(h(),a="insert",c=s.content.getContent()[0],h()):this.deletes(s)?(a!=="delete"&&(h(),a="delete"),d+=1):s.deleted||(a!=="retain"&&(h(),a="retain"),u+=1);break;case Wn:this.adds(s)?this.deletes(s)||(a!=="insert"&&(h(),a="insert"),c+=s.content.str):this.deletes(s)?(a!=="delete"&&(h(),a="delete"),d+=s.length):s.deleted||(a!=="retain"&&(h(),a="retain"),u+=s.length);break;case nt:{const{key:f,value:p}=s.content;if(this.adds(s)){if(!this.deletes(s)){const m=i.get(f)||null;ci(m,p)?p!==null&&s.delete(r):(a==="retain"&&h(),ci(p,o.get(f)||null)?delete l[f]:l[f]=p)}}else if(this.deletes(s)){o.set(f,p);const m=i.get(f)||null;ci(m,p)||(a==="retain"&&h(),l[f]=m)}else if(!s.deleted){o.set(f,p);const m=l[f];m!==void 0&&(ci(m,p)?m!==null&&s.delete(r):(a==="retain"&&h(),p===null?delete l[f]:l[f]=p))}s.deleted||(a==="insert"&&h(),Ls(i,s.content));break}}s=s.right}for(h();n.length>0;){const f=n[n.length-1];if(f.retain!==void 0&&f.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class fo extends Dt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new fo}clone(){const t=new fo;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new Fde(this,t,n),i=t.doc;if(ud(this,t,r),!t.local){let o=!1;for(const[s,a]of t.afterState.entries()){const l=t.beforeState.get(s)||0;if(a!==l&&(gx(t,i.store.clients.get(s),l,a,c=>{!c.deleted&&c.content.constructor===nt&&(o=!0)}),o))break}o||zr(t,t.deleteSet,s=>{s instanceof Sn||o||s.parent===this&&s.content.constructor===nt&&(o=!0)}),Le(i,s=>{o?Ade(this):zr(s,s.deleteSet,a=>{a instanceof Sn||a.parent===this&&Ede(s,a)})})}}toString(){let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Wn&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Le(this.doc,r=>{const i=new mp(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const s=t[o];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&o===t.length-1&&i.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&Mh(r,this,i,a,s.attributes||{})}else s.retain!==void 0?nw(r,this,i,s.retain,s.attributes||{}):s.delete!==void 0&&rw(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){const i=[],o=new Map,s=this.doc;let a="",l=this._start;function c(){if(a.length>0){const u={};let d=!1;o.forEach((f,p)=>{d=!0,u[p]=f});const h={insert:a};d&&(h.attributes=u),i.push(h),a=""}}return Le(s,u=>{for(t&&fp(u,t),n&&fp(u,n);l!==null;){if(Oo(l,t)||n!==void 0&&Oo(l,n))switch(l.content.constructor){case Wn:{const d=o.get("ychange");t!==void 0&&!Oo(l,t)?(d===void 0||d.user!==l.id.client||d.type!=="removed")&&(c(),o.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!Oo(l,n)?(d===void 0||d.user!==l.id.client||d.type!=="added")&&(c(),o.set("ychange",r?r("added",l.id):{type:"added"})):d!==void 0&&(c(),o.delete("ychange")),a+=l.content.str;break}case Gn:case go:{c();const d={insert:l.content.getContent()[0]};if(o.size>0){const h={};d.attributes=h,o.forEach((f,p)=>{h[p]=f})}i.push(d);break}case nt:Oo(l,t)&&(c(),Ls(o,l.content));break}l=l.right}c()},"cleanup"),i}insert(t,n,r){if(n.length<=0)return;const i=this.doc;i!==null?Le(i,o=>{const s=Xl(o,this,t);r||(r={},s.currentAttributes.forEach((a,l)=>{r[l]=a})),Mh(o,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r={}){const i=this.doc;i!==null?Le(i,o=>{const s=Xl(o,this,t);Mh(o,this,s,n,r)}):this._pending.push(()=>this.insertEmbed(t,n,r))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Le(r,i=>{rw(i,Xl(i,this,t),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const i=this.doc;i!==null?Le(i,o=>{const s=Xl(o,this,t);s.right!==null&&nw(o,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Le(this.doc,n=>{du(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Le(this.doc,r=>{og(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return sg(this,t)}getAttributes(t){return Tx(this)}_write(t){t.writeTypeRef(Kde)}}const Tde=e=>new fo;class Oh{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===nn||n.constructor===Vr)&&n._start!==null)t=n._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Vr extends Dt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Vr}clone(){const t=new Vr;return t.insert(0,this.toArray().map(n=>n instanceof Dt?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new Oh(this,t)}querySelector(t){t=t.toUpperCase();const r=new Oh(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),Array.from(new Oh(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){ud(this,t,new Nde(this,n,t))}toString(){return vx(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const i=t.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),qa(this,o=>{i.insertBefore(o.toDOM(t,n,r),null)}),i}insert(t,n){this.doc!==null?Le(this.doc,r=>{Ax(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Le(this.doc,r=>{const i=t&&t instanceof Dt?t._item:t;uu(r,this,i,n)});else{const r=this._prelimContent,i=t===null?0:r.findIndex(o=>o===t)+1;if(i===0&&t!==null)throw Ms("Reference item not found");r.splice(i,0,...n)}}delete(t,n=1){this.doc!==null?Le(this.doc,r=>{Fx(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return xx(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return Sx(this,t)}slice(t=0,n=this.length){return Dx(this,t,n)}forEach(t){qa(this,t)}_write(t){t.writeTypeRef(Yde)}}const Mde=e=>new Vr;class nn extends Vr{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new nn(this.nodeName)}clone(){const t=new nn(this.nodeName),n=this.getAttributes();for(const r in n)t.setAttribute(r,n[r]);return t.insert(0,this.toArray().map(r=>r instanceof Dt?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const a in t)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const l=r[a];n.push(l+'="'+t[l]+'"')}const o=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${o}${s}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Le(this.doc,n=>{du(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Le(this.doc,r=>{og(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return sg(this,t)}hasAttribute(t){return Mx(this,t)}getAttributes(){return Tx(this)}toDOM(t=document,n={},r){const i=t.createElement(this.nodeName),o=this.getAttributes();for(const s in o)i.setAttribute(s,o[s]);return qa(this,s=>{i.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(Jde),t.writeKey(this.nodeName)}}const Ode=e=>new nn(e.readKey());class Nde extends ld{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class hu extends Cs{constructor(t){super(),this.hookName=t}_copy(){return new hu(this.hookName)}clone(){const t=new hu(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const i=n[this.hookName];let o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(Xde),t.writeKey(this.hookName)}}const Lde=e=>new hu(e.readKey());class bn extends fo{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new bn}clone(){const t=new bn;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const i=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const n=[];for(const i in t.attributes){const o=[];for(const s in t.attributes[i])o.push({key:s,value:t.attributes[i][s]});o.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const o=n[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){const a=o.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Qde)}}const $de=e=>new bn;class ag{constructor(t,n){this.id=t,this.length=n}get deleted(){throw Vn()}mergeWith(t){return!1}write(t,n,r){throw Vn()}integrate(t,n){throw Vn()}}const Ide=0;class Sn extends ag{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),mx(t.doc.store,this)}write(t,n){t.writeInfo(Ide),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Fl{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Fl(this.content)}splice(t){throw Vn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const Rde=e=>new Fl(e.readBuf());class Wa{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Wa(this.len)}splice(t){const n=new Wa(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){Pa(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const Bde=e=>new Wa(e.readLen()),Ix=(e,t)=>new mo({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Tl{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Tl(Ix(this.doc.guid,this.opts))}splice(t){throw Vn()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const Pde=e=>new Tl(Ix(e.readString(),e.readAny()));class go{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new go(this.embed)}splice(t){throw Vn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const jde=e=>new go(e.readJSON());class nt{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new nt(this.key,this.value)}splice(t){throw Vn()}mergeWith(t){return!1}integrate(t,n){n.parent._searchMarker=null}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const zde=e=>new nt(e.readKey(),e.readJSON());class fu{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new fu(this.arr)}splice(t){const n=new fu(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const Vde=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const i=e.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new fu(n)};class po{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new po(this.arr)}splice(t){const n=new po(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];t.writeAny(o)}}getRef(){return 8}}const Ude=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new po(n)};class Wn{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Wn(this.str)}splice(t){const n=new Wn(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\uFFFD",n.str="\uFFFD"+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const qde=e=>new Wn(e.readString()),Wde=[Cde,Sde,Tde,Ode,Mde,Lde,$de],Hde=0,Gde=1,Kde=2,Jde=3,Yde=4,Xde=5,Qde=6;class Gn{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Gn(this.type._copy())}splice(t){throw Vn()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const Zde=e=>new Gn(Wde[e.readTypeRef()](e)),gp=(e,t)=>{let n=t,r=0,i;do r>0&&(n=se(n.client,n.clock+r)),i=Ic(e,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof Fe);return{item:i,diff:r}},lg=(e,t)=>{for(;e!==null&&e.keep!==t;)e.keep=t,e=e.parent._item},pu=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new Fe(se(r,i+n),t,se(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=se(t.redone.client,t.redone.clock+n)),t.right=o,o.right!==null&&(o.right.left=o),e._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=n,o},Rx=(e,t,n,r,i)=>{const o=e.doc,s=o.store,a=o.clientID,l=t.redone;if(l!==null)return en(e,l);let c=t.parent._item,u=null,d;if(c!==null&&c.deleted===!0){if(c.redone===null&&(!n.has(c)||Rx(e,c,n,r,i)===null))return null;for(;c.redone!==null;)c=en(e,c.redone)}const h=c===null?t.parent:c.content.type;if(t.parentSub===null){for(u=t.left,d=t;u!==null;){let b=u;for(;b!==null&&b.parent._item!==c;)b=b.redone===null?null:en(e,b.redone);if(b!==null&&b.parent._item===c){u=b;break}u=u.left}for(;d!==null;){let b=d;for(;b!==null&&b.parent._item!==c;)b=b.redone===null?null:en(e,b.redone);if(b!==null&&b.parent._item===c){d=b;break}d=d.right}}else if(d=null,t.right&&!i){for(u=t;u!==null&&u.right!==null&&Sl(r,u.right.id);)u=u.right;for(;u!==null&&u.redone!==null;)u=en(e,u.redone);if(u&&u.right!==null)return null}else u=h._map.get(t.parentSub)||null;const f=Xe(s,a),p=se(a,f),m=new Fe(p,u,u&&u.lastId,d,d&&d.id,h,t.parentSub,t.content.copy());return t.redone=p,lg(m,!0),m.integrate(e,0),m};class Fe extends ag{constructor(t,n,r,i,o,s,a,l){super(t,l.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?By:0}set marker(t){(this.info&Sh)>0!==t&&(this.info^=Sh)}get marker(){return(this.info&Sh)>0}get keep(){return(this.info&Ry)>0}set keep(t){this.keep!==t&&(this.info^=Ry)}get countable(){return(this.info&By)>0}get deleted(){return(this.info&vh)>0}set deleted(t){this.deleted!==t&&(this.info^=vh)}markDeleted(){this.info|=vh}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Xe(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Xe(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Zo&&this.id.client!==this.parent.client&&this.parent.clock>=Xe(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Yy(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=en(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Sn||this.right&&this.right.constructor===Sn)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===Fe&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Fe&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Zo){const r=Ic(n,this.parent);r.constructor===Sn?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=Yy(t,t.doc.store,se(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const o=new Set,s=new Set;for(;i!==null&&i!==this.right;){if(s.add(i),o.add(i),jo(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(jo(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&s.has(Ic(t.doc.store,i.origin)))o.has(Ic(t.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),mx(t.doc.store,this),this.content.integrate(t,this),Qy(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new Sn(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:se(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&jo(t.origin,this.lastId)&&this.right===t&&jo(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Pa(t.deleteSet,this.id.client,this.id.clock,this.length),Qy(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw Mn();this.content.gc(t),n?sde(t,this,new Sn(this.id,this.length)):this.content=new Wa(this.length)}write(t,n){const r=n>0?se(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=this.content.getRef()&od|(r===null?0:gn)|(i===null?0:Br)|(o===null?0:Ia);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),i!==null&&t.writeRightID(i),r===null&&i===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=ja(a);t.writeParentInfo(!0),t.writeString(c)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===Zo?(t.writeParentInfo(!1),t.writeLeftID(a)):Mn();o!==null&&t.writeString(o)}this.content.write(t,n)}}const Bx=(e,t)=>ehe[t&od](e),ehe=[()=>{Mn()},Bde,Vde,Rde,qde,jde,zde,Zde,Ude,Pde,()=>{Mn()}],the=10;class En extends ag{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){Mn()}write(t,n){t.writeInfo(the),J(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const Px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},jx="__ $YJS$ __";Px[jx]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Px[jx]=!0;const Nh=3e4;class nhe extends id{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=vi();this.getLocalState()!==null&&Nh/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,o)=>{o!==this.clientID&&Nh<=n-i.lastUpdated&&this.states.has(o)&&r.push(o)}),r.length>0&&cg(this,r,"timeout")},yr(Nh/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,o=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:i,lastUpdated:vi()});const s=[],a=[],l=[],c=[];t===null?c.push(n):o==null?t!=null&&s.push(n):(a.push(n),ma(o,t)||l.push(n)),(s.length>0||l.length>0||c.length>0)&&this.emit("change",[{added:s,updated:l,removed:c},"local"]),this.emit("update",[{added:s,updated:a,removed:c},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const cg=(e,t,n)=>{const r=[];for(let i=0;i<t.length;i++){const o=t[i];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const s=e.meta.get(o);e.meta.set(o,{clock:s.clock+1,lastUpdated:vi()})}r.push(o)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},ba=(e,t,n=e.states)=>{const r=t.length,i=Tt();J(i,r);for(let o=0;o<r;o++){const s=t[o],a=n.get(s)||null,l=e.meta.get(s).clock;J(i,s),J(i,l),eo(i,JSON.stringify(a))}return We(i)},rhe=(e,t,n)=>{const r=Mi(t),i=vi(),o=[],s=[],a=[],l=[],c=ie(r);for(let u=0;u<c;u++){const d=ie(r);let h=ie(r);const f=JSON.parse(yi(r)),p=e.meta.get(d),m=e.states.get(d),b=p===void 0?0:p.clock;(b<h||b===h&&f===null&&e.states.has(d))&&(f===null?d===e.clientID&&e.getLocalState()!=null?h++:e.states.delete(d):e.states.set(d,f),e.meta.set(d,{clock:h,lastUpdated:i}),p===void 0&&f!==null?o.push(d):p!==void 0&&f===null?l.push(d):f!==null&&(ma(f,m)||a.push(d),s.push(d)))}(o.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:o,updated:a,removed:l},n]),(o.length>0||s.length>0||l.length>0)&&e.emit("update",[{added:o,updated:s,removed:l},n])},ihe=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}},ohe=(e,t)=>{let n=0,r=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}},she=ohe,ze=new _e("y-sync"),to=new _e("y-undo"),na=new _e("yjs-cursor"),mu=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!Sl(t.ds,e.id),ahe=[{light:"#ecd44433",dark:"#ecd444"}],lhe=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const r=_s();e.forEach(i=>r.add(i)),t=t.filter(i=>!r.has(i))}e.set(n,vue(t))}return e.get(n)},che=(e,{colors:t=ahe,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:i=()=>{}}={})=>{let o=!1,s;const a=new ye({props:{editable:l=>{const c=ze.getState(l);return c.snapshot==null&&c.prevSnapshot==null}},key:ze,state:{init:(l,c)=>({type:e,doc:e.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:n,permanentUserData:r}),apply:(l,c)=>{const u=l.getMeta(ze);if(u!==void 0){c=Object.assign({},c);for(const d in u)c[d]=u[d]}return c.addToHistory=l.getMeta("addToHistory")!==!1,c.isChangeOrigin=u!==void 0&&!!u.isChangeOrigin,c.isUndoRedoOperation=u!==void 0&&!!u.isChangeOrigin&&!!u.isUndoRedoOperation,c.binding!==null&&u!==void 0&&(u.snapshot!=null||u.prevSnapshot!=null)&&lu(0,()=>{c.binding==null||c.binding.isDestroyed||(u.restore==null?c.binding._renderSnapshot(u.snapshot,u.prevSnapshot,c):(c.binding._renderSnapshot(u.snapshot,u.snapshot,c),delete c.restore,delete c.snapshot,delete c.prevSnapshot,c.binding.mux(()=>{c.binding._prosemirrorChanged(c.binding.prosemirrorView.state.doc)})))}),c}},view:l=>{const c=new dhe(e,l);return s!=null&&s.destroy(),s=lu(0,()=>{c._forceRerender(),l.dispatch(l.state.tr.setMeta(ze,{binding:c})),i()}),{update:()=>{const u=a.getState(l.state);if(u.snapshot==null&&u.prevSnapshot==null&&(o||l.state.doc.content.findDiffStart(l.state.doc.type.createAndFill().content)!==null)){if(o=!0,u.addToHistory===!1&&!u.isChangeOrigin){const d=to.getState(l.state),h=d&&d.undoManager;h&&h.stopCapturing()}c.mux(()=>{u.doc.transact(d=>{d.meta.set("addToHistory",u.addToHistory),c._prosemirrorChanged(l.state.doc)},ze)})}},destroy:()=>{s.destroy(),c.destroy()}}}});return a},uhe=(e,t,n)=>{if(t!==null&&t.anchor!==null&&t.head!==null){const r=Ga(n.doc,n.type,t.anchor,n.mapping),i=Ga(n.doc,n.type,t.head,n.mapping);r!==null&&i!==null&&(e=e.setSelection(ne.create(e.doc,r,i)))}},bp=(e,t)=>({anchor:yu(t.selection.anchor,e.type,e.mapping),head:yu(t.selection.head,e.type,e.mapping)});class dhe{constructor(t,n){this.type=t,this.prosemirrorView=n,this.mux=ihe(),this.isDestroyed=!1,this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&(this.beforeTransactionSelection=bp(this,n.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),t.observeDeep(this._observeFunction),this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(Rm&&this._domSelectionInView===null&&(lu(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection(),n=this.prosemirrorView._root.createRange();n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const i=n.getBoundingClientRect(),o=Oi.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||o.clientWidth||0)&&i.top<=(window.innerHeight||o.clientHeight||0)}renderSnapshot(t,n){n||(n=eg(Ym(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(ze,{snapshot:t,prevSnapshot:n}))}unrenderSnapshot(){this.mapping=new Map,this.mux(()=>{const t=this.type.toArray().map(r=>Bc(r,this.prosemirrorView.state.schema,this.mapping)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new V(B.from(t),0,0));n.setMeta(ze,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping=new Map,this.mux(()=>{const t=this.type.toArray().map(r=>Bc(r,this.prosemirrorView.state.schema,this.mapping)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new V(B.from(t),0,0));this.prosemirrorView.dispatch(n.setMeta(ze,{isChangeOrigin:!0}))})}_renderSnapshot(t,n,r){t||(t=ide(this.doc)),this.mapping=new Map,this.mux(()=>{this.doc.transact(i=>{const o=r.permanentUserData;o&&o.dss.forEach(c=>{zr(i,c,u=>{})});const s=(c,u)=>{const d=c==="added"?o.getUserByClientId(u.client):o.getUserByDeletedId(u);return{user:d,type:c,color:lhe(r.colorMapping,r.colors,d)}},a=Cx(this.type,new Zm(n.ds,t.sv)).map(c=>!c._item.deleted||mu(c._item,t)||mu(c._item,n)?Bc(c,this.prosemirrorView.state.schema,new Map,t,n,s):null).filter(c=>c!==null),l=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new V(B.from(a),0,0));this.prosemirrorView.dispatch(l.setMeta(ze,{isChangeOrigin:!0}))},ze)})}_typeChanged(t,n){const r=ze.getState(this.prosemirrorView.state);if(t.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const i=(a,l)=>this.mapping.delete(l);zr(n,n.deleteSet,a=>a.constructor===Fe&&this.mapping.delete(a.content.type)),n.changed.forEach(i),n.changedParentTypes.forEach(i);const o=this.type.toArray().map(a=>zx(a,this.prosemirrorView.state.schema,this.mapping)).filter(a=>a!==null);let s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new V(B.from(o),0,0));uhe(s,this.beforeTransactionSelection,this),s=s.setMeta(ze,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof yx}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&s.scrollIntoView(),this.prosemirrorView.dispatch(s)})}_prosemirrorChanged(t){this.doc.transact(()=>{bu(this.doc,this.type,t,this.mapping),this.beforeTransactionSelection=bp(this,this.prosemirrorView.state)},ze)}destroy(){this.isDestroyed=!0,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const zx=(e,t,n,r,i,o)=>{const s=n.get(e);if(s===void 0){if(e instanceof nn)return Bc(e,t,n,r,i,o);throw Vn()}return s},Bc=(e,t,n,r,i,o)=>{const s=[],a=l=>{if(l.constructor===nn){const c=zx(l,t,n,r,i,o);c!==null&&s.push(c)}else{const c=hhe(l,t,n,r,i,o);c!==null&&c.forEach(u=>{u!==null&&s.push(u)})}};r===void 0||i===void 0?e.toArray().forEach(a):Cx(e,new Zm(i.ds,r.sv)).forEach(a);try{const l=e.getAttributes(r);r!==void 0&&(mu(e._item,r)?mu(e._item,i)||(l.ychange=o?o("added",e._item.id):{type:"added"}):l.ychange=o?o("removed",e._item.id):{type:"removed"});const c=t.node(e.nodeName,l,s);return n.set(e,c),c}catch{return e.doc.transact(c=>{e._item.delete(c)},ze),n.delete(e),null}},hhe=(e,t,n,r,i,o)=>{const s=[],a=e.toDelta(r,i,o);try{for(let l=0;l<a.length;l++){const c=a[l],u=[];for(const d in c.attributes)u.push(t.mark(d,c.attributes[d]));s.push(t.text(c.insert,u))}}catch{return e.doc.transact(c=>{e._item.delete(c)},ze),null}return s},fhe=(e,t)=>{const n=new bn,r=e.map(i=>({insert:i.text,attributes:Ux(i.marks)}));return n.applyDelta(r),t.set(n,e),n},phe=(e,t)=>{const n=new nn(e.type.name);for(const r in e.attrs){const i=e.attrs[r];i!==null&&r!=="ychange"&&n.setAttribute(r,i)}return n.insert(0,dd(e).map(r=>yp(r,t))),t.set(n,e),n},yp=(e,t)=>e instanceof Array?fhe(e,t):phe(e,t),iw=e=>typeof e=="object"&&e!==null,ug=(e,t)=>{const n=Object.keys(e).filter(i=>e[i]!==null);let r=n.length===Object.keys(t).filter(i=>t[i]!==null).length;for(let i=0;i<n.length&&r;i++){const o=n[i],s=e[o],a=t[o];r=o==="ychange"||s===a||iw(s)&&iw(a)&&ug(s,a)}return r},dd=e=>{const t=e.content.content,n=[];for(let r=0;r<t.length;r++){const i=t[r];if(i.isText){const o=[];for(let s=t[r];r<t.length&&s.isText;s=t[++r])o.push(s);r--,n.push(o)}else n.push(i)}return n},Vx=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((r,i)=>r.insert===t[i].text&&VD(r.attributes||{}).length===t[i].marks.length&&t[i].marks.every(o=>ug(r.attributes[o.type.name]||{},o.attrs)))},Ha=(e,t)=>{if(e instanceof nn&&!(t instanceof Array)&&wp(e,t)){const n=dd(t);return e._length===n.length&&ug(e.getAttributes(),t.attrs)&&e.toArray().every((r,i)=>Ha(r,n[i]))}return e instanceof bn&&t instanceof Array&&Vx(e,t)},gu=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((n,r)=>t[r]===n),ow=(e,t,n)=>{const r=e.toArray(),i=dd(t),o=i.length,s=r.length,a=bi(s,o);let l=0,c=0,u=!1;for(;l<a;l++){const d=r[l],h=i[l];if(gu(n.get(d),h))u=!0;else if(!Ha(d,h))break}for(;l+c<a;c++){const d=r[s-c-1],h=i[o-c-1];if(gu(n.get(d),h))u=!0;else if(!Ha(d,h))break}return{equalityFactor:l+c,foundMappedChild:u}},mhe=e=>{let t="",n=e._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Wn?t+=n.content.str:n.content instanceof nt&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}},ghe=(e,t,n)=>{n.set(e,t);const{nAttrs:r,str:i}=mhe(e),o=t.map(c=>({insert:c.text,attributes:Object.assign({},r,Ux(c.marks))})),{insert:s,remove:a,index:l}=she(i,o.map(c=>c.insert).join(""));e.delete(l,a),e.insert(l,s),e.applyDelta(o.map(c=>({retain:c.insert.length,attributes:c.attributes})))},Ux=e=>{const t={};return e.forEach(n=>{n.type.name!=="ychange"&&(t[n.type.name]=n.attrs)}),t},bu=(e,t,n,r)=>{if(t instanceof nn&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(t,n),t instanceof nn){const d=t.getAttributes(),h=n.attrs;for(const f in h)h[f]!==null?d[f]!==h[f]&&f!=="ychange"&&t.setAttribute(f,h[f]):t.removeAttribute(f);for(const f in d)h[f]===void 0&&t.removeAttribute(f)}const i=dd(n),o=i.length,s=t.toArray(),a=s.length,l=bi(o,a);let c=0,u=0;for(;c<l;c++){const d=s[c],h=i[c];if(!gu(r.get(d),h))if(Ha(d,h))r.set(d,h);else break}for(;u+c+1<l;u++){const d=s[a-u-1],h=i[o-u-1];if(!gu(r.get(d),h))if(Ha(d,h))r.set(d,h);else break}e.transact(()=>{for(;a-c-u>0&&o-c-u>0;){const h=s[c],f=i[c],p=s[a-u-1],m=i[o-u-1];if(h instanceof bn&&f instanceof Array)Vx(h,f)||ghe(h,f,r),c+=1;else{let b=h instanceof nn&&wp(h,f),y=p instanceof nn&&wp(p,m);if(b&&y){const k=ow(h,f,r),_=ow(p,m,r);k.foundMappedChild&&!_.foundMappedChild?y=!1:!k.foundMappedChild&&_.foundMappedChild||k.equalityFactor<_.equalityFactor?b=!1:y=!1}b?(bu(e,h,f,r),c+=1):y?(bu(e,p,m,r),u+=1):(t.delete(c,1),t.insert(c,[yp(f,r)]),c+=1)}}const d=a-c-u;if(a===1&&o===0&&s[0]instanceof bn?s[0].delete(0,s[0].length):d>0&&t.delete(c,d),c+u<o){const h=[];for(let f=c;f<o-u;f++)h.push(yp(i[f],r));t.insert(c,h)}},ze)},wp=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name;let ya=null;const bhe=()=>{const e=ya;ya=null,e.forEach((t,n)=>{const r=n.state.tr,i=ze.getState(n.state);i&&i.binding&&!i.binding.isDestroyed&&(t.forEach((o,s)=>{r.setMeta(s,o)}),n.dispatch(r))})},yhe=(e,t,n)=>{ya||(ya=new Map,lu(0,bhe)),_r(ya,e,zn).set(t,n)},yu=(e,t,n)=>{if(e===0)return Th(t,0);let r=t._first===null?null:t._first.content.type;for(;r!==null&&t!==r;){if(r instanceof bn){if(r._length>=e)return Th(r,e);if(e-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,e--;while(r!==t&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==t&&(r=r._item===null?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&e<i)r=r._first.content.type,e--;else{if(e===1&&r._length===0&&i>1)return new Va(r._item===null?null:r._item.id,r._item===null?ja(r):null,null);if(e-=i,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(e===0)return r=r._item===null?r:r._item.parent,new Va(r._item===null?null:r._item.id,r._item===null?ja(r):null,null);do r=r._item.parent,e--;while(r!==t&&r._item.next===null);r!==t&&(r=r._item.next.content.type)}}}if(r===null)throw Mn();if(e===0&&r.constructor!==bn&&r!==t)return whe(r._item.parent,r._item)}return Th(t,t._length)},whe=(e,t)=>{let n=null,r=null;return e._item===null?r=ja(e):n=se(e._item.id.client,e._item.id.clock),new Va(n,r,t.id)},Ga=(e,t,n,r)=>{const i=rde(n,e);if(i===null||i.type!==t&&!za(t,i.type._item))return null;let o=i.type,s=0;if(o.constructor===bn)s=i.index;else if(o._item===null||!o._item.deleted){let a=o._first,l=0;for(;l<o._length&&l<i.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof bn?s+=c._length:s+=r.get(c).nodeSize}a=a.right}s+=1}for(;o!==t&&o._item!==null;){const a=o._item.parent;if(a._item===null||!a._item.deleted){s+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===o)break;l.deleted||(c instanceof bn?s+=c._length:s+=r.get(c).nodeSize),l=l.right}}o=a}return s-1};function khe(e,t="prosemirror"){const n=new mo,r=n.get(t,Vr);return r.doc?(_he(e,r),r.doc):n}function _he(e,t){const n=t||new Vr,r=n.doc?n.doc:{transact:i=>i(void 0)};return bu(r,n,e,new Map),n}function Dhe(e,t){const n=xhe(t);return on.fromJSON(e,n)}function xhe(e,t="prosemirror"){return Che(e.getXmlFragment(t))}function Che(e){const t=e.toArray();function n(r){let i;if(!r.nodeName)i=r.toDelta().map(s=>{const a={type:"text",text:s.insert};return s.attributes&&(a.marks=Object.keys(s.attributes).map(l=>{const c=s.attributes[l],u={type:l};return Object.keys(c)&&(u.attrs=c),u})),a});else{i={type:r.nodeName};const o=r.getAttributes();Object.keys(o).length&&(i.attrs=o);const s=r.toArray();s.length&&(i.content=s.map(n).flat())}return i}return{type:"doc",content:t.map(n)}}const vhe=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);const r=document.createTextNode("\u2060"),i=document.createTextNode("\u2060");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(i,null),t},She=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),Ehe=/^#[0-9a-fA-F]{6}$/,sw=(e,t,n,r)=>{const i=ze.getState(e),o=i.doc,s=[];return i.snapshot!=null||i.prevSnapshot!=null||i.binding===null?ve.create(e.doc,[]):(t.getStates().forEach((a,l)=>{if(l!==o.clientID&&a.cursor!=null){const c=a.user||{};c.color==null?c.color="#ffa500":Ehe.test(c.color)||console.warn("A user uses an unsupported color format",c),c.name==null&&(c.name=`User: ${l}`);let u=Ga(o,i.type,ga(a.cursor.anchor),i.binding.mapping),d=Ga(o,i.type,ga(a.cursor.head),i.binding.mapping);if(u!==null&&d!==null){const h=jr(e.doc.content.size-1,0);u=bi(u,h),d=bi(d,h),s.push(Ke.widget(d,()=>n(c),{key:l+"",side:10}));const f=bi(u,d),p=jr(u,d);s.push(Ke.inline(f,p,r(c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),ve.create(e.doc,s))},Ahe=(e,{cursorBuilder:t=vhe,selectionBuilder:n=She,getSelection:r=o=>o.selection}={},i="cursor")=>new ye({key:na,state:{init(o,s){return sw(s,e,t,n)},apply(o,s,a,l){const c=ze.getState(l),u=o.getMeta(na);return c&&c.isChangeOrigin||u&&u.awarenessUpdated?sw(l,e,t,n):s.map(o.mapping,o.doc)}},props:{decorations:o=>na.getState(o)},view:o=>{const s=()=>{o.docView&&yhe(o,na,{awarenessUpdated:!0})},a=()=>{const l=ze.getState(o.state),c=e.getLocalState()||{};if(l.binding!=null)if(o.hasFocus()){const u=r(o.state),d=yu(u.anchor,l.type,l.binding.mapping),h=yu(u.head,l.type,l.binding.mapping);(c.cursor==null||!Jy(ga(c.cursor.anchor),d)||!Jy(ga(c.cursor.head),h))&&e.setLocalStateField(i,{anchor:d,head:h})}else c.cursor!=null&&Ga(l.doc,l.type,ga(c.cursor.anchor),l.binding.mapping)!==null&&e.setLocalStateField(i,null)};return e.on("change",s),o.dom.addEventListener("focusin",a),o.dom.addEventListener("focusout",a),{update:a,destroy:()=>{o.dom.removeEventListener("focusin",a),o.dom.removeEventListener("focusout",a),e.off("change",s),e.setLocalStateField(i,null)}}}}),Fhe=e=>{const t=to.getState(e).undoManager;if(t!=null)return t.undo(),!0},aw=e=>{const t=to.getState(e).undoManager;if(t!=null)return t.redo(),!0},The=new Set(["paragraph"]),Mhe=(e,t)=>!(e instanceof Fe)||!(e.content instanceof Gn)||!(e.content.type instanceof fo||e.content.type instanceof nn&&t.has(e.content.type.nodeName))||e.content.type._length===0,Ohe=({protectedNodes:e=The,trackedOrigins:t=[],undoManager:n=null}={})=>new ye({key:to,state:{init:(r,i)=>{const o=ze.getState(i),s=n||new yx(o.type,{trackedOrigins:new Set([ze].concat(t)),deleteFilter:a=>Mhe(a,e),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(r,i,o,s)=>{const a=ze.getState(s).binding,l=i.undoManager,c=l.undoStack.length>0,u=l.redoStack.length>0;return a?{undoManager:l,prevSel:bp(a,o),hasUndoOps:c,hasRedoOps:u}:c!==i.hasUndoOps||u!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):i}},view:r=>{const i=ze.getState(r.state),o=to.getState(r.state).undoManager;return o.on("stack-item-added",({stackItem:s})=>{const a=i.binding;a&&s.meta.set(a,to.getState(r.state).prevSel)}),o.on("stack-item-popped",({stackItem:s})=>{const a=i.binding;a&&(a.beforeTransactionSelection=s.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{o.destroy()}}}});var dg=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ne=(e,t,n)=>(dg(e,t,"read from private field"),n?n.call(e):t.get(e)),Jr=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},wo=(e,t,n,r)=>(dg(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ql=(e,t,n)=>(dg(e,t,"access private method"),n);const qx=new _e("MILKDOWN_COLLAB_KEYMAP"),Nhe=[qx,ze,na,to];var ts,Tr,wa,bt,No,kp,Wx,_p,Hx,Pc,Dp;class Gx{constructor(){Jr(this,kp),Jr(this,_p),Jr(this,Pc),Jr(this,ts,{}),Jr(this,Tr,null),Jr(this,wa,null),Jr(this,bt,null),Jr(this,No,!1)}bindCtx(t){return wo(this,bt,t),this}bindDoc(t){return wo(this,Tr,t),this}setOptions(t){return wo(this,ts,t),this}mergeOptions(t){return Object.assign(Ne(this,ts),t),this}setAwareness(t){return wo(this,wa,t),this}applyTemplate(t,n){if(!Ne(this,bt))throw ia();if(!Ne(this,Tr))throw Qw();const r=n||(a=>a.textContent.length===0),i=Ql(this,kp,Wx).call(this,t),o=Ne(this,bt).get(tt),s=Dhe(o,Ne(this,Tr));if(i&&r(s,i)){const a=Ne(this,Tr).getXmlFragment("prosemirror");a.delete(0,a.length);const l=khe(i),c=ux(l);cx(Ne(this,Tr),c),l.destroy()}return this}connect(){if(!Ne(this,bt))throw ia();if(Ne(this,No))return;const t=Ne(this,bt).get(ut),n=Ql(this,_p,Hx).call(this),r=t.concat(n);return Ql(this,Pc,Dp).call(this,r),wo(this,No,!0),this}disconnect(){if(!Ne(this,bt))throw ia();if(!Ne(this,No))return this;const t=Ne(this,bt).get(ut).filter(n=>!n.spec.key||!Nhe.includes(n.spec.key));return Ql(this,Pc,Dp).call(this,t),wo(this,No,!1),this}}ts=new WeakMap,Tr=new WeakMap,wa=new WeakMap,bt=new WeakMap,No=new WeakMap,kp=new WeakSet,Wx=function(e){if(!Ne(this,bt))throw ia();const t=Ne(this,bt).get(tt),n=Ne(this,bt).get(mi);return O_(e,n,t)},_p=new WeakSet,Hx=function(){if(!Ne(this,Tr))throw Qw();const{ySyncOpts:e,yUndoOpts:t}=Ne(this,ts),n=Ne(this,Tr).getXmlFragment("prosemirror"),r=[che(n,e),Ohe(t),new ye({key:qx,props:{handleKeyDown:Qu({"Mod-z":Fhe,"Mod-y":aw,"Mod-Shift-z":aw})}})];if(Ne(this,wa)){const{yCursorOpts:i,yCursorStateField:o}=Ne(this,ts);r.push(Ahe(Ne(this,wa),i,o))}return r},Pc=new WeakSet,Dp=function(e){if(!Ne(this,bt))throw ia();Ne(this,bt).set(ut,e);const t=Ne(this,bt).get(Ve),n=t.state.reconfigure({plugins:e});t.updateState(n),Ne(this,bt).get(Ce).flush(Ne(this,bt))};const Lhe=(e,{injectGlobal:t})=>{const n=(i,o=1)=>e.get(Mt,[i,o]),r=e.get(Be,"lineWidth");t`
        .milkdown .paragraph {
            overflow: visible;
        }
        /* this is a rough fix for the first cursor position when the first paragraph is empty */
        .ProseMirror > .ProseMirror-yjs-cursor:first-child {
            margin-top: 1em;
        }
        .ProseMirror p:first-child,
        .ProseMirror h1:first-child,
        .ProseMirror h2:first-child,
        .ProseMirror h3:first-child,
        .ProseMirror h4:first-child,
        .ProseMirror h5:first-child,
        .ProseMirror h6:first-child {
            margin-top: 1em;
        }
        /* This gives the remote user caret. The colors are automatically overwritten*/
        .ProseMirror-yjs-cursor {
            position: relative;
            margin-left: -${r};
            margin-right: -${r};
            ${e.get(ct,"left")};
            ${e.get(ct,"right")};
            word-break: normal;
            pointer-events: none;
        }
        /* This renders the username above the caret */
        .ProseMirror-yjs-cursor > div {
            position: absolute;
            top: -1.05em;
            left: -${r};
            font-size: 13px;
            background-color: ${n("background")};
            font-family: serif;
            font-style: normal;
            font-weight: normal;
            line-height: normal;
            user-select: none;
            color: white;
            padding-left: 2px;
            padding-right: 2px;
            white-space: nowrap;
        }
    `},Kx=Q(new Gx,"collabServiceCtx"),lw=On("CollabReady"),$he=e=>{const t=new Gx;return e.inject(Kx,t).record(lw),async n=>{await n.wait(Jo);const r=n.get(Ce),i=n.get(ui);r.onFlush(()=>{Lhe(r,i)}),await n.wait(Qi),t.bindCtx(n),n.done(lw)}},Ihe=new Map;class Rhe{constructor(t){this.room=t,this.onmessage=null,jce(n=>n.key===t&&this.onmessage!==null&&this.onmessage({data:hue(n.newValue||"")}))}postMessage(t){zD.setItem(this.room,due(sue(t)))}}const Bhe=typeof BroadcastChannel>"u"?Rhe:BroadcastChannel,hg=e=>_r(Ihe,e,()=>{const t=new Set,n=new Bhe(e);return n.onmessage=r=>t.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:t}}),Phe=(e,t)=>hg(e).subs.add(t),jhe=(e,t)=>hg(e).subs.delete(t),Lo=(e,t,n=null)=>{const r=hg(e);r.bc.postMessage(t),r.subs.forEach(i=>i(t,n))},Jx=0,fg=1,Yx=2,xp=(e,t)=>{J(e,Jx);const n=Zue(t);Ye(e,n)},Xx=(e,t,n)=>{J(e,fg),Ye(e,ux(t,n))},zhe=(e,t,n)=>Xx(t,n,Ft(e)),Qx=(e,t,n)=>{try{cx(t,Ft(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},Vhe=(e,t)=>{J(e,Yx),Ye(e,t)},Uhe=Qx,qhe=(e,t,n,r)=>{const i=ie(e);switch(i){case Jx:zhe(e,t,n);break;case fg:Qx(e,n,r);break;case Yx:Uhe(e,n,r);break;default:throw new Error("Unknown message type")}return i},Whe=0,Hhe=(e,t,n)=>{switch(ie(e)){case Whe:n(t,yi(e))}},Ghe=e=>zce(e,(t,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(t)}`).join("&"),Vi=0,Zx=3,ns=1,Khe=2,Ml=[];Ml[Vi]=(e,t,n,r,i)=>{J(e,Vi);const o=qhe(t,e,n.doc,n);r&&o===fg&&!n.synced&&(n.synced=!0)};Ml[Zx]=(e,t,n,r,i)=>{J(e,ns),Ye(e,ba(n.awareness,Array.from(n.awareness.getStates().keys())))};Ml[ns]=(e,t,n,r,i)=>{rhe(n.awareness,Ft(t),n)};Ml[Khe]=(e,t,n,r,i)=>{Hhe(t,n.doc,(o,s)=>Jhe(n,s))};const cw=3e4,Jhe=(e,t)=>console.warn(`Permission denied to access ${e.url}.
${t}`),eC=(e,t,n)=>{const r=Mi(t),i=Tt(),o=ie(r),s=e.messageHandlers[o];return s?s(i,r,e,n,o):console.error("Unable to compute message"),i},tC=e=>{if(e.shouldConnect&&e.ws===null){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=vi();const r=eC(e,new Uint8Array(n.data),!0);zm(r)>1&&t.send(We(r))},t.onerror=n=>{e.emit("connection-error",[n,e])},t.onclose=n=>{e.emit("connection-close",[n,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,cg(e.awareness,Array.from(e.awareness.getStates().keys()).filter(r=>r!==e.doc.clientID),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(tC,bi(Tce(2,e.wsUnsuccessfulReconnects)*100,e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=vi(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const n=Tt();if(J(n,Vi),xp(n,e.doc),t.send(We(n)),e.awareness.getLocalState()!==null){const r=Tt();J(r,ns),Ye(r,ba(e.awareness,[e.doc.clientID])),t.send(We(r))}},e.emit("status",[{status:"connecting"}])}},Lh=(e,t)=>{e.wsconnected&&e.ws.send(t),e.bcconnected&&Lo(e.bcChannel,t,e)};class Yhe extends id{constructor(t,n,r,{connect:i=!0,awareness:o=new nhe(r),params:s={},WebSocketPolyfill:a=WebSocket,resyncInterval:l=-1,maxBackoffTime:c=2500,disableBc:u=!1}={}){for(super();t[t.length-1]==="/";)t=t.slice(0,t.length-1);const d=Ghe(s);this.maxBackoffTime=c,this.bcChannel=t+"/"+n,this.url=t+"/"+n+(d.length===0?"":"?"+d),this.roomname=n,this.doc=r,this._WS=a,this.awareness=o,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=u,this.wsUnsuccessfulReconnects=0,this.messageHandlers=Ml.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,l>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const h=Tt();J(h,Vi),xp(h,r),this.ws.send(We(h))}},l)),this._bcSubscriber=(h,f)=>{if(f!==this){const p=eC(this,new Uint8Array(h),!1);zm(p)>1&&Lo(this.bcChannel,We(p),this)}},this._updateHandler=(h,f)=>{if(f!==this){const p=Tt();J(p,Vi),Vhe(p,h),Lh(this,We(p))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:h,updated:f,removed:p},m)=>{const b=h.concat(f).concat(p),y=Tt();J(y,ns),Ye(y,ba(o,b)),Lh(this,We(y))},this._unloadHandler=()=>{cg(this.awareness,[r.clientID],"window unload")},typeof window<"u"?window.addEventListener("unload",this._unloadHandler):typeof process<"u"&&process.on("exit",this._unloadHandler),o.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&cw<vi()-this.wsLastMessageReceived&&this.ws.close()},cw/10),i&&this.connect()}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),typeof window<"u"?window.removeEventListener("unload",this._unloadHandler):typeof process<"u"&&process.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(Phe(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const t=Tt();J(t,Vi),xp(t,this.doc),Lo(this.bcChannel,We(t),this);const n=Tt();J(n,Vi),Xx(n,this.doc),Lo(this.bcChannel,We(n),this);const r=Tt();J(r,Zx),Lo(this.bcChannel,We(r),this);const i=Tt();J(i,ns),Ye(i,ba(this.awareness,[this.doc.clientID])),Lo(this.bcChannel,We(i),this)}disconnectBc(){const t=Tt();J(t,ns),Ye(t,ba(this.awareness,[this.doc.clientID],new Map)),Lh(this,We(t)),this.bcconnected&&(jhe(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(tC(this),this.connectBc())}}const Xhe=["#1aadff","#00bd6f","#1a62ff","#1ad6ff","#ff7a1a","#d0d32f","#ff1ab2","#811aff","#ff281a","#4127e8","#ff1a5e","#1cd1c6"],Qhe=(e,t)=>{const n=e.filter(r=>!t.includes(r));return n.length?n[Math.floor(Math.random()*n.length)]:e[Math.floor(Math.random()*e.length)]},Zhe=()=>{const e=typeof useStrapiUser=="function"&&useStrapiUser();return oe(e)||{username:"Anonymous"}},efe=e=>{const t=Zhe().username;e.setLocalStateField("user",{name:t});const n=()=>{e.off("change",n);const r=Array.from(e.getStates().values()).map(o=>o.user.color).filter(Boolean),i=Qhe(Xhe,r);e.setLocalStateField("user",{name:t,color:i})};e.on("change",n)};let ko,Ii;const uw=e=>t=>{const n=Jw().public.ywsUrl,r=t.get(Kx).bindCtx(t),{key:i,markdown:o}=oe(e.content);r.disconnect(),ko==null||ko.destroy(),Ii==null||Ii.destroy(),ko=new mo,Ii=new Yhe(n,i,ko),efe(Ii.awareness),r.bindDoc(ko).setAwareness(Ii.awareness),Ii.once("synced",s=>{s&&(r.applyTemplate(o).connect(),I_(o)(t))})},tfe=$he;function pg({id:e,schema:t,commands:n,view:r}){return ht(()=>({id:e,schema:t,commands:n,view:i=>{const s=i.get(MD)(r)(i);return(a,l,c,u,d)=>{const h=s(a,l,c,u,d);return h.update=f=>{const p=a.attrs.skipUpdate;return delete a.attrs.skipUpdate,p||a.sameMarkup(f)},h.ignoreMutation=f=>f.type!=="selection"&&(!h.contentDOM||!h.contentDOM.contains(f.target)),h}}}))}const dw={adjustments:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4",duplicate:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2",trash:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},nfe={xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},rfe=["d"],nC=Ht({__name:"Icon",props:{name:{type:String,required:!0,validator:e=>Boolean(dw[e])}},setup(e){const t=e,n=ot(()=>dw[t.name]);return(r,i)=>(pe(),Oe("svg",nfe,[kt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:oe(n)},null,8,rfe)]))}}),rC=Vt(null),ife=L_(()=>new ye({key:new _e("MDC_FOCUS"),view:e=>({update:({state:t})=>{const n=ul(wu)(t.selection);rC.value=n&&n.pos}})})),ofe=({node:e,view:t,getPos:n})=>{const r=t.state.tr;return r.insert(n()+e.nodeSize,e.copy(e.content)),r},iC=({node:e,view:t,getPos:n})=>{const r=t.state.tr,i=n();return r.replaceRangeWith(i,i+e.content.size,t.state.schema.nodes.paragraph.create()),r.setSelection(ne.create(r.doc,i+1)),r};function mg(){const{view:e,getPos:t,...n}=LS(),r=oe(n.node),i=Vt(!1);zv(()=>{i.value=rC.value===t()});const o=(c,{skipUpdate:u}={skipUpdate:!1})=>{r.attrs.skipUpdate=u,i.value=!1,e.dispatch(c({node:e.state.doc.nodeAt(t()),view:e,getPos:t}))};return{node:r,isFocused:i,duplicate:()=>o(ofe),remove:()=>o(iC),updateAttributes:c=>o(({node:u,view:d,getPos:h})=>d.state.tr.setNodeMarkup(h(),void 0,{...u.attrs,...c({props:{...u.attrs.props}})}),{skipUpdate:!0})}}const sfe={class:"flex items-center h-5"},afe=["id","name","required","value","disabled"],lfe={key:0,class:"ml-3 text-sm"},cfe=["for"],ufe={name:"UCheckbox"},dfe=Ht({...ufe,props:{value:{type:[String,Number,Boolean],default:null},modelValue:{type:[Boolean,Array],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},wrapperClass:{type:String,default:()=>le.checkbox.wrapper},baseClass:{type:String,default:()=>le.checkbox.base},labelClass:{type:String,default:()=>le.checkbox.label},requiredClass:{type:String,default:()=>le.checkbox.required},helpClass:{type:String,default:()=>le.checkbox.help},customClass:{type:String,default:null}},emits:["update:modelValue","focus","blur"],setup(e,{emit:t}){const n=e,r=ot({get(){return n.modelValue},set(o){t("update:modelValue",o)}}),i=ot(()=>_a(n.baseClass,n.customClass));return(o,s)=>(pe(),Oe("div",{class:$e(e.wrapperClass)},[kt("div",sfe,[Yw(kt("input",{id:e.name,"onUpdate:modelValue":s[0]||(s[0]=a=>tf(r)?r.value=a:null),name:e.name,required:e.required,value:e.value,disabled:e.disabled,type:"checkbox",class:$e(oe(i)),onFocus:s[1]||(s[1]=a=>o.$emit("focus",a)),onBlur:s[2]||(s[2]=a=>o.$emit("blur",a))},null,42,afe),[[Vv,oe(r)]])]),e.label||o.$slots.label?(pe(),Oe("div",lfe,[kt("label",{for:e.name,class:$e(e.labelClass)},[Hi(o.$slots,"label",{},()=>[nf(ur(e.label),1)]),e.required?(pe(),Oe("span",{key:0,class:$e(e.requiredClass)},"*",2)):Zt("",!0)],10,cfe),e.help?(pe(),Oe("p",{key:0,class:$e(e.helpClass)},ur(e.help),3)):Zt("",!0)])):Zt("",!0)],2))}}),hfe=["id","name","value","required","disabled"],ffe=["value","label"],pfe=["value","selected","disabled","textContent"],mfe=["value","selected","disabled","textContent"],gfe={name:"USelect"},bfe=Ht({...gfe,props:{modelValue:{type:[String,Number,Object],default:""},name:{type:String,required:!0},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},options:{type:Array,default:()=>[]},size:{type:String,default:"md",validator(e){return Object.keys(le.select.size).includes(e)}},wrapperClass:{type:String,default:()=>le.select.wrapper},baseClass:{type:String,default:()=>le.select.base},iconBaseClass:{type:String,default:()=>le.select.icon.base},customClass:{type:String,default:null},appearance:{type:String,default:"default",validator(e){return Object.keys(le.select.appearance).includes(e)}},textAttribute:{type:String,default:"text"},valueAttribute:{type:String,default:"value"},icon:{type:String,default:null}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=f=>{t("update:modelValue",f)},i=f=>Ll(f,n.valueAttribute,Ll(f,n.textAttribute)),o=f=>Ll(f,n.textAttribute,Ll(f,n.valueAttribute)),s=f=>["string","number","boolean"].includes(typeof f)?{[n.valueAttribute]:f,[n.textAttribute]:f}:{...f,[n.valueAttribute]:i(f),[n.textAttribute]:o(f)},a=ot(()=>n.options.map(f=>s(f))),l=ot(()=>n.placeholder?[{[n.valueAttribute]:"",[n.textAttribute]:n.placeholder,disabled:!0},...a.value]:a.value),c=ot(()=>{const f=s(n.modelValue),p=l.value.find(m=>m[n.valueAttribute]===f[n.valueAttribute]);return p?p[n.valueAttribute]:""}),u=ot(()=>_a(n.baseClass,le.select.size[n.size],le.select.spacing[n.size],le.select.appearance[n.appearance],!!n.icon&&le.select.leading.spacing[n.size],le.select.trailing.spacing[n.size],n.customClass)),d=ot(()=>_a(n.iconBaseClass,le.select.icon.size[n.size],!!n.icon&&le.select.icon.leading.spacing[n.size])),h=le.select.icon.leading.wrapper;return(f,p)=>(pe(),Oe("div",{class:$e(e.wrapperClass)},[kt("select",{id:e.name,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled,class:$e(oe(u)),onInput:p[0]||(p[0]=m=>r(m.target.value))},[(pe(!0),Oe(Uo,null,Da(oe(l),(m,b)=>(pe(),Oe(Uo,null,[m.children?(pe(),Oe("optgroup",{key:`${m[e.valueAttribute]}-optgroup-${b}`,value:m[e.valueAttribute],label:m[e.textAttribute]},[(pe(!0),Oe(Uo,null,Da(m.children,(y,k)=>(pe(),Oe("option",{key:`${y[e.valueAttribute]}-${b}-${k}`,value:y[e.valueAttribute],selected:y[e.valueAttribute]===oe(c),disabled:y.disabled,textContent:ur(y[e.textAttribute])},null,8,pfe))),128))],8,ffe)):(pe(),Oe("option",{key:`${m[e.valueAttribute]}-${b}`,value:m[e.valueAttribute],selected:m[e.valueAttribute]===oe(c),disabled:m.disabled,textContent:ur(m[e.textAttribute])},null,8,mfe))],64))),256))],42,hfe),e.icon?(pe(),Oe("div",{key:0,class:$e(oe(h))},[An(rf,{name:e.icon,class:$e(oe(d))},null,8,["name","class"])],2)):Zt("",!0)],2))}}),yfe=["id","name","value","type","required","placeholder","disabled","readonly","autocomplete","spellcheck"],wfe={name:"UInput"},kfe=Ht({...wfe,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},name:{type:String,required:!0},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autocomplete:{type:String,default:null},spellcheck:{type:Boolean,default:null},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>le.input.icon.loading},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},size:{type:String,default:"md",validator(e){return Object.keys(le.input.size).includes(e)}},wrapperClass:{type:String,default:()=>le.input.wrapper},baseClass:{type:String,default:()=>le.input.base},iconBaseClass:{type:String,default:()=>le.input.icon.base},customClass:{type:String,default:null},appearance:{type:String,default:"default",validator(e){return Object.keys(le.input.appearance).includes(e)}},loading:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur"],setup(e,{emit:t}){const n=e,r=Vt(null),i=()=>{var f;n.autofocus&&((f=r.value)==null||f.focus())},o=f=>{t("update:modelValue",f)};Kw(()=>{setTimeout(()=>{i()},100)});const s=ot(()=>n.icon&&n.leading||n.icon&&!n.trailing||n.loading&&!n.trailing),a=ot(()=>n.icon&&n.trailing||n.loading&&n.trailing),l=ot(()=>_a(n.baseClass,le.input.size[n.size],le.input.spacing[n.size],le.input.appearance[n.appearance],s.value&&le.input.leading.spacing[n.size],a.value&&le.input.trailing.spacing[n.size],n.customClass)),c=ot(()=>n.loading?n.loadingIcon:n.icon),u=ot(()=>_a(n.iconBaseClass,le.input.icon.size[n.size],s.value&&le.input.icon.leading.spacing[n.size],a.value&&le.input.icon.trailing.spacing[n.size],n.loading&&"animate-spin")),d=le.input.icon.leading.wrapper,h=le.input.icon.trailing.wrapper;return(f,p)=>(pe(),Oe("div",{class:$e(e.wrapperClass)},[kt("input",{id:e.name,ref_key:"input",ref:r,name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,autocomplete:e.autocomplete,spellcheck:e.spellcheck,class:$e(oe(l)),onInput:p[0]||(p[0]=m=>o(m.target.value)),onFocus:p[1]||(p[1]=m=>f.$emit("focus",m)),onBlur:p[2]||(p[2]=m=>f.$emit("blur",m))},null,42,yfe),Hi(f.$slots,"default"),oe(s)?(pe(),Oe("div",{key:0,class:$e(oe(d))},[oe(c)?(pe(),Or(rf,{key:0,name:oe(c),class:$e(oe(u))},null,8,["name","class"])):Zt("",!0)],2)):Zt("",!0),oe(a)?(pe(),Oe("div",{key:1,class:$e(oe(h))},[oe(c)?(pe(),Or(rf,{key:0,name:oe(c),class:$e(oe(u))},null,8,["name","class"])):Zt("",!0)],2)):Zt("",!0)],2))}}),_fe=["for"],Dfe={name:"UFormGroup"},xfe=Ht({...Dfe,props:{name:{type:String,default:null},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},hint:{type:String,default:null},wrapperClass:{type:String,default:()=>le.formGroup.wrapper},containerClass:{type:String,default:()=>le.formGroup.container},labelClass:{type:String,default:()=>le.formGroup.label},labelWrapperClass:{type:String,default:()=>le.formGroup.labelWrapper},descriptionClass:{type:String,default:()=>le.formGroup.description},requiredClass:{type:String,default:()=>le.formGroup.required},hintClass:{type:String,default:()=>le.formGroup.hint},helpClass:{type:String,default:()=>le.formGroup.help}},setup(e){return(t,n)=>(pe(),Oe("div",{class:$e(e.wrapperClass)},[e.label||t.$slots.label?(pe(),Oe("div",{key:0,class:$e(e.labelWrapperClass)},[kt("label",{for:e.name,class:$e(e.labelClass)},[Hi(t.$slots,"label",{},()=>[nf(ur(e.label),1)]),e.required?(pe(),Oe("span",{key:0,class:$e(e.requiredClass)},"*",2)):Zt("",!0)],10,_fe),t.$slots.hint||e.hint?(pe(),Oe("span",{key:0,class:$e(e.hintClass)},[Hi(t.$slots,"hint",{},()=>[nf(ur(e.hint),1)])],2)):Zt("",!0)],2)):Zt("",!0),e.description?(pe(),Oe("p",{key:1,class:$e(e.descriptionClass)},ur(e.description),3)):Zt("",!0),kt("div",{class:$e(!!e.label&&e.containerClass)},[Hi(t.$slots,"default"),e.help?(pe(),Oe("p",{key:0,class:$e(e.helpClass)},ur(e.help),3)):Zt("",!0)],2)],2))}}),Cfe=Ht({__name:"MarkdownComponentPropField",props:{schema:{type:Object,required:!0},value:{type:[String,Boolean,Number],default:e=>typeof e.schema.default<"u"&&e.schema.default!==null?e.schema.default:void 0}},emits:["change"],setup(e,{emit:t}){const n=e,r=ot(()=>n.schema.name),i=ot(()=>n.schema.type),o=ot(()=>$m(r.value)),s=a=>{t("change",a)};return(a,l)=>{const c=dfe,u=bfe,d=kfe,h=xfe;return pe(),Or(h,{name:oe(r),label:oe(o),"label-class":"text-xs font-medium u-text-gray-900"},{default:Uv(()=>[oe(i)==="boolean"?(pe(),Or(c,{key:0,name:oe(r),"model-value":e.value,size:"xs","onUpdate:modelValue":s},null,8,["name","model-value"])):e.schema.values&&Array.isArray(e.schema.values)&&e.schema.values.length?(pe(),Or(u,{key:1,name:oe(r),"model-value":e.value,options:e.schema.values,size:"xs","onUpdate:modelValue":s},null,8,["name","model-value","options"])):(pe(),Or(d,{key:2,name:oe(r),type:oe(i)==="number"?"number":"text","model-value":e.value,size:"xs","onUpdate:modelValue":s,onKeydown:l[0]||(l[0]=vg(()=>{},["stop"])),onPaste:l[1]||(l[1]=vg(()=>{},["stop"]))},null,8,["name","type","model-value"]))]),_:1},8,["name","label"])}}}),vfe=Ht({components:{MarkdownComponentPropField:Cfe},setup(){var o,s;const{node:e,updateAttributes:t}=mg(),n=({schema:{name:a,default:l,type:c},value:u})=>{t(({props:d})=>(typeof l<"u"&&l===u?(delete d[a],delete d[`:${a}`]):d[c==="string"?a:`:${a}`]=u,{props:d}))};return{schemas:((s=(o=e.attrs.schema)==null?void 0:o.props)!=null?s:[]).filter(({type:a})=>typeof a=="string"),props:e.attrs.props,updateProp:n}}}),Sfe={class:"flex flex-wrap items-center gap-2 my-2","data-test":"props-panel"};function Efe(e,t,n,r,i,o){const s=qv("MarkdownComponentPropField");return pe(),Oe("div",Sfe,[(pe(!0),Oe(Uo,null,Da(e.schemas,a=>(pe(),Or(s,{key:a.name,schema:a,value:e.props[a.name]||e.props[`:${a.name}`],onChange:l=>e.updateProp({schema:a,value:l})},null,8,["schema","value","onChange"]))),128))])}const Afe=Hv(vfe,[["render",Efe]]),Ffe={class:"flex items-center justify-between h-6"},Tfe={class:"text-xs font-semibold u-text-gray-900",contenteditable:"false"},Mfe=["data-test","onClick"],oC=Ht({__name:"MarkdownComponent",setup(e){const{node:t,isFocused:n,duplicate:r,remove:i}=mg(),o=t.attrs.schema,s=$m(t.attrs.name),a=o&&o.props.length>0,l=Vt(!1),c=Vt(!0),u=[{icon:"trash",onClick:i},{icon:"duplicate",onClick:r}];return(d,h)=>(pe(),Oe("div",{class:$e(["px-4 py-3 my-4 border rounded-md u-bg-white",oe(n)?"border-primary-500":"u-border-gray-200"]),"data-test":"markdown-component",onMouseenter:h[0]||(h[0]=f=>l.value=!0),onMouseleave:h[1]||(h[1]=f=>l.value=!1)},[kt("div",Ffe,[kt("span",Tfe,ur(oe(s)),1),kt("div",{class:$e(["flex flex-row items-center justify-center transition-opacity duration-200",{"opacity-0":!l.value}]),"data-test":"actions"},[(pe(),Oe(Uo,null,Da(u,({icon:f,onClick:p})=>kt("button",{key:f,class:"p-1 u-text-gray-500 hover:u-text-gray-700 focus:u-text-gray-700","data-test":f,onClick:p},[An(nC,{name:f},null,8,["name"])],8,Mfe)),64))],2)]),oe(a)?Yw((pe(),Or(Afe,{key:0},null,512)),[[Wv,c.value]]):Zt("",!0),kt("div",null,[Hi(d.$slots,"default")])],34))}}),sC=we(),aC={name:{},props:{},propsInfo:{default:{inline:[],frontMatter:[]}},schema:{default:void 0}},lC=(e,t)=>({match:n=>n.type===t,runner:(n,r,i)=>{const o=r.data.hName,s=r.data.hProperties,a={inline:Object.keys(r.attributes),frontMatter:Object.keys(r.fmAttributes)},l=e.get(rd).find(c=>Rn(c.name)===Rn(o));n.openNode(i,{name:o,props:s,propsInfo:a,schema:l}),n.next(r.children),n.closeNode()}}),Ofe=({props:e,propsInfo:{frontMatter:t}})=>{const n={},r={};for(const i in e)t.includes(i.startsWith(":")?i.slice(1):i)?r[i]=e[i]:n[i]=e[i];return{attributes:n,fmAttributes:r}},cC=e=>({match:t=>t.type.name===e,runner:(t,n)=>{t.openNode(e,void 0,{name:n.attrs.name,...Ofe(n.attrs)}),n.content.size&&t.next(n.content),t.closeNode()}}),uC="containerComponent",Nfe=pg({id:uC,schema:e=>({group:"block",content:"block*",attrs:aC,parseDOM:[{tag:"div "}],toDOM:()=>["div"],parseMarkdown:lC(e,"containerComponent"),toMarkdown:cC("containerComponent")}),view:oC,commands:e=>[be(sC,t=>t?fr(e,{name:Rn(t.name),props:{},schema:t}):()=>!1)]}),dC="textComponent",Lfe=pg({id:dC,schema:e=>({group:"inline",content:"inline*",inline:!0,attrs:aC,parseMarkdown:lC(e,"textComponent"),toMarkdown:cC("textComponent")}),view:oC}),$fe={class:"flex items-center justify-between h-6"},Ife={class:"text-xs font-semibold u-text-gray-900"},Rfe=["data-test","onClick"],Bfe=Ht({__name:"MarkdownSlot",setup(e){const{node:t,isFocused:n,remove:r}=mg(),i=$m(t.attrs.name),o=Vt(!1),s=[{icon:"trash",onClick:r}];return(a,l)=>(pe(),Oe("div",{class:$e(["px-4 py-2 my-2 border rounded-md u-bg-white",oe(n)?"border-primary-500":"u-border-gray-200"]),"data-test":"markdown-slot",onMouseenter:l[0]||(l[0]=c=>o.value=!0),onMouseleave:l[1]||(l[1]=c=>o.value=!1)},[kt("div",$fe,[kt("span",Ife,ur(oe(i)),1),kt("div",{class:$e(["flex flex-row items-center justify-center transition-opacity duration-200",{"opacity-0":!o.value}]),"data-test":"actions"},[(pe(),Oe(Uo,null,Da(s,({icon:c,onClick:u})=>kt("button",{key:c,class:"p-1 -mr-2 u-text-gray-500 hover:u-text-gray-700 focus:u-text-gray-700","data-test":c,onClick:u},[An(nC,{name:c},null,8,["name"])],8,Rfe)),64))],2)]),Hi(a.$slots,"default")],34))}}),hC=we(),Cp="componentSlot",Pfe=pg({id:Cp,schema:()=>({group:"block",content:"block*",attrs:{name:{}},parseMarkdown:{match:({type:e})=>["componentContainerSection"].includes(e),runner:(e,t,n)=>{e.openNode(n,{name:t.name}),e.next(t.children),e.closeNode()}},toMarkdown:{match:({type:e})=>e.name===Cp,runner:(e,t)=>{const{name:n}=t.attrs;e.openNode("componentContainerSection",void 0,{name:n}),e.next(t.content),e.closeNode()}}}),commands:e=>[be(hC,t=>fr(e,{name:Rn(t.name)}))],view:Bfe}),jc=e=>[uC,dC].includes(e.type.name),vp=e=>e.type.name===Cp,wu=e=>jc(e)||vp(e),jfe=Gt.create([Nfe(),Lfe(),Pfe()]),zfe=L_(()=>lo({Backspace:(e,t,n)=>{const{$from:r}=e.selection;if(r.parentOffset>0)return!1;const i=r.node(r.depth-1);return!i||i.firstChild!==r.parent||!wu(i)?!1:(t(iC({node:i,view:n,getPos:()=>r.pos-(i.nodeSize-i.content.size)})),!0)},Enter:(e,t,n)=>{const{$from:r}=e.selection;return r.parent.content.size>0||!wu(r.node(r.depth-1))?!1:dl(C_,v_,S_)(e,t,n)}}));/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function fC(e){return typeof e>"u"||e===null}function Vfe(e){return typeof e=="object"&&e!==null}function Ufe(e){return Array.isArray(e)?e:fC(e)?[]:[e]}function qfe(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function Wfe(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function Hfe(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Gfe=fC,Kfe=Vfe,Jfe=Ufe,Yfe=Wfe,Xfe=Hfe,Qfe=qfe,st={isNothing:Gfe,isObject:Kfe,toArray:Jfe,repeat:Yfe,isNegativeZero:Xfe,extend:Qfe};function pC(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function Ka(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=pC(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ka.prototype=Object.create(Error.prototype);Ka.prototype.constructor=Ka;Ka.prototype.toString=function(t){return this.name+": "+pC(this,t)};var zt=Ka;function $h(e,t,n,r,i){var o="",s="",a=Math.floor(i/2)-1;return r-t>a&&(o=" ... ",t=r-a+o.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:o+e.slice(t,n).replace(/\t/g,"\u2192")+s,pos:r-t+o.length}}function Ih(e,t){return st.repeat(" ",t-e.length)+e}function Zfe(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,s=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",l,c,u=Math.min(e.line+t.linesAfter,i.length).toString().length,d=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)c=$h(e.buffer,r[s-l],i[s-l],e.position-(r[s]-r[s-l]),d),a=st.repeat(" ",t.indent)+Ih((e.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=$h(e.buffer,r[s],i[s],e.position,d),a+=st.repeat(" ",t.indent)+Ih((e.line+1).toString(),u)+" | "+c.str+`
`,a+=st.repeat("-",t.indent+u+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=i.length);l++)c=$h(e.buffer,r[s+l],i[s+l],e.position-(r[s]-r[s+l]),d),a+=st.repeat(" ",t.indent)+Ih((e.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var epe=Zfe,tpe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],npe=["scalar","sequence","mapping"];function rpe(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function ipe(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(tpe.indexOf(n)===-1)throw new zt('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=rpe(t.styleAliases||null),npe.indexOf(this.kind)===-1)throw new zt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var xt=ipe;function hw(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,s){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=s)}),n[i]=r}),n}function ope(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function Sp(e){return this.extend(e)}Sp.prototype.extend=function(t){var n=[],r=[];if(t instanceof xt)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new zt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof xt))throw new zt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new zt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new zt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof xt))throw new zt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Sp.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=hw(i,"implicit"),i.compiledExplicit=hw(i,"explicit"),i.compiledTypeMap=ope(i.compiledImplicit,i.compiledExplicit),i};var mC=Sp,gC=new xt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),bC=new xt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),yC=new xt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),wC=new mC({explicit:[gC,bC,yC]});function spe(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function ape(){return null}function lpe(e){return e===null}var kC=new xt("tag:yaml.org,2002:null",{kind:"scalar",resolve:spe,construct:ape,predicate:lpe,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function cpe(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function upe(e){return e==="true"||e==="True"||e==="TRUE"}function dpe(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var _C=new xt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:cpe,construct:upe,predicate:dpe,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function hpe(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function fpe(e){return 48<=e&&e<=55}function ppe(e){return 48<=e&&e<=57}function mpe(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!hpe(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!fpe(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!ppe(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function gpe(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function bpe(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!st.isNegativeZero(e)}var DC=new xt("tag:yaml.org,2002:int",{kind:"scalar",resolve:mpe,construct:gpe,predicate:bpe,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ype=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function wpe(e){return!(e===null||!ype.test(e)||e[e.length-1]==="_")}function kpe(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var _pe=/^[-+]?[0-9]+e/;function Dpe(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(st.isNegativeZero(e))return"-0.0";return n=e.toString(10),_pe.test(n)?n.replace("e",".e"):n}function xpe(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||st.isNegativeZero(e))}var xC=new xt("tag:yaml.org,2002:float",{kind:"scalar",resolve:wpe,construct:kpe,predicate:xpe,represent:Dpe,defaultStyle:"lowercase"}),CC=wC.extend({implicit:[kC,_C,DC,xC]}),vC=CC,SC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),EC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Cpe(e){return e===null?!1:SC.exec(e)!==null||EC.exec(e)!==null}function vpe(e){var t,n,r,i,o,s,a,l=0,c=null,u,d,h;if(t=SC.exec(e),t===null&&(t=EC.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],d=+(t[11]||0),c=(u*60+d)*6e4,t[9]==="-"&&(c=-c)),h=new Date(Date.UTC(n,r,i,o,s,a,l)),c&&h.setTime(h.getTime()-c),h}function Spe(e){return e.toISOString()}var AC=new xt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Cpe,construct:vpe,instanceOf:Date,represent:Spe});function Epe(e){return e==="<<"||e===null}var FC=new xt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Epe}),gg=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ape(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=gg;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function Fpe(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=gg,s=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function Tpe(e){var t="",n=0,r,i,o=e.length,s=gg;for(r=0;r<o;r++)r%3===0&&r&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):i===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):i===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function Mpe(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var TC=new xt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ape,construct:Fpe,predicate:Mpe,represent:Tpe}),Ope=Object.prototype.hasOwnProperty,Npe=Object.prototype.toString;function Lpe(e){if(e===null)return!0;var t=[],n,r,i,o,s,a=e;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],s=!1,Npe.call(i)!=="[object Object]")return!1;for(o in i)if(Ope.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function $pe(e){return e!==null?e:[]}var MC=new xt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Lpe,construct:$pe}),Ipe=Object.prototype.toString;function Rpe(e){if(e===null)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],Ipe.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function Bpe(e){if(e===null)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var OC=new xt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Rpe,construct:Bpe}),Ppe=Object.prototype.hasOwnProperty;function jpe(e){if(e===null)return!0;var t,n=e;for(t in n)if(Ppe.call(n,t)&&n[t]!==null)return!1;return!0}function zpe(e){return e!==null?e:{}}var NC=new xt("tag:yaml.org,2002:set",{kind:"mapping",resolve:jpe,construct:zpe}),bg=vC.extend({implicit:[AC,FC],explicit:[TC,MC,OC,NC]}),Si=Object.prototype.hasOwnProperty,ku=1,LC=2,$C=3,_u=4,Rh=1,Vpe=2,fw=3,Upe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,qpe=/[\x85\u2028\u2029]/,Wpe=/[,\[\]\{\}]/,IC=/^(?:!|!!|![a-z\-]+!)$/i,RC=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function pw(e){return Object.prototype.toString.call(e)}function gr(e){return e===10||e===13}function no(e){return e===9||e===32}function rn(e){return e===9||e===32||e===10||e===13}function zo(e){return e===44||e===91||e===93||e===123||e===125}function Hpe(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Gpe(e){return e===120?2:e===117?4:e===85?8:0}function Kpe(e){return 48<=e&&e<=57?e-48:-1}function mw(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Jpe(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var BC=new Array(256),PC=new Array(256);for(var _o=0;_o<256;_o++)BC[_o]=mw(_o)?1:0,PC[_o]=mw(_o);function Ype(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||bg,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function jC(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=epe(n),new zt(t,n)}function G(e,t){throw jC(e,t)}function Du(e,t){e.onWarning&&e.onWarning.call(null,jC(e,t))}var gw={YAML:function(t,n,r){var i,o,s;t.version!==null&&G(t,"duplication of %YAML directive"),r.length!==1&&G(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&G(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&G(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&Du(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&G(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],IC.test(i)||G(t,"ill-formed tag handle (first argument) of the TAG directive"),Si.call(t.tagMap,i)&&G(t,'there is a previously declared suffix for "'+i+'" tag handle'),RC.test(o)||G(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{G(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function wi(e,t,n,r){var i,o,s,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||G(e,"expected valid JSON character");else Upe.test(a)&&G(e,"the stream contains non-printable characters");e.result+=a}}function bw(e,t,n,r){var i,o,s,a;for(st.isObject(n)||G(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),s=0,a=i.length;s<a;s+=1)o=i[s],Si.call(t,o)||(t[o]=n[o],r[o]=!0)}function Vo(e,t,n,r,i,o,s,a,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&G(e,"nested arrays are not supported inside keys"),typeof i=="object"&&pw(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&pw(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)bw(e,t,o[c],n);else bw(e,t,o,n);else!e.json&&!Si.call(n,i)&&Si.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,G(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function yg(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):G(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function et(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;no(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(gr(i))for(yg(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&Du(e,"deficient indentation"),r}function hd(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||rn(n)))}function wg(e,t){t===1?e.result+=" ":t>1&&(e.result+=st.repeat(`
`,t-1))}function Xpe(e,t,n){var r,i,o,s,a,l,c,u,d=e.kind,h=e.result,f;if(f=e.input.charCodeAt(e.position),rn(f)||zo(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(i=e.input.charCodeAt(e.position+1),rn(i)||n&&zo(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;f!==0;){if(f===58){if(i=e.input.charCodeAt(e.position+1),rn(i)||n&&zo(i))break}else if(f===35){if(r=e.input.charCodeAt(e.position-1),rn(r))break}else{if(e.position===e.lineStart&&hd(e)||n&&zo(f))break;if(gr(f))if(l=e.line,c=e.lineStart,u=e.lineIndent,et(e,!1,-1),e.lineIndent>=t){a=!0,f=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=c,e.lineIndent=u;break}}a&&(wi(e,o,s,!1),wg(e,e.line-l),o=s=e.position,a=!1),no(f)||(s=e.position+1),f=e.input.charCodeAt(++e.position)}return wi(e,o,s,!1),e.result?!0:(e.kind=d,e.result=h,!1)}function Qpe(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(wi(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else gr(n)?(wi(e,r,i,!0),wg(e,et(e,!1,t)),r=i=e.position):e.position===e.lineStart&&hd(e)?G(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);G(e,"unexpected end of the stream within a single quoted scalar")}function Zpe(e,t){var n,r,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return wi(e,n,e.position,!0),e.position++,!0;if(a===92){if(wi(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),gr(a))et(e,!1,t);else if(a<256&&BC[a])e.result+=PC[a],e.position++;else if((s=Gpe(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=Hpe(a))>=0?o=(o<<4)+s:G(e,"expected hexadecimal character");e.result+=Jpe(o),e.position++}else G(e,"unknown escape sequence");n=r=e.position}else gr(a)?(wi(e,n,r,!0),wg(e,et(e,!1,t)),n=r=e.position):e.position===e.lineStart&&hd(e)?G(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}G(e,"unexpected end of the stream within a double quoted scalar")}function eme(e,t){var n=!0,r,i,o,s=e.tag,a,l=e.anchor,c,u,d,h,f,p=Object.create(null),m,b,y,k;if(k=e.input.charCodeAt(e.position),k===91)u=93,f=!1,a=[];else if(k===123)u=125,f=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),k=e.input.charCodeAt(++e.position);k!==0;){if(et(e,!0,t),k=e.input.charCodeAt(e.position),k===u)return e.position++,e.tag=s,e.anchor=l,e.kind=f?"mapping":"sequence",e.result=a,!0;n?k===44&&G(e,"expected the node content, but found ','"):G(e,"missed comma between flow collection entries"),b=m=y=null,d=h=!1,k===63&&(c=e.input.charCodeAt(e.position+1),rn(c)&&(d=h=!0,e.position++,et(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,vs(e,t,ku,!1,!0),b=e.tag,m=e.result,et(e,!0,t),k=e.input.charCodeAt(e.position),(h||e.line===r)&&k===58&&(d=!0,k=e.input.charCodeAt(++e.position),et(e,!0,t),vs(e,t,ku,!1,!0),y=e.result),f?Vo(e,a,p,b,m,y,r,i,o):d?a.push(Vo(e,null,p,b,m,y,r,i,o)):a.push(m),et(e,!0,t),k=e.input.charCodeAt(e.position),k===44?(n=!0,k=e.input.charCodeAt(++e.position)):n=!1}G(e,"unexpected end of the stream within a flow collection")}function tme(e,t){var n,r,i=Rh,o=!1,s=!1,a=t,l=0,c=!1,u,d;if(d=e.input.charCodeAt(e.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)Rh===i?i=d===43?fw:Vpe:G(e,"repeat of a chomping mode identifier");else if((u=Kpe(d))>=0)u===0?G(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?G(e,"repeat of an indentation width identifier"):(a=t+u-1,s=!0);else break;if(no(d)){do d=e.input.charCodeAt(++e.position);while(no(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!gr(d)&&d!==0)}for(;d!==0;){for(yg(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),gr(d)){l++;continue}if(e.lineIndent<a){i===fw?e.result+=st.repeat(`
`,o?1+l:l):i===Rh&&o&&(e.result+=`
`);break}for(r?no(d)?(c=!0,e.result+=st.repeat(`
`,o?1+l:l)):c?(c=!1,e.result+=st.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=st.repeat(`
`,l):e.result+=st.repeat(`
`,o?1+l:l),o=!0,s=!0,l=0,n=e.position;!gr(d)&&d!==0;)d=e.input.charCodeAt(++e.position);wi(e,n,e.position,!1)}return!0}function yw(e,t){var n,r=e.tag,i=e.anchor,o=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,G(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!rn(s))));){if(a=!0,e.position++,et(e,!0,-1)&&e.lineIndent<=t){o.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,vs(e,t,$C,!1,!0),o.push(e.result),et(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)G(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function nme(e,t,n){var r,i,o,s,a,l,c=e.tag,u=e.anchor,d={},h=Object.create(null),f=null,p=null,m=null,b=!1,y=!1,k;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),k=e.input.charCodeAt(e.position);k!==0;){if(!b&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,G(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(k===63||k===58)&&rn(r))k===63?(b&&(Vo(e,d,h,f,p,null,s,a,l),f=p=m=null),y=!0,b=!0,i=!0):b?(b=!1,i=!0):G(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,k=r;else{if(s=e.line,a=e.lineStart,l=e.position,!vs(e,n,LC,!1,!0))break;if(e.line===o){for(k=e.input.charCodeAt(e.position);no(k);)k=e.input.charCodeAt(++e.position);if(k===58)k=e.input.charCodeAt(++e.position),rn(k)||G(e,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(Vo(e,d,h,f,p,null,s,a,l),f=p=m=null),y=!0,b=!1,i=!1,f=e.tag,p=e.result;else if(y)G(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=u,!0}else if(y)G(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=u,!0}if((e.line===o||e.lineIndent>t)&&(b&&(s=e.line,a=e.lineStart,l=e.position),vs(e,t,_u,!0,i)&&(b?p=e.result:m=e.result),b||(Vo(e,d,h,f,p,m,s,a,l),f=p=m=null),et(e,!0,-1),k=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&k!==0)G(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return b&&Vo(e,d,h,f,p,null,s,a,l),y&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=d),y}function rme(e){var t,n=!1,r=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&G(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(r=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):G(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!rn(s);)s===33&&(r?G(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),IC.test(i)||G(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),Wpe.test(o)&&G(e,"tag suffix cannot contain flow indicator characters")}o&&!RC.test(o)&&G(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{G(e,"tag name is malformed: "+o)}return n?e.tag=o:Si.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:G(e,'undeclared tag handle "'+i+'"'),!0}function ime(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&G(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!rn(n)&&!zo(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&G(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function ome(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!rn(r)&&!zo(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&G(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Si.call(e.anchorMap,n)||G(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],et(e,!0,-1),!0}function vs(e,t,n,r,i){var o,s,a,l=1,c=!1,u=!1,d,h,f,p,m,b;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=_u===n||$C===n,r&&et(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;rme(e)||ime(e);)et(e,!0,-1)?(c=!0,a=o,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||_u===n)&&(ku===n||LC===n?m=t:m=t+1,b=e.position-e.lineStart,l===1?a&&(yw(e,b)||nme(e,b,m))||eme(e,m)?u=!0:(s&&tme(e,m)||Qpe(e,m)||Zpe(e,m)?u=!0:ome(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&G(e,"alias node should not have any properties")):Xpe(e,m,ku===n)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=a&&yw(e,b))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&G(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,h=e.implicitTypes.length;d<h;d+=1)if(p=e.implicitTypes[d],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Si.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,f=e.typeMap.multi[e.kind||"fallback"],d=0,h=f.length;d<h;d+=1)if(e.tag.slice(0,f[d].tag.length)===f[d].tag){p=f[d];break}p||G(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&G(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):G(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function sme(e){var t=e.position,n,r,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(et(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!rn(s);)s=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&G(e,"directive name must not be less than one character in length");s!==0;){for(;no(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!gr(s));break}if(gr(s))break;for(n=e.position;s!==0&&!rn(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}s!==0&&yg(e),Si.call(gw,r)?gw[r](e,r,i):Du(e,'unknown document directive "'+r+'"')}if(et(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,et(e,!0,-1)):o&&G(e,"directives end mark is expected"),vs(e,e.lineIndent-1,_u,!1,!0),et(e,!0,-1),e.checkLineBreaks&&qpe.test(e.input.slice(t,e.position))&&Du(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&hd(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,et(e,!0,-1));return}if(e.position<e.length-1)G(e,"end of the stream or a document separator is expected");else return}function zC(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new Ype(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,G(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)sme(n);return n.documents}function ame(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=zC(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function lme(e,t){var n=zC(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new zt("expected a single document in the stream, but found more")}}var cme=ame,ume=lme,VC={loadAll:cme,load:ume},UC=Object.prototype.toString,qC=Object.prototype.hasOwnProperty,kg=65279,dme=9,Ja=10,hme=13,fme=32,pme=33,mme=34,Ep=35,gme=37,bme=38,yme=39,wme=42,WC=44,kme=45,xu=58,_me=61,Dme=62,xme=63,Cme=64,HC=91,GC=93,vme=96,KC=123,Sme=124,JC=125,It={};It[0]="\\0";It[7]="\\a";It[8]="\\b";It[9]="\\t";It[10]="\\n";It[11]="\\v";It[12]="\\f";It[13]="\\r";It[27]="\\e";It[34]='\\"';It[92]="\\\\";It[133]="\\N";It[160]="\\_";It[8232]="\\L";It[8233]="\\P";var Eme=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ame=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Fme(e,t){var n,r,i,o,s,a,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)s=r[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&qC.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function Tme(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new zt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+st.repeat("0",r-t.length)+t}var Mme=1,Ya=2;function Ome(e){this.schema=e.schema||bg,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=st.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Fme(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Ya:Mme,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ww(e,t){for(var n=st.repeat(" ",t),r=0,i=-1,o="",s,a=e.length;r<a;)i=e.indexOf(`
`,r),i===-1?(s=e.slice(r),r=a):(s=e.slice(r,i+1),r=i+1),s.length&&s!==`
`&&(o+=n),o+=s;return o}function Ap(e,t){return`
`+st.repeat(" ",e.indent*t)}function Nme(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function Cu(e){return e===fme||e===dme}function Xa(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==kg||65536<=e&&e<=1114111}function kw(e){return Xa(e)&&e!==kg&&e!==hme&&e!==Ja}function _w(e,t,n){var r=kw(e),i=r&&!Cu(e);return(n?r:r&&e!==WC&&e!==HC&&e!==GC&&e!==KC&&e!==JC)&&e!==Ep&&!(t===xu&&!i)||kw(t)&&!Cu(t)&&e===Ep||t===xu&&i}function Lme(e){return Xa(e)&&e!==kg&&!Cu(e)&&e!==kme&&e!==xme&&e!==xu&&e!==WC&&e!==HC&&e!==GC&&e!==KC&&e!==JC&&e!==Ep&&e!==bme&&e!==wme&&e!==pme&&e!==Sme&&e!==_me&&e!==Dme&&e!==yme&&e!==mme&&e!==gme&&e!==Cme&&e!==vme}function $me(e){return!Cu(e)&&e!==xu}function ra(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function YC(e){var t=/^\n* /;return t.test(e)}var XC=1,Fp=2,QC=3,ZC=4,$o=5;function Ime(e,t,n,r,i,o,s,a){var l,c=0,u=null,d=!1,h=!1,f=r!==-1,p=-1,m=Lme(ra(e,0))&&$me(ra(e,e.length-1));if(t||s)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=ra(e,l),!Xa(c))return $o;m=m&&_w(c,u,a),u=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=ra(e,l),c===Ja)d=!0,f&&(h=h||l-p-1>r&&e[p+1]!==" ",p=l);else if(!Xa(c))return $o;m=m&&_w(c,u,a),u=c}h=h||f&&l-p-1>r&&e[p+1]!==" "}return!d&&!h?m&&!s&&!i(e)?XC:o===Ya?$o:Fp:n>9&&YC(e)?$o:s?o===Ya?$o:Fp:h?ZC:QC}function Rme(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===Ya?'""':"''";if(!e.noCompatMode&&(Eme.indexOf(t)!==-1||Ame.test(t)))return e.quotingType===Ya?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;function l(c){return Nme(e,c)}switch(Ime(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!r,i)){case XC:return t;case Fp:return"'"+t.replace(/'/g,"''")+"'";case QC:return"|"+Dw(t,e.indent)+xw(ww(t,o));case ZC:return">"+Dw(t,e.indent)+xw(ww(Bme(t,s),o));case $o:return'"'+Pme(t)+'"';default:throw new zt("impossible error: invalid scalar style")}}()}function Dw(e,t){var n=YC(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function xw(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Bme(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,n.lastIndex=c,Cw(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=n.exec(e);){var a=s[1],l=s[2];o=l[0]===" ",r+=a+(!i&&!o&&l!==""?`
`:"")+Cw(l,t),i=o}return r}function Cw(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,s=0,a=0,l="";r=n.exec(e);)a=r.index,a-i>t&&(o=s>i?s:a,l+=`
`+e.slice(i,o),i=o+1),s=a;return l+=`
`,e.length-i>t&&s>i?l+=e.slice(i,s)+`
`+e.slice(s+1):l+=e.slice(i),l.slice(1)}function Pme(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=ra(e,i),r=It[n],!r&&Xa(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||Tme(n);return t}function jme(e,t,n){var r="",i=e.tag,o,s,a;for(o=0,s=n.length;o<s;o+=1)a=n[o],e.replacer&&(a=e.replacer.call(n,String(o),a)),(Ur(e,t,a,!1,!1)||typeof a>"u"&&Ur(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function vw(e,t,n,r){var i="",o=e.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],e.replacer&&(l=e.replacer.call(n,String(s),l)),(Ur(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&Ur(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Ap(e,t)),e.dump&&Ja===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function zme(e,t,n){var r="",i=e.tag,o=Object.keys(n),s,a,l,c,u;for(s=0,a=o.length;s<a;s+=1)u="",r!==""&&(u+=", "),e.condenseFlow&&(u+='"'),l=o[s],c=n[l],e.replacer&&(c=e.replacer.call(n,l,c)),Ur(e,t,l,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ur(e,t,c,!1,!1)&&(u+=e.dump,r+=u));e.tag=i,e.dump="{"+r+"}"}function Vme(e,t,n,r){var i="",o=e.tag,s=Object.keys(n),a,l,c,u,d,h;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new zt("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)h="",(!r||i!=="")&&(h+=Ap(e,t)),c=s[a],u=n[c],e.replacer&&(u=e.replacer.call(n,c,u)),Ur(e,t+1,c,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&Ja===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,d&&(h+=Ap(e,t)),Ur(e,t+1,u,!0,d)&&(e.dump&&Ja===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=o,e.dump=i||"{}"}function Sw(e,t,n){var r,i,o,s,a,l;for(i=n?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,UC.call(a.represent)==="[object Function]")r=a.represent(t,l);else if(qC.call(a.represent,l))r=a.represent[l](t,l);else throw new zt("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function Ur(e,t,n,r,i,o,s){e.tag=null,e.dump=n,Sw(e,n,!1)||Sw(e,n,!0);var a=UC.call(e.dump),l=r,c;r&&(r=e.flowLevel<0||e.flowLevel>t);var u=a==="[object Object]"||a==="[object Array]",d,h;if(u&&(d=e.duplicates.indexOf(n),h=d!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(i=!1),h&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(u&&h&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),a==="[object Object]")r&&Object.keys(e.dump).length!==0?(Vme(e,t,e.dump,i),h&&(e.dump="&ref_"+d+e.dump)):(zme(e,t,e.dump),h&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?vw(e,t-1,e.dump,i):vw(e,t,e.dump,i),h&&(e.dump="&ref_"+d+e.dump)):(jme(e,t,e.dump),h&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&Rme(e,e.dump,t,o,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new zt("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function Ume(e,t){var n=[],r=[],i,o;for(Tp(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function Tp(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)Tp(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)Tp(e[r[i]],t,n)}function qme(e,t){t=t||{};var n=new Ome(t);n.noRefs||Ume(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Ur(n,0,r,!0,!0)?n.dump+`
`:""}var Wme=qme,Hme={dump:Wme};function _g(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Gme=xt,Kme=mC,Jme=wC,Yme=CC,Xme=vC,Qme=bg,Zme=VC.load,ege=VC.loadAll,tge=Hme.dump,nge=zt,rge={binary:TC,float:xC,map:yC,null:kC,pairs:OC,set:NC,timestamp:AC,bool:_C,int:DC,merge:FC,omap:MC,seq:bC,str:gC},ige=_g("safeLoad","load"),oge=_g("safeLoadAll","loadAll"),sge=_g("safeDump","dump"),ev={Type:Gme,Schema:Kme,FAILSAFE_SCHEMA:Jme,JSON_SCHEMA:Yme,CORE_SCHEMA:Xme,DEFAULT_SCHEMA:Qme,load:Zme,loadAll:ege,dump:tge,YAMLException:nge,types:rge,safeLoad:ige,safeLoadAll:oge,safeDump:sge},tv=Qa;Qa.flatten=Qa;Qa.unflatten=iv;function nv(e){return e&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function rv(e){return e}function Qa(e,t){t=t||{};const n=t.delimiter||".",r=t.maxDepth,i=t.transformKey||rv,o={};function s(a,l,c){c=c||1,Object.keys(a).forEach(function(u){const d=a[u],h=t.safe&&Array.isArray(d),f=Object.prototype.toString.call(d),p=nv(d),m=f==="[object Object]"||f==="[object Array]",b=l?l+n+i(u):i(u);if(!h&&!p&&m&&Object.keys(d).length&&(!t.maxDepth||c<r))return s(d,b,c+1);o[b]=d})}return s(e),o}function iv(e,t){t=t||{};const n=t.delimiter||".",r=t.overwrite||!1,i=t.transformKey||rv,o={};if(nv(e)||Object.prototype.toString.call(e)!=="[object Object]")return e;function a(u){const d=Number(u);return isNaN(d)||u.indexOf(".")!==-1||t.object?u:d}function l(u,d,h){return Object.keys(h).reduce(function(f,p){return f[u+n+p]=h[p],f},d)}function c(u){const d=Object.prototype.toString.call(u),h=d==="[object Array]",f=d==="[object Object]";if(u){if(h)return!u.length;if(f)return!Object.keys(u).length}else return!0}return e=Object.keys(e).reduce(function(u,d){const h=Object.prototype.toString.call(e[d]);return!(h==="[object Object]"||h==="[object Array]")||c(e[d])?(u[d]=e[d],u):l(d,u,Qa(e[d],t))},{}),Object.keys(e).forEach(function(u){const d=u.split(n).map(i);let h=a(d.shift()),f=a(d[0]),p=o;for(;f!==void 0;){if(h==="__proto__")return;const m=Object.prototype.toString.call(p[h]),b=m==="[object Object]"||m==="[object Array]";if(!r&&!b&&typeof p[h]<"u")return;(r&&!b||!r&&p[h]==null)&&(p[h]=typeof f=="number"&&!t.object?[]:{}),p=p[h],d.length>0&&(h=a(d.shift()),f=a(d[0]))}p[h]=iv(e[u],t)}),o}function age(e,t){if(e=e.replace(t.subset?lge(t.subset):/["&'<>`]/g,r),t.subset||t.escapeOnly)return e;return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,r);function n(i,o,s){return t.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,s.charCodeAt(o+2),t)}function r(i,o,s){return t.format(i.charCodeAt(0),s.charCodeAt(o+1),t)}}function lge(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const cge=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"];function uge(e){return"&#x"+e.toString(16).toUpperCase()+";"}function dge(e,t){return age(e,Object.assign({format:uge},t))}const Ew={0:"\uFFFD",128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};function ov(e){const t=typeof e=="string"?e.charCodeAt(0):e;return t>=48&&t<=57}function hge(e){const t=typeof e=="string"?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}function fge(e){const t=typeof e=="string"?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}function Aw(e){return fge(e)||ov(e)}const Do=String.fromCharCode,pge=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function Dg(e,t={}){const n=typeof t.additional=="string"?t.additional.charCodeAt(0):t.additional,r=[];let i=0,o=-1,s="",a,l;t.position&&("start"in t.position||"indent"in t.position?(l=t.position.indent,a=t.position.start):a=t.position);let c=(a?a.line:0)||1,u=(a?a.column:0)||1,d=f(),h;for(i--;++i<=e.length;)if(h===10&&(u=(l?l[o]:0)||1),h=e.charCodeAt(i),h===38){const b=e.charCodeAt(i+1);if(b===9||b===10||b===12||b===32||b===38||b===60||Number.isNaN(b)||n&&b===n){s+=Do(h),u++;continue}const y=i+1;let k=y,_=y,S;if(b===35){_=++k;const A=e.charCodeAt(_);A===88||A===120?(S="hexadecimal",_=++k):S="decimal"}else S="named";let v="",g="",w="";const D=S==="named"?Aw:S==="decimal"?ov:hge;for(_--;++_<=e.length;){const A=e.charCodeAt(_);if(!D(A))break;w+=Do(A),S==="named"&&cge.includes(w)&&(v=w,g=Aa(w))}let x=e.charCodeAt(_)===59;if(x){_++;const A=S==="named"?Aa(w):!1;A&&(v=w,g=A)}let E=1+_-y,C="";if(!(!x&&t.nonTerminated===!1))if(!w)S!=="named"&&p(4,E);else if(S==="named"){if(x&&!g)p(5,1);else if(v!==w&&(_=k+v.length,E=1+_-k,x=!1),!x){const A=v?1:3;if(t.attribute){const M=e.charCodeAt(_);M===61?(p(A,E),g=""):Aw(M)?g="":p(A,E)}else p(A,E)}C=g}else{x||p(2,E);let A=Number.parseInt(w,S==="hexadecimal"?16:10);if(mge(A))p(7,E),C=Do(65533);else if(A in Ew)p(6,E),C=Ew[A];else{let M="";gge(A)&&p(6,E),A>65535&&(A-=65536,M+=Do(A>>>10|55296),A=56320|A&1023),C=M+Do(A)}}if(C){m(),d=f(),i=_-1,u+=_-y+1,r.push(C);const A=f();A.offset++,t.reference&&t.reference.call(t.referenceContext,C,{start:d,end:A},e.slice(y-1,_)),d=A}else w=e.slice(y-1,_),s+=w,u+=w.length,i=_-1}else h===10&&(c++,o++,u=0),Number.isNaN(h)?m():(s+=Do(h),u++);return r.join("");function f(){return{line:c,column:u,offset:i+((a?a.offset:0)||0)}}function p(b,y){let k;t.warning&&(k=f(),k.column+=y,k.offset+=y,t.warning.call(t.warningContext,pge[b],k,b))}function m(){s&&(r.push(s),t.text&&t.text.call(t.textContext,s,{start:d,end:f()}),s="")}}function mge(e){return e>=55296&&e<=57343||e>1114111}function gge(e){return e>=1&&e<=8||e===11||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534}const vu="---";function bge(e,t=""){return e=tv.flatten(e,{safe:!0}),Object.keys(e).length?[vu,ev.dump(e,{lineWidth:-1}).trim(),vu,t].join(`
`):""}function yge(e){let t={};if(e.startsWith(vu)){const n=e.indexOf(`
`+vu);if(n!==-1){const r=e.slice(4,n);r&&(t=ev.load(r),e=e.slice(n+4))}}return{content:e,data:tv.unflatten(t||{},{})}}function Mp(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,i=n.line||1,o=n.column||1;return{move:l,current:s,shift:a};function s(){return{now:{line:i,column:o},lineShift:r}}function a(c){r+=c}function l(c=""){const u=c.split(/\r?\n|\r/g),d=u[u.length-1];return i+=u.length-1,o=u.length===1?o+d.length:1+d.length+r,c}}function wge(e,t,n={}){const r=t.indexStack,i=e.children||[],o=Mp(n),s=[];let a=-1;for(r.push(-1);++a<i.length;){const c=i[a];r[r.length-1]=a,s.push(o.move(t.handle(c,e,t,{before:`
`,after:`
`,...o.current()}))),c.type!=="list"&&(t.bulletLastUsed=void 0),a<i.length-1&&s.push(o.move(l(c,i[a+1])))}return r.pop(),s.join("");function l(c,u){let d=t.join.length;for(;d--;){const h=t.join[d](c,u,e,t);if(h===!0||h===1)break;if(typeof h=="number")return`
`.repeat(1+h);if(h===!1)return`

<!---->

`}return`

`}}function kge(e,t,n){const r=t.indexStack,i=e.children||[],o=[];let s=-1,a=n.before;r.push(-1);let l=Mp(n);for(;++s<i.length;){const c=i[s];let u;if(r[r.length-1]=s,s+1<i.length){let d=t.handle.handlers[i[s+1].type];d&&d.peek&&(d=d.peek),u=d?d(i[s+1],e,t,{before:"",after:"",...l.current()}).charAt(0):""}else u=n.after;o.length>0&&(a==="\r"||a===`
`)&&c.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),a=" ",l=Mp(n),l.move(o.join(""))),o.push(l.move(t.handle(c,e,t,{...l.current(),before:a,after:u}))),a=o[o.length-1].slice(-1)}return r.pop(),o.join("")}function _ge(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}const Dge={}.hasOwnProperty,Fw=/^[^\t\n\r "#'.<=>`}]+$/,xge=2,Cge={unsafe:[{character:"\r",inConstruct:["leafComponentLabel","containerComponentLabel"]},{character:`
`,inConstruct:["leafComponentLabel","containerComponentLabel"]},{before:"[^:]",character:":",after:"[A-Za-z]",inConstruct:["phrasing"]},{atBreak:!0,character:":",after:":"}],handlers:{containerComponent:sv,textComponent:Sge,componentContainerSection:vge,image:(e,t,n,r)=>Ao.image(e,t,n,r)+ii(e,n),link:(e,t,n,r)=>Ao.link(e,t,n,r)+ii(e,n),strong:(e,t,n,r)=>Ao.strong(e,t,n,r)+ii(e,n),inlineCode:(e,t,n)=>Ao.inlineCode(e,t,n)+ii(e,n),emphasis:(e,t,n,r)=>Ao.emphasis(e,t,n,r)+ii(e,n)}};function vge(e,t,n){return n.indexStack=n.stack,`#${e.name}
${xg(e,n)}`.trim()}function Sge(e,t,n){let r;n.indexStack=n.stack;const i=n.enter(e.type);return e.name==="span"?r=`[${xg(e,n)}]${ii(e,n)}`:r=":"+(e.name||"")+av(e,n)+ii(e,n),i(),r}let Zl=0;function sv(e,t,n){n.indexStack=n.stack;const r=":".repeat(xge+Zl);Zl+=1;const i=n.enter(e.type);let o=r+(e.name||"")+av(e,n)+ii(e,n),s;e.fmAttributes&&Object.keys(e.fmAttributes).length>0&&(o+=`
`+bge(e.fmAttributes).trim());const a=e.children.filter(c=>c.type!=="componentContainerSection"),l=e.children.filter(c=>c.type==="componentContainerSection");return e.children=[...a,...l],e.type==="containerComponent"&&(s=xg(e,n),s&&(o+=`
`+s),o+=`
`+r,Zl>1&&(o=o.split(`
`).map(c=>"  "+c).join(`
`))),Zl-=1,i(),o}sv.peek=function(){return":"};function av(e,t){let n=e;if(e.type==="containerComponent"){if(!lv(e))return"";n=e.children[0]}const r=t.enter("label"),i=t.enter(e.type+"Label"),o=kge(n,t,{before:"[",after:"]"});return i(),r(),o?"["+o+"]":""}function ii(e,t){const n=_ge(t),r=e.type==="textComponent"?[n]:[n,`
`,"\r"],i=e.attributes||{},o=[];let s,a="",l="",c,u,d;for(u in i)if(Dge.call(i,u)&&i[u]!=null)if(c=String(i[u]),u==="id")s=Fw.test(c)?"#"+c:h("id",c);else if(u==="class"){for(c=c.split(/[\t\n\r ]+/g),a=[],l=[],d=-1;++d<c.length;)(Fw.test(c[d])?l:a).push(c[d]);a=a.length?h("class",a.join(" ")):"",l=l.length?"."+l.join("."):""}else u.startsWith(":")&&c==="true"?o.push(u.slice(1)):o.push(h(u,c));return a&&o.unshift(a),l&&o.unshift(l),s&&o.unshift(s),o.length?"{"+o.join(" ")+"}":"";function h(f,p){return f+"="+n+dge(p,{subset:r})+n}}function xg(e,t){const n=lv(e)?Object.assign({},e,{children:e.children.slice(1)}):e;return wge(n,t)}function lv(e){return e.children&&e.children[0]&&e.children[0].data&&e.children[0].data.componentLabel}const Ege=["textComponent"],Age={componentContainer:Oge,componentContainerSection:Lge,componentContainerDataSection:$ge,componentContainerAttributes:Ph,componentContainerLabel:Vge,bindingContent:Tge,componentLeaf:Pge,componentLeafAttributes:Ph,componentText:zge,textSpan:jge,componentTextAttributes:Ph},Fge={bindingContent:Mge,componentContainerSectionTitle:Bge,listUnordered:Hh,listOrdered:Hh,listItem:Hh,componentContainerSection:Ige,componentContainerDataSection:Rge,componentContainer:Nge,componentContainerAttributeClassValue:zh,componentContainerAttributeIdValue:jh,componentContainerAttributeName:Uh,componentContainerAttributeValue:Vh,componentContainerAttributes:qh,componentContainerLabel:Uge,componentContainerName:Bh,componentContainerAttributeInitializerMarker(){const e=this.getData("componentAttributes");e[e.length-1][1]=""},componentLeaf:Wh,componentLeafAttributeClassValue:zh,componentLeafAttributeIdValue:jh,componentLeafAttributeName:Uh,componentLeafAttributeValue:Vh,componentLeafAttributes:qh,componentLeafName:Bh,componentText:Wh,textSpan:Wh,componentTextAttributeClassValue:zh,componentTextAttributeIdValue:jh,componentTextAttributeName:Uh,componentTextAttributeValue:Vh,componentTextAttributes:qh,componentTextName:Bh};function Tge(e){this.enter({type:"textComponent",name:"binding",attributes:{value:this.sliceSerialize(e).trim()}},e)}function Mge(e){this.exit(e)}function Oge(e){Ol.call(this,"containerComponent",e)}function Nge(e){const t=this.stack[this.stack.length-1];if(t.children.length>1){const n=t.children.find(r=>r.rawData);t.rawData=n==null?void 0:n.rawData}t.children=t.children.flatMap(n=>n.rawData?[]:n.name==="default"||!n.name?n.children:(n.data={hName:"component-slot",hProperties:{...n.attributes,[`v-slot:${n.name}`]:""}},n)),this.exit(e)}function Lge(e){Ol.call(this,"componentContainerSection",e)}function $ge(e){Ol.call(this,"componentContainerDataSection",e)}function Ige(e){const t=this.stack[this.stack.length-1];cv.call(this,t),this.exit(e)}function Rge(e){let t=this.stack[this.stack.length-1];t=cv.call(this,t),t.type==="componentContainerDataSection"&&(t.rawData=this.sliceSerialize(e),this.exit(e))}function Bge(e){var t;this.stack[this.stack.length-1].name=(t=this.sliceSerialize(e))==null?void 0:t.trim()}function Pge(e){Ol.call(this,"leafComponent",e)}function jge(e){this.enter({type:"textComponent",name:"span",attributes:{},children:[]},e)}function zge(e){Ol.call(this,"textComponent",e)}function Ol(e,t){this.enter({type:e,name:"",attributes:{},children:[]},t)}function Bh(e){this.stack[this.stack.length-1].name=this.sliceSerialize(e)}function Vge(e){this.enter({type:"paragraph",data:{componentLabel:!0},children:[]},e)}function Uge(e){this.exit(e)}function Ph(){this.setData("componentAttributes",[]),this.buffer()}function jh(e){this.getData("componentAttributes").push(["id",Dg(this.sliceSerialize(e))])}function zh(e){this.getData("componentAttributes").push(["class",Dg(this.sliceSerialize(e))])}function Vh(e){const t=this.getData("componentAttributes");t[t.length-1][1]=Dg(this.sliceSerialize(e))}function Uh(e){this.getData("componentAttributes").push([this.sliceSerialize(e),!0])}function qh(){const e=this.getData("componentAttributes"),t={};let n=-1,r;for(;++n<e.length;){r=e[n];const o=Rn(r[0]);o==="class"&&t.class?t.class+=" "+r[1]:t[o]=r[1]}this.setData("componentAttributes"),this.resume();let i=this.stack[this.stack.length-1];i.type==="paragraph"&&(i=i.children[i.children.length-1]),i.type==="fragment"&&(i=i.children[i.children.length-1]),i.attributes=t}function Wh(e){this.exit(e)}function Hh(e){const[t]=this.tokenStack[this.tokenStack.length-1];t.type===e.type&&this.exit(e)}function cv(e){for(;e.type==="listItem"||e.type==="list";){const[t]=this.tokenStack[this.tokenStack.length-1];this.exit(t),e=this.stack[this.stack.length-1]}return e}const qge={canContainEols:Ege,enter:Age,exit:Fge},Wge=2,Hge=3,Tw=35,Gge=1,R={EOF:null,space:32,quotationMark:34,hash:35,apostrophe:39,openingParentheses:40,closingParentheses:41,star:42,comma:44,dash:45,dot:46,colon:58,LessThan:60,equals:61,greaterThan:62,uppercaseX:88,openingSquareBracket:91,backSlash:92,closingSquareBracket:93,underscore:95,backTick:96,lowercaseX:120,openingCurlyBracket:123,closingCurlyBracket:125};function Cg(e,t,n,r,i,o,s){let a=0,l=0;return c;function c(m){if(m!==R.openingSquareBracket)throw new Error("expected `[`");return e.enter(r),e.enter(i),e.consume(m),e.exit(i),u}function u(m){return m===R.closingSquareBracket?(e.enter(i),e.consume(m),e.exit(i),e.exit(r),t):(e.enter(o),d(m))}function d(m){return m===R.EOF||a>999?n(m):m===R.closingSquareBracket&&!l--?f(m):W(m)?s?n(m):(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("chunkText",{contentType:"text"}),h(m))}function h(m){return m===R.EOF||W(m)||a>999?(e.exit("chunkText"),d(m)):m===R.openingSquareBracket&&++l>3?n(m):m===R.closingSquareBracket&&!l--?(e.exit("chunkText"),f(m)):(e.consume(m),m===R.backSlash?p:h)}function f(m){return e.exit(o),e.enter(i),e.consume(m),e.exit(i),e.exit(r),t}function p(m){return m===R.openingSquareBracket||m===R.backSlash||m===R.closingSquareBracket?(e.consume(m),a++,h):h(m)}}function fd(e,t,n,r,i,o,s,a,l,c,u,d,h,f,p){let m,b;return y;function y(N){return e.enter(r),e.enter(i),e.consume(N),e.exit(i),k}function k(N){return N===R.hash?(m=s,_(N)):N===R.dot?(m=a,_(N)):N===R.colon||N===R.underscore||jt(N)?(e.enter(o),e.enter(l),e.consume(N),N===R.colon?g:D):p&&me(N)?Z(e,k,"whitespace")(N):!p&&Ae(N)?ar(e,k)(N):O(N)}function _(N){return e.enter(o),e.enter(m),e.enter(m+"Marker"),e.consume(N),e.exit(m+"Marker"),S}function S(N){return N===R.EOF||N===R.quotationMark||N===R.hash||N===R.apostrophe||N===R.dot||N===R.LessThan||N===R.equals||N===R.greaterThan||N===R.backTick||N===R.closingCurlyBracket||Ae(N)?n(N):(e.enter(m+"Value"),e.consume(N),v)}function v(N){return N===R.EOF||N===R.quotationMark||N===R.apostrophe||N===R.LessThan||N===R.equals||N===R.greaterThan||N===R.backTick?n(N):N===R.hash||N===R.dot||N===R.closingCurlyBracket||Ae(N)?(e.exit(m+"Value"),e.exit(m),e.exit(o),k(N)):(e.consume(N),v)}function g(N){return N===R.dash||Nt(N)?(e.consume(N),g):(e.exit(l),p&&me(N)?Z(e,w,"whitespace")(N):!p&&Ae(N)?ar(e,w)(N):w(N))}function w(N){return N===R.equals?(e.enter(c),e.consume(N),e.exit(c),E):(e.exit(o),n(N))}function D(N){return N===R.dash||N===R.dot||N===R.colon||N===R.underscore||Nt(N)?(e.consume(N),D):(e.exit(l),p&&me(N)?Z(e,x,"whitespace")(N):!p&&Ae(N)?ar(e,x)(N):x(N))}function x(N){return N===R.equals?(e.enter(c),e.consume(N),e.exit(c),E):(e.exit(o),k(N))}function E(N){return N===R.EOF||N===R.LessThan||N===R.equals||N===R.greaterThan||N===R.backTick||N===R.closingCurlyBracket||p&&W(N)?n(N):N===R.quotationMark||N===R.apostrophe?(e.enter(u),e.enter(h),e.consume(N),e.exit(h),b=N,A):p&&me(N)?Z(e,E,"whitespace")(N):!p&&Ae(N)?ar(e,E)(N):(e.enter(d),e.enter(f),e.consume(N),b=void 0,C)}function C(N){return N===R.EOF||N===R.quotationMark||N===R.apostrophe||N===R.LessThan||N===R.equals||N===R.greaterThan||N===R.backTick?n(N):N===R.closingCurlyBracket||Ae(N)?(e.exit(f),e.exit(d),e.exit(o),k(N)):(e.consume(N),C)}function A(N){return N===b?(e.enter(h),e.consume(N),e.exit(h),e.exit(u),e.exit(o),P):(e.enter(d),M(N))}function M(N){return N===b?(e.exit(d),A(N)):N===R.EOF?n(N):W(N)?p?n(N):ar(e,M)(N):(e.enter(f),e.consume(N),$)}function $(N){return N===b||N===R.EOF||W(N)?(e.exit(f),M(N)):(e.consume(N),$)}function P(N){return N===R.closingCurlyBracket||Ae(N)?k(N):O(N)}function O(N){return N===R.closingCurlyBracket?(e.enter(i),e.consume(N),e.exit(i),e.exit(r),t):n(N)}}const Kge={tokenize:Zge,partial:!0},Jge={tokenize:t0e,partial:!0},Yge={tokenize:n0e,partial:!0},Xge={tokenize:r0e,partial:!0};function Qge(e,t,n){const r=this;return i;function i(l){if(l!==R.openingSquareBracket)throw new Error("expected `[`");return r.previous===R.EOF&&r._gfmTasklistFirstContentOfListItem?e.check(Jge,n,o)(l):r.previous===R.openingSquareBracket?n(l):e.check(Yge,n,o)(l)}function o(l){return e.enter("textSpan"),e.attempt(Kge,s,n)(l)}function s(l){return l===R.openingParentheses||l===R.openingSquareBracket?n(l):l===R.openingCurlyBracket?e.attempt(Xge,a,a)(l):a(l)}function a(l){return e.exit("textSpan"),t(l)}}function Zge(e,t,n){return Cg(e,t,n,"componentTextLabel","componentTextLabelMarker","componentTextLabelString")}const e0e={tokenize:Qge};function t0e(e,t,n){return r;function r(o){return e.enter("formGfmTaskCheckbox"),e.consume(o),i}function i(o){return me(o)||o===R.uppercaseX||o===R.lowercaseX?(e.consume(o),i):o===R.closingSquareBracket?(e.exit("formGfmTaskCheckbox"),t(o)):n(o)}}function n0e(e,t,n){return r;function r(o){return e.enter("doubleBracket"),e.consume(o),i}function i(o){return o!==R.openingSquareBracket?n(o):(e.exit("doubleBracket"),t(o))}}function r0e(e,t,n){return fd(e,t,n,"componentTextAttributes","componentTextAttributesMarker","componentTextAttribute","componentTextAttributeId","componentTextAttributeClass","componentTextAttributeName","componentTextAttributeInitializerMarker","componentTextAttributeValueLiteral","componentTextAttributeValue","componentTextAttributeValueMarker","componentTextAttributeValueData")}const i0e={tokenize:a0e,partial:!0},o0e=["textSpan","attentionSequence","codeText","link","image"];function s0e(e,t,n){const r=this;return i;function i(o){if(o!==R.openingCurlyBracket)throw new Error("expected `{`");const s=r.events[r.events.length-1];return W(r.previous)||!s||!o0e.includes(s[1].type)?n(o):e.attempt(i0e,t,n)(o)}}function a0e(e,t,n){return fd(e,t,n,"componentTextAttributes","componentTextAttributesMarker","componentTextAttribute","componentTextAttributeId","componentTextAttributeClass","componentTextAttributeName","componentTextAttributeInitializerMarker","componentTextAttributeValueLiteral","componentTextAttributeValue","componentTextAttributeValueMarker","componentTextAttributeValueData")}const l0e={tokenize:s0e};function c0e(e,t,n){return r;function r(o){return o!==R.closingCurlyBracket?n(o):(e.exit("bindingContent"),e.enter("bindingFence"),e.consume(o),i)}function i(o){return o!==R.closingCurlyBracket?n(o):(e.consume(o),e.exit("bindingFence"),t)}}function u0e(e,t,n){return r;function r(a){if(a!==R.openingCurlyBracket)throw new Error("expected `{`");return e.enter("bindingFence"),e.consume(a),i}function i(a){return a!==R.openingCurlyBracket?n(a):(e.consume(a),e.exit("bindingFence"),e.enter("bindingContent"),o)}function o(a){return a===R.closingCurlyBracket?e.attempt({tokenize:c0e,partial:!0},s,l=>(e.consume(l),o))(a):(e.consume(a),o)}function s(a){return t(a)}}const d0e={tokenize:u0e};function uv(e,t,n,r){const i=this;return o;function o(a){return jt(a)?(e.enter(r),e.consume(a),s):n(a)}function s(a){return a===R.dash||a===R.underscore||Nt(a)?(e.consume(a),s):(e.exit(r),i.previous===R.underscore?n(a):t(a))}}const Mw={tokenize:f0e,partial:!0},Ow={tokenize:p0e,partial:!0};function dv(e){return e!==R.colon||this.events[this.events.length-1][1].type==="characterEscape"}function h0e(e,t,n){const r=this;return i;function i(c){if(c!==R.colon)throw new Error("expected `:`");if(r.previous!==null&&!Ae(r.previous)&&![R.openingSquareBracket,R.star,R.underscore].includes(r.previous))return n(c);if(!dv.call(r,r.previous))throw new Error("expected correct previous");return e.enter("componentText"),e.enter("componentTextMarker"),e.consume(c),e.exit("componentTextMarker"),uv.call(r,e,o,n,"componentTextName")}function o(c){return c===R.colon?n(c):c===R.openingSquareBracket?e.attempt(Mw,a,a)(c):c===R.openingCurlyBracket?e.attempt(Ow,s,s)(c):l(c)}function s(c){return c===R.openingSquareBracket?e.attempt(Mw,a,a)(c):l(c)}function a(c){return c===R.openingCurlyBracket?e.attempt(Ow,l,l)(c):l(c)}function l(c){return e.exit("componentText"),t(c)}}function f0e(e,t,n){return Cg(e,t,n,"componentTextLabel","componentTextLabelMarker","componentTextLabelString")}function p0e(e,t,n){return fd(e,t,n,"componentTextAttributes","componentTextAttributesMarker","componentTextAttribute","componentTextAttributeId","componentTextAttributeClass","componentTextAttributeName","componentTextAttributeInitializerMarker","componentTextAttributeValueLiteral","componentTextAttributeValue","componentTextAttributeValueMarker","componentTextAttributeValueData")}const hv={tokenize:h0e,previous:dv};function fv(e){let t=-1,n=0;for(;++t<e.length;)n+=typeof e[t]=="string"?e[t].length:1;return n}function m0e(e,t){const n=e[e.length-1];return!n||n[1].type!==t?0:fv(n[2].sliceStream(n[1]))}function Op(e){let t=0,n=e.length-1,r=e[n];for(;n>=0&&r&&r[1].type==="linePrefix"&&r[0]==="exit";)t+=fv(r[2].sliceStream(r[1])),n-=1,r=e[n];return t}const g0e=e=>{const t={isOpen:!1,enter:n=>{const r=t.isOpen;return t.exit(n),n.enter(e),t.isOpen=!0,()=>{t.isOpen=r}},enterOnce:n=>{const r=t.isOpen;return t.isOpen||(n.enter(e),t.isOpen=!0),()=>{t.isOpen=r}},exit:n=>{const r=t.isOpen;return t.isOpen&&(n.exit(e),t.isOpen=!1),()=>{t.isOpen=r}}};return t},b0e={tokenize:y0e,partial:!0};function y0e(e,t,n){let r=0;return i;function i(s){return e.enter("codeFenced"),o(s)}function o(s){return s===R.backTick?(r++,e.consume(s),o):(e.exit("codeFenced"),r>=3?t(s):n(s))}}function w0e(e,t,n,r,i){let o;return e.attempt({tokenize:s,partial:!0},a,r);function s(d,h,f){const p=this;let m=0,b=0;return k;function y(S){return me(S)?(d.consume(S),b+=1,y):(d.exit("space"),k(S))}function k(S){return me(S)?(d.enter("space"),y(S)):(b===0&&(b=Op(p.events)),d.enter("componentContainerSectionSequence"),_(S))}function _(S){return S===R.dash||me(S)?(d.consume(S),m++,_):m<Hge||b!==i||!W(S)?f(S):(d.exit("componentContainerSectionSequence"),Z(d,h,"whitespace")(S))}}function a(d){return e.enter("componentContainerDataSection"),e.attempt({tokenize:s,partial:!0},u,l)(d)}function l(d){if(d===null)return e.exit("componentContainerDataSection"),e.exit("componentContainer"),t(d);const h=e.enter("chunkDocument",{contentType:"document",previous:o});return o&&(o.next=h),o=h,c(d)}function c(d){return d===null?(e.exit("chunkDocument"),e.exit("componentContainerDataSection"),e.exit("componentContainer"),t(d)):W(d)?(e.consume(d),e.exit("chunkDocument"),e.attempt({tokenize:s,partial:!0},u,l)):(e.consume(d),c)}function u(d){return e.exit("componentContainerDataSection"),Z(e,r,"whitespace")(d)}}const k0e={tokenize:x0e,partial:!0},_0e={tokenize:C0e,partial:!0};function D0e(e,t,n){const r=this,i=Op(this.events);let o=0,s;const a=[];let l=!0,c=!1;const u=g0e("componentContainerSection");return d;function d(C){if(C!==R.colon)throw new Error("expected `:`");return e.enter("componentContainer"),e.enter("componentContainerFence"),e.enter("componentContainerSequence"),m(C)}function h(C,A,M){let $=0,P=0,O;return N;function N(q){return P=Op(r.events),O=u.exit(C),C.enter("componentContainerSectionSequence"),z(q)}function z(q){return q===Tw?(C.consume(q),$++,z):$!==Gge||P!==i||!jt(q)?(O(),M(q)):(C.exit("componentContainerSectionSequence"),Z(C,A,"whitespace")(q))}}function f(C){return u.enter(e),W(C)?Z(e,g,"whitespace")(C):(e.enter("componentContainerSectionTitle"),p(C))}function p(C){return W(C)?(e.exit("componentContainerSectionTitle"),Z(e,g,"linePrefix",4)(C)):(e.consume(C),p)}function m(C){return C===R.colon?(e.consume(C),o++,m):o<Wge?n(C):(e.exit("componentContainerSequence"),uv.call(r,e,b,n,"componentContainerName")(C))}function b(C){return C===R.openingSquareBracket?e.attempt(k0e,y,y)(C):y(C)}function y(C){return C===R.openingCurlyBracket?e.attempt(_0e,k,k)(C):k(C)}function k(C){return Z(e,_,"whitespace")(C)}function _(C){return e.exit("componentContainerFence"),C===null?(e.exit("componentContainer"),t(C)):W(C)?(e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),r.interrupt?t:S):n(C)}function S(C){return C===null?(e.exit("componentContainer"),t(C)):l&&(C===R.dash||me(C))?(l=!1,w0e(e,t,n,S,i)(C)):(e.enter("componentContainerContent"),g(C))}function v(C){return C===null?x(C):C===R.backTick?e.check(b0e,A=>(c=!c,w(A)),w)(C):c?w(C):!a.length&&(C===Tw||C===R.space)?e.attempt({tokenize:h,partial:!0},f,w)(C):C===R.colon?e.attempt({tokenize:E,partial:!0},x,w)(C):w(C)}function g(C){return C===null?x(C):i?Z(e,v,"linePrefix",i+1)(C):v(C)}function w(C){if(C===null)return x(C);u.enterOnce(e);const A=e.enter("chunkDocument",{contentType:"document",previous:s});return s&&(s.next=A),s=A,D(C)}function D(C){return C===null?(e.exit("chunkDocument"),x(C)):W(C)?(e.consume(C),e.exit("chunkDocument"),g):(e.consume(C),D)}function x(C){return u.exit(e),e.exit("componentContainerContent"),e.exit("componentContainer"),t(C)}function E(C,A,M){let $=0;return Z(C,P,"linePrefix",4);function P(z){return C.enter("componentContainerFence"),C.enter("componentContainerSequence"),O(z)}function O(z){return z===R.colon?(C.consume(z),$++,O):a.length?($===a[a.length-1]&&a.pop(),M(z)):$!==o?M(z):(C.exit("componentContainerSequence"),Z(C,N,"whitespace")(z))}function N(z){return z===null||W(z)?(C.exit("componentContainerFence"),A(z)):(a.push($),M(z))}}}function x0e(e,t,n){return Cg(e,t,n,"componentContainerLabel","componentContainerLabelMarker","componentContainerLabelString",!0)}function C0e(e,t,n){return fd(e,t,n,"componentContainerAttributes","componentContainerAttributesMarker","componentContainerAttribute","componentContainerAttributeId","componentContainerAttributeClass","componentContainerAttributeName","componentContainerAttributeInitializerMarker","componentContainerAttributeValueLiteral","componentContainerAttributeValue","componentContainerAttributeValueMarker","componentContainerAttributeValueData",!0)}const pv={tokenize:D0e,concrete:!0};function v0e(e,t,n){const r=this;return Z(e,i,"linePrefix");function i(o){if(m0e(r.events,"linePrefix")<4)return n(o);switch(o){case R.backTick:return gf.tokenize.call(r,e,t,n)(o);case R.colon:return pv.tokenize.call(r,e,t,n)(o);default:return n(o)}}}const Gh={tokenize:v0e};function S0e(e,t,n){const r=this,i=hv.tokenize.call(r,e,Z(e,s,"linePrefix"),n);return Z(e,o,"linePrefix");function o(a){return a===R.colon?i(a):n(a)}function s(a){return W(a)||a===R.EOF?t(a):n(a)}}const E0e={tokenize:S0e};function A0e(){return{text:{[R.colon]:hv,[R.openingSquareBracket]:[e0e],[R.openingCurlyBracket]:[d0e,l0e]},flow:{[R.colon]:[pv,E0e]},flowInitial:{"-2":Gh,"-1":Gh,[R.space]:Gh}}}const F0e=e=>`---
${e}
---`,T0e=function({components:e=[]}={}){const t=this.data();n("micromarkExtensions",A0e()),n("fromMarkdownExtensions",qge),n("toMarkdownExtensions",Cge);function n(r,i){t[r]||(t[r]=[]),t[r].push(i)}return e.length?async(r,{data:i})=>{const o=[];return io(r,["textComponent","leafComponent","containerComponent"],s=>{Nw(s);const{instance:a,options:l}=e.find(c=>c.name===s.name)||{};a&&o.push(a(l)(s,i))}),await Promise.all(o),r}:r=>{io(r,["textComponent","leafComponent","containerComponent"],i=>{Nw(i)})}};function Nw(e){const t=e.data||(e.data={});e.fmAttributes=M0e(e),t.hName=Rn(e.name),t.hProperties=O0e({...e.attributes,...e.fmAttributes})}function M0e(e){if(!e.rawData)return{};const t=e.rawData.replace(/\s-+$/,""),{data:n}=yge(F0e(t));return n}function O0e(e){const t=Object.entries(e).map(([n,r])=>n.startsWith(":")?[n,r]:typeof r=="string"?[n,r]:[`:${n}`,JSON.stringify(r)]);return Object.fromEntries(t)}const N0e=we(),mv=IO(()=>be(N0e,()=>(e,t)=>{if(!t)return!1;const n=ul(wu)(e.selection);if(!n)return!1;const{node:r,pos:i}=n,{content:o}=r,s=o.content,a=s[s.length-1],l=i+(r.nodeSize-o.size),c=l+o.size-(a.nodeSize-a.content.size);return t(e.tr.setSelection(ne.create(e.doc,l,c))),!0})),L0e=RO(()=>({"Mod-a":()=>mv.run()})),$0e=Gt.create([mv,L0e]),I0e=Gt.create([$_(()=>T0e),...jfe,ife,$0e].flat());var gv=typeof globalThis<"u"?globalThis:typeof{}<"u"?{}:typeof global<"u"?global:typeof self<"u"?self:{},ka={},R0e={get exports(){return ka},set exports(e){ka=e}};(function(e,t){(function(n,r){e.exports=r()})(gv,()=>{return n={770:function(i,o,s){var a=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(o,"__esModule",{value:!0}),o.setDefaultDebugCall=o.createOnigScanner=o.createOnigString=o.loadWASM=o.OnigScanner=o.OnigString=void 0;const l=a(s(418));let c=null,u=!1;class d{static _utf8ByteLength(y){let k=0;for(let _=0,S=y.length;_<S;_++){const v=y.charCodeAt(_);let g=v,w=!1;if(v>=55296&&v<=56319&&_+1<S){const D=y.charCodeAt(_+1);D>=56320&&D<=57343&&(g=65536+(v-55296<<10)|D-56320,w=!0)}k+=g<=127?1:g<=2047?2:g<=65535?3:4,w&&_++}return k}constructor(y){const k=y.length,_=d._utf8ByteLength(y),S=_!==k,v=S?new Uint32Array(k+1):null;S&&(v[k]=_);const g=S?new Uint32Array(_+1):null;S&&(g[_]=k);const w=new Uint8Array(_);let D=0;for(let x=0;x<k;x++){const E=y.charCodeAt(x);let C=E,A=!1;if(E>=55296&&E<=56319&&x+1<k){const M=y.charCodeAt(x+1);M>=56320&&M<=57343&&(C=65536+(E-55296<<10)|M-56320,A=!0)}S&&(v[x]=D,A&&(v[x+1]=D),C<=127?g[D+0]=x:C<=2047?(g[D+0]=x,g[D+1]=x):C<=65535?(g[D+0]=x,g[D+1]=x,g[D+2]=x):(g[D+0]=x,g[D+1]=x,g[D+2]=x,g[D+3]=x)),C<=127?w[D++]=C:C<=2047?(w[D++]=192|(1984&C)>>>6,w[D++]=128|(63&C)>>>0):C<=65535?(w[D++]=224|(61440&C)>>>12,w[D++]=128|(4032&C)>>>6,w[D++]=128|(63&C)>>>0):(w[D++]=240|(1835008&C)>>>18,w[D++]=128|(258048&C)>>>12,w[D++]=128|(4032&C)>>>6,w[D++]=128|(63&C)>>>0),A&&x++}this.utf16Length=k,this.utf8Length=_,this.utf16Value=y,this.utf8Value=w,this.utf16OffsetToUtf8=v,this.utf8OffsetToUtf16=g}createString(y){const k=y._omalloc(this.utf8Length);return y.HEAPU8.set(this.utf8Value,k),k}}class h{constructor(y){if(this.id=++h.LAST_ID,!c)throw new Error("Must invoke loadWASM first.");this._onigBinding=c,this.content=y;const k=new d(y);this.utf16Length=k.utf16Length,this.utf8Length=k.utf8Length,this.utf16OffsetToUtf8=k.utf16OffsetToUtf8,this.utf8OffsetToUtf16=k.utf8OffsetToUtf16,this.utf8Length<1e4&&!h._sharedPtrInUse?(h._sharedPtr||(h._sharedPtr=c._omalloc(1e4)),h._sharedPtrInUse=!0,c.HEAPU8.set(k.utf8Value,h._sharedPtr),this.ptr=h._sharedPtr):this.ptr=k.createString(c)}convertUtf8OffsetToUtf16(y){return this.utf8OffsetToUtf16?y<0?0:y>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[y]:y}convertUtf16OffsetToUtf8(y){return this.utf16OffsetToUtf8?y<0?0:y>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[y]:y}dispose(){this.ptr===h._sharedPtr?h._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}o.OnigString=h,h.LAST_ID=0,h._sharedPtr=0,h._sharedPtrInUse=!1;class f{constructor(y){if(!c)throw new Error("Must invoke loadWASM first.");const k=[],_=[];for(let w=0,D=y.length;w<D;w++){const x=new d(y[w]);k[w]=x.createString(c),_[w]=x.utf8Length}const S=c._omalloc(4*y.length);c.HEAPU32.set(k,S/4);const v=c._omalloc(4*y.length);c.HEAPU32.set(_,v/4);const g=c._createOnigScanner(S,v,y.length);for(let w=0,D=y.length;w<D;w++)c._ofree(k[w]);c._ofree(v),c._ofree(S),g===0&&function(w){throw new Error(w.UTF8ToString(w._getLastOnigError()))}(c),this._onigBinding=c,this._ptr=g}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(y,k,_){let S=u,v=0;if(typeof _=="number"?(8&_&&(S=!0),v=_):typeof _=="boolean"&&(S=_),typeof y=="string"){y=new h(y);const g=this._findNextMatchSync(y,k,S,v);return y.dispose(),g}return this._findNextMatchSync(y,k,S,v)}_findNextMatchSync(y,k,_,S){const v=this._onigBinding;let g;if(g=_?v._findNextOnigScannerMatchDbg(this._ptr,y.id,y.ptr,y.utf8Length,y.convertUtf16OffsetToUtf8(k),S):v._findNextOnigScannerMatch(this._ptr,y.id,y.ptr,y.utf8Length,y.convertUtf16OffsetToUtf8(k),S),g===0)return null;const w=v.HEAPU32;let D=g/4;const x=w[D++],E=w[D++];let C=[];for(let A=0;A<E;A++){const M=y.convertUtf8OffsetToUtf16(w[D++]),$=y.convertUtf8OffsetToUtf16(w[D++]);C[A]={start:M,end:$,length:$-M}}return{index:x,captureIndices:C}}}o.OnigScanner=f;let p=!1,m=null;o.loadWASM=function(b){if(p)return m;let y,k,_,S;if(p=!0,function(v){return typeof v.instantiator=="function"}(b))y=b.instantiator,k=b.print;else{let v;(function(g){return g.data!==void 0})(b)?(v=b.data,k=b.print):v=b,y=function(g){return typeof Response<"u"&&g instanceof Response}(v)?typeof WebAssembly.instantiateStreaming=="function"?function(g){return w=>WebAssembly.instantiateStreaming(g,w)}(v):function(g){return async w=>{const D=await g.arrayBuffer();return WebAssembly.instantiate(D,w)}}(v):function(g){return w=>WebAssembly.instantiate(g,w)}(v)}return m=new Promise((v,g)=>{_=v,S=g}),function(v,g,w,D){(0,l.default)({print:g,instantiateWasm:(x,E)=>{if(typeof performance>"u"){const C=()=>Date.now();x.env.emscripten_get_now=C,x.wasi_snapshot_preview1.emscripten_get_now=C}return v(x).then(C=>E(C.instance),D),{}}}).then(x=>{c=x,w()})}(y,k,_,S),m},o.createOnigString=function(b){return new h(b)},o.createOnigScanner=function(b){return new f(b)},o.setDefaultDebugCall=function(b){u=b}},418:i=>{var o=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(s){var a,l,c=(s=s||{})!==void 0?s:{};c.ready=new Promise(function(U,K){a=U,l=K});var u,d=Object.assign({},c),h=!1,f="";function p(U){return c.locateFile?c.locateFile(U,f):f+U}u=function(U){let K;return typeof readbuffer=="function"?new Uint8Array(readbuffer(U)):(K=read(U,"binary"),S(typeof K=="object"),K)},typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var m,b,y=c.print||console.log.bind(console),k=c.printErr||console.warn.bind(console);Object.assign(c,d),d=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit,c.wasmBinary&&(m=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&ce("no native wasm support detected");var _=!1;function S(U,K){U||ce(K)}var v,g,w,D=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function x(U,K,rt){for(var Jt=K+rt,Me=K;U[Me]&&!(Me>=Jt);)++Me;if(Me-K>16&&U.buffer&&D)return D.decode(U.subarray(K,Me));for(var L="";K<Me;){var j=U[K++];if(128&j){var X=63&U[K++];if((224&j)!=192){var ge=63&U[K++];if((j=(240&j)==224?(15&j)<<12|X<<6|ge:(7&j)<<18|X<<12|ge<<6|63&U[K++])<65536)L+=String.fromCharCode(j);else{var Bt=j-65536;L+=String.fromCharCode(55296|Bt>>10,56320|1023&Bt)}}else L+=String.fromCharCode((31&j)<<6|X)}else L+=String.fromCharCode(j)}return L}function E(U,K){return U?x(g,U,K):""}function C(U){v=U,c.HEAP8=new Int8Array(U),c.HEAP16=new Int16Array(U),c.HEAP32=new Int32Array(U),c.HEAPU8=g=new Uint8Array(U),c.HEAPU16=new Uint16Array(U),c.HEAPU32=w=new Uint32Array(U),c.HEAPF32=new Float32Array(U),c.HEAPF64=new Float64Array(U)}c.INITIAL_MEMORY;var A=[],M=[],$=[];function P(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)z(c.preRun.shift());Rt(A)}function O(){Rt(M)}function N(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)H(c.postRun.shift());Rt($)}function z(U){A.unshift(U)}function q(U){M.unshift(U)}function H(U){$.unshift(U)}var T=0,F=null;function ee(U){T++,c.monitorRunDependencies&&c.monitorRunDependencies(T)}function de(U){if(T--,c.monitorRunDependencies&&c.monitorRunDependencies(T),T==0&&F){var K=F;F=null,K()}}function ce(U){c.onAbort&&c.onAbort(U),k(U="Aborted("+U+")"),_=!0,U+=". Build with -sASSERTIONS for more info.";var K=new WebAssembly.RuntimeError(U);throw l(K),K}var re,I,fe="data:application/octet-stream;base64,";function he(U){return U.startsWith(fe)}function He(U){try{if(U==re&&m)return new Uint8Array(m);if(u)return u(U);throw"both async and sync fetching of the wasm failed"}catch(K){ce(K)}}function Kt(){return m||!h||typeof fetch!="function"?Promise.resolve().then(function(){return He(re)}):fetch(re,{credentials:"same-origin"}).then(function(U){if(!U.ok)throw"failed to load wasm binary file at '"+re+"'";return U.arrayBuffer()}).catch(function(){return He(re)})}function Kn(){var U={env:Xn,wasi_snapshot_preview1:Xn};function K(Me,L){var j=Me.exports;c.asm=j,C((b=c.asm.memory).buffer),c.asm.__indirect_function_table,q(c.asm.__wasm_call_ctors),de()}function rt(Me){K(Me.instance)}function Jt(Me){return Kt().then(function(L){return WebAssembly.instantiate(L,U)}).then(function(L){return L}).then(Me,function(L){k("failed to asynchronously prepare wasm: "+L),ce(L)})}if(ee(),c.instantiateWasm)try{return c.instantiateWasm(U,K)}catch(Me){k("Module.instantiateWasm callback failed with error: "+Me),l(Me)}return(m||typeof WebAssembly.instantiateStreaming!="function"||he(re)||typeof fetch!="function"?Jt(rt):fetch(re,{credentials:"same-origin"}).then(function(Me){return WebAssembly.instantiateStreaming(Me,U).then(rt,function(L){return k("wasm streaming compile failed: "+L),k("falling back to ArrayBuffer instantiation"),Jt(rt)})})).catch(l),{}}function Rt(U){for(;U.length>0;)U.shift()(c)}function _n(U,K,rt){g.copyWithin(U,K,K+rt)}function Gr(U){try{return b.grow(U-v.byteLength+65535>>>16),C(b.buffer),1}catch{}}function Dr(U){var K,rt=g.length,Jt=2147483648;if((U>>>=0)>Jt)return!1;for(var Me=1;Me<=4;Me*=2){var L=rt*(1+.2/Me);if(L=Math.min(L,U+100663296),Gr(Math.min(Jt,(K=Math.max(U,L))+(65536-K%65536)%65536)))return!0}return!1}he(re="onig.wasm")||(re=p(re)),I=typeof dateNow<"u"?dateNow:()=>performance.now();var Jn=[null,[],[]];function Yn(U,K){var rt=Jn[U];K===0||K===10?((U===1?y:k)(x(rt,0)),rt.length=0):rt.push(K)}function Ln(U,K,rt,Jt){for(var Me=0,L=0;L<rt;L++){var j=w[K>>2],X=w[K+4>>2];K+=8;for(var ge=0;ge<X;ge++)Yn(U,g[j+ge]);Me+=X}return w[Jt>>2]=Me,0}var ft,Xn={emscripten_get_now:I,emscripten_memcpy_big:_n,emscripten_resize_heap:Dr,fd_write:Ln};function xr(U){function K(){ft||(ft=!0,c.calledRun=!0,_||(O(),a(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),N()))}T>0||(P(),T>0||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),K()},1)):K()))}if(Kn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.__wasm_call_ctors).apply(null,arguments)},c.___errno_location=function(){return(c.___errno_location=c.asm.__errno_location).apply(null,arguments)},c._omalloc=function(){return(c._omalloc=c.asm.omalloc).apply(null,arguments)},c._ofree=function(){return(c._ofree=c.asm.ofree).apply(null,arguments)},c._getLastOnigError=function(){return(c._getLastOnigError=c.asm.getLastOnigError).apply(null,arguments)},c._createOnigScanner=function(){return(c._createOnigScanner=c.asm.createOnigScanner).apply(null,arguments)},c._freeOnigScanner=function(){return(c._freeOnigScanner=c.asm.freeOnigScanner).apply(null,arguments)},c._findNextOnigScannerMatch=function(){return(c._findNextOnigScannerMatch=c.asm.findNextOnigScannerMatch).apply(null,arguments)},c._findNextOnigScannerMatchDbg=function(){return(c._findNextOnigScannerMatchDbg=c.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},c.stackSave=function(){return(c.stackSave=c.asm.stackSave).apply(null,arguments)},c.stackRestore=function(){return(c.stackRestore=c.asm.stackRestore).apply(null,arguments)},c.stackAlloc=function(){return(c.stackAlloc=c.asm.stackAlloc).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.dynCall_jiji).apply(null,arguments)},c.UTF8ToString=E,F=function U(){ft||xr(),ft||(F=U)},c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return xr(),s.ready});i.exports=o}},r={},function i(o){var s=r[o];if(s!==void 0)return s.exports;var a=r[o]={exports:{}};return n[o].call(a.exports,a,a.exports,i),a.exports}(770);var n,r})})(R0e);var Su={},B0e={get exports(){return Su},set exports(e){Su=e}};(function(e,t){(function(n,r){e.exports=r()})(gv,function(){return(()=>{var n={350:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UseOnigurumaFindOptions=o.DebugFlags=void 0,o.DebugFlags={InDebugMode:typeof process<"u"&&!!{}.VSCODE_TEXTMATE_DEBUG},o.UseOnigurumaFindOptions=!1},36:(i,o)=>{var s;Object.defineProperty(o,"__esModule",{value:!0}),o.toOptionalTokenType=o.EncodedTokenAttributes=void 0,(s=o.EncodedTokenAttributes||(o.EncodedTokenAttributes={})).toBinaryStr=function(a){let l=a.toString(2);for(;l.length<32;)l="0"+l;return l},s.print=function(a){const l=s.getLanguageId(a),c=s.getTokenType(a),u=s.getFontStyle(a),d=s.getForeground(a),h=s.getBackground(a);console.log({languageId:l,tokenType:c,fontStyle:u,foreground:d,background:h})},s.getLanguageId=function(a){return(255&a)>>>0},s.getTokenType=function(a){return(768&a)>>>8},s.containsBalancedBrackets=function(a){return(1024&a)!=0},s.getFontStyle=function(a){return(30720&a)>>>11},s.getForeground=function(a){return(16744448&a)>>>15},s.getBackground=function(a){return(4278190080&a)>>>24},s.set=function(a,l,c,u,d,h,f){let p=s.getLanguageId(a),m=s.getTokenType(a),b=s.containsBalancedBrackets(a)?1:0,y=s.getFontStyle(a),k=s.getForeground(a),_=s.getBackground(a);return l!==0&&(p=l),c!==8&&(m=c),u!==null&&(b=u?1:0),d!==-1&&(y=d),h!==0&&(k=h),f!==0&&(_=f),(p<<0|m<<8|b<<10|y<<11|k<<15|_<<24)>>>0},o.toOptionalTokenType=function(a){return a}},996:(i,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BasicScopeAttributesProvider=o.BasicScopeAttributes=void 0;const a=s(878);class l{constructor(h,f){this.languageId=h,this.tokenType=f}}o.BasicScopeAttributes=l;class c{constructor(h,f){this._getBasicScopeAttributes=new a.CachedFn(p=>{const m=this._scopeToLanguage(p),b=this._toStandardTokenType(p);return new l(m,b)}),this._defaultAttributes=new l(h,8),this._embeddedLanguagesMatcher=new u(Object.entries(f||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(h){return h===null?c._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(h)}_scopeToLanguage(h){return this._embeddedLanguagesMatcher.match(h)||0}_toStandardTokenType(h){const f=h.match(c.STANDARD_TOKEN_TYPE_REGEXP);if(!f)return 8;switch(f[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}o.BasicScopeAttributesProvider=c,c._NULL_SCOPE_METADATA=new l(0,0),c.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class u{constructor(h){if(h.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(h);const f=h.map(([p,m])=>a.escapeRegExpCharacters(p));f.sort(),f.reverse(),this.scopesRegExp=new RegExp(`^((${f.join(")|(")}))($|\\.)`,"")}}match(h){if(!this.scopesRegExp)return;const f=h.match(this.scopesRegExp);return f?this.values.get(f[1]):void 0}}},947:(i,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LineTokens=o.BalancedBracketSelectors=o.StateStack=o.AttributedScopeStack=o.Grammar=o.createGrammar=void 0;const a=s(350),l=s(36),c=s(736),u=s(44),d=s(792),h=s(583),f=s(878),p=s(996),m=s(47);function b(D,x,E,C,A){const M=c.createMatchers(x,y),$=d.RuleFactory.getCompiledRuleId(E,C,A.repository);for(const P of M)D.push({debugSelector:x,matcher:P.matcher,ruleId:$,grammar:A,priority:P.priority})}function y(D,x){if(x.length<D.length)return!1;let E=0;return D.every(C=>{for(let A=E;A<x.length;A++)if(k(x[A],C))return E=A+1,!0;return!1})}function k(D,x){if(!D)return!1;if(D===x)return!0;const E=x.length;return D.length>E&&D.substr(0,E)===x&&D[E]==="."}o.createGrammar=function(D,x,E,C,A,M,$,P){return new _(D,x,E,C,A,M,$,P)};class _{constructor(x,E,C,A,M,$,P,O){if(this._rootScopeName=x,this.balancedBracketSelectors=$,this._onigLib=O,this._basicScopeAttributesProvider=new p.BasicScopeAttributesProvider(C,A),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=P,this._grammar=S(E,null),this._injections=null,this._tokenTypeMatchers=[],M)for(const N of Object.keys(M)){const z=c.createMatchers(N,y);for(const q of z)this._tokenTypeMatchers.push({matcher:q.matcher,type:M[N]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const x of this._ruleId2desc)x&&x.dispose()}createOnigScanner(x){return this._onigLib.createOnigScanner(x)}createOnigString(x){return this._onigLib.createOnigString(x)}getMetadataForScope(x){return this._basicScopeAttributesProvider.getBasicScopeAttributes(x)}_collectInjections(){const x=[],E=this._rootScopeName,C=(A=>A===this._rootScopeName?this._grammar:this.getExternalGrammar(A))(E);if(C){const A=C.injections;if(A)for(let $ in A)b(x,$,A[$],this,C);const M=this._grammarRepository.injections(E);M&&M.forEach($=>{const P=this.getExternalGrammar($);if(P){const O=P.injectionSelector;O&&b(x,O,P,this,P)}})}return x.sort((A,M)=>A.priority-M.priority),x}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),a.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const x of this._injections)console.log(`  - ${x.debugSelector}`)}return this._injections}registerRule(x){const E=++this._lastRuleId,C=x(d.ruleIdFromNumber(E));return this._ruleId2desc[E]=C,C}getRule(x){return this._ruleId2desc[d.ruleIdToNumber(x)]}getExternalGrammar(x,E){if(this._includedGrammars[x])return this._includedGrammars[x];if(this._grammarRepository){const C=this._grammarRepository.lookup(x);if(C)return this._includedGrammars[x]=S(C,E&&E.$base),this._includedGrammars[x]}}tokenizeLine(x,E,C=0){const A=this._tokenize(x,E,!1,C);return{tokens:A.lineTokens.getResult(A.ruleStack,A.lineLength),ruleStack:A.ruleStack,stoppedEarly:A.stoppedEarly}}tokenizeLine2(x,E,C=0){const A=this._tokenize(x,E,!0,C);return{tokens:A.lineTokens.getBinaryResult(A.ruleStack,A.lineLength),ruleStack:A.ruleStack,stoppedEarly:A.stoppedEarly}}_tokenize(x,E,C,A){let M;if(this._rootId===-1&&(this._rootId=d.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository)),E&&E!==g.NULL)M=!1,E.reset();else{M=!0;const z=this._basicScopeAttributesProvider.getDefaultAttributes(),q=this.themeProvider.getDefaults(),H=l.EncodedTokenAttributes.set(0,z.languageId,z.tokenType,null,q.fontStyle,q.foregroundId,q.backgroundId),T=this.getRule(this._rootId).getName(null,null);let F;F=T?v.createRootAndLookUpScopeName(T,H,this):v.createRoot("unknown",H),E=new g(null,this._rootId,-1,-1,!1,null,F,F)}x+=`
`;const $=this.createOnigString(x),P=$.content.length,O=new w(C,x,this._tokenTypeMatchers,this.balancedBracketSelectors),N=m._tokenizeString(this,$,M,0,E,O,!0,A);return u.disposeOnigString($),{lineLength:P,lineTokens:O,ruleStack:N.stack,stoppedEarly:N.stoppedEarly}}}function S(D,x){return(D=f.clone(D)).repository=D.repository||{},D.repository.$self={$vscodeTextmateLocation:D.$vscodeTextmateLocation,patterns:D.patterns,name:D.scopeName},D.repository.$base=x||D.repository.$self,D}o.Grammar=_;class v{constructor(x,E,C){this.parent=x,this.scopePath=E,this.tokenAttributes=C}static createRoot(x,E){return new v(null,new h.ScopeStack(null,x),E)}static createRootAndLookUpScopeName(x,E,C){const A=C.getMetadataForScope(x),M=new h.ScopeStack(null,x),$=C.themeProvider.themeMatch(M),P=v.mergeAttributes(E,A,$);return new v(null,M,P)}get scopeName(){return this.scopePath.scopeName}equals(x){return v._equals(this,x)}static _equals(x,E){for(;;){if(x===E||!x&&!E)return!0;if(!x||!E||x.scopeName!==E.scopeName||x.tokenAttributes!==E.tokenAttributes)return!1;x=x.parent,E=E.parent}}static mergeAttributes(x,E,C){let A=-1,M=0,$=0;return C!==null&&(A=C.fontStyle,M=C.foregroundId,$=C.backgroundId),l.EncodedTokenAttributes.set(x,E.languageId,E.tokenType,null,A,M,$)}pushAttributed(x,E){if(x===null)return this;if(x.indexOf(" ")===-1)return v._pushAttributed(this,x,E);const C=x.split(/ /g);let A=this;for(const M of C)A=v._pushAttributed(A,M,E);return A}static _pushAttributed(x,E,C){const A=C.getMetadataForScope(E),M=x.scopePath.push(E),$=C.themeProvider.themeMatch(M),P=v.mergeAttributes(x.tokenAttributes,A,$);return new v(x,M,P)}getScopeNames(){return this.scopePath.getSegments()}}o.AttributedScopeStack=v;class g{constructor(x,E,C,A,M,$,P,O){this.parent=x,this.ruleId=E,this.beginRuleCapturedEOL=M,this.endRule=$,this.nameScopesList=P,this.contentNameScopesList=O,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=C,this._anchorPos=A}equals(x){return x!==null&&g._equals(this,x)}static _equals(x,E){return x===E||!!this._structuralEquals(x,E)&&x.contentNameScopesList.equals(E.contentNameScopesList)}static _structuralEquals(x,E){for(;;){if(x===E||!x&&!E)return!0;if(!x||!E||x.depth!==E.depth||x.ruleId!==E.ruleId||x.endRule!==E.endRule)return!1;x=x.parent,E=E.parent}}clone(){return this}static _reset(x){for(;x;)x._enterPos=-1,x._anchorPos=-1,x=x.parent}reset(){g._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(x,E,C,A,M,$,P){return new g(this,x,E,C,A,M,$,P)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(x){return x.getRule(this.ruleId)}toString(){const x=[];return this._writeString(x,0),"["+x.join(",")+"]"}_writeString(x,E){return this.parent&&(E=this.parent._writeString(x,E)),x[E++]=`(${this.ruleId}, TODO-${this.nameScopesList}, TODO-${this.contentNameScopesList})`,E}withContentNameScopesList(x){return this.contentNameScopesList===x?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,x)}withEndRule(x){return this.endRule===x?this:new g(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,x,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(x){let E=this;for(;E&&E._enterPos===x._enterPos;){if(E.ruleId===x.ruleId)return!0;E=E.parent}return!1}}o.StateStack=g,g.NULL=new g(null,0,0,0,!1,null,null,null),o.BalancedBracketSelectors=class{constructor(D,x){this.allowAny=!1,this.balancedBracketScopes=D.flatMap(E=>E==="*"?(this.allowAny=!0,[]):c.createMatchers(E,y).map(C=>C.matcher)),this.unbalancedBracketScopes=x.flatMap(E=>c.createMatchers(E,y).map(C=>C.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(D){for(const x of this.unbalancedBracketScopes)if(x(D))return!1;for(const x of this.balancedBracketScopes)if(x(D))return!0;return this.allowAny}};class w{constructor(x,E,C,A){this.balancedBracketSelectors=A,this._emitBinaryTokens=x,this._tokenTypeOverrides=C,a.DebugFlags.InDebugMode?this._lineText=E:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(x,E){this.produceFromScopes(x.contentNameScopesList,E)}produceFromScopes(x,E){var A;if(this._lastTokenEndIndex>=E)return;if(this._emitBinaryTokens){let M=x.tokenAttributes,$=!1;if((A=this.balancedBracketSelectors)!=null&&A.matchesAlways&&($=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const P=x.getScopeNames();for(const O of this._tokenTypeOverrides)O.matcher(P)&&(M=l.EncodedTokenAttributes.set(M,0,l.toOptionalTokenType(O.type),null,-1,0,0));this.balancedBracketSelectors&&($=this.balancedBracketSelectors.match(P))}if($&&(M=l.EncodedTokenAttributes.set(M,0,8,$,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===M)return void(this._lastTokenEndIndex=E);if(a.DebugFlags.InDebugMode){const P=x.getScopeNames();console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,E).replace(/\n$/,"\\n")+"|");for(let O=0;O<P.length;O++)console.log("      * "+P[O])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(M),void(this._lastTokenEndIndex=E)}const C=x.getScopeNames();if(a.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,E).replace(/\n$/,"\\n")+"|");for(let M=0;M<C.length;M++)console.log("      * "+C[M])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:E,scopes:C}),this._lastTokenEndIndex=E}getResult(x,E){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===E-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(x,E),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(x,E){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===E-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(x,E),this._binaryTokens[this._binaryTokens.length-2]=0);const C=new Uint32Array(this._binaryTokens.length);for(let A=0,M=this._binaryTokens.length;A<M;A++)C[A]=this._binaryTokens[A];return C}}o.LineTokens=w},965:(i,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.parseInclude=o.TopLevelRepositoryReference=o.TopLevelReference=o.RelativeReference=o.SelfReference=o.BaseReference=o.ScopeDependencyProcessor=o.ExternalReferenceCollector=o.TopLevelRepositoryRuleReference=o.TopLevelRuleReference=void 0;const a=s(878);class l{constructor(g){this.scopeName=g}toKey(){return this.scopeName}}o.TopLevelRuleReference=l;class c{constructor(g,w){this.scopeName=g,this.ruleName=w}toKey(){return`${this.scopeName}#${this.ruleName}`}}o.TopLevelRepositoryRuleReference=c;class u{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(g){const w=g.toKey();this._seenReferenceKeys.has(w)||(this._seenReferenceKeys.add(w),this._references.push(g))}}function d(v,g,w,D){const x=w.lookup(v.scopeName);if(!x){if(v.scopeName===g)throw new Error(`No grammar provided for <${g}>`);return}const E=w.lookup(g);v instanceof l?f({baseGrammar:E,selfGrammar:x},D):h(v.ruleName,{baseGrammar:E,selfGrammar:x,repository:x.repository},D);const C=w.injections(v.scopeName);if(C)for(const A of C)D.add(new l(A))}function h(v,g,w){g.repository&&g.repository[v]&&p([g.repository[v]],g,w)}function f(v,g){v.selfGrammar.patterns&&Array.isArray(v.selfGrammar.patterns)&&p(v.selfGrammar.patterns,{...v,repository:v.selfGrammar.repository},g),v.selfGrammar.injections&&p(Object.values(v.selfGrammar.injections),{...v,repository:v.selfGrammar.repository},g)}function p(v,g,w){for(const D of v){if(w.visitedRule.has(D))continue;w.visitedRule.add(D);const x=D.repository?a.mergeObjects({},g.repository,D.repository):g.repository;Array.isArray(D.patterns)&&p(D.patterns,{...g,repository:x},w);const E=D.include;if(!E)continue;const C=S(E);switch(C.kind){case 0:f({...g,selfGrammar:g.baseGrammar},w);break;case 1:f(g,w);break;case 2:h(C.ruleName,{...g,repository:x},w);break;case 3:case 4:const A=C.scopeName===g.selfGrammar.scopeName?g.selfGrammar:C.scopeName===g.baseGrammar.scopeName?g.baseGrammar:void 0;if(A){const M={baseGrammar:g.baseGrammar,selfGrammar:A,repository:x};C.kind===4?h(C.ruleName,M,w):f(M,w)}else C.kind===4?w.add(new c(C.scopeName,C.ruleName)):w.add(new l(C.scopeName))}}}o.ExternalReferenceCollector=u,o.ScopeDependencyProcessor=class{constructor(v,g){this.repo=v,this.initialScopeName=g,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new l(this.initialScopeName)]}processQueue(){const v=this.Q;this.Q=[];const g=new u;for(const w of v)d(w,this.initialScopeName,this.repo,g);for(const w of g.references)if(w instanceof l){if(this.seenFullScopeRequests.has(w.scopeName))continue;this.seenFullScopeRequests.add(w.scopeName),this.Q.push(w)}else{if(this.seenFullScopeRequests.has(w.scopeName)||this.seenPartialScopeRequests.has(w.toKey()))continue;this.seenPartialScopeRequests.add(w.toKey()),this.Q.push(w)}}};class m{constructor(){this.kind=0}}o.BaseReference=m;class b{constructor(){this.kind=1}}o.SelfReference=b;class y{constructor(g){this.ruleName=g,this.kind=2}}o.RelativeReference=y;class k{constructor(g){this.scopeName=g,this.kind=3}}o.TopLevelReference=k;class _{constructor(g,w){this.scopeName=g,this.ruleName=w,this.kind=4}}function S(v){if(v==="$base")return new m;if(v==="$self")return new b;const g=v.indexOf("#");if(g===-1)return new k(v);if(g===0)return new y(v.substring(1));{const w=v.substring(0,g),D=v.substring(g+1);return new _(w,D)}}o.TopLevelRepositoryReference=_,o.parseInclude=S},391:function(i,o,s){var a=this&&this.__createBinding||(Object.create?function(c,u,d,h){h===void 0&&(h=d),Object.defineProperty(c,h,{enumerable:!0,get:function(){return u[d]}})}:function(c,u,d,h){h===void 0&&(h=d),c[h]=u[d]}),l=this&&this.__exportStar||function(c,u){for(var d in c)d==="default"||Object.prototype.hasOwnProperty.call(u,d)||a(u,c,d)};Object.defineProperty(o,"__esModule",{value:!0}),l(s(947),o)},47:(i,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStackElement=o._tokenizeString=void 0;const a=s(350),l=s(44),c=s(792),u=s(878);class d{constructor(_,S){this.stack=_,this.stoppedEarly=S}}function h(k,_,S,v,g,w,D,x){const E=_.content.length;let C=!1,A=-1;if(D){const P=function(O,N,z,q,H,T){let F=H.beginRuleCapturedEOL?0:-1;const ee=[];for(let de=H;de;de=de.pop()){const ce=de.getRule(O);ce instanceof c.BeginWhileRule&&ee.push({rule:ce,stack:de})}for(let de=ee.pop();de;de=ee.pop()){const{ruleScanner:ce,findOptions:re}=p(de.rule,O,de.stack.endRule,z,q===F),I=ce.findNextMatchSync(N,q,re);if(a.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(ce.toString())),!I){a.DebugFlags.InDebugMode&&console.log("  popping "+de.rule.debugName+" - "+de.rule.debugWhileRegExp),H=de.stack.pop();break}if(I.ruleId!==c.whileRuleId){H=de.stack.pop();break}I.captureIndices&&I.captureIndices.length&&(T.produce(de.stack,I.captureIndices[0].start),b(O,N,z,de.stack,T,de.rule.whileCaptures,I.captureIndices),T.produce(de.stack,I.captureIndices[0].end),F=I.captureIndices[0].end,I.captureIndices[0].end>q&&(q=I.captureIndices[0].end,z=!1))}return{stack:H,linePos:q,anchorPosition:F,isFirstLine:z}}(k,_,S,v,g,w);g=P.stack,v=P.linePos,S=P.isFirstLine,A=P.anchorPosition}const M=Date.now();for(;!C;){if(x!==0&&Date.now()-M>x)return new d(g,!0);$()}return new d(g,!1);function $(){a.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${v}: |${_.content.substr(v).replace(/\n$/,"\\n")}|`));const P=function(q,H,T,F,ee,de){const ce=function(He,Kt,Kn,Rt,_n,Gr){const Dr=_n.getRule(He),{ruleScanner:Jn,findOptions:Yn}=f(Dr,He,_n.endRule,Kn,Rt===Gr);let Ln=0;a.DebugFlags.InDebugMode&&(Ln=u.performanceNow());const ft=Jn.findNextMatchSync(Kt,Rt,Yn);if(a.DebugFlags.InDebugMode){const Xn=u.performanceNow()-Ln;Xn>5&&console.warn(`Rule ${Dr.debugName} (${Dr.id}) matching took ${Xn} against '${Kt}'`),console.log(`  scanning for (linePos: ${Rt}, anchorPosition: ${Gr})`),console.log(Jn.toString()),ft&&console.log(`matched rule id: ${ft.ruleId} from ${ft.captureIndices[0].start} to ${ft.captureIndices[0].end}`)}return ft?{captureIndices:ft.captureIndices,matchedRuleId:ft.ruleId}:null}(q,H,T,F,ee,de),re=q.getInjections();if(re.length===0)return ce;const I=function(He,Kt,Kn,Rt,_n,Gr,Dr){let Jn,Yn=Number.MAX_VALUE,Ln=null,ft=0;const Xn=Gr.contentNameScopesList.getScopeNames();for(let xr=0,U=He.length;xr<U;xr++){const K=He[xr];if(!K.matcher(Xn))continue;const rt=Kt.getRule(K.ruleId),{ruleScanner:Jt,findOptions:Me}=f(rt,Kt,null,Rt,_n===Dr),L=Jt.findNextMatchSync(Kn,_n,Me);if(!L)continue;a.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${K.debugSelector}`),console.log(Jt.toString()));const j=L.captureIndices[0].start;if(!(j>=Yn)&&(Yn=j,Ln=L.captureIndices,Jn=L.ruleId,ft=K.priority,Yn===_n))break}return Ln?{priorityMatch:ft===-1,captureIndices:Ln,matchedRuleId:Jn}:null}(re,q,H,T,F,ee,de);if(!I)return ce;if(!ce)return I;const fe=ce.captureIndices[0].start,he=I.captureIndices[0].start;return he<fe||I.priorityMatch&&he===fe?I:ce}(k,_,S,v,g,A);if(!P)return a.DebugFlags.InDebugMode&&console.log("  no more matches."),w.produce(g,E),void(C=!0);const O=P.captureIndices,N=P.matchedRuleId,z=!!(O&&O.length>0)&&O[0].end>v;if(N===c.endRuleId){const q=g.getRule(k);a.DebugFlags.InDebugMode&&console.log("  popping "+q.debugName+" - "+q.debugEndRegExp),w.produce(g,O[0].start),g=g.withContentNameScopesList(g.nameScopesList),b(k,_,S,g,w,q.endCaptures,O),w.produce(g,O[0].end);const H=g;if(g=g.parent,A=H.getAnchorPos(),!z&&H.getEnterPos()===v)return a.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),g=H,w.produce(g,E),void(C=!0)}else{const q=k.getRule(N);w.produce(g,O[0].start);const H=g,T=q.getName(_.content,O),F=g.contentNameScopesList.pushAttributed(T,k);if(g=g.push(N,v,A,O[0].end===E,null,F,F),q instanceof c.BeginEndRule){const ee=q;a.DebugFlags.InDebugMode&&console.log("  pushing "+ee.debugName+" - "+ee.debugBeginRegExp),b(k,_,S,g,w,ee.beginCaptures,O),w.produce(g,O[0].end),A=O[0].end;const de=ee.getContentName(_.content,O),ce=F.pushAttributed(de,k);if(g=g.withContentNameScopesList(ce),ee.endHasBackReferences&&(g=g.withEndRule(ee.getEndWithResolvedBackReferences(_.content,O))),!z&&H.hasSameRuleAs(g))return a.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),g=g.pop(),w.produce(g,E),void(C=!0)}else if(q instanceof c.BeginWhileRule){const ee=q;a.DebugFlags.InDebugMode&&console.log("  pushing "+ee.debugName),b(k,_,S,g,w,ee.beginCaptures,O),w.produce(g,O[0].end),A=O[0].end;const de=ee.getContentName(_.content,O),ce=F.pushAttributed(de,k);if(g=g.withContentNameScopesList(ce),ee.whileHasBackReferences&&(g=g.withEndRule(ee.getWhileWithResolvedBackReferences(_.content,O))),!z&&H.hasSameRuleAs(g))return a.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),g=g.pop(),w.produce(g,E),void(C=!0)}else{const ee=q;if(a.DebugFlags.InDebugMode&&console.log("  matched "+ee.debugName+" - "+ee.debugMatchRegExp),b(k,_,S,g,w,ee.captures,O),w.produce(g,O[0].end),g=g.pop(),!z)return a.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),g=g.safePop(),w.produce(g,E),void(C=!0)}}O[0].end>v&&(v=O[0].end,S=!1)}}function f(k,_,S,v,g){return a.UseOnigurumaFindOptions?{ruleScanner:k.compile(_,S),findOptions:m(v,g)}:{ruleScanner:k.compileAG(_,S,v,g),findOptions:0}}function p(k,_,S,v,g){return a.UseOnigurumaFindOptions?{ruleScanner:k.compileWhile(_,S),findOptions:m(v,g)}:{ruleScanner:k.compileWhileAG(_,S,v,g),findOptions:0}}function m(k,_){let S=0;return k||(S|=1),_||(S|=4),S}function b(k,_,S,v,g,w,D){if(w.length===0)return;const x=_.content,E=Math.min(w.length,D.length),C=[],A=D[0].end;for(let M=0;M<E;M++){const $=w[M];if($===null)continue;const P=D[M];if(P.length===0)continue;if(P.start>A)break;for(;C.length>0&&C[C.length-1].endPos<=P.start;)g.produceFromScopes(C[C.length-1].scopes,C[C.length-1].endPos),C.pop();if(C.length>0?g.produceFromScopes(C[C.length-1].scopes,P.start):g.produce(v,P.start),$.retokenizeCapturedWithRuleId){const N=$.getName(x,D),z=v.contentNameScopesList.pushAttributed(N,k),q=$.getContentName(x,D),H=z.pushAttributed(q,k),T=v.push($.retokenizeCapturedWithRuleId,P.start,-1,!1,null,z,H),F=k.createOnigString(x.substring(0,P.end));h(k,F,S&&P.start===0,P.start,T,g,!1,0),l.disposeOnigString(F);continue}const O=$.getName(x,D);if(O!==null){const N=(C.length>0?C[C.length-1].scopes:v.contentNameScopesList).pushAttributed(O,k);C.push(new y(N,P.end))}}for(;C.length>0;)g.produceFromScopes(C[C.length-1].scopes,C[C.length-1].endPos),C.pop()}o._tokenizeString=h;class y{constructor(_,S){this.scopes=_,this.endPos=S}}o.LocalStackElement=y},974:(i,o)=>{function s(u,d){throw new Error("Near offset "+u.pos+": "+d+" ~~~"+u.source.substr(u.pos,50)+"~~~")}Object.defineProperty(o,"__esModule",{value:!0}),o.parseJSON=void 0,o.parseJSON=function(u,d,h){let f=new a(u),p=new l,m=0,b=null,y=[],k=[];function _(){y.push(m),k.push(b)}function S(){m=y.pop(),b=k.pop()}function v(g){s(f,g)}for(;c(f,p);){if(m===0){if(b!==null&&v("too many constructs in root"),p.type===3){b={},h&&(b.$vscodeTextmateLocation=p.toLocation(d)),_(),m=1;continue}if(p.type===2){b=[],_(),m=4;continue}v("unexpected token in root")}if(m===2){if(p.type===5){S();continue}if(p.type===7){m=3;continue}v("expected , or }")}if(m===1||m===3){if(m===1&&p.type===5){S();continue}if(p.type===1){let g=p.value;if(c(f,p)&&p.type===6||v("expected colon"),c(f,p)||v("expected value"),m=2,p.type===1){b[g]=p.value;continue}if(p.type===8){b[g]=null;continue}if(p.type===9){b[g]=!0;continue}if(p.type===10){b[g]=!1;continue}if(p.type===11){b[g]=parseFloat(p.value);continue}if(p.type===2){let w=[];b[g]=w,_(),m=4,b=w;continue}if(p.type===3){let w={};h&&(w.$vscodeTextmateLocation=p.toLocation(d)),b[g]=w,_(),m=1,b=w;continue}}v("unexpected token in dict")}if(m===5){if(p.type===4){S();continue}if(p.type===7){m=6;continue}v("expected , or ]")}if(m===4||m===6){if(m===4&&p.type===4){S();continue}if(m=5,p.type===1){b.push(p.value);continue}if(p.type===8){b.push(null);continue}if(p.type===9){b.push(!0);continue}if(p.type===10){b.push(!1);continue}if(p.type===11){b.push(parseFloat(p.value));continue}if(p.type===2){let g=[];b.push(g),_(),m=4,b=g;continue}if(p.type===3){let g={};h&&(g.$vscodeTextmateLocation=p.toLocation(d)),b.push(g),_(),m=1,b=g;continue}v("unexpected token in array")}v("unknown state")}return k.length!==0&&v("unclosed constructs"),b};class a{constructor(d){this.source=d,this.pos=0,this.len=d.length,this.line=1,this.char=0}}class l{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(d){return{filename:d,line:this.line,char:this.char}}}function c(u,d){d.value=null,d.type=0,d.offset=-1,d.len=-1,d.line=-1,d.char=-1;let h,f=u.source,p=u.pos,m=u.len,b=u.line,y=u.char;for(;;){if(p>=m)return!1;if(h=f.charCodeAt(p),h!==32&&h!==9&&h!==13){if(h!==10)break;p++,b++,y=0}else p++,y++}if(d.offset=p,d.line=b,d.char=y,h===34){for(d.type=1,p++,y++;;){if(p>=m)return!1;if(h=f.charCodeAt(p),p++,y++,h!==92){if(h===34)break}else p++,y++}d.value=f.substring(d.offset+1,p-1).replace(/\\u([0-9A-Fa-f]{4})/g,(k,_)=>String.fromCodePoint(parseInt(_,16))).replace(/\\(.)/g,(k,_)=>{switch(_){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:s(u,"invalid escape sequence")}throw new Error("unreachable")})}else if(h===91)d.type=2,p++,y++;else if(h===123)d.type=3,p++,y++;else if(h===93)d.type=4,p++,y++;else if(h===125)d.type=5,p++,y++;else if(h===58)d.type=6,p++,y++;else if(h===44)d.type=7,p++,y++;else if(h===110){if(d.type=8,p++,y++,h=f.charCodeAt(p),h!==117||(p++,y++,h=f.charCodeAt(p),h!==108)||(p++,y++,h=f.charCodeAt(p),h!==108))return!1;p++,y++}else if(h===116){if(d.type=9,p++,y++,h=f.charCodeAt(p),h!==114||(p++,y++,h=f.charCodeAt(p),h!==117)||(p++,y++,h=f.charCodeAt(p),h!==101))return!1;p++,y++}else if(h===102){if(d.type=10,p++,y++,h=f.charCodeAt(p),h!==97||(p++,y++,h=f.charCodeAt(p),h!==108)||(p++,y++,h=f.charCodeAt(p),h!==115)||(p++,y++,h=f.charCodeAt(p),h!==101))return!1;p++,y++}else for(d.type=11;;){if(p>=m)return!1;if(h=f.charCodeAt(p),!(h===46||h>=48&&h<=57||h===101||h===69||h===45||h===43))break;p++,y++}return d.len=p-d.offset,d.value===null&&(d.value=f.substr(d.offset,d.len)),u.pos=p,u.line=b,u.char=y,!0}},787:function(i,o,s){var a=this&&this.__createBinding||(Object.create?function(p,m,b,y){y===void 0&&(y=b),Object.defineProperty(p,y,{enumerable:!0,get:function(){return m[b]}})}:function(p,m,b,y){y===void 0&&(y=b),p[y]=m[b]}),l=this&&this.__exportStar||function(p,m){for(var b in p)b==="default"||Object.prototype.hasOwnProperty.call(m,b)||a(m,p,b)};Object.defineProperty(o,"__esModule",{value:!0}),o.parseRawGrammar=o.INITIAL=o.Registry=void 0;const c=s(391),u=s(50),d=s(652),h=s(583),f=s(965);l(s(44),o),o.Registry=class{constructor(p){this._options=p,this._syncRegistry=new d.SyncRegistry(h.Theme.createFromRawTheme(p.theme,p.colorMap),p.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(p,m){this._syncRegistry.setTheme(h.Theme.createFromRawTheme(p,m))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(p,m,b){return this.loadGrammarWithConfiguration(p,m,{embeddedLanguages:b})}loadGrammarWithConfiguration(p,m,b){return this._loadGrammar(p,m,b.embeddedLanguages,b.tokenTypes,new c.BalancedBracketSelectors(b.balancedBracketSelectors||[],b.unbalancedBracketSelectors||[]))}loadGrammar(p){return this._loadGrammar(p,0,null,null,null)}async _loadGrammar(p,m,b,y,k){const _=new f.ScopeDependencyProcessor(this._syncRegistry,p);for(;_.Q.length>0;)await Promise.all(_.Q.map(S=>this._loadSingleGrammar(S.scopeName))),_.processQueue();return this._grammarForScopeName(p,m,b,y,k)}async _loadSingleGrammar(p){return this._ensureGrammarCache.has(p)||this._ensureGrammarCache.set(p,this._doLoadSingleGrammar(p)),this._ensureGrammarCache.get(p)}async _doLoadSingleGrammar(p){const m=await this._options.loadGrammar(p);if(m){const b=typeof this._options.getInjections=="function"?this._options.getInjections(p):void 0;this._syncRegistry.addGrammar(m,b)}}async addGrammar(p,m=[],b=0,y=null){return this._syncRegistry.addGrammar(p,m),await this._grammarForScopeName(p.scopeName,b,y)}_grammarForScopeName(p,m=0,b=null,y=null,k=null){return this._syncRegistry.grammarForScopeName(p,m,b,y,k)}},o.INITIAL=c.StateStack.NULL,o.parseRawGrammar=u.parseRawGrammar},736:(i,o)=>{function s(a){return!!a&&!!a.match(/[\w\.:]+/)}Object.defineProperty(o,"__esModule",{value:!0}),o.createMatchers=void 0,o.createMatchers=function(a,l){const c=[],u=function(p){let m=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,b=m.exec(p);return{next:()=>{if(!b)return null;const y=b[0];return b=m.exec(p),y}}}(a);let d=u.next();for(;d!==null;){let p=0;if(d.length===2&&d.charAt(1)===":"){switch(d.charAt(0)){case"R":p=1;break;case"L":p=-1;break;default:console.log(`Unknown priority ${d} in scope selector`)}d=u.next()}let m=f();if(c.push({matcher:m,priority:p}),d!==",")break;d=u.next()}return c;function h(){if(d==="-"){d=u.next();const p=h();return m=>!!p&&!p(m)}if(d==="("){d=u.next();const p=function(){const m=[];let b=f();for(;b&&(m.push(b),d==="|"||d===",");){do d=u.next();while(d==="|"||d===",");b=f()}return y=>m.some(k=>k(y))}();return d===")"&&(d=u.next()),p}if(s(d)){const p=[];do p.push(d),d=u.next();while(s(d));return m=>l(p,m)}return null}function f(){const p=[];let m=h();for(;m;)p.push(m),m=h();return b=>p.every(y=>y(b))}}},44:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.disposeOnigString=void 0,o.disposeOnigString=function(s){typeof s.dispose=="function"&&s.dispose()}},50:(i,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.parseRawGrammar=void 0;const a=s(69),l=s(350),c=s(974);o.parseRawGrammar=function(u,d=null){return d!==null&&/\.json$/.test(d)?(h=u,f=d,l.DebugFlags.InDebugMode?c.parseJSON(h,f,!0):JSON.parse(h)):function(p,m){return l.DebugFlags.InDebugMode?a.parseWithLocation(p,m,"$vscodeTextmateLocation"):a.parsePLIST(p)}(u,d);var h,f}},69:(i,o)=>{function s(a,l,c){const u=a.length;let d=0,h=1,f=0;function p(I){if(c===null)d+=I;else for(;I>0;)a.charCodeAt(d)===10?(d++,h++,f=0):(d++,f++),I--}function m(I){c===null?d=I:p(I-d)}function b(){for(;d<u;){let I=a.charCodeAt(d);if(I!==32&&I!==9&&I!==13&&I!==10)break;p(1)}}function y(I){return a.substr(d,I.length)===I&&(p(I.length),!0)}function k(I){let fe=a.indexOf(I,d);m(fe!==-1?fe+I.length:u)}function _(I){let fe=a.indexOf(I,d);if(fe!==-1){let he=a.substring(d,fe);return m(fe+I.length),he}{let he=a.substr(d);return m(u),he}}u>0&&a.charCodeAt(0)===65279&&(d=1);let S=0,v=null,g=[],w=[],D=null;function x(I,fe){g.push(S),w.push(v),S=I,v=fe}function E(){if(g.length===0)return C("illegal state stack");S=g.pop(),v=w.pop()}function C(I){throw new Error("Near offset "+d+": "+I+" ~~~"+a.substr(d,50)+"~~~")}const A=function(){if(D===null)return C("missing <key>");let I={};c!==null&&(I[c]={filename:l,line:h,char:f}),v[D]=I,D=null,x(1,I)},M=function(){if(D===null)return C("missing <key>");let I=[];v[D]=I,D=null,x(2,I)},$=function(){let I={};c!==null&&(I[c]={filename:l,line:h,char:f}),v.push(I),x(1,I)},P=function(){let I=[];v.push(I),x(2,I)};function O(){if(S!==1)return C("unexpected </dict>");E()}function N(){return S===1||S!==2?C("unexpected </array>"):void E()}function z(I){if(S===1){if(D===null)return C("missing <key>");v[D]=I,D=null}else S===2?v.push(I):v=I}function q(I){if(isNaN(I))return C("cannot parse float");if(S===1){if(D===null)return C("missing <key>");v[D]=I,D=null}else S===2?v.push(I):v=I}function H(I){if(isNaN(I))return C("cannot parse integer");if(S===1){if(D===null)return C("missing <key>");v[D]=I,D=null}else S===2?v.push(I):v=I}function T(I){if(S===1){if(D===null)return C("missing <key>");v[D]=I,D=null}else S===2?v.push(I):v=I}function F(I){if(S===1){if(D===null)return C("missing <key>");v[D]=I,D=null}else S===2?v.push(I):v=I}function ee(I){if(S===1){if(D===null)return C("missing <key>");v[D]=I,D=null}else S===2?v.push(I):v=I}function de(){let I=_(">"),fe=!1;return I.charCodeAt(I.length-1)===47&&(fe=!0,I=I.substring(0,I.length-1)),{name:I.trim(),isClosed:fe}}function ce(I){if(I.isClosed)return"";let fe=_("</");return k(">"),fe.replace(/&#([0-9]+);/g,function(he,He){return String.fromCodePoint(parseInt(He,10))}).replace(/&#x([0-9a-f]+);/g,function(he,He){return String.fromCodePoint(parseInt(He,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(he){switch(he){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return he})}for(;d<u&&(b(),!(d>=u));){const I=a.charCodeAt(d);if(p(1),I!==60)return C("expected <");if(d>=u)return C("unexpected end of input");const fe=a.charCodeAt(d);if(fe===63){p(1),k("?>");continue}if(fe===33){if(p(1),y("--")){k("-->");continue}k(">");continue}if(fe===47){if(p(1),b(),y("plist")){k(">");continue}if(y("dict")){k(">"),O();continue}if(y("array")){k(">"),N();continue}return C("unexpected closed tag")}let he=de();switch(he.name){case"dict":S===1?A():S===2?$():(v={},c!==null&&(v[c]={filename:l,line:h,char:f}),x(1,v)),he.isClosed&&O();continue;case"array":S===1?M():S===2?P():(v=[],x(2,v)),he.isClosed&&N();continue;case"key":re=ce(he),S!==1?C("unexpected <key>"):D!==null?C("too many <key>"):D=re;continue;case"string":z(ce(he));continue;case"real":q(parseFloat(ce(he)));continue;case"integer":H(parseInt(ce(he),10));continue;case"date":T(new Date(ce(he)));continue;case"data":F(ce(he));continue;case"true":ce(he),ee(!0);continue;case"false":ce(he),ee(!1);continue}if(!/^plist/.test(he.name))return C("unexpected opened tag "+he.name)}var re;return v}Object.defineProperty(o,"__esModule",{value:!0}),o.parsePLIST=o.parseWithLocation=void 0,o.parseWithLocation=function(a,l,c){return s(a,l,c)},o.parsePLIST=function(a){return s(a,null,null)}},652:(i,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SyncRegistry=void 0;const a=s(391);o.SyncRegistry=class{constructor(l,c){this._onigLibPromise=c,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=l}dispose(){for(const l of this._grammars.values())l.dispose()}setTheme(l){this._theme=l}getColorMap(){return this._theme.getColorMap()}addGrammar(l,c){this._rawGrammars.set(l.scopeName,l),c&&this._injectionGrammars.set(l.scopeName,c)}lookup(l){return this._rawGrammars.get(l)}injections(l){return this._injectionGrammars.get(l)}getDefaults(){return this._theme.getDefaults()}themeMatch(l){return this._theme.match(l)}async grammarForScopeName(l,c,u,d,h){if(!this._grammars.has(l)){let f=this._rawGrammars.get(l);if(!f)return null;this._grammars.set(l,a.createGrammar(l,f,c,u,d,h,this,await this._onigLibPromise))}return this._grammars.get(l)}}},792:(i,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CompiledRule=o.RegExpSourceList=o.RegExpSource=o.RuleFactory=o.BeginWhileRule=o.BeginEndRule=o.IncludeOnlyRule=o.MatchRule=o.CaptureRule=o.Rule=o.ruleIdToNumber=o.ruleIdFromNumber=o.whileRuleId=o.endRuleId=void 0;const a=s(878),l=s(965),c=/\\(\d+)/,u=/\\(\d+)/g;o.endRuleId=-1,o.whileRuleId=-2,o.ruleIdFromNumber=function(v){return v},o.ruleIdToNumber=function(v){return v};class d{constructor(g,w,D,x){this.$location=g,this.id=w,this._name=D||null,this._nameIsCapturing=a.RegexSource.hasCaptures(this._name),this._contentName=x||null,this._contentNameIsCapturing=a.RegexSource.hasCaptures(this._contentName)}get debugName(){const g=this.$location?`${a.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${g}`}getName(g,w){return this._nameIsCapturing&&this._name!==null&&g!==null&&w!==null?a.RegexSource.replaceCaptures(this._name,g,w):this._name}getContentName(g,w){return this._contentNameIsCapturing&&this._contentName!==null?a.RegexSource.replaceCaptures(this._contentName,g,w):this._contentName}}o.Rule=d;class h extends d{constructor(g,w,D,x,E){super(g,w,D,x),this.retokenizeCapturedWithRuleId=E}dispose(){}collectPatterns(g,w){throw new Error("Not supported!")}compile(g,w){throw new Error("Not supported!")}compileAG(g,w,D,x){throw new Error("Not supported!")}}o.CaptureRule=h;class f extends d{constructor(g,w,D,x,E){super(g,w,D,null),this._match=new k(x,this.id),this.captures=E,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(g,w){w.push(this._match)}compile(g,w){return this._getCachedCompiledPatterns(g).compile(g)}compileAG(g,w,D,x){return this._getCachedCompiledPatterns(g).compileAG(g,D,x)}_getCachedCompiledPatterns(g){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new _,this.collectPatterns(g,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}o.MatchRule=f;class p extends d{constructor(g,w,D,x,E){super(g,w,D,x),this.patterns=E.patterns,this.hasMissingPatterns=E.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(g,w){for(const D of this.patterns)g.getRule(D).collectPatterns(g,w)}compile(g,w){return this._getCachedCompiledPatterns(g).compile(g)}compileAG(g,w,D,x){return this._getCachedCompiledPatterns(g).compileAG(g,D,x)}_getCachedCompiledPatterns(g){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new _,this.collectPatterns(g,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}o.IncludeOnlyRule=p;class m extends d{constructor(g,w,D,x,E,C,A,M,$,P){super(g,w,D,x),this._begin=new k(E,this.id),this.beginCaptures=C,this._end=new k(A||"\uFFFF",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=M,this.applyEndPatternLast=$||!1,this.patterns=P.patterns,this.hasMissingPatterns=P.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(g,w){return this._end.resolveBackReferences(g,w)}collectPatterns(g,w){w.push(this._begin)}compile(g,w){return this._getCachedCompiledPatterns(g,w).compile(g)}compileAG(g,w,D,x){return this._getCachedCompiledPatterns(g,w).compileAG(g,D,x)}_getCachedCompiledPatterns(g,w){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new _;for(const D of this.patterns)g.getRule(D).collectPatterns(g,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,w):this._cachedCompiledPatterns.setSource(0,w)),this._cachedCompiledPatterns}}o.BeginEndRule=m;class b extends d{constructor(g,w,D,x,E,C,A,M,$){super(g,w,D,x),this._begin=new k(E,this.id),this.beginCaptures=C,this.whileCaptures=M,this._while=new k(A,o.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=$.patterns,this.hasMissingPatterns=$.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(g,w){return this._while.resolveBackReferences(g,w)}collectPatterns(g,w){w.push(this._begin)}compile(g,w){return this._getCachedCompiledPatterns(g).compile(g)}compileAG(g,w,D,x){return this._getCachedCompiledPatterns(g).compileAG(g,D,x)}_getCachedCompiledPatterns(g){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new _;for(const w of this.patterns)g.getRule(w).collectPatterns(g,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(g,w){return this._getCachedCompiledWhilePatterns(g,w).compile(g)}compileWhileAG(g,w,D,x){return this._getCachedCompiledWhilePatterns(g,w).compileAG(g,D,x)}_getCachedCompiledWhilePatterns(g,w){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new _,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,w||"\uFFFF"),this._cachedCompiledWhilePatterns}}o.BeginWhileRule=b;class y{static createCaptureRule(g,w,D,x,E){return g.registerRule(C=>new h(w,C,D,x,E))}static getCompiledRuleId(g,w,D){return g.id||w.registerRule(x=>{if(g.id=x,g.match)return new f(g.$vscodeTextmateLocation,g.id,g.name,g.match,y._compileCaptures(g.captures,w,D));if(g.begin===void 0){g.repository&&(D=a.mergeObjects({},D,g.repository));let E=g.patterns;return E===void 0&&g.include&&(E=[{include:g.include}]),new p(g.$vscodeTextmateLocation,g.id,g.name,g.contentName,y._compilePatterns(E,w,D))}return g.while?new b(g.$vscodeTextmateLocation,g.id,g.name,g.contentName,g.begin,y._compileCaptures(g.beginCaptures||g.captures,w,D),g.while,y._compileCaptures(g.whileCaptures||g.captures,w,D),y._compilePatterns(g.patterns,w,D)):new m(g.$vscodeTextmateLocation,g.id,g.name,g.contentName,g.begin,y._compileCaptures(g.beginCaptures||g.captures,w,D),g.end,y._compileCaptures(g.endCaptures||g.captures,w,D),g.applyEndPatternLast,y._compilePatterns(g.patterns,w,D))}),g.id}static _compileCaptures(g,w,D){let x=[];if(g){let E=0;for(const C in g){if(C==="$vscodeTextmateLocation")continue;const A=parseInt(C,10);A>E&&(E=A)}for(let C=0;C<=E;C++)x[C]=null;for(const C in g){if(C==="$vscodeTextmateLocation")continue;const A=parseInt(C,10);let M=0;g[C].patterns&&(M=y.getCompiledRuleId(g[C],w,D)),x[A]=y.createCaptureRule(w,g[C].$vscodeTextmateLocation,g[C].name,g[C].contentName,M)}}return x}static _compilePatterns(g,w,D){let x=[];if(g)for(let E=0,C=g.length;E<C;E++){const A=g[E];let M=-1;if(A.include){const $=l.parseInclude(A.include);switch($.kind){case 0:case 1:M=y.getCompiledRuleId(D[A.include],w,D);break;case 2:let P=D[$.ruleName];P&&(M=y.getCompiledRuleId(P,w,D));break;case 3:case 4:const O=$.scopeName,N=$.kind===4?$.ruleName:null,z=w.getExternalGrammar(O,D);if(z)if(N){let q=z.repository[N];q&&(M=y.getCompiledRuleId(q,w,z.repository))}else M=y.getCompiledRuleId(z.repository.$self,w,z.repository)}}else M=y.getCompiledRuleId(A,w,D);if(M!==-1){const $=w.getRule(M);let P=!1;if(($ instanceof p||$ instanceof m||$ instanceof b)&&$.hasMissingPatterns&&$.patterns.length===0&&(P=!0),P)continue;x.push(M)}}return{patterns:x,hasMissingPatterns:(g?g.length:0)!==x.length}}}o.RuleFactory=y;class k{constructor(g,w){if(g){const D=g.length;let x=0,E=[],C=!1;for(let A=0;A<D;A++)if(g.charAt(A)==="\\"&&A+1<D){const M=g.charAt(A+1);M==="z"?(E.push(g.substring(x,A)),E.push("$(?!\\n)(?<!\\n)"),x=A+2):M!=="A"&&M!=="G"||(C=!0),A++}this.hasAnchor=C,x===0?this.source=g:(E.push(g.substring(x,D)),this.source=E.join(""))}else this.hasAnchor=!1,this.source=g;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=w,this.hasBackReferences=c.test(this.source)}clone(){return new k(this.source,this.ruleId)}setSource(g){this.source!==g&&(this.source=g,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(g,w){let D=w.map(x=>g.substring(x.start,x.end));return u.lastIndex=0,this.source.replace(u,(x,E)=>a.escapeRegExpCharacters(D[parseInt(E,10)]||""))}_buildAnchorCache(){let g,w,D,x,E=[],C=[],A=[],M=[];for(g=0,w=this.source.length;g<w;g++)D=this.source.charAt(g),E[g]=D,C[g]=D,A[g]=D,M[g]=D,D==="\\"&&g+1<w&&(x=this.source.charAt(g+1),x==="A"?(E[g+1]="\uFFFF",C[g+1]="\uFFFF",A[g+1]="A",M[g+1]="A"):x==="G"?(E[g+1]="\uFFFF",C[g+1]="G",A[g+1]="\uFFFF",M[g+1]="G"):(E[g+1]=x,C[g+1]=x,A[g+1]=x,M[g+1]=x),g++);return{A0_G0:E.join(""),A0_G1:C.join(""),A1_G0:A.join(""),A1_G1:M.join("")}}resolveAnchors(g,w){return this.hasAnchor&&this._anchorCache?g?w?this._anchorCache.A1_G1:this._anchorCache.A1_G0:w?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}o.RegExpSource=k;class _{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(g){this._items.push(g),this._hasAnchors=this._hasAnchors||g.hasAnchor}unshift(g){this._items.unshift(g),this._hasAnchors=this._hasAnchors||g.hasAnchor}length(){return this._items.length}setSource(g,w){this._items[g].source!==w&&(this._disposeCaches(),this._items[g].setSource(w))}compile(g){if(!this._cached){let w=this._items.map(D=>D.source);this._cached=new S(g,w,this._items.map(D=>D.ruleId))}return this._cached}compileAG(g,w,D){return this._hasAnchors?w?D?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(g,w,D)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(g,w,D)),this._anchorCache.A1_G0):D?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(g,w,D)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(g,w,D)),this._anchorCache.A0_G0):this.compile(g)}_resolveAnchors(g,w,D){let x=this._items.map(E=>E.resolveAnchors(w,D));return new S(g,x,this._items.map(E=>E.ruleId))}}o.RegExpSourceList=_;class S{constructor(g,w,D){this.regExps=w,this.rules=D,this.scanner=g.createOnigScanner(w)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const g=[];for(let w=0,D=this.rules.length;w<D;w++)g.push("   - "+this.rules[w]+": "+this.regExps[w]);return g.join(`
`)}findNextMatchSync(g,w,D){const x=this.scanner.findNextMatchSync(g,w,D);return x?{ruleId:this.rules[x.index],captureIndices:x.captureIndices}:null}}o.CompiledRule=S},583:(i,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeTrieElement=o.ThemeTrieElementRule=o.ColorMap=o.fontStyleToString=o.ParsedThemeRule=o.parseTheme=o.StyleAttributes=o.ScopeStack=o.Theme=void 0;const a=s(878);class l{constructor(k,_,S){this._colorMap=k,this._defaults=_,this._root=S,this._cachedMatchRoot=new a.CachedFn(v=>this._root.match(v))}static createFromRawTheme(k,_){return this.createFromParsedTheme(h(k),_)}static createFromParsedTheme(k,_){return function(S,v){S.sort((A,M)=>{let $=a.strcmp(A.scope,M.scope);return $!==0?$:($=a.strArrCmp(A.parentScopes,M.parentScopes),$!==0?$:A.index-M.index)});let g=0,w="#000000",D="#ffffff";for(;S.length>=1&&S[0].scope==="";){let A=S.shift();A.fontStyle!==-1&&(g=A.fontStyle),A.foreground!==null&&(w=A.foreground),A.background!==null&&(D=A.background)}let x=new p(v),E=new d(g,x.getId(w),x.getId(D)),C=new b(new m(0,null,-1,0,0),[]);for(let A=0,M=S.length;A<M;A++){let $=S[A];C.insert(0,$.scope,$.parentScopes,$.fontStyle,x.getId($.foreground),x.getId($.background))}return new l(x,E,C)}(k,_)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(k){if(k===null)return this._defaults;const _=k.scopeName,S=this._cachedMatchRoot.get(_).find(v=>function(g,w){if(w===null)return!0;let D=0,x=w[D];for(;g;){if(u(g.scopeName,x)){if(D++,D===w.length)return!0;x=w[D]}g=g.parent}return!1}(k.parent,v.parentScopes));return S?new d(S.fontStyle,S.foreground,S.background):null}}o.Theme=l;class c{constructor(k,_){this.parent=k,this.scopeName=_}static from(...k){let _=null;for(let S=0;S<k.length;S++)_=new c(_,k[S]);return _}push(k){return new c(this,k)}getSegments(){let k=this;const _=[];for(;k;)_.push(k.scopeName),k=k.parent;return _.reverse(),_}toString(){return this.getSegments().join(" ")}}function u(y,k){return k===y||y.startsWith(k)&&y[k.length]==="."}o.ScopeStack=c;class d{constructor(k,_,S){this.fontStyle=k,this.foregroundId=_,this.backgroundId=S}}function h(y){if(!y)return[];if(!y.settings||!Array.isArray(y.settings))return[];let k=y.settings,_=[],S=0;for(let v=0,g=k.length;v<g;v++){let w,D=k[v];if(!D.settings)continue;if(typeof D.scope=="string"){let A=D.scope;A=A.replace(/^[,]+/,""),A=A.replace(/[,]+$/,""),w=A.split(",")}else w=Array.isArray(D.scope)?D.scope:[""];let x=-1;if(typeof D.settings.fontStyle=="string"){x=0;let A=D.settings.fontStyle.split(" ");for(let M=0,$=A.length;M<$;M++)switch(A[M]){case"italic":x|=1;break;case"bold":x|=2;break;case"underline":x|=4;break;case"strikethrough":x|=8}}let E=null;typeof D.settings.foreground=="string"&&a.isValidHexColor(D.settings.foreground)&&(E=D.settings.foreground);let C=null;typeof D.settings.background=="string"&&a.isValidHexColor(D.settings.background)&&(C=D.settings.background);for(let A=0,M=w.length;A<M;A++){let $=w[A].trim().split(" "),P=$[$.length-1],O=null;$.length>1&&(O=$.slice(0,$.length-1),O.reverse()),_[S++]=new f(P,O,v,x,E,C)}}return _}o.StyleAttributes=d,o.parseTheme=h;class f{constructor(k,_,S,v,g,w){this.scope=k,this.parentScopes=_,this.index=S,this.fontStyle=v,this.foreground=g,this.background=w}}o.ParsedThemeRule=f,o.fontStyleToString=function(y){if(y===-1)return"not set";let k="";return 1&y&&(k+="italic "),2&y&&(k+="bold "),4&y&&(k+="underline "),8&y&&(k+="strikethrough "),k===""&&(k="none"),k.trim()};class p{constructor(k){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(k)){this._isFrozen=!0;for(let _=0,S=k.length;_<S;_++)this._color2id[k[_]]=_,this._id2color[_]=k[_]}else this._isFrozen=!1}getId(k){if(k===null)return 0;k=k.toUpperCase();let _=this._color2id[k];if(_)return _;if(this._isFrozen)throw new Error(`Missing color in color map - ${k}`);return _=++this._lastColorId,this._color2id[k]=_,this._id2color[_]=k,_}getColorMap(){return this._id2color.slice(0)}}o.ColorMap=p;class m{constructor(k,_,S,v,g){this.scopeDepth=k,this.parentScopes=_,this.fontStyle=S,this.foreground=v,this.background=g}clone(){return new m(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(k){let _=[];for(let S=0,v=k.length;S<v;S++)_[S]=k[S].clone();return _}acceptOverwrite(k,_,S,v){this.scopeDepth>k?console.log("how did this happen?"):this.scopeDepth=k,_!==-1&&(this.fontStyle=_),S!==0&&(this.foreground=S),v!==0&&(this.background=v)}}o.ThemeTrieElementRule=m;class b{constructor(k,_=[],S={}){this._mainRule=k,this._children=S,this._rulesWithParentScopes=_}static _sortBySpecificity(k){return k.length===1||k.sort(this._cmpBySpecificity),k}static _cmpBySpecificity(k,_){if(k.scopeDepth===_.scopeDepth){const S=k.parentScopes,v=_.parentScopes;let g=S===null?0:S.length,w=v===null?0:v.length;if(g===w)for(let D=0;D<g;D++){const x=S[D].length,E=v[D].length;if(x!==E)return E-x}return w-g}return _.scopeDepth-k.scopeDepth}match(k){if(k==="")return b._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let _,S,v=k.indexOf(".");return v===-1?(_=k,S=""):(_=k.substring(0,v),S=k.substring(v+1)),this._children.hasOwnProperty(_)?this._children[_].match(S):b._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(k,_,S,v,g,w){if(_==="")return void this._doInsertHere(k,S,v,g,w);let D,x,E,C=_.indexOf(".");C===-1?(D=_,x=""):(D=_.substring(0,C),x=_.substring(C+1)),this._children.hasOwnProperty(D)?E=this._children[D]:(E=new b(this._mainRule.clone(),m.cloneArr(this._rulesWithParentScopes)),this._children[D]=E),E.insert(k+1,x,S,v,g,w)}_doInsertHere(k,_,S,v,g){if(_!==null){for(let w=0,D=this._rulesWithParentScopes.length;w<D;w++){let x=this._rulesWithParentScopes[w];if(a.strArrCmp(x.parentScopes,_)===0)return void x.acceptOverwrite(k,S,v,g)}S===-1&&(S=this._mainRule.fontStyle),v===0&&(v=this._mainRule.foreground),g===0&&(g=this._mainRule.background),this._rulesWithParentScopes.push(new m(k,_,S,v,g))}else this._mainRule.acceptOverwrite(k,S,v,g)}}o.ThemeTrieElement=b},878:(i,o)=>{function s(c){return Array.isArray(c)?function(u){let d=[];for(let h=0,f=u.length;h<f;h++)d[h]=s(u[h]);return d}(c):typeof c=="object"?function(u){let d={};for(let h in u)d[h]=s(u[h]);return d}(c):c}Object.defineProperty(o,"__esModule",{value:!0}),o.performanceNow=o.CachedFn=o.escapeRegExpCharacters=o.isValidHexColor=o.strArrCmp=o.strcmp=o.RegexSource=o.basename=o.mergeObjects=o.clone=void 0,o.clone=function(c){return s(c)},o.mergeObjects=function(c,...u){return u.forEach(d=>{for(let h in d)c[h]=d[h]}),c},o.basename=function c(u){const d=~u.lastIndexOf("/")||~u.lastIndexOf("\\");return d===0?u:~d==u.length-1?c(u.substring(0,u.length-1)):u.substr(1+~d)};let a=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function l(c,u){return c<u?-1:c>u?1:0}o.RegexSource=class{static hasCaptures(c){return c!==null&&(a.lastIndex=0,a.test(c))}static replaceCaptures(c,u,d){return c.replace(a,(h,f,p,m)=>{let b=d[parseInt(f||p,10)];if(!b)return h;{let y=u.substring(b.start,b.end);for(;y[0]===".";)y=y.substring(1);switch(m){case"downcase":return y.toLowerCase();case"upcase":return y.toUpperCase();default:return y}}})}},o.strcmp=l,o.strArrCmp=function(c,u){if(c===null&&u===null)return 0;if(!c)return-1;if(!u)return 1;let d=c.length,h=u.length;if(d===h){for(let f=0;f<d;f++){let p=l(c[f],u[f]);if(p!==0)return p}return 0}return d-h},o.isValidHexColor=function(c){return!!(/^#[0-9a-f]{6}$/i.test(c)||/^#[0-9a-f]{8}$/i.test(c)||/^#[0-9a-f]{3}$/i.test(c)||/^#[0-9a-f]{4}$/i.test(c))},o.escapeRegExpCharacters=function(c){return c.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},o.CachedFn=class{constructor(c){this.fn=c,this.cache=new Map}get(c){if(this.cache.has(c))return this.cache.get(c);const u=this.fn(c);return this.cache.set(c,u),u}},o.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},r={};return function i(o){var s=r[o];if(s!==void 0)return s.exports;var a=r[o]={exports:{}};return n[o].call(a.exports,a,a.exports,i),a.exports}(787)})()})})(B0e);const Nl=[{id:"abap",scopeName:"source.abap",path:"abap.tmLanguage.json",samplePath:"abap.sample"},{id:"actionscript-3",scopeName:"source.actionscript.3",path:"actionscript-3.tmLanguage.json",samplePath:"actionscript-3.sample"},{id:"ada",scopeName:"source.ada",path:"ada.tmLanguage.json",samplePath:"ada.sample"},{id:"apache",scopeName:"source.apacheconf",path:"apache.tmLanguage.json"},{id:"apex",scopeName:"source.apex",path:"apex.tmLanguage.json",samplePath:"apex.sample"},{id:"apl",scopeName:"source.apl",path:"apl.tmLanguage.json",embeddedLangs:["html","xml","css","javascript","json"]},{id:"applescript",scopeName:"source.applescript",path:"applescript.tmLanguage.json",samplePath:"applescript.sample"},{id:"asm",scopeName:"source.asm.x86_64",path:"asm.tmLanguage.json",samplePath:"asm.sample"},{id:"astro",scopeName:"source.astro",path:"astro.tmLanguage.json",samplePath:"astro.sample",embeddedLangs:["json","javascript","typescript","tsx","css","less","sass","scss","stylus"]},{id:"awk",scopeName:"source.awk",path:"awk.tmLanguage.json",samplePath:"awk.sample"},{id:"ballerina",scopeName:"source.ballerina",path:"ballerina.tmLanguage.json",samplePath:"ballerina.sample"},{id:"bat",scopeName:"source.batchfile",path:"bat.tmLanguage.json",samplePath:"bat.sample",aliases:["batch"]},{id:"berry",scopeName:"source.berry",path:"berry.tmLanguage.json",samplePath:"berry.sample",aliases:["be"]},{id:"bibtex",scopeName:"text.bibtex",path:"bibtex.tmLanguage.json"},{id:"bicep",scopeName:"source.bicep",path:"bicep.tmLanguage.json",samplePath:"bicep.sample"},{id:"blade",scopeName:"text.html.php.blade",path:"blade.tmLanguage.json",samplePath:"blade.sample",embeddedLangs:["html","xml","sql","javascript","json","css"]},{id:"c",scopeName:"source.c",path:"c.tmLanguage.json",samplePath:"c.sample"},{id:"cadence",scopeName:"source.cadence",path:"cadence.tmLanguage.json",samplePath:"cadence.sample",aliases:["cdc"]},{id:"clarity",scopeName:"source.clar",path:"clarity.tmLanguage.json",samplePath:"clarity.sample"},{id:"clojure",scopeName:"source.clojure",path:"clojure.tmLanguage.json",samplePath:"clojure.sample",aliases:["clj"]},{id:"cmake",scopeName:"source.cmake",path:"cmake.tmLanguage.json",samplePath:"cmake.sample"},{id:"cobol",scopeName:"source.cobol",path:"cobol.tmLanguage.json",samplePath:"cobol.sample",embeddedLangs:["sql","html","java"]},{id:"codeql",scopeName:"source.ql",path:"codeql.tmLanguage.json",samplePath:"codeql.sample",aliases:["ql"],embeddedLangs:["markdown"]},{id:"coffee",scopeName:"source.coffee",path:"coffee.tmLanguage.json",samplePath:"coffee.sample",embeddedLangs:["javascript"]},{id:"cpp",scopeName:"source.cpp",path:"cpp.tmLanguage.json",samplePath:"cpp.sample",embeddedLangs:["glsl","sql"]},{id:"crystal",scopeName:"source.crystal",path:"crystal.tmLanguage.json",samplePath:"crystal.sample",embeddedLangs:["html","sql","css","c","javascript","shellscript"]},{id:"csharp",scopeName:"source.cs",path:"csharp.tmLanguage.json",samplePath:"csharp.sample",aliases:["c#","cs"]},{id:"css",scopeName:"source.css",path:"css.tmLanguage.json",samplePath:"css.sample"},{id:"cue",scopeName:"source.cue",path:"cue.tmLanguage.json",samplePath:"cue.sample"},{id:"d",scopeName:"source.d",path:"d.tmLanguage.json",samplePath:"d.sample"},{id:"dart",scopeName:"source.dart",path:"dart.tmLanguage.json",samplePath:"dart.sample"},{id:"diff",scopeName:"source.diff",path:"diff.tmLanguage.json",samplePath:"diff.sample"},{id:"docker",scopeName:"source.dockerfile",path:"docker.tmLanguage.json",samplePath:"docker.sample"},{id:"dream-maker",scopeName:"source.dm",path:"dream-maker.tmLanguage.json"},{id:"elixir",scopeName:"source.elixir",path:"elixir.tmLanguage.json",samplePath:"elixir.sample",embeddedLangs:["html"]},{id:"elm",scopeName:"source.elm",path:"elm.tmLanguage.json",samplePath:"elm.sample",embeddedLangs:["glsl"]},{id:"erb",scopeName:"text.html.erb",path:"erb.tmLanguage.json",samplePath:"erb.sample",embeddedLangs:["html","ruby"]},{id:"erlang",scopeName:"source.erlang",path:"erlang.tmLanguage.json",samplePath:"erlang.sample",aliases:["erl"]},{id:"fish",scopeName:"source.fish",path:"fish.tmLanguage.json",samplePath:"fish.sample"},{id:"fsharp",scopeName:"source.fsharp",path:"fsharp.tmLanguage.json",samplePath:"fsharp.sample",aliases:["f#","fs"],embeddedLangs:["markdown"]},{id:"gherkin",scopeName:"text.gherkin.feature",path:"gherkin.tmLanguage.json"},{id:"git-commit",scopeName:"text.git-commit",path:"git-commit.tmLanguage.json",embeddedLangs:["diff"]},{id:"git-rebase",scopeName:"text.git-rebase",path:"git-rebase.tmLanguage.json",embeddedLangs:["shellscript"]},{id:"glsl",scopeName:"source.glsl",path:"glsl.tmLanguage.json",samplePath:"glsl.sample",embeddedLangs:["c"]},{id:"gnuplot",scopeName:"source.gnuplot",path:"gnuplot.tmLanguage.json"},{id:"go",scopeName:"source.go",path:"go.tmLanguage.json",samplePath:"go.sample"},{id:"graphql",scopeName:"source.graphql",path:"graphql.tmLanguage.json",embeddedLangs:["javascript","typescript","jsx","tsx"]},{id:"groovy",scopeName:"source.groovy",path:"groovy.tmLanguage.json"},{id:"hack",scopeName:"source.hack",path:"hack.tmLanguage.json",embeddedLangs:["html","sql"]},{id:"haml",scopeName:"text.haml",path:"haml.tmLanguage.json",embeddedLangs:["ruby","javascript","sass","coffee","markdown","css"]},{id:"handlebars",scopeName:"text.html.handlebars",path:"handlebars.tmLanguage.json",aliases:["hbs"],embeddedLangs:["html","css","javascript","yaml"]},{id:"haskell",scopeName:"source.haskell",path:"haskell.tmLanguage.json",aliases:["hs"]},{id:"hcl",scopeName:"source.hcl",path:"hcl.tmLanguage.json",samplePath:"hcl.sample"},{id:"hlsl",scopeName:"source.hlsl",path:"hlsl.tmLanguage.json"},{id:"html",scopeName:"text.html.basic",path:"html.tmLanguage.json",samplePath:"html.sample",embeddedLangs:["javascript","css"]},{id:"imba",scopeName:"source.imba",path:"imba.tmLanguage.json",samplePath:"imba.sample"},{id:"ini",scopeName:"source.ini",path:"ini.tmLanguage.json"},{id:"java",scopeName:"source.java",path:"java.tmLanguage.json",samplePath:"java.sample"},{id:"javascript",scopeName:"source.js",path:"javascript.tmLanguage.json",samplePath:"javascript.sample",aliases:["js"]},{id:"jinja-html",scopeName:"text.html.jinja",path:"jinja-html.tmLanguage.json",embeddedLangs:["html"]},{id:"json",scopeName:"source.json",path:"json.tmLanguage.json"},{id:"json5",scopeName:"source.json5",path:"json5.tmLanguage.json",samplePath:"json5.sample"},{id:"jsonc",scopeName:"source.json.comments",path:"jsonc.tmLanguage.json"},{id:"jsonnet",scopeName:"source.jsonnet",path:"jsonnet.tmLanguage.json"},{id:"jssm",scopeName:"source.jssm",path:"jssm.tmLanguage.json",samplePath:"jssm.sample",aliases:["fsl"]},{id:"jsx",scopeName:"source.js.jsx",path:"jsx.tmLanguage.json"},{id:"julia",scopeName:"source.julia",path:"julia.tmLanguage.json",embeddedLangs:["cpp","python","javascript","r","sql"]},{id:"kotlin",scopeName:"source.kotlin",path:"kotlin.tmLanguage.json"},{id:"latex",scopeName:"text.tex.latex",path:"latex.tmLanguage.json",embeddedLangs:["tex","css","haskell","html","xml","java","lua","julia","ruby","javascript","typescript","python","yaml","rust","scala","gnuplot"]},{id:"less",scopeName:"source.css.less",path:"less.tmLanguage.json",embeddedLangs:["css"]},{id:"liquid",scopeName:"text.html.liquid",path:"liquid.tmLanguage.json",samplePath:"liquid.sample",embeddedLangs:["html","css","json","javascript"]},{id:"lisp",scopeName:"source.lisp",path:"lisp.tmLanguage.json"},{id:"logo",scopeName:"source.logo",path:"logo.tmLanguage.json"},{id:"lua",scopeName:"source.lua",path:"lua.tmLanguage.json",embeddedLangs:["c"]},{id:"make",scopeName:"source.makefile",path:"make.tmLanguage.json",aliases:["makefile"]},{id:"markdown",scopeName:"text.html.markdown",path:"markdown.tmLanguage.json",aliases:["md"],embeddedLangs:["css","html","ini","java","lua","make","perl","r","ruby","php","sql","vb","xml","xsl","yaml","bat","clojure","coffee","c","cpp","diff","docker","git-commit","git-rebase","go","groovy","pug","javascript","json","jsonc","less","objective-c","swift","scss","raku","powershell","python","julia","rust","scala","shellscript","typescript","tsx","csharp","fsharp","dart","handlebars","erlang","elixir","latex","bibtex"]},{id:"marko",scopeName:"text.marko",path:"marko.tmLanguage.json",embeddedLangs:["css","less","scss","typescript"]},{id:"matlab",scopeName:"source.matlab",path:"matlab.tmLanguage.json"},{id:"mdx",scopeName:"text.html.markdown.jsx",path:"mdx.tmLanguage.json",embeddedLangs:["jsx","markdown"]},{id:"mermaid",scopeName:"source.mermaid",path:"mermaid.tmLanguage.json"},{id:"nginx",scopeName:"source.nginx",path:"nginx.tmLanguage.json",embeddedLangs:["lua"]},{id:"nim",scopeName:"source.nim",path:"nim.tmLanguage.json",embeddedLangs:["c","html","xml","javascript","css","glsl","markdown"]},{id:"nix",scopeName:"source.nix",path:"nix.tmLanguage.json"},{id:"objective-c",scopeName:"source.objc",path:"objective-c.tmLanguage.json",aliases:["objc"]},{id:"objective-cpp",scopeName:"source.objcpp",path:"objective-cpp.tmLanguage.json"},{id:"ocaml",scopeName:"source.ocaml",path:"ocaml.tmLanguage.json"},{id:"pascal",scopeName:"source.pascal",path:"pascal.tmLanguage.json"},{id:"perl",scopeName:"source.perl",path:"perl.tmLanguage.json",embeddedLangs:["html","xml","css","javascript","sql"]},{id:"php",scopeName:"source.php",path:"php.tmLanguage.json",embeddedLangs:["html","xml","sql","javascript","json","css"]},{id:"plsql",scopeName:"source.plsql.oracle",path:"plsql.tmLanguage.json"},{id:"postcss",scopeName:"source.css.postcss",path:"postcss.tmLanguage.json"},{id:"powershell",scopeName:"source.powershell",path:"powershell.tmLanguage.json",aliases:["ps","ps1"]},{id:"prisma",scopeName:"source.prisma",path:"prisma.tmLanguage.json",samplePath:"prisma.sample"},{id:"prolog",scopeName:"source.prolog",path:"prolog.tmLanguage.json"},{id:"proto",scopeName:"source.proto",path:"proto.tmLanguage.json",samplePath:"proto.sample"},{id:"pug",scopeName:"text.pug",path:"pug.tmLanguage.json",aliases:["jade"],embeddedLangs:["javascript","css","sass","scss","stylus","coffee","html"]},{id:"puppet",scopeName:"source.puppet",path:"puppet.tmLanguage.json"},{id:"purescript",scopeName:"source.purescript",path:"purescript.tmLanguage.json"},{id:"python",scopeName:"source.python",path:"python.tmLanguage.json",samplePath:"python.sample",aliases:["py"]},{id:"r",scopeName:"source.r",path:"r.tmLanguage.json"},{id:"raku",scopeName:"source.perl.6",path:"raku.tmLanguage.json",aliases:["perl6"]},{id:"razor",scopeName:"text.aspnetcorerazor",path:"razor.tmLanguage.json",embeddedLangs:["html","csharp"]},{id:"rel",scopeName:"source.rel",path:"rel.tmLanguage.json",samplePath:"rel.sample"},{id:"riscv",scopeName:"source.riscv",path:"riscv.tmLanguage.json"},{id:"rst",scopeName:"source.rst",path:"rst.tmLanguage.json",embeddedLangs:["cpp","python","javascript","shellscript","yaml","cmake","ruby"]},{id:"ruby",scopeName:"source.ruby",path:"ruby.tmLanguage.json",samplePath:"ruby.sample",aliases:["rb"],embeddedLangs:["html","xml","sql","css","c","javascript","shellscript","lua"]},{id:"rust",scopeName:"source.rust",path:"rust.tmLanguage.json",aliases:["rs"]},{id:"sas",scopeName:"source.sas",path:"sas.tmLanguage.json",embeddedLangs:["sql"]},{id:"sass",scopeName:"source.sass",path:"sass.tmLanguage.json"},{id:"scala",scopeName:"source.scala",path:"scala.tmLanguage.json"},{id:"scheme",scopeName:"source.scheme",path:"scheme.tmLanguage.json"},{id:"scss",scopeName:"source.css.scss",path:"scss.tmLanguage.json",embeddedLangs:["css"]},{id:"shaderlab",scopeName:"source.shaderlab",path:"shaderlab.tmLanguage.json",aliases:["shader"],embeddedLangs:["hlsl"]},{id:"shellscript",scopeName:"source.shell",path:"shellscript.tmLanguage.json",aliases:["shell","bash","sh","zsh"]},{id:"smalltalk",scopeName:"source.smalltalk",path:"smalltalk.tmLanguage.json"},{id:"solidity",scopeName:"source.solidity",path:"solidity.tmLanguage.json"},{id:"sparql",scopeName:"source.sparql",path:"sparql.tmLanguage.json",samplePath:"sparql.sample",embeddedLangs:["turtle"]},{id:"sql",scopeName:"source.sql",path:"sql.tmLanguage.json"},{id:"ssh-config",scopeName:"source.ssh-config",path:"ssh-config.tmLanguage.json"},{id:"stata",scopeName:"source.stata",path:"stata.tmLanguage.json",samplePath:"stata.sample",embeddedLangs:["sql"]},{id:"stylus",scopeName:"source.stylus",path:"stylus.tmLanguage.json",aliases:["styl"]},{id:"svelte",scopeName:"source.svelte",path:"svelte.tmLanguage.json",embeddedLangs:["javascript","typescript","coffee","stylus","sass","css","scss","less","postcss","pug","markdown"]},{id:"swift",scopeName:"source.swift",path:"swift.tmLanguage.json"},{id:"system-verilog",scopeName:"source.systemverilog",path:"system-verilog.tmLanguage.json"},{id:"tasl",scopeName:"source.tasl",path:"tasl.tmLanguage.json",samplePath:"tasl.sample"},{id:"tcl",scopeName:"source.tcl",path:"tcl.tmLanguage.json"},{id:"tex",scopeName:"text.tex",path:"tex.tmLanguage.json",embeddedLangs:["r"]},{id:"toml",scopeName:"source.toml",path:"toml.tmLanguage.json"},{id:"tsx",scopeName:"source.tsx",path:"tsx.tmLanguage.json",samplePath:"tsx.sample"},{id:"turtle",scopeName:"source.turtle",path:"turtle.tmLanguage.json",samplePath:"turtle.sample"},{id:"twig",scopeName:"text.html.twig",path:"twig.tmLanguage.json",embeddedLangs:["css","javascript","php","python","ruby"]},{id:"typescript",scopeName:"source.ts",path:"typescript.tmLanguage.json",aliases:["ts"]},{id:"v",scopeName:"source.v",path:"v.tmLanguage.json",samplePath:"v.sample"},{id:"vb",scopeName:"source.asp.vb.net",path:"vb.tmLanguage.json",aliases:["cmd"]},{id:"verilog",scopeName:"source.verilog",path:"verilog.tmLanguage.json"},{id:"vhdl",scopeName:"source.vhdl",path:"vhdl.tmLanguage.json"},{id:"viml",scopeName:"source.viml",path:"viml.tmLanguage.json",aliases:["vim","vimscript"]},{id:"vue-html",scopeName:"text.html.vue-html",path:"vue-html.tmLanguage.json",embeddedLangs:["vue","javascript"]},{id:"vue",scopeName:"source.vue",path:"vue.tmLanguage.json",embeddedLangs:["html","markdown","pug","stylus","sass","css","scss","less","javascript","typescript","jsx","tsx","json","jsonc","yaml","toml","graphql"]},{id:"wasm",scopeName:"source.wat",path:"wasm.tmLanguage.json"},{id:"wenyan",scopeName:"source.wenyan",path:"wenyan.tmLanguage.json",aliases:["\u6587\u8A00"]},{id:"xml",scopeName:"text.xml",path:"xml.tmLanguage.json",embeddedLangs:["java"]},{id:"xsl",scopeName:"text.xml.xsl",path:"xsl.tmLanguage.json",embeddedLangs:["xml"]},{id:"yaml",scopeName:"source.yaml",path:"yaml.tmLanguage.json"},{id:"zenscript",scopeName:"source.zenscript",path:"zenscript.tmLanguage.json",samplePath:"zenscript.sample"}];var zc=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e))(zc||{});class Xt{static toBinaryStr(t){let n=t.toString(2);for(;n.length<32;)n="0"+n;return n}static printMetadata(t){let n=Xt.getLanguageId(t),r=Xt.getTokenType(t),i=Xt.getFontStyle(t),o=Xt.getForeground(t),s=Xt.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:o,background:s})}static getLanguageId(t){return(t&255)>>>0}static getTokenType(t){return(t&768)>>>8}static getFontStyle(t){return(t&14336)>>>11}static getForeground(t){return(t&8372224)>>>15}static getBackground(t){return(t&4286578688)>>>24}static containsBalancedBrackets(t){return(t&1024)!==0}static set(t,n,r,i,o,s){let a=Xt.getLanguageId(t),l=Xt.getTokenType(t),c=Xt.getFontStyle(t),u=Xt.getForeground(t),d=Xt.getBackground(t),h=Xt.containsBalancedBrackets(t)?1:0;return n!==0&&(a=n),r!==0&&(l=r===8?0:r),i!==-1&&(c=i),o!==0&&(u=o),s!==0&&(d=s),(a<<0|l<<8|c<<11|h<<10|u<<15|d<<24)>>>0}}function P0e(e){return e.endsWith("/")||e.endsWith("\\")?e.slice(0,-1):e}function j0e(e){return e.startsWith("./")?e.slice(2):e}function bv(e){const t=e.split(/[\/\\]/g);return t.slice(0,t.length-1)}function yv(...e){return e.map(P0e).map(j0e).join("/")}function z0e(e,t){const n=new Map;for(const r of e){const i=t(r);n.has(i)?n.get(i).push(r):n.set(i,[r])}return n}function V0e(e,t=!1){const n=e.length;let r=0,i="",o=0,s=16,a=0,l=0,c=0,u=0,d=0;function h(_,S){let v=0,g=0;for(;v<_||!S;){let w=e.charCodeAt(r);if(w>=48&&w<=57)g=g*16+w-48;else if(w>=65&&w<=70)g=g*16+w-65+10;else if(w>=97&&w<=102)g=g*16+w-97+10;else break;r++,v++}return v<_&&(g=-1),g}function f(_){r=_,i="",o=0,s=16,d=0}function p(){let _=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&xo(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&xo(e.charCodeAt(r)))for(r++;r<e.length&&xo(e.charCodeAt(r));)r++;else return d=3,e.substring(_,r);let S=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&xo(e.charCodeAt(r))){for(r++;r<e.length&&xo(e.charCodeAt(r));)r++;S=r}else d=3;return e.substring(_,S)}function m(){let _="",S=r;for(;;){if(r>=n){_+=e.substring(S,r),d=2;break}const v=e.charCodeAt(r);if(v===34){_+=e.substring(S,r),r++;break}if(v===92){if(_+=e.substring(S,r),r++,r>=n){d=2;break}switch(e.charCodeAt(r++)){case 34:_+='"';break;case 92:_+="\\";break;case 47:_+="/";break;case 98:_+="\b";break;case 102:_+="\f";break;case 110:_+=`
`;break;case 114:_+="\r";break;case 116:_+="	";break;case 117:const w=h(4,!0);w>=0?_+=String.fromCharCode(w):d=4;break;default:d=5}S=r;continue}if(v>=0&&v<=31)if(Us(v)){_+=e.substring(S,r),d=2;break}else d=6;r++}return _}function b(){if(i="",d=0,o=r,l=a,u=c,r>=n)return o=n,s=17;let _=e.charCodeAt(r);if(Kh(_)){do r++,i+=String.fromCharCode(_),_=e.charCodeAt(r);while(Kh(_));return s=15}if(Us(_))return r++,i+=String.fromCharCode(_),_===13&&e.charCodeAt(r)===10&&(r++,i+=`
`),a++,c=r,s=14;switch(_){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,i=m(),s=10;case 47:const S=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<n&&!Us(e.charCodeAt(r));)r++;return i=e.substring(S,r),s=12}if(e.charCodeAt(r+1)===42){r+=2;const v=n-1;let g=!1;for(;r<v;){const w=e.charCodeAt(r);if(w===42&&e.charCodeAt(r+1)===47){r+=2,g=!0;break}r++,Us(w)&&(w===13&&e.charCodeAt(r)===10&&r++,a++,c=r)}return g||(r++,d=1),i=e.substring(S,r),s=13}return i+=String.fromCharCode(_),r++,s=16;case 45:if(i+=String.fromCharCode(_),r++,r===n||!xo(e.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=p(),s=11;default:for(;r<n&&y(_);)r++,_=e.charCodeAt(r);if(o!==r){switch(i=e.substring(o,r),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(_),r++,s=16}}function y(_){if(Kh(_)||Us(_))return!1;switch(_){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function k(){let _;do _=b();while(_>=12&&_<=15);return _}return{setPosition:f,getPosition:()=>r,scan:t?k:b,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>r-o,getTokenStartLine:()=>l,getTokenStartCharacter:()=>o-u,getTokenError:()=>d}}function Kh(e){return e===32||e===9}function Us(e){return e===10||e===13}function xo(e){return e>=48&&e<=57}var Lw;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(Lw||(Lw={}));var Eu;(function(e){e.DEFAULT={allowTrailingComma:!1}})(Eu||(Eu={}));function U0e(e,t=[],n=Eu.DEFAULT){let r=null,i=[];const o=[];function s(l){Array.isArray(i)?i.push(l):r!==null&&(i[r]=l)}return q0e(e,{onObjectBegin:()=>{const l={};s(l),o.push(i),i=l,r=null},onObjectProperty:l=>{r=l},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{const l=[];s(l),o.push(i),i=l,r=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(l,c,u)=>{t.push({error:l,offset:c,length:u})}},n),i[0]}function q0e(e,t,n=Eu.DEFAULT){const r=V0e(e,!1),i=[];function o(A){return A?()=>A(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function s(A){return A?()=>A(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(A){return A?M=>A(M,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function l(A){return A?M=>A(M,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice()):()=>!0}const c=s(t.onObjectBegin),u=l(t.onObjectProperty),d=o(t.onObjectEnd),h=s(t.onArrayBegin),f=o(t.onArrayEnd),p=l(t.onLiteralValue),m=a(t.onSeparator),b=o(t.onComment),y=a(t.onError),k=n&&n.disallowComments,_=n&&n.allowTrailingComma;function S(){for(;;){const A=r.scan();switch(r.getTokenError()){case 4:v(14);break;case 5:v(15);break;case 3:v(13);break;case 1:k||v(11);break;case 2:v(12);break;case 6:v(16);break}switch(A){case 12:case 13:k?v(10):b();break;case 16:v(1);break;case 15:case 14:break;default:return A}}}function v(A,M=[],$=[]){if(y(A),M.length+$.length>0){let P=r.getToken();for(;P!==17;){if(M.indexOf(P)!==-1){S();break}else if($.indexOf(P)!==-1)break;P=S()}}}function g(A){const M=r.getTokenValue();return A?p(M):(u(M),i.push(M)),S(),!0}function w(){switch(r.getToken()){case 11:const A=r.getTokenValue();let M=Number(A);isNaN(M)&&(v(2),M=0),p(M);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return S(),!0}function D(){return r.getToken()!==10?(v(3,[],[2,5]),!1):(g(!1),r.getToken()===6?(m(":"),S(),C()||v(4,[],[2,5])):v(5,[],[2,5]),i.pop(),!0)}function x(){c(),S();let A=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(A||v(4,[],[]),m(","),S(),r.getToken()===2&&_)break}else A&&v(6,[],[]);D()||v(4,[],[2,5]),A=!0}return d(),r.getToken()!==2?v(7,[2],[]):S(),!0}function E(){h(),S();let A=!0,M=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(M||v(4,[],[]),m(","),S(),r.getToken()===4&&_)break}else M&&v(6,[],[]);A?(i.push(0),A=!1):i[i.length-1]++,C()||v(4,[],[4,5]),M=!0}return f(),A||i.pop(),r.getToken()!==4?v(8,[4],[]):S(),!0}function C(){switch(r.getToken()){case 3:return E();case 1:return x();case 10:return g(!0);default:return w()}}return S(),r.getToken()===17?n.allowEmptyContent?!0:(v(4,[],[]),!1):C()?(r.getToken()!==17&&v(9,[],[]),!0):(v(4,[],[]),!1)}var $w;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})($w||($w={}));var Iw;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(Iw||(Iw={}));const W0e=U0e;var Rw;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(Rw||(Rw={}));"process"in globalThis&&typeof process<"u"&&typeof process.release<"u"&&process.release.name;let wv="";const H0e="dist/";function G0e(e){wv=e.endsWith("/")?e:e+"/"}let Jh=null;async function K0e(e){if(!Jh){let t;t=ka.loadWASM({data:await(globalThis.__shiki_fetch__||globalThis.fetch)(kv(yv(...bv(e),"onig.wasm")))}),Jh=t.then(()=>({createOnigScanner(n){return ka.createOnigScanner(n)},createOnigString(n){return ka.createOnigString(n)}}))}return Jh}function kv(e){return`${wv}${e}`}async function J0e(e){const t=kv(e);return await(globalThis.__shiki_fetch__||globalThis.fetch)(t).then(n=>n.text())}async function _v(e){const t=[],n=W0e(await J0e(e),t,{allowTrailingComma:!0});if(t.length)throw t[0];return n}async function Dv(e){let t=await _v(e);const n=xv(t);if(n.include){const r=await Dv(yv(...bv(e),n.include));r.settings&&(n.settings=r.settings.concat(n.settings)),r.bg&&!n.bg&&(n.bg=r.bg),r.colors&&(n.colors={...r.colors,...n.colors}),delete n.include}return n}async function Y0e(e){return await _v(e)}function X0e(e){e.settings||(e.settings=[]),!(e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope)&&e.settings.unshift({settings:{foreground:e.fg,background:e.bg}})}function xv(e){const t=e.type||"dark",n={name:e.name,type:t,...e,...Q0e(e)};return e.include&&(n.include=e.include),e.tokenColors&&(n.settings=e.tokenColors,delete n.tokenColors),X0e(n),n}const Bw={light:"#333333",dark:"#bbbbbb"},Pw={light:"#fffffe",dark:"#1e1e1e"};function Q0e(e){var o,s,a,l;let t,n,r=e.settings?e.settings:e.tokenColors;const i=r?r.find(c=>!c.name&&!c.scope):void 0;return(o=i==null?void 0:i.settings)!=null&&o.foreground&&(t=i.settings.foreground),(s=i==null?void 0:i.settings)!=null&&s.background&&(n=i.settings.background),!t&&((a=e==null?void 0:e.colors)==null?void 0:a["editor.foreground"])&&(t=e.colors["editor.foreground"]),!n&&((l=e==null?void 0:e.colors)==null?void 0:l["editor.background"])&&(n=e.colors["editor.background"]),t||(t=e.type==="light"?Bw.light:Bw.dark),n||(n=e.type==="light"?Pw.light:Pw.dark),{fg:t,bg:n}}class Z0e{constructor(t,n){this.languagesPath="languages/",this.languageMap={},this.scopeToLangMap={},this._onigLibPromise=t,this._onigLibName=n}get onigLib(){return this._onigLibPromise}getOnigLibName(){return this._onigLibName}getLangRegistration(t){return this.languageMap[t]}async loadGrammar(t){const n=this.scopeToLangMap[t];if(!n)return null;if(n.grammar)return n.grammar;const r=await Y0e(Nl.includes(n)?`${this.languagesPath}${n.path}`:n.path);return n.grammar=r,r}addLanguage(t){this.languageMap[t.id]=t,t.aliases&&t.aliases.forEach(n=>{this.languageMap[n]=t}),this.scopeToLangMap[t.scopeName]=t}}function ebe(e,t,n,r,i){let o=n.split(/\r\n|\r|\n/),s=Su.INITIAL,a=[],l=[];for(let c=0,u=o.length;c<u;c++){let d=o[c];if(d===""){a=[],l.push([]);continue}let h,f,p;i.includeExplanation&&(h=r.tokenizeLine(d,s),f=h.tokens,p=0);let m=r.tokenizeLine2(d,s),b=m.tokens.length/2;for(let y=0;y<b;y++){let k=m.tokens[2*y],_=y+1<b?m.tokens[2*y+2]:d.length;if(k===_)continue;let S=m.tokens[2*y+1],v=Xt.getForeground(S),g=t[v],w=Xt.getFontStyle(S),D=[];if(i.includeExplanation){let x=0;for(;k+x<_;){let E=f[p],C=d.substring(E.startIndex,E.endIndex);x+=C.length,D.push({content:C,scopes:tbe(e,E.scopes)}),p++}}a.push({content:d.substring(k,_),color:g,fontStyle:w,explanation:D})}l.push(a),a=[],s=m.ruleStack}return l}function tbe(e,t){let n=[];for(let r=0,i=t.length;r<i;r++){let o=t.slice(0,r),s=t[r];n[r]={scopeName:s,themeMatches:rbe(e,s,o)}}return n}function jw(e,t){let n=e+".";return e===t||t.substring(0,n.length)===n}function nbe(e,t,n,r){if(!jw(e,n))return!1;let i=t.length-1,o=r.length-1;for(;i>=0&&o>=0;)jw(t[i],r[o])&&i--,o--;return i===-1}function rbe(e,t,n){let r=[],i=0;for(let o=0,s=e.settings.length;o<s;o++){let a=e.settings[o],l;if(typeof a.scope=="string")l=a.scope.split(/,/).map(c=>c.trim());else if(Array.isArray(a.scope))l=a.scope;else continue;for(let c=0,u=l.length;c<u;c++){let h=l[c].split(/ /),f=h[h.length-1],p=h.slice(0,h.length-1);nbe(f,p,t,n)&&(r[i++]=a,c=u)}}return r}const ibe={pre({className:e,style:t,children:n}){return`<pre class="${e}" style="${t}">${n}</pre>`},code({children:e}){return`<code>${e}</code>`},line({className:e,children:t}){return`<span class="${e}">${t}</span>`},token({style:e,children:t}){return`<span style="${e}">${t}</span>`}};function obe(e,t={}){var s;const n=t.bg||"#fff",r=z0e((s=t.lineOptions)!=null?s:[],a=>a.line),i=t.elements||{};function o(a="",l={},c){const u=i[a]||ibe[a];return u?(c=c.filter(Boolean),u({...l,children:a==="code"?c.join(`
`):c.join("")})):""}return o("pre",{className:"shiki "+(t.themeName||""),style:`background-color: ${n}`},[t.langId?`<div class="language-id">${t.langId}</div>`:"",o("code",{},e.map((a,l)=>{var h;const c=l+1,u=(h=r.get(c))!=null?h:[],d=lbe(u).join(" ");return o("line",{className:d,lines:e,line:a,index:l},a.map((f,p)=>{const m=[`color: ${f.color||t.fg}`];return f.fontStyle&zc.Italic&&m.push("font-style: italic"),f.fontStyle&zc.Bold&&m.push("font-weight: bold"),f.fontStyle&zc.Underline&&m.push("text-decoration: underline"),o("token",{style:m.join("; "),tokens:a,token:f,index:p},[abe(f.content)])}))}))])}const sbe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function abe(e){return e.replace(/[&<>"']/g,t=>sbe[t])}function lbe(e){var n;const t=new Set(["line"]);for(const r of e)for(const i of(n=r.classes)!=null?n:[])t.add(i);return Array.from(t)}class cbe extends Su.Registry{constructor(t){super(t),this._resolver=t,this.themesPath="themes/",this._resolvedThemes={},this._resolvedGrammars={},this._langGraph=new Map,this._langMap=Nl.reduce((n,r)=>(n[r.id]=r,n),{})}getTheme(t){return typeof t=="string"?this._resolvedThemes[t]:t}async loadTheme(t){return typeof t=="string"?(this._resolvedThemes[t]||(this._resolvedThemes[t]=await Dv(`${this.themesPath}${t}.json`)),this._resolvedThemes[t]):(t=xv(t),t.name&&(this._resolvedThemes[t.name]=t),t)}async loadThemes(t){return await Promise.all(t.map(n=>this.loadTheme(n)))}getLoadedThemes(){return Object.keys(this._resolvedThemes)}getGrammar(t){return this._resolvedGrammars[t]}async loadLanguage(t){var o;const r={embeddedLanguages:(o=t.embeddedLangs)==null?void 0:o.reduce(async(s,a,l)=>{if(!this.getLoadedLanguages().includes(a)&&this._resolver.getLangRegistration(a))return await this._resolver.loadGrammar(this._resolver.getLangRegistration(a).scopeName),s[this._resolver.getLangRegistration(a).scopeName]=l+2,s},{}),balancedBracketSelectors:t.balancedBracketSelectors||["*"],unbalancedBracketSelectors:t.unbalancedBracketSelectors||[]},i=await this.loadGrammarWithConfiguration(t.scopeName,1,r);this._resolvedGrammars[t.id]=i,t.aliases&&t.aliases.forEach(s=>{this._resolvedGrammars[s]=i})}async loadLanguages(t){for(const r of t)this.resolveEmbeddedLanguages(r);const n=Array.from(this._langGraph.values());for(const r of n)this._resolver.addLanguage(r);for(const r of n)await this.loadLanguage(r)}getLoadedLanguages(){return Object.keys(this._resolvedGrammars)}resolveEmbeddedLanguages(t){if(this._langGraph.has(t.id)||this._langGraph.set(t.id,t),t.embeddedLangs)for(const n of t.embeddedLangs)this._langGraph.set(n,this._langMap[n])}}function Cv(e){return typeof e=="string"?Nl.find(t=>{var n;return t.id===e||((n=t.aliases)==null?void 0:n.includes(e))}):e}function ube(e){var i;let t=Nl,n=e.themes||[],r=(i=e.paths)!=null&&i.wasm?e.paths.wasm.endsWith("/")?e.paths.wasm:e.paths.wasm+"/":H0e;return e.langs&&(t=e.langs.map(Cv)),e.theme&&n.unshift(e.theme),n.length||(n=["nord"]),{_languages:t,_themes:n,_wasmPath:r}}async function dbe(e){var g,w;const{_languages:t,_themes:n,_wasmPath:r}=ube(e),i=new Z0e(K0e(r),"vscode-oniguruma"),o=new cbe(i);(g=e.paths)!=null&&g.themes&&(o.themesPath=e.paths.themes.endsWith("/")?e.paths.themes:e.paths.themes+"/"),(w=e.paths)!=null&&w.languages&&(i.languagesPath=e.paths.languages.endsWith("/")?e.paths.languages:e.paths.languages+"/");const a=(await o.loadThemes(n))[0];let l;await o.loadLanguages(t);let c={"#000001":"var(--shiki-color-text)","#000002":"var(--shiki-color-background)","#000004":"var(--shiki-token-constant)","#000005":"var(--shiki-token-string)","#000006":"var(--shiki-token-comment)","#000007":"var(--shiki-token-keyword)","#000008":"var(--shiki-token-parameter)","#000009":"var(--shiki-token-function)","#000010":"var(--shiki-token-string-expression)","#000011":"var(--shiki-token-punctuation)","#000012":"var(--shiki-token-link)"};function u(D){c=D}function d(D,x){D.bg=c[D.bg]||D.bg,D.fg=c[D.fg]||D.fg,x.forEach((E,C)=>{x[C]=c[E]||E})}function h(D){const x=D?o.getTheme(D):a;if(!x)throw Error(`No theme registration for ${D}`);(!l||l.name!==x.name)&&(o.setTheme(x),l=x);const E=o.getColorMap();return x.type==="css"&&d(x,E),{_theme:x,_colorMap:E}}function f(D){const x=o.getGrammar(D);if(!x)throw Error(`No language registration for ${D}`);return{_grammar:x}}function p(D,x="text",E,C={includeExplanation:!0}){if(hbe(x))return[...D.split(/\r\n|\r|\n/).map(O=>[{content:O}])];const{_grammar:A}=f(x),{_theme:M,_colorMap:$}=h(E);return ebe(M,$,D,A,C)}function m(D,x="text",E){let C;typeof x=="object"?C=x:C={lang:x,theme:E};const A=p(D,C.lang,C.theme,{includeExplanation:!1}),{_theme:M}=h(C.theme);return obe(A,{fg:M.fg,bg:M.bg,lineOptions:C==null?void 0:C.lineOptions,themeName:M.name})}async function b(D){await o.loadTheme(D)}async function y(D){const x=Cv(D);i.addLanguage(x),await o.loadLanguage(x)}function k(){return o.getLoadedThemes()}function _(){return o.getLoadedLanguages()}function S(D){const{_theme:x}=h(D);return x.bg}function v(D){const{_theme:x}=h(D);return x.fg}return{codeToThemedTokens:p,codeToHtml:m,getTheme:D=>h(D)._theme,loadTheme:b,loadLanguage:y,getBackgroundColor:S,getForegroundColor:v,getLoadedThemes:k,getLoadedLanguages:_,setColorReplacements:u}}function hbe(e){return!e||["plaintext","txt","text"].includes(e)}const fbe="0.2.0";G0e(`https://cdn.jsdelivr.net/npm/shiki-es@${fbe}/dist/assets/`);function zw(e,t,n){const r=[];return qf(i=>i.type.name===t)(e).forEach(i=>{const{language:o}=i.node.attrs;if(!n.getLoadedLanguages().includes(o))return;let s=i.pos+1;for(const a of n.codeToThemedTokens(i.node.textContent,o)){for(const l of a){const c=s+l.content.length;r.push(Ke.inline(s,c,{style:`color: ${l.color}`})),s=c}s+=1}}),ve.create(e,r)}const pbe="MILKDOWN_SHIKI",Bi="fence";function mbe(e){return Nl.some(t=>{var n;return t.id===e||((n=t.aliases)==null?void 0:n.includes(e))})}async function gbe(e,t,n){const r=t.getLoadedLanguages(),i=[];n.descendants(s=>{const a=s.type.name===Bi&&s.attrs.language;a&&!i.includes(a)&&!r.includes(a)&&mbe(a)&&i.push(a)}),await Promise.all(i.map(s=>t.loadLanguage(s).catch(a=>a))),await e.wait(Qi);const o=e.get(Ve);o.dispatch(o.state.tr.setMeta("asyncUpdate",!0))}const bbe=(e,t)=>new ye({key:new _e(pbe),state:{init:(n,{doc:r})=>(gbe(e,t,r),zw(r,Bi,t)),apply:(n,r,i,o)=>{var d,h;const s=o.selection.$head.parent.type.name===Bi,a=i.selection.$head.parent.type.name===Bi,l=qf(f=>f.type.name===Bi)(i.doc),c=qf(f=>f.type.name===Bi)(o.doc);return n.docChanged&&(s||a||l.length!==c.length||((d=l[0])==null?void 0:d.node.attrs.language)!==((h=c[0])==null?void 0:h.node.attrs.language)||n.steps.some(f=>{const p=f;return p.from!==void 0&&p.to!==void 0&&l.some(m=>m.pos>=p.from&&m.pos+m.node.nodeSize<=p.to)}))||n.getMeta("asyncUpdate")?zw(n.doc,Bi,t):r.map(n.mapping,n.doc)}},props:{decorations(n){return this.getState(n)}}}),Yh=On("shiki"),ybe=e=>(e.record(Yh),async t=>{t.update(xc,r=>r.concat(Yh));const n=await dbe({theme:"one-dark-pro",langs:["bash","js","ts","json","html","css"]});t.update(ut,r=>[...r,bbe(t,n)]),t.done(Yh)});function Vw(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function Uw(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function Xh(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return Uw(n.overflowY,t)||Uw(n.overflowX,t)||function(r){var i=function(o){if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}}(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)}(e)}return!1}function ec(e,t,n,r,i,o,s,a){return o<e&&s>t||o>e&&s<t?0:o<=e&&a<=n||s>=t&&a>=n?o-e-r:s>t&&a<n||o<e&&a>n?s-t+i:0}var qw=function(e,t){var n=window,r=t.scrollMode,i=t.block,o=t.inline,s=t.boundary,a=t.skipOverflowHiddenElements,l=typeof s=="function"?s:function(_n){return _n!==s};if(!Vw(e))throw new TypeError("Invalid target");for(var c,u,d=document.scrollingElement||document.documentElement,h=[],f=e;Vw(f)&&l(f);){if((f=(u=(c=f).parentElement)==null?c.getRootNode().host||null:u)===d){h.push(f);break}f!=null&&f===document.body&&Xh(f)&&!Xh(document.documentElement)||f!=null&&Xh(f,a)&&h.push(f)}for(var p=n.visualViewport?n.visualViewport.width:innerWidth,m=n.visualViewport?n.visualViewport.height:innerHeight,b=window.scrollX||pageXOffset,y=window.scrollY||pageYOffset,k=e.getBoundingClientRect(),_=k.height,S=k.width,v=k.top,g=k.right,w=k.bottom,D=k.left,x=i==="start"||i==="nearest"?v:i==="end"?w:v+_/2,E=o==="center"?D+S/2:o==="end"?g:D,C=[],A=0;A<h.length;A++){var M=h[A],$=M.getBoundingClientRect(),P=$.height,O=$.width,N=$.top,z=$.right,q=$.bottom,H=$.left;if(r==="if-needed"&&v>=0&&D>=0&&w<=m&&g<=p&&v>=N&&w<=q&&D>=H&&g<=z)return C;var T=getComputedStyle(M),F=parseInt(T.borderLeftWidth,10),ee=parseInt(T.borderTopWidth,10),de=parseInt(T.borderRightWidth,10),ce=parseInt(T.borderBottomWidth,10),re=0,I=0,fe="offsetWidth"in M?M.offsetWidth-M.clientWidth-F-de:0,he="offsetHeight"in M?M.offsetHeight-M.clientHeight-ee-ce:0,He="offsetWidth"in M?M.offsetWidth===0?0:O/M.offsetWidth:0,Kt="offsetHeight"in M?M.offsetHeight===0?0:P/M.offsetHeight:0;if(d===M)re=i==="start"?x:i==="end"?x-m:i==="nearest"?ec(y,y+m,m,ee,ce,y+x,y+x+_,_):x-m/2,I=o==="start"?E:o==="center"?E-p/2:o==="end"?E-p:ec(b,b+p,p,F,de,b+E,b+E+S,S),re=Math.max(0,re+y),I=Math.max(0,I+b);else{re=i==="start"?x-N-ee:i==="end"?x-q+ce+he:i==="nearest"?ec(N,q,P,ee,ce+he,x,x+_,_):x-(N+P/2)+he/2,I=o==="start"?E-H-F:o==="center"?E-(H+O/2)+fe/2:o==="end"?E-z+de+fe:ec(H,z,O,F,de+fe,E,E+S,S);var Kn=M.scrollLeft,Rt=M.scrollTop;x+=Rt-(re=Math.max(0,Math.min(Rt+re/Kt,M.scrollHeight-P/Kt+he))),E+=Kn-(I=Math.max(0,Math.min(Kn+I/He,M.scrollWidth-O/He+fe)))}C.push({el:M,top:re,left:I})}return C};function vv(e){return e===Object(e)&&Object.keys(e).length!==0}function wbe(e,t){t===void 0&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach(function(r){var i=r.el,o=r.top,s=r.left;i.scroll&&n?i.scroll({top:o,left:s,behavior:t}):(i.scrollTop=o,i.scrollLeft=s)})}function kbe(e){return e===!1?{block:"end",inline:"nearest"}:vv(e)?e:{block:"start",inline:"nearest"}}function Ww(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(vv(t)&&typeof t.behavior=="function")return t.behavior(n?qw(e,t):[]);if(!!n){var r=kbe(t);return wbe(qw(e,r),r.behavior)}}var Qh,Sv=function(){return Qh||(Qh="performance"in window?performance.now.bind(performance):Date.now),Qh()};function Ev(e){var t=Sv(),n=Math.min((t-e.startTime)/e.duration,1),r=e.ease(n),i=e.startX+(e.x-e.startX)*r,o=e.startY+(e.y-e.startY)*r;e.method(i,o),i!==e.x||o!==e.y?requestAnimationFrame(function(){return Ev(e)}):e.cb()}function _be(e,t,n,r,i,o){r===void 0&&(r=600),i===void 0&&(i=function(d){return 1+--d*d*d*d*d});var s,a,l,c;s=e,a=e.scrollLeft,l=e.scrollTop,c=function(d,h){e.scrollLeft=Math.ceil(d),e.scrollTop=Math.ceil(h)},Ev({scrollable:s,method:c,startTime:Sv(),startX:a,startY:l,x:t,y:n,duration:r,ease:i,cb:o})}var Dbe=function(t){return t&&!t.behavior||t.behavior==="smooth"};function xbe(e,t){var n=t||{};return Dbe(n)?Ww(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,behavior:function(i){return Promise.all(i.reduce(function(o,s){var a=s.el,l=s.left,c=s.top,u=a.scrollLeft,d=a.scrollTop;return u===l&&d===c?o:[].concat(o,[new Promise(function(h){return _be(a,l,c,n.duration,n.ease,function(){return h({el:a,left:[u,l],top:[d,c]})})})])},[]))}}):Promise.resolve(Ww(e,t))}var Cbe=xbe;const Av=Cbe,vbe=(e,{css:t})=>{const n=(r,i=1)=>e.get(Mt,[r,i]);return t`
        .slash-dropdown-item {
            display: flex;
            gap: 32px;
            height: 48px;
            padding: 0 16px;
            align-items: center;
            justify-content: flex-start;
            cursor: pointer;
            line-height: 48px;
            font-family: ${e.get(Bn,"typography")};
            font-size: 14px;

            transition: all 0.2s ease-in-out;

            &,
            .icon {
                color: ${n("neutral",.87)};
                transition: all 0.2s ease-in-out;
            }

            &.hide {
                display: none;
            }

            &.active {
                background: ${n("secondary",.12)};
                &,
                .icon {
                    color: ${n("primary")};
                }
            }
        }
    `},Sbe=(e,t)=>{const n=(r,i=1)=>e.get(Mt,[r,i]);return t.css`
        width: 320px;
        min-height: 48px;
        max-height: 320px;
        overflow-y: auto;
        border-radius: ${e.get(Be,"radius")};
        position: absolute;
        background: ${n("surface")};

        ${e.get(ct,void 0)}
        ${e.get(Un,void 0)}
        ${e.get(Lr,void 0)}

        &.hide {
            display: none;
        }

        ${vbe(e,t)}
    `},Ebe=(e,t)=>{const n=document.createElement("div");return n.setAttribute("role","listbox"),n.setAttribute("tabindex","-1"),e.themeManager.onFlush(()=>{const r=e.getStyle(i=>Sbe(e.themeManager,i));r&&n.classList.add(r)}),n.classList.add(e.getClassName({},t),"hide"),n},un=(e,t,n,r)=>{var i;const o=(i=r==null?void 0:r.textClassName)!=null?i:"text",s=document.createElement("div");s.setAttribute("role","option"),s.classList.add("slash-dropdown-item");const a=e.get(it,n);if(!a)throw sS(n);const l=document.createElement("span");return l.textContent=t,l.className=o,s.appendChild(a.dom),s.appendChild(l),s},Abe=(e,t)=>{const{selection:n}=e,{$from:r}=n,i=e.tr.deleteRange(r.start(),r.pos);return t==null||t(i),!1},Fbe=e=>(t,n,r)=>(r&&(Abe(t,n),e()),!0),Np=(e,t="/")=>{const{nodes:n}=e.get(tt),r=[{id:"h1",dom:un(e.get(Ce),"Large Heading","h1"),command:()=>e.get(ke).call("TurnIntoHeading",1),keyword:["h1","large heading"],typeName:"heading"},{id:"h2",dom:un(e.get(Ce),"Medium Heading","h2"),command:()=>e.get(ke).call("TurnIntoHeading",2),keyword:["h2","medium heading"],typeName:"heading"},{id:"h3",dom:un(e.get(Ce),"Small Heading","h3"),command:()=>e.get(ke).call("TurnIntoHeading",3),keyword:["h3","small heading"],typeName:"heading"},{id:"bulletList",dom:un(e.get(Ce),"Bullet List","bulletList"),command:()=>e.get(ke).call("WrapInBulletList"),keyword:["bullet list","ul"],typeName:"bullet_list"},{id:"orderedList",dom:un(e.get(Ce),"Ordered List","orderedList"),command:()=>e.get(ke).call("WrapInOrderedList"),keyword:["ordered list","ol"],typeName:"ordered_list"},{id:"taskList",dom:un(e.get(Ce),"Task List","taskList"),command:()=>e.get(ke).call("TurnIntoTaskList"),keyword:["task list","task"],typeName:"task_list_item"},{id:"image",dom:un(e.get(Ce),"Image","image"),command:()=>e.get(ke).call("InsertImage"),keyword:["image"],typeName:"image"},{id:"blockquote",dom:un(e.get(Ce),"Quote","quote"),command:()=>e.get(ke).call("WrapInBlockquote"),keyword:["quote","blockquote"],typeName:"blockquote"},{id:"table",dom:un(e.get(Ce),"Table","table"),command:()=>e.get(ke).call("InsertTable"),keyword:["table"],typeName:"table"},{id:"code",dom:un(e.get(Ce),"Code Fence","code"),command:()=>e.get(ke).call("TurnIntoCodeFence"),keyword:["code"],typeName:"fence"},{id:"divider",dom:un(e.get(Ce),"Divide Line","divider"),command:()=>e.get(ke).call("InsertHr"),keyword:["divider","hr"],typeName:"hr"}],i=t.slice(1).toLocaleLowerCase();return r.filter(o=>!!n[o.typeName]&&o.keyword.some(s=>s.includes(i))).map(({keyword:o,typeName:s,...a})=>a)},Tbe=e=>({content:t,isTopLevel:n})=>{if(!n)return null;const r=e.get(Ve);return r!=null&&r.editable?t?t.startsWith("/")?t==="/"?{placeholder:"Type to filter...",actions:Np(e)}:{actions:Np(e,t)}:null:{placeholder:"Type / to use the slash commands..."}:null},Mbe=(e,{css:t})=>{const n=(i,o=1)=>e.get(Mt,[i,o]),r=e.get(Bn,"typography");return t`
        position: relative;
        &::before {
            position: absolute;
            cursor: text;
            font-family: ${r};
            font-size: 14px;
            color: ${n("neutral",.6)};
            content: attr(data-text);
            height: 100%;
            display: flex;
            align-items: center;
        }
    `},Obe=(e,{css:t})=>t`
    &::before {
        left: 8px;
    }
`,Nbe=(e,t)=>({handleKeyDown:(n,r)=>!(e.isEmpty()||!(r instanceof KeyboardEvent)||!["ArrowUp","ArrowDown","Enter"].includes(r.key)),decorations:n=>{const r=ul(({type:d})=>d.name==="paragraph")(n.selection),i=n.plugins.find(d=>d.key==="MILKDOWN_UPLOAD$"),o=i==null?void 0:i.getState(n);if(o!=null&&o.find(n.selection.from,n.selection.to).length>0||!r||r.node.childCount>1||n.selection.$from.parentOffset!==r.node.textContent.length||r.node.firstChild&&r.node.firstChild.type.name!=="text")return e.clear(),null;const{placeholder:s,actions:a}=e.update({parentNode:n.selection.$from.node(n.selection.$from.depth-1),isTopLevel:n.selection.$from.depth===1,content:r.node.textContent,state:n});if(!s)return null;const l=(d,h)=>{const f=r.pos;return ve.create(n.doc,[Ke.node(f,f+r.node.nodeSize,{class:h.filter(p=>p).join(" "),"data-text":d})])},c=t.getStyle(d=>Mbe(t.themeManager,d)),u=t.getStyle(d=>Obe(t.themeManager,d));return a.length?l(s,[c,u,"empty-node","is-slash"]):l(s,[c,"empty-node"])}}),Lbe=e=>({id:e.id,$:e.dom,command:Fbe(e.command)}),$be=()=>({placeholder:null,actions:[]}),Ibe=e=>{const t=$be();return{get:()=>t,clear:()=>{t.placeholder=null,t.actions=[]},update:n=>{var r,i;const o=e(n);return t.placeholder=(r=o==null?void 0:o.placeholder)!=null?r:null,t.actions=((i=o==null?void 0:o.actions)!=null?i:[]).map(Lbe),t},isEmpty:()=>t.actions.length===0}},Rbe=(e,t,n)=>{const{actions:r}=e.get();if(!r.length)return t.classList.add("hide"),!1;for(t.childNodes.forEach(o=>{o.removeEventListener("mouseenter",n.mouseEnter),o.removeEventListener("mouseleave",n.mouseLeave)});t.firstChild;)t.firstChild.remove();r.forEach(({$:o})=>{o.classList.remove("active"),o.addEventListener("mouseenter",n.mouseEnter),o.addEventListener("mouseleave",n.mouseLeave),t.appendChild(o)}),t.style.maxHeight="",t.classList.remove("hide");const i=r[0];return i&&(i.$.classList.add("active"),requestAnimationFrame(()=>{Av(i.$,{scrollMode:"if-needed",block:"nearest",inline:"nearest"})})),!0},Bbe=()=>{let e=!1;return{isLock:()=>e,lock:()=>{e=!0},unlock:()=>{e=!1}}},Pbe=e=>()=>{e.unlock()},jbe=(e,t)=>n=>{if(t.isLock())return;const{actions:r}=e.get(),i=r.findIndex(a=>a.$.classList.contains("active")),o=r[i];o&&i>=0&&o.$.classList.remove("active");const{target:s}=n;s instanceof HTMLElement&&s.classList.add("active")},zbe=()=>e=>{const{target:t}=e;t instanceof HTMLElement&&t.classList.remove("active")},Vbe=(e,t,n)=>r=>{const{target:i}=r;if(!(i instanceof HTMLElement)||!t)return;const o=()=>{r.stopPropagation(),r.preventDefault()},{actions:s}=e.get(),a=Object.values(s).find(({$:l})=>l.contains(i));if(!a){if(e.isEmpty())return;e.clear(),n.classList.add("hide"),o();return}o(),a.command(t.state,t.dispatch,t)},Ube=(e,t,n,r)=>i=>{if(!(i instanceof KeyboardEvent))return;r.isLock()||r.lock();const{key:o}=i;if(e.isEmpty()||!["ArrowDown","ArrowUp","Enter","Escape"].includes(o))return;const{actions:s}=e.get();let a=s.findIndex(({$:u})=>u.classList.contains("active"));a<0&&(a=0);const l=u=>{const d=s[a],h=s[u];!d||!h||(d.$.classList.remove("active"),h.$.classList.add("active"),Av(h.$,{scrollMode:"if-needed",block:"nearest",inline:"nearest"}))};if(o==="ArrowDown"){const u=a===s.length-1?0:a+1;l(u);return}if(o==="ArrowUp"){const u=a===0?s.length-1:a-1;l(u);return}if(o==="Escape"){if(e.isEmpty())return;e.clear(),n.classList.add("hide");return}const c=s[a];!c||(c.command(t.state,t.dispatch,t),c.$.classList.remove("active"))},qbe=(e,t)=>{om(e,t,(n,r,i)=>{const o=t.parentElement;if(!o)throw yn();let s=n.left-i.left;s<0&&(s=0);let a,l;const c=n.top-i.top,u=i.height+i.top-n.bottom;u>=r.height+28?a="bottom":c>=r.height+28?a="top":u>=c?(a="bottom",l=u-28):(a="top",l=c-28),(c<0||u<0)&&(l=i.height-n.height-28,l>r.height&&(l=void 0));const d=a==="top"?n.top-i.top-(l!=null?l:r.height)-14+o.scrollTop:n.bottom-i.top+14+o.scrollTop;return t.style.maxHeight=l!==void 0&&l>0?`${l}px`:"",[d,s]})},Wbe=(e,t,n,r,i)=>{const o=t.dom.parentNode;if(!o)return{};const s=Ebe(n,r),a=Bbe();o.appendChild(s);const l=Pbe(a),c=Vbe(e,t,s),u=Ube(e,t,s,a),d=jbe(e,a),h=zbe();return o.addEventListener("mousemove",l),o.addEventListener("mousedown",c),o.addEventListener("keydown",u),{update:f=>{!Rbe(e,s,{mouseEnter:d,mouseLeave:h})||i(f,s)},destroy:()=>{o.removeEventListener("mousemove",l),o.removeEventListener("mousedown",c),o.removeEventListener("keydown",u),s.remove()}}},Hbe="MILKDOWN_SLASH",Gbe=(e,t,n,r)=>{const i=Ibe(t);return new ye({key:new _e(Hbe),props:Nbe(i,e),view:o=>Wbe(i,o,e,n,r)})},Fv=qr((e,t)=>{var n,r;const i=(n=t==null?void 0:t.config)!=null?n:Tbe,o=(r=t==null?void 0:t.calcPosition)!=null?r:qbe;return{prosePlugins:(s,a)=>{const l=i(a);return[Gbe(e,l,"slash-dropdown",o)]}}}),Kbe=Gt.create([Fv()]),Jbe=/^(AppLayout|Debug|Markdown|Prose.*)$/,Ybe=Kbe.configure(Fv,{config:e=>({parentNode:t,isTopLevel:n,content:r})=>{var s;const i=e.get(rd),o=i.filter(a=>!Jbe.test(a.name)&&a.props.every(l=>!l.required));if(!r)return{placeholder:jc(t)?"Type / to use slash commands or # for slots...":"Type / to use slash commands..."};if(r.startsWith("/")&&(n||jc(t)||vp(t)))return{placeholder:r==="/"?"Type to filter...":null,actions:Np(e,r).concat(o.filter(a=>[a.name.toLocaleLowerCase(),"component"].some(l=>l.includes(r.slice(1).toLocaleLowerCase()))).map(a=>({id:"component",dom:un(e.get(Ce),a.name,"select"),command:()=>e.get(ke).call(sC,a)})))};if(r.startsWith("#")&&jc(t)){const a=r.slice(1).toLocaleLowerCase(),l=i.find(d=>Rn(d.name)===Rn(t.attrs.name)),c=t.content.content.filter(d=>vp(d)).map(d=>Rn(d.attrs.name)),u=((s=l==null?void 0:l.slots)!=null?s:[]).filter(({name:d})=>d!=="default"&&!c.includes(Rn(d))&&d.toLocaleLowerCase().includes(a));if(u.length)return{placeholder:a?"":" Type to filter...",actions:u.map(d=>({id:"component",dom:un(e.get(Ce),d.name,"table"),command:()=>e.get(ke).call(hC,d)}))}}}}),Xbe=new _e("MILKDOWN_TRAILING"),Tv=qr((e,t)=>({prosePlugins:()=>{var n;const r=(n=t==null?void 0:t.shouldAppend)!=null?n:o=>!(!o||["heading","paragraph"].includes(o.type.name)),i=new ye({key:Xbe,state:{init:(o,s)=>{const a=s.tr.doc.lastChild;return r(a,s)},apply:(o,s,a,l)=>{if(!o.docChanged)return s;const c=o.doc.lastChild;return r(c,l)}},appendTransaction:(o,s,a)=>{var l,c,u;const{doc:d,tr:h,schema:f}=a,p=(u=(l=t==null?void 0:t.getNode)==null?void 0:l.call(t,a))!=null?u:(c=f.nodes.paragraph)==null?void 0:c.create(),m=i.getState(a),b=d.content.size;if(!(!m||!p))return h.insert(b,p)}});return[i]}}));Gt.create([Tv()]);const Qbe=Gt.create([Tv({shouldAppend:e=>e?["heading","paragraph"].includes(e.type.name)?e.content.size>0:!0:!1})]),Zbe=({injectGlobal:e})=>e`
    /* copy from https://github.com/ProseMirror/@milkdown/prose/blob/master/style/prosemirror.css */
    .ProseMirror {
        position: relative;
    }

    .ProseMirror {
        word-wrap: break-word;
        white-space: pre-wrap;
        white-space: break-spaces;
        -webkit-font-variant-ligatures: none;
        font-variant-ligatures: none;
        font-feature-settings: 'liga' 0; /* the above doesn't seem to work in Edge */
    }

    .ProseMirror pre {
        white-space: pre-wrap;
    }

    .ProseMirror li {
        position: relative;
    }

    .ProseMirror-hideselection *::selection {
        background: transparent;
    }
    .ProseMirror-hideselection *::-moz-selection {
        background: transparent;
    }
    .ProseMirror-hideselection {
        caret-color: transparent;
    }

    .ProseMirror-selectednode {
        outline: 2px solid #8cf;
    }

    /* Make sure li selections wrap around markers */

    li.ProseMirror-selectednode {
        outline: none;
    }

    li.ProseMirror-selectednode:after {
        content: '';
        position: absolute;
        left: -32px;
        right: -2px;
        top: -2px;
        bottom: -2px;
        border: 2px solid #8cf;
        pointer-events: none;
    }

    /* Protect against generic img rules */

    img.ProseMirror-separator {
        display: inline !important;
        border: none !important;
        margin: 0 !important;
    }
`,eye=(e,{css:t})=>{const n=Hn(e),r=e.get(Be,"radius"),i=e.get(Be,"lineWidth");return t`
        background-color: ${n("background")};
        color: ${n("neutral")};
        font-size: 14px;
        padding: 18px 6px 22px;
        border-radius: ${r};
        font-family: ${e.get(Bn,"typography")};

        .code-fence_selector-wrapper {
            position: relative;
        }

        .code-fence_selector {
            width: 180px;
            box-sizing: border-box;
            border-radius: ${r};
            margin: 0 18px 18px;
            cursor: pointer;
            background-color: ${n("surface")};
            position: relative;
            display: flex;
            color: ${n("neutral",.87)};
            letter-spacing: 0.5px;
            height: 42px;
            align-items: center;

            ${e.get(ct,void 0)};
            ${e.get(Un,void 0)};

            & > .icon {
                width: 42px;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                color: ${n("solid",.87)};
                border-left: ${i} solid ${n("line")};

                text-align: center;
                transition: all 0.2s ease-in-out;
                &:hover {
                    background: ${n("background")};
                    color: ${n("primary")};
                }
            }

            > span:first-child {
                padding-left: 16px;
                flex: 1;
                font-weight: 500;
            }
        }

        .code-fence_selector-list-item {
            list-style: none;
            line-height: 2;
            padding-left: 16px;
            cursor: pointer;
            margin: 0 !important;
            :hover {
                background: ${n("secondary",.12)};
                color: ${n("primary")};
            }
        }

        .code-fence_selector-list {
            &[data-fold='true'] {
                display: none;
            }

            margin: 0 !important;
            font-weight: 500;
            position: absolute;
            z-index: 1;
            top: 42px;
            box-sizing: border-box;
            left: 18px;
            padding: 8px 0;
            max-height: 260px;
            width: 180px;
            background-color: ${n("surface")};
            border-top: none;
            overflow-y: auto;
            display: flex;
            flex-direction: column;

            ${e.get(Lr,["y"])}
            ${e.get(ct,void 0)};
            ${e.get(Un,void 0)};
        }
    `},tye=(e,t)=>{e.set("code-fence",({view:n,editable:r,onSelectLanguage:i,onBlur:o,onFocus:s,languageList:a})=>{const l=document.createElement("div"),c=document.createElement("div"),u=document.createElement("ul"),d=document.createElement("pre"),h=document.createElement("code"),f=document.createElement("div");f.className="code-fence_selector";const p=document.createElement("span");f.appendChild(p);const m=e.get(it,"downArrow");r()&&m&&f.appendChild(m.dom),h.spellcheck=!1,c.className="code-fence_selector-wrapper",c.contentEditable="false",c.append(f),c.append(u),d.append(h);const b=document.createElement("div");h.append(b),b.style.whiteSpace="inherit",l.append(c,d),l.classList.add("code-fence"),e.onFlush(()=>{const k=eye(e,t);k&&l.classList.add(k)}),u.className="code-fence_selector-list",u.addEventListener("mousedown",k=>{if(k.preventDefault(),k.stopPropagation(),!r())return;const _=k.target;if(!(_ instanceof HTMLLIElement))return;const S=_.dataset.value;S!=null&&i(S)}),f.addEventListener("mousedown",k=>{k.preventDefault(),k.stopPropagation(),r()&&s()});const y=()=>{!r()||u.dataset.fold==="true"||o()};return document.addEventListener("mousedown",y),a.forEach(k=>{const _=document.createElement("li");_.className="code-fence_selector-list-item",_.innerText=k||"--",u.appendChild(_),_.setAttribute("data-value",k)}),{dom:l,contentDOM:b,onUpdate:k=>{l.dataset.language=k.attrs.language,p.innerText=k.attrs.language||"--",u.style.maxHeight="",u.setAttribute("data-fold",k.attrs.fold?"true":"false");const _=n.dom.parentElement;if(!_)throw yn();const S=_.getBoundingClientRect(),v=c.getBoundingClientRect(),g=u.getBoundingClientRect();let w,D;const x=v.top-S.top,E=S.height+S.top-(v.height+v.top);E>=g.height+14?w="bottom":x>=g.height+14?w="top":E>=x?(w="bottom",D=E-14):(w="top",D=x-14);const C=w==="top"?-(D!=null?D:g.height):v.height;u.style.maxHeight=D!==void 0&&D>0?`${D}px`:"",u.style.top=`${C}px`},onDestroy:()=>{l.remove(),document.removeEventListener("mousedown",y)}}})},nye=(e,{css:t})=>{const n=Hn(e);e.set("image",({placeholder:r,isBlock:i,onError:o,onLoad:s})=>{const a=p=>{var m;return(m=e.get(it,p))==null?void 0:m.dom},l=document.createElement("span");l.classList.add("image-container"),e.onFlush(()=>{const p=t`
                display: inline-block;
                position: relative;
                text-align: center;
                font-size: 0;
                vertical-align: text-bottom;
                line-height: 1;

                ${i?`
                width: 100%;
                margin: 0 auto;
                `:""}

                &.ProseMirror-selectednode::after {
                    content: '';
                    background: ${n("secondary",.38)};
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                }

                img {
                    max-width: 100%;
                    height: auto;
                    object-fit: contain;
                    margin: 0 2px;
                }
                .icon,
                .placeholder {
                    display: none;
                }

                &.system {
                    width: 100%;
                    padding: 0 32px;
                    font-size: inherit;

                    img {
                        width: 0;
                        height: 0;
                        display: none;
                    }

                    .icon,
                    .placeholder {
                        display: inline;
                    }

                    box-sizing: border-box;
                    height: 48px;
                    background-color: ${n("background")};
                    border-radius: ${e.get(Be,"radius")};
                    display: inline-flex;
                    gap: 32px;
                    justify-content: flex-start;
                    align-items: center;
                    .placeholder {
                        margin: 0;
                        line-height: 1;
                        &::before {
                            content: '';
                            font-size: 14px;
                            color: ${n("neutral",.6)};
                        }
                    }
                }

                &.empty {
                    .placeholder {
                        &::before {
                            content: '${r}';
                        }
                    }
                }
            `;p&&l.classList.add(p)});const c=document.createElement("img");l.append(c);let u=a("image");const d=document.createElement("span");d.classList.add("placeholder"),l.append(u,d);const h=p=>{const m=a(p);l.replaceChild(m,u),u=m},f=p=>{l.classList.add("system","loading"),h("loading");const m=document.createElement("img");m.src=p,m.onerror=()=>{o==null||o(m)},m.onload=()=>{s==null||s(m)}};return{dom:l,onUpdate:p=>{const{src:m,alt:b,title:y,loading:k,failed:_}=p.attrs;if(c.src=m,c.title=y||b,c.alt=b,m.length===0){l.classList.add("system","empty"),h("image");return}if(k){f(m);return}if(_){l.classList.remove("loading","empty"),l.classList.add("system","failed"),h("brokenImage");return}if(m.length>0){l.classList.remove("system","empty","loading");return}l.classList.add("system","empty"),h("image")}}})},rye=(e,{css:t})=>{const n=Hn(e),r=e.get(Be,"radius"),i=e.get(Bn,"code"),o=t`
        color: ${n("neutral",.87)};
        background-color: ${n("background")};
        border-radius: ${r};
        padding: 16px 32px;
        font-size: 14px;
        font-family: ${i};
        overflow: hidden;
        line-height: 1.5;
        .ProseMirror {
            outline: none;
        }
    `,s=t`
        display: none;
    `,a=t`
        display: flex;
        justify-content: center;
        padding: 16px 0;
    `;return{codeStyle:o,hideCodeStyle:s,previewPanelStyle:a}},iye=(e,t)=>{let n=!1,r;return{isEditing:()=>n,innerView:()=>r,openEditor:(i,o)=>{r=new g_(i,{state:ai.create({doc:o,plugins:[oD(),lo({...T_,Backspace:dl(lm,a=>{var l;if(!a.selection.empty||r&&r.state.doc.textContent.length>0)return!1;const{dispatch:c,state:u}=e,d=(l=u.schema.nodes.paragraph)==null?void 0:l.create();if(!d)return!1;const h=u.tr.replaceSelectionWith(d);let f=h.selection.from-2;return f<0&&(f=0),c(h.setSelection(ne.create(h.doc,f))),e.focus(),!0}),"Mod-Enter":(a,l)=>{var c;if(l){const{state:u}=e,{to:d}=u.selection,h=(c=u.schema.nodes.paragraph)==null?void 0:c.createAndFill();if(!h)return!1;const f=u.tr.replaceWith(d,d,h);e.dispatch(f.setSelection(ne.create(f.doc,d))),e.focus()}return!0}}),lo({"Mod-z":iu,"Mod-y":Xo,"Shift-Mod-z":Xo})]}),plugins:[],dispatchTransaction:a=>{if(!r)return;const{state:l,transactions:c}=r.state.applyTransaction(a);if(r.updateState(l),!a.getMeta("fromOutside")){const u=e.state.tr,d=hn.offset(t()+1);c.forEach(h=>{const{steps:f}=h;f.forEach(p=>{const m=p.map(d);if(!m)throw new Error("step discarded!");u.step(m)})}),u.docChanged&&e.dispatch(u)}}}),r.focus();const{state:s}=r;r.dispatch(s.tr.setSelection(ne.create(s.doc,0))),n=!0},closeEditor:()=>{r&&r.destroy(),r=void 0,n=!1}}},oye=(e,t)=>{e.set("inner-editor",({view:n,getPos:r,render:i})=>{const o=iye(n,r),s=document.createElement("div");s.classList.add("math-block");const a=document.createElement("div"),l=document.createElement("div");let c="",u="",d="";return e.onFlush(()=>{({codeStyle:c,hideCodeStyle:u,previewPanelStyle:d}=rye(e,t)),c&&u&&a.classList.add(c,u),d&&l.classList.add(d)}),s.append(a),{dom:s,preview:l,editor:a,onUpdate:(h,f)=>{var p;if(f){const y=h.attrs.value||h.textContent||"";a.dataset.value=y,i(y);return}const m=o.innerView();if(m){const y=m.state,k=h.content.findDiffStart(y.doc.content);if(k!=null){const _=h.content.findDiffEnd(y.doc.content);if(_){let{a:S,b:v}=_;const g=k-Math.min(S,v);g>0&&(S+=g,v+=g),m.dispatch(y.tr.replace(k,v,h.slice(k,S)).setMeta("fromOutside",!0))}}}const b=((p=h.content.firstChild)==null?void 0:p.text)||"";a.dataset.value=b,i(b)},onFocus:h=>{!n.editable||(u&&a.classList.remove(u),o.openEditor(a,h),s.classList.add("ProseMirror-selectednode"))},onBlur:()=>{u&&a.classList.add(u),o.closeEditor(),s.classList.remove("ProseMirror-selectednode")},onDestroy:()=>{l.remove(),a.remove(),s.remove()},stopEvent:h=>{const f=o.innerView(),{target:p}=h,m=p&&(f==null?void 0:f.dom.contains(p));return!!(f&&m)}}})},sye=(e,{css:t},n)=>{const r=Hn(e);return t`
        ${e.get(ct,void 0)}
        ${e.get(Un,void 0)}

        display: inline-flex;
        justify-content: space-between;
        align-items: center;
        position: absolute;
        background: ${r("surface")};
        border-radius: ${e.get(Be,"radius")};
        font-size: 16px;

        height: 56px;
        box-sizing: border-box;
        width: ${n.width};
        padding: 0 16px;
        gap: 16px;
        z-index: 2;

        input,
        button {
            all: unset;
        }

        input {
            flex-grow: 1;
            caret-color: ${r("primary")};
            &::placeholder {
                color: ${r("neutral",.6)};
            }
        }

        button {
            cursor: pointer;
            height: 36px;
            color: ${r("primary")};
            font-size: 14px;
            padding: 0 8px;
            font-weight: 500;
            letter-spacing: 1.25px;
            &:hover {
                background-color: ${r("secondary",.12)};
            }
            &.disable {
                color: ${r("neutral",.38)};
                cursor: not-allowed;
                &:hover {
                    background: transparent;
                }
            }
            &.hide {
                display: none;
            }
        }

        &.hide {
            display: none;
        }
    `},aye=(e,t)=>{sm(e,t,(n,r,i,o)=>{const s=e.dom.parentElement;if(!s)throw yn();const a=r.left-n.left;let l=n.left-o.left-(i.width-a)/2;const c=n.bottom-o.top+14+s.scrollTop;l<0&&(l=0);const u=s.clientWidth-(i.width+4);return l>u&&(l=u),[c,l]})},lye=(e,t)=>{e.set("input-chip",({isBindMode:n,onUpdate:r,buttonText:i,placeholder:o,width:s="400px",calculatePosition:a=aye})=>{let l=null,c=!1,u="";const d=document.createElement("div");e.onFlush(()=>{const k=sye(e,t,{width:s});k&&d.classList.add(k)}),d.classList.add("tooltip-input");const h=document.createElement("input");o&&(h.placeholder=o),d.appendChild(h),n||(l=document.createElement("button"),l.innerText=i||"APPLY",d.appendChild(l));const f=()=>{d.classList.add("hide")},p=k=>{d.classList.remove("hide"),a(k,d)},m=k=>{const{target:_}=k;if(_ instanceof HTMLInputElement){if(u=_.value,!l){r(u);return}if(!u){l.classList.add("disable"),c=!0;return}l.classList.remove("disable"),c=!1}},b=k=>{c||(k.stopPropagation(),r(u),f())},y=k=>{"key"in k&&k.key==="Enter"&&(r(u),f())};return{dom:d,init:k=>{const _=k.dom.parentElement;if(!_)throw yn();h.addEventListener("input",m),h.addEventListener("keydown",y),l==null||l.addEventListener("mousedown",b),_.appendChild(d),f()},show:p,hide:f,destroy:()=>{h.removeEventListener("input",m),h.removeEventListener("keydown",y),l==null||l.removeEventListener("mousedown",b),d.remove()},update:k=>{u=k,h.value=k}}})},cye=(e,{css:t})=>{const n=Hn(e);e.set("task-list-item",({onChange:r,editable:i})=>{const o=f=>{var p;return(p=e.get(it,f))==null?void 0:p.dom},s=document.createElement("li"),a=document.createElement("label"),l=document.createElement("span"),c=document.createElement("input"),u=document.createElement("div");let d=o("unchecked");a.appendChild(d);const h=f=>{const p=o(f);a.replaceChild(p,d),d=p};return a.append(c,l),s.append(a,u),a.contentEditable="false",c.type="checkbox",i()||(c.disabled=!0,a.style.cursor="not-allowed"),c.onchange=f=>{if(f.target instanceof HTMLInputElement){if(!i()){c.checked=!c.checked;return}f.preventDefault(),r(c.checked)}},s.dataset.type="task-item",s.classList.add("task-list-item"),e.onFlush(()=>{const f=t`
                list-style-type: none;
                position: relative;

                & > div {
                    overflow: hidden;
                    padding: 0 2px;
                    width: 100%;
                }

                label {
                    display: inline-block;
                    width: 24px;
                    height: 24px;
                    cursor: pointer;
                    input {
                        visibility: hidden;
                    }
                }
                &[data-checked='true'] {
                    > label {
                        color: ${n("primary")};
                    }
                }
                &[data-checked='false'] {
                    > label {
                        color: ${n("solid",.87)};
                    }
                }
                .paragraph {
                    margin: 8px 0;
                }
            `;f&&s.classList.add(f)}),{dom:s,contentDOM:u,onUpdate:f=>{s.dataset.checked=f.attrs.checked,f.attrs.checked?c.setAttribute("checked","checked"):c.removeAttribute("checked"),h(f.attrs.checked?"checked":"unchecked")}}})},uye=(e,t)=>{[lye,nye,tye,cye,oye].forEach(n=>{n(e,t)})},dye=["RoobertPRO","sans-serif"],hye=["Consolas","Monaco","Andale Mono","Ubuntu Mono","monospace"],Hw={h1:{label:"h1",icon:"looks_one"},h2:{label:"h2",icon:"looks_two"},h3:{label:"h3",icon:"looks_3"},loading:{label:"loading",icon:"hourglass_empty"},quote:{label:"quote",icon:"format_quote"},code:{label:"code",icon:"code"},table:{label:"table",icon:"table_chart"},divider:{label:"divider",icon:"horizontal_rule"},image:{label:"image",icon:"image"},brokenImage:{label:"broken image",icon:"broken_image"},bulletList:{label:"bullet list",icon:"format_list_bulleted"},orderedList:{label:"ordered list",icon:"format_list_numbered"},taskList:{label:"task list",icon:"checklist"},bold:{label:"bold",icon:"format_bold"},italic:{label:"italic",icon:"format_italic"},inlineCode:{label:"inline code",icon:"code"},strikeThrough:{label:"strike through",icon:"strikethrough_s"},link:{label:"link",icon:"link"},leftArrow:{label:"left arrow",icon:"chevron_left"},rightArrow:{label:"right arrow",icon:"chevron_right"},upArrow:{label:"up arrow",icon:"expand_less"},downArrow:{label:"down arrow",icon:"expand_more"},alignLeft:{label:"align left",icon:"format_align_left"},alignRight:{label:"align right",icon:"format_align_right"},alignCenter:{label:"align center",icon:"format_align_center"},delete:{label:"delete",icon:"delete"},select:{label:"select",icon:"select_all"},unchecked:{label:"unchecked",icon:"check_box_outline_blank"},checked:{label:"checked",icon:"check_box"},undo:{label:"undo",icon:"turn_left"},redo:{label:"redo",icon:"turn_right"},liftList:{label:"lift list",icon:"format_indent_decrease"},sinkList:{label:"sink list",icon:"format_indent_increase"},dragHandle:{label:"drag handle",icon:"drag_indicator"},text:{label:"text",icon:"title"}},fye=e=>{const t=Hw[e];if(!t)return;const n=document.createElement("span");return n.className="icon material-icons material-icons-outlined",n.textContent=Hw[e].icon,{dom:n,label:t.label}},Qt={gray0:"#fafafa",gray1:"#f4f4f5",gray2:"#e4e4e7",gray3:"#d4d4d8",gray4:"#a1a1aa",gray5:"#71717a",gray6:"#52525b",gray7:"#3f3f46",gray8:"#27272a",gray9:"#18181b",primary:"#00DC82",secondary:"#36E4DA"},pye={shadow:Qt.gray1,primary:Qt.primary,secondary:Qt.gray3,neutral:Qt.gray7,solid:Qt.gray5,line:Qt.gray2,background:Qt.gray1,surface:"#fff"},mye={shadow:Qt.gray1,primary:Qt.primary,secondary:Qt.gray7,neutral:Qt.gray2,solid:Qt.gray4,line:Qt.gray8,background:Qt.gray8,surface:"#000"},gye=(e,t)=>{const{injectGlobal:n,css:r}=t,i=Hn(e),o=e.get(Be,"radius"),s=i("neutral"),a=i("surface"),l=i("line"),c=r`
    .ProseMirror-selectednode {
      outline: none;
    }

    li.ProseMirror-selectednode {
      outline: none;
    }

    li.ProseMirror-selectednode::after {
      ${e.get(ct,void 0)};
    }
  `,u=r`
    .ProseMirror-yjs-cursor > div {
      padding: 2px 4px;
      font-family: inherit;
      font-weight: bold;
    }
  `,d=r`
    padding: 3.125em 1.25em;
    outline: none;
    & > * {
      margin: 1.875em 0;
    }
  `,h=r`
    p {
      line-height: 1.625;
    }
  `,f=r`
    blockquote {
      padding-left: 1.875em;
      line-height: 1.75em;
      border-left: 4px solid ${i("primary")};
      margin-left: 0;
      margin-right: 0;
      * {
        font-size: 1em;
        line-height: 1.5em;
      }
    }
  `,p=r`
    h1 {
      font-size: 2rem;
      font-weight: 600;
      letter-spacing: -.025em;
      line-height: 1.375;
      margin-bottom: 0.5em;
      margin-top: 1em;
    }
    h2 {
      font-size: 1.5rem;
      font-weight: 600;
      letter-spacing: -.025em;
      line-height: 1.375;
      margin-bottom: 0.5em;
      margin-top: 1.25em;
    }
    h3 {
      font-size: 1.25rem;
      font-weight: 600;
      letter-spacing: -.025em;
      line-height: 1.375;
      margin-bottom: 0.5em;
      margin-top: 1.25em;
    }
    h4 {
      font-size: 1.125rem;
      font-weight: 600;
      letter-spacing: -.025em;
      line-height: 1.375;
      margin-bottom: 0.5em;
      margin-top: 1.25em;
    }
    h5 {
      font-size: inherit;
      font-weight: 600;
      line-height: 1;
    }
    h6 {
      font-size: inherit;
      font-weight: 600;
      line-height: 1;
    }
  `,m=r`
    hr {
      height: ${e.get(Be,"lineWidth")};
      background-color: ${l};
      border-width: 0;
    }
  `,b=r`
    ul,
    ol {
        padding: 0;
    }
    .list-item,
    .task-list-item {
        margin: 8px 0;
    }
    .list-item_label,
    .list-item .paragraph {
        margin: 0;
    }
    .list-item {
        display: flex;
        &_body {
            flex: 1;
        }
    }
    .list-item_label {
        display: flex;
        justify-content: center;
        width: 24px;
        height: 24px;
        font-size: 16px;
        line-height: 1.5;
        color: ${i("primary")};
    }
    .list-item[data-list-type='bullet'] {
        & > .list-item_label {
            font-size: 24px;
            line-height: 1;
        }
    }
    li {
        &::marker {
            display: none;
        }
    }
    .task-list-item {
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        &_checkbox {
            margin: 8px 8px 8px 0;
            height: 16px;
        }
        & .paragraph {
            margin: 0;
        }
    }
  `,y=r`
    .code-fence {
      pre {
        font-family: ${e.get(Bn,"code")};
        margin: 0 1.2em !important;
        white-space: pre;
        overflow: auto;
        ${e.get(Lr,["x"])}

        background-color: ${i("background")};
        color: ${i("neutral")};
        font-size: 0.875em;
        border-radius: 0;

        code {
          line-height: 1.5;
          font-family: ${e.get(Bn,"code")};
        }
      }
    }
  `,k=r`
    .image {
      display: inline-block;
      margin: 0 auto;
      object-fit: contain;
      width: 100%;
      position: relative;
      height: auto;
      text-align: center;
    }
  `,_=r`
    .code-inline {
      background-color: ${i("background")};
      color: ${i("neutral")};
      border-radius: ${o};
      font-size: .875rem;
      font-weight: 400;
      line-height: 1.25rem;
      padding: 3px 6px;
    }

    .strong {
      font-weight: 600;
    }

    .link,
    a {
      color: ${i("primary")};
      cursor: pointer;
      transition: all 0.4s ease-in-out;
      font-weight: 500;
      text-decoration-line: none;
      transition-duration: .15s;
      transition-property: border-color;
      border-bottom-width: 1px;
      border-color: transparent;
      &:hover {
        border-color: ${i("primary")};
      }
    }

    .strike-through {
      text-decoration-color: ${i("secondary")};
    }
  `,S=r`
    .footnote-definition {
      ${e.get(ct,void 0)};
      border-radius: ${e.get(Be,"radius")};
      background-color: ${i("background")};
      padding: 1em;
      display: flex;
      flex-direction: row;
      & > .footnote-definition_content {
        flex: 1;
        width: calc(100% - 1em);
        & > dd {
          margin-inline-start: 1em;
        }
        & > dt {
          color: ${i("secondary")};
          font-weight: 500;
        }
      }
      & > .footnote-definition_anchor {
        width: 1em;
      }
    }
  `,v=r`
    /* copy from https://github.com/ProseMirror/prosemirror-tables/blob/master/style/tables.css */
    .tableWrapper {
      overflow-x: auto;
      margin: 0;
      ${e.get(Lr,["x"])}
      width: 100%;
      * {
        margin: 0;
        box-sizing: border-box;
        font-size: 1em;
      }
    }
    table {
      border-collapse: collapse;
      table-layout: fixed;
      width: 100%;
      overflow: auto;
      border-radius: ${e.get(Be,"radius")};
      p {
        line-height: unset;
      }
    }
    tr {
      ${e.get(ct,"bottom")};
    }
    td,
    th {
      padding: 0 1em;
      vertical-align: top;
      box-sizing: border-box;
      position: relative;

      min-width: 100px;
      ${e.get(ct,void 0)};
      text-align: left;
      line-height: 3;
      height: 3em;
    }
    th {
      background: ${i("background",.5)};
      font-weight: 400;
    }
    .column-resize-handle {
      position: absolute;
      right: -2px;
      top: 0;
      bottom: 0;
      z-index: 20;
      pointer-events: none;
      background: ${i("secondary")};
      width: ${e.get(Be,"lineWidth")};
    }
    .resize-cursor {
      cursor: ew-resize;
      cursor: col-resize;
    }

    .selectedCell {
      &::after {
        z-index: 2;
        position: absolute;
        content: '';
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        background: ${i("secondary",.38)};
        pointer-events: none;
      }

      & ::selection {
        background: transparent;
      }
    }
  `;Zbe(t),n`
    .milkdown {
      .material-icons-outlined {
        font-size: 1.5em;
      }

      position: relative;
      margin-left: auto;
      margin-right: auto;
      box-sizing: border-box;


      color: ${s};
      background: ${a};
      font-family: ${e.get(Bn,"typography")};

      ${e.get(Un,void 0)}
      ${e.get(Lr,void 0)}
      ${c};
      ${u};

      .editor {
        ${d};

        ${h};
        ${p};
        ${f};
        ${m};
        ${b};
        ${y};
        ${k};

        ${v};
        ${S};

        ${_};
      }
    }
  `},bye=(e,{css:t})=>{const n=Hn(e),r=e.get(Be,"radius");return t`
        margin-top: .5rem;
        margin-bottom: .5rem;
        background-color: ${n("background")};
        color: ${n("neutral")};
        font-size: 0.875em;
        padding: 1.2em 0.4em 1.4em;
        border-radius: ${r};
        font-family: ${e.get(Bn,"typography")};

        .code-fence_selector-wrapper {
            position: relative;
        }

        .code-fence_selector {
            width: 6rem;
            box-sizing: border-box;
            border-radius: 0.375rem;
            margin: 0 1em 1em;
            cursor: pointer;
            background-color: ${n("surface")};
            position: relative;
            display: flex;
            color: ${n("neutral",.87)};
            align-items: center;
            justify-content: space-between;
            overflow: hidden;
            min-width: 0;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding: 0.375rem 0.625rem;
            font-size: .75rem;
            line-height: 1rem;

            ${e.get(ct,void 0)};

            & > .icon {
                color: ${n("solid",.87)};
            }

            > span:first-child {
              font-weight: 500;
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
            }
        }

        .code-fence_selector-list-item {
            list-style: none;
            line-height: 2;
            padding-left: 1em;
            cursor: pointer;
            margin: 0 !important;
            :hover {
                background: ${n("secondary",.12)};
                color: ${n("primary")};
            }
        }

        .code-fence_selector-list {
            &[data-fold='true'] {
                display: none;
            }

            margin: 0 !important;
            border-radius: 0.375rem;
            font-weight: 500;
            position: absolute;
            z-index: 1;
            top: 2.5em;
            box-sizing: border-box;
            left: 1em;
            padding: 0.5em 0;
            max-height: 16.75em;
            width: 11.71em;
            background-color: ${n("surface")};
            border-top: none;
            overflow-y: auto;
            display: flex;
            flex-direction: column;

            ${e.get(Lr,["y"])}
            ${e.get(ct,void 0)};
        }
    `},yye=(e,t)=>{e.set("code-fence",({editable:n,onSelectLanguage:r,onBlur:i,onFocus:o,languageList:s})=>{const a=document.createElement("div"),l=document.createElement("div"),c=document.createElement("ul"),u=document.createElement("pre"),d=document.createElement("code"),h=document.createElement("div");h.className="code-fence_selector";const f=document.createElement("span");h.appendChild(f);const p=e.get(it,"downArrow");n()&&p&&h.appendChild(p.dom),d.spellcheck=!1,l.className="code-fence_selector-wrapper",l.contentEditable="false",l.append(h),l.append(c),u.append(d);const m=document.createElement("div");d.append(m),m.style.whiteSpace="inherit",a.append(l,u),a.classList.add("code-fence"),e.onFlush(()=>{const _=bye(e,t);_&&a.classList.add(_)}),c.className="code-fence_selector-list",c.addEventListener("mousedown",_=>{if(_.preventDefault(),_.stopPropagation(),!n())return;const S=_.target;if(!(S instanceof HTMLLIElement))return;const v=S.dataset.value;v!=null&&r(v)}),h.addEventListener("mousedown",_=>{_.preventDefault(),_.stopPropagation(),n()&&o()});const b=()=>{!n()||c.dataset.fold==="true"||i()};return document.addEventListener("mousedown",b),s.forEach(_=>{const S=document.createElement("li");S.className="code-fence_selector-list-item",S.innerText=_||"--",c.appendChild(S),S.setAttribute("data-value",_)}),{dom:a,contentDOM:m,onUpdate:_=>{a.dataset.language=_.attrs.language,f.innerText=_.attrs.language||"--",c.setAttribute("data-fold",_.attrs.fold?"true":"false")},onDestroy:()=>{a.remove(),document.removeEventListener("mousedown",b)}}})},wye={typography:dye,code:hye},kye={radius:"0.5rem",lineWidth:"1px"},_ye=(e,t,n)=>{const{css:r}=e;t.set(Mt,i=>{if(!i)return;const[o,s]=i,a=n[o],l=U2(a);if(!!l)return`rgba(${l==null?void 0:l.join(", ")}, ${s||1})`}),t.set(Be,i=>{if(!!i)return kye[i]}),t.set(Bn,i=>{if(!!i)return wye[i].join(", ")}),t.set(Lr,([i="y",o="normal"]=["y","normal"])=>{const s=t.get(Mt,["secondary",.38]),a=t.get(Mt,["secondary",.12]),l=t.get(Mt,["secondary"]);return r`
      scrollbar-width: thin;
      scrollbar-color: ${s} ${a};
      -webkit-overflow-scrolling: touch;

      &::-webkit-scrollbar {
        ${i==="y"?"width":"height"}: ${o==="thin"?2:12}px;
        background-color: transparent;
      }

      &::-webkit-scrollbar-track {
        border-radius: 999px;
        background: transparent;
        border: 4px solid transparent;
      }

      &::-webkit-scrollbar-thumb {
        border-radius: 999px;
        background-color: ${s};
        border: ${o==="thin"?0:4}px solid transparent;
        background-clip: content-box;
      }

      &::-webkit-scrollbar-thumb:hover {
        background-color: ${l};
      }
    `}),t.set(Un,()=>{const i=t.get(Be,"lineWidth"),o=s=>t.get(Mt,["shadow",s]);return r`
      box-shadow: 0 ${i} ${i} ${o(.14)}, 0 2px ${i} ${o(.12)},
        0 ${i} 3px ${o(.2)};
    `}),t.set(ct,i=>{const o=t.get(Be,"lineWidth"),s=t.get(Mt,["line"]);return i?r`
      ${`border-${i}`}: ${o} solid ${s};
    `:r`
        border: ${o} solid ${s};
      `}),t.set(it,i=>{if(!!i)return fye(i)}),t.set(Bp,()=>{gye(t,e)}),uye(t,e),yye(t,e)},Mv=e=>hO((t,n)=>_ye(t,n,e)),Dye=Mv(mye),xye=Mv(pye),Cye=()=>{const e=typeof Sg=="function"?Sg():Vt("dark");return ot(()=>e.value==="dark"?Dye:xye)},vye=e=>{const t=Cye(),n=Boolean(Jw().public.ywsUrl),{editor:r,getInstance:i}=zS((o,s)=>{const a=SO.make().config(l=>l.set(vc,o)).use(lce(e,s)).use(oe(t)).use(vce).use(zO).use(Pie).use(nce.replace(Fm,Sce())).use(Yie).use(zfe).use(eoe).use(I0e).use(ybe).use(Ybe).use(poe).use(Qbe);return n&&(a.use(tfe),a.ctx.get(ou).mounted(()=>{a.action(uw(e))})),a});return tf(e.content)&&gd(e.content,()=>{var o,s,a;(a=i())==null||a.action(n?uw(e):I_((s=(o=oe(e.content))==null?void 0:o.markdown)!=null?s:""))}),tf(e.components)&&gd(e.components,o=>{var s;(s=i())==null||s.action(ace(o))}),gd(t,o=>{var s;(s=i())==null||s.action(jO(o))}),r},Oye=Ht({__name:"Content",props:{content:{type:Object,required:!0},components:{type:Array,default:()=>[]}},emits:["update"],setup(e,{emit:t}){const n=e,r=vye({components:ot(()=>[...n.components]),content:ot(()=>n.content),onChanged:i=>t("update",i)});return(i,o)=>(pe(),Or(oe(_1),{editor:oe(r)},null,8,["editor"]))}});export{Oye as default};
