import{o as s,a as p,b as a,e as w,f as E,r as b,h as B,u as _,c as C,w as D,i as S,t as T,j as x,F as z,d as I,_ as A,k as q,l as G,m as J,p as Q,q as W,s as M,v as R,x as L,y as N,z as X,A as Y,K as ee}from"./entry.1438ab79.js";import{_ as te,a as ne}from"./NavBar.vue_vue_type_script_setup_true_lang.6760bdc3.js";import{_ as oe}from"./_plugin-vue_export-helper.a1a6add7.js";import"./ColorModeToggle.38f37480.js";const se={},ae={viewBox:"0 0 1200 675",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re=a("rect",{width:"1200",height:"675",fill:"#F4F4F5"},null,-1),le=a("path",{d:"M707.917 353.417C703.828 353.417 699.907 355.041 697.015 357.932C694.124 360.823 692.5 364.745 692.5 368.833V374.846L669.683 352.029C665.714 348.034 660.994 344.864 655.795 342.701C650.596 340.537 645.021 339.424 639.39 339.424C633.758 339.424 628.183 340.537 622.984 342.701C617.785 344.864 613.065 348.034 609.096 352.029L598.304 362.821L560.071 324.433C551.884 316.692 541.044 312.379 529.777 312.379C518.51 312.379 507.67 316.692 499.483 324.433L476.667 347.25V260.917C476.667 256.828 478.291 252.907 481.182 250.015C484.073 247.124 487.995 245.5 492.083 245.5H615.417C619.505 245.5 623.427 243.876 626.318 240.985C629.209 238.093 630.833 234.172 630.833 230.083C630.833 225.995 629.209 222.073 626.318 219.182C623.427 216.291 619.505 214.667 615.417 214.667H492.083C479.817 214.667 468.053 219.539 459.38 228.213C450.706 236.887 445.833 248.65 445.833 260.917V445.917C445.833 458.183 450.706 469.947 459.38 478.62C468.053 487.294 479.817 492.167 492.083 492.167H677.083C689.35 492.167 701.113 487.294 709.787 478.62C718.461 469.947 723.333 458.183 723.333 445.917V368.833C723.333 364.745 721.709 360.823 718.818 357.932C715.927 355.041 712.005 353.417 707.917 353.417ZM492.083 461.333C487.995 461.333 484.073 459.709 481.182 456.818C478.291 453.927 476.667 450.005 476.667 445.917V390.879L521.375 346.171C523.64 344.013 526.648 342.809 529.777 342.809C532.906 342.809 535.914 344.013 538.179 346.171L587.05 395.042L653.187 461.333H492.083ZM692.5 445.917C692.372 448.849 691.409 451.684 689.725 454.088L620.196 384.25L630.987 373.458C633.241 371.218 636.289 369.96 639.467 369.96C642.644 369.96 645.693 371.218 647.946 373.458L692.5 418.475V445.917ZM707.917 183.833C699.793 183.828 691.811 185.963 684.775 190.022C677.738 194.082 671.895 199.923 667.833 206.958C666.814 208.718 666.153 210.662 665.888 212.678C665.623 214.694 665.76 216.743 666.29 218.706C666.82 220.669 667.733 222.508 668.977 224.117C670.221 225.725 671.771 227.072 673.537 228.079C677.077 230.089 681.269 230.617 685.197 229.549C689.124 228.48 692.47 225.901 694.504 222.375C696.187 219.405 698.808 217.078 701.956 215.758C705.104 214.438 708.601 214.2 711.899 215.082C715.197 215.964 718.109 217.915 720.178 220.63C722.247 223.345 723.357 226.67 723.333 230.083C723.333 234.172 721.709 238.093 718.818 240.985C715.927 243.876 712.005 245.5 707.917 245.5C703.828 245.5 699.907 247.124 697.015 250.015C694.124 252.907 692.5 256.828 692.5 260.917C692.5 265.005 694.124 268.927 697.015 271.818C699.907 274.709 703.828 276.333 707.917 276.333C720.183 276.333 731.947 271.461 740.62 262.787C749.294 254.113 754.167 242.35 754.167 230.083C754.167 217.817 749.294 206.053 740.62 197.38C731.947 188.706 720.183 183.833 707.917 183.833ZM713.775 292.983C710.984 291.689 707.87 291.26 704.833 291.75L702.058 292.675L699.283 294.062L696.971 296.067C695.523 297.525 694.382 299.259 693.614 301.165C692.847 303.071 692.468 305.112 692.5 307.167C692.488 309.196 692.877 311.207 693.644 313.085C694.412 314.964 695.542 316.672 696.971 318.113C698.404 319.557 700.109 320.704 701.988 321.487C703.866 322.27 705.881 322.673 707.917 322.673C709.952 322.673 711.967 322.27 713.846 321.487C715.724 320.704 717.429 319.557 718.862 318.113C720.291 316.672 721.422 314.964 722.189 313.085C722.956 311.207 723.345 309.196 723.333 307.167C723.318 304.123 722.402 301.152 720.701 298.628C719 296.104 716.59 294.14 713.775 292.983Z",fill:"#18181B"},null,-1),ce=[re,le];function ie(l,t){return s(),p("svg",ae,ce)}const ue=oe(se,[["render",ie]]),de=I(()=>A(()=>import("./Markdown.f6efc0a4.js"),["./Markdown.f6efc0a4.js","./entry.1438ab79.js","./entry.d73f861d.css"],import.meta.url).then(l=>l.default||l)),_e=I(()=>A(()=>import("./Content.915cb8ee.js"),["./Content.915cb8ee.js","./entry.1438ab79.js","./entry.d73f861d.css","./ColorModeToggle.38f37480.js","./_plugin-vue_export-helper.a1a6add7.js","./get.3f53b2a0.js","./Content.bc9f2819.css"],import.meta.url).then(l=>l.default||l)),pe=a("div",{"h-full":""}," Loading... ",-1),me={key:2,class:"h-full overflow-y-auto"},Ce={class:"border-b u-border-gray-100 p-4 text-sm overflow-hidden"},ve=["src"],fe=a("span",{class:"font-bold u-text-gray-400 text-xs"},"title",-1),he=a("span",{class:"font-bold u-text-gray-400 text-xs"},"description",-1),ye=a("div",{"h-full":""}," Loading... ",-1),xe=w({__name:"ContentEditor",setup(l){const t=E(),m=b("raw"),r=B(()=>t.value.currentFile),o=B(()=>({key:r.value.id,markdown:r.value.content,source:r.value.source,matter:{}})),i=async u=>{if(!!r.value.id){if(m.value==="component"){const v=r.value.source.split(/---\n/);u=(v.length>=2?`---
${v[1]}---

`:"")+u}await $fetch(`files/${r.value.id}`,{baseURL:t.value.apiURL,method:"POST",body:{source:u}})}};return(u,v)=>{const f=de,g=ue,h=_e;return _(r)?_(m)==="raw"?(s(),C(f,{key:1,filename:_(o).key,"model-value":_(o).source,class:"h-full","onUpdate:modelValue":i},{fallback:D(()=>[pe]),_:1},8,["filename","model-value"])):(s(),p("div",me,[a("div",Ce,[_(r).image?(s(),p("img",{key:0,src:_(r).image,class:"aspect-video float-right"},null,8,ve)):(s(),C(g,{key:1,class:"w-40 aspect-video float-right rounded"})),a("p",null,[fe,S(" "+T(_(r).title),1)]),a("p",null,[he,S(" "+T(_(r).description),1)])]),x(h,{components:t.value.components,content:_(o),class:"px-4 py-6 min-h-full",onUpdate:i},{fallback:D(()=>[ye]),_:1},8,["components","content"])])):(s(),p(z,{key:0},[],64))}}});const ge={class:"relative"},we=["onClick"],$e={class:"flex items-center justify-between flex-1 w-0 gap-1 px-2"},ke={class:"flex items-center min-w-0 overflow-hidden"},Fe={class:"items-center gap-1.5 -mr-1 hidden lg:group-hover:flex"},H=w({__name:"FileTree",props:{level:{type:Number,default:0},tree:{type:Array,default:()=>[]},expandedDirs:{type:Object,default:()=>({})}},emits:["select","delete","create"],setup(l,{emit:t}){const m=l,r=e=>{const c=W("selectedFile"),F=n=>{c.value=n},y=b(e.expandedDirs||{});return{selectedFile:c,select:F,expandedDirs:y,openDir:n=>{y.value[n]=!y.value[n]}}},{selectedFile:o,select:i,expandedDirs:u,openDir:v}=r({expandedDirs:m.expandedDirs}),f=b([]);q(()=>{k()}),G(()=>{var e;return(e=o.value)==null?void 0:e.path},()=>{k()});const g=e=>e.type==="file",h=e=>e.type==="directory",O=e=>!!u.value[e.path],V=e=>o.value&&e.path===o.value.path,$=e=>e.status==="deleted",k=()=>{!o.value||J(()=>{const e=f.value[o.value.path];e&&e.scrollIntoView({block:"nearest"})})},P=e=>{if(o.value&&o.value.path===e.path){k(),t("select",e.id);return}if(h(e)){v(e.path);return}i(e),t("select",e.id)},Z=e=>{const c=prompt("Enter File Name");c&&t("create",Y(c,e))},j=e=>{confirm("Are you sure you want to delete this file?")&&t("delete",e)};return(e,c)=>{const F=N,y=X,U=H;return s(),p("ul",ge,[(s(!0),p(z,null,Q(l.tree,(n,K)=>(s(),p("li",{ref_for:!0,ref:d=>{_(f)[n.path]=d},key:K},[a("div",{class:M(["flex items-center w-full py-2 pr-6 text-sm font-medium border-r-2 cursor-pointer group focus:u-bg-gray-50 focus:outline-none target",{[`pl-[${24+l.level*12}px]`]:!0,"u-bg-gray-100 u-border-gray-800 u-text-gray-900":V(n),"border-transparent u-text-gray-500 hover:u-text-gray-900 hover:u-bg-gray-50":!V(n),"border-transparent u-text-gray-500":$(n)}]),onClick:d=>P(n)},[a("div",$e,[a("div",ke,[x(F,{name:h(n)?"heroicons-outline:folder":"heroicons-outline:document-text",class:"flex-shrink-0 w-4 h-4"},null,8,["name"]),a("span",{class:M(["min-w-0 truncate px-2",{"line-through opacity-50":$(n)}])},T(n.name),3)]),a("div",Fe,[h(n)?(s(),C(y,{key:0,size:"xxs",class:"-my-0.5 -mr-0.5",variant:"gray",icon:"heroicons-outline:plus",onClick:R(d=>Z(n.path),["stop"])},null,8,["onClick"])):L("",!0),g(n)&&!$(n)?(s(),C(y,{key:1,size:"xxs",class:"-my-0.5 -mr-0.5",variant:"gray",icon:"heroicons-outline:trash",onClick:R(d=>j(n.path),["stop"])},null,8,["onClick"])):L("",!0)])])],10,we),h(n)&&O(n)?(s(),C(U,{key:0,level:l.level+1,tree:n.children,class:"pl-2",onSelect:c[0]||(c[0]=d=>e.$emit("select",d)),onCreate:c[1]||(c[1]=d=>e.$emit("create",d)),onDelete:c[2]||(c[2]=d=>e.$emit("delete",d))},null,8,["level","tree"])):L("",!0)]))),128))])}}}),Le=w({__name:"ContentTree",setup(l){const t=E();async function m(o){var i;await $fetch(`/files/${o}`,{baseURL:t.value.apiURL,method:"DELETE"}),await t.value.refreshContentTree(),((i=t.value.currentFile)==null?void 0:i.id)===o&&(t.value.currentFile=void 0)}async function r(o){await $fetch(`/files/${o}`,{baseURL:t.value.apiURL,method:"PUT"}),await t.value.refreshContentTree()}return(o,i)=>{const u=H;return s(),p("div",null,[x(u,{tree:t.value.contentTree,"expanded-dirs":{content:!0},onSelect:t.value.selectFile,onDelete:m,onCreate:r},null,8,["tree","onSelect"])])}}}),be={class:"flex-col overflow-auto h-full"},De={class:"flex items-center"},Te=a("span",{class:"flex-1 u-text-gray-600"},"Content",-1),Se=w({__name:"Content",setup(l){const t=E();function m(){t.value.currentFile?t.value.currentFile=void 0:t.value.setView("Home")}return(r,o)=>{const i=N,u=ne,v=te,f=xe,g=Le;return s(),p("div",be,[x(v,null,{default:D(()=>[a("div",De,[a("div",{class:"menu_item group",onClick:o[0]||(o[0]=h=>m())},[x(i,{name:"ph:caret-left-bold",class:"menu_item_caret"})]),x(u,{class:"h-6 w-6 mr-2"}),Te])]),_:1}),(s(),C(ee,null,[t.value.currentFile?(s(),C(f,{key:0})):(s(),C(g,{key:1}))],1024))])}}});export{Se as default};
